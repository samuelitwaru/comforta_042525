(()=>{var t={2:(t,e,n)=>{var i=n(2199),a=n(4664),o=n(5950);t.exports=function(t){return i(t,o,a)}},79:(t,e,n)=>{var i=n(3702),a=n(80),o=n(4739),r=n(8655),s=n(1175);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=r,l.prototype.set=s,t.exports=l},80:(t,e,n)=>{var i=n(6025),a=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=i(e,t);return!(n<0||(n==e.length-1?e.pop():a.call(e,n,1),--this.size,0))}},104:(t,e,n)=>{var i=n(3661);function a(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var i=arguments,a=e?e.apply(this,i):i[0],o=n.cache;if(o.has(a))return o.get(a);var r=t.apply(this,i);return n.cache=o.set(a,r)||o,r};return n.cache=new(a.Cache||i),n}a.Cache=i,t.exports=a},181:t=>{t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},270:(t,e,n)=>{var i=n(7068),a=n(346);t.exports=function t(e,n,o,r,s){return e===n||(null==e||null==n||!a(e)&&!a(n)?e!=e&&n!=n:i(e,n,o,r,t,s))}},289:(t,e,n)=>{var i=n(2651);t.exports=function(t){return i(this,t).get(t)}},294:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},317:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}},346:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},361:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var i=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==i||"symbol"!=i&&e.test(t))&&t>-1&&t%1==0&&t<n}},392:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},426:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t,n){return null!=t&&e.call(t,n)}},583:(t,e,n)=>{var i=n(7237),a=n(7255),o=n(8586),r=n(7797);t.exports=function(t){return o(t)?i(r(t)):a(t)}},631:(t,e,n)=>{var i=n(8077),a=n(9326);t.exports=function(t,e){return null!=t&&a(t,e,i)}},641:(t,e,n)=>{var i=n(6649),a=n(5950);t.exports=function(t,e){return t&&i(t,e,a)}},659:(t,e,n)=>{var i=n(1873),a=Object.prototype,o=a.hasOwnProperty,r=a.toString,s=i?i.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var i=!0}catch(t){}var a=r.call(t);return i&&(e?t[s]=n:delete t[s]),a}},689:(t,e,n)=>{var i=n(2),a=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,r,s){var l=1&n,c=i(t),d=c.length;if(d!=i(e).length&&!l)return!1;for(var h=d;h--;){var u=c[h];if(!(l?u in e:a.call(e,u)))return!1}var p=s.get(t),g=s.get(e);if(p&&g)return p==e&&g==t;var f=!0;s.set(t,e),s.set(e,t);for(var m=l;++h<d;){var v=t[u=c[h]],b=e[u];if(o)var y=l?o(b,v,u,e,t,s):o(v,b,u,t,e,s);if(!(void 0===y?v===b||r(v,b,n,o,s):y)){f=!1;break}m||(m="constructor"==u)}if(f&&!m){var w=t.constructor,C=e.constructor;w==C||!("constructor"in t)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof C&&C instanceof C||(f=!1)}return s.delete(t),s.delete(e),f}},695:(t,e,n)=>{var i=n(8096),a=n(2428),o=n(6449),r=n(3656),s=n(361),l=n(7167),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),d=!n&&a(t),h=!n&&!d&&r(t),u=!n&&!d&&!h&&l(t),p=n||d||h||u,g=p?i(t.length,String):[],f=g.length;for(var m in t)!e&&!c.call(t,m)||p&&("length"==m||h&&("offset"==m||"parent"==m)||u&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,f))||g.push(m);return g}},756:(t,e,n)=>{var i=n(3805);t.exports=function(t){return t==t&&!i(t)}},776:(t,e,n)=>{var i=n(756),a=n(5950);t.exports=function(t){for(var e=a(t),n=e.length;n--;){var o=e[n],r=t[o];e[n]=[o,r,i(r)]}return e}},828:(t,e,n)=>{var i=n(4647),a=n(3222),o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,r=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");t.exports=function(t){return(t=a(t))&&t.replace(o,i).replace(r,"")}},882:t=>{t.exports=function(t,e,n,i){var a=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++a]);++a<o;)n=e(n,t[a],a,t);return n}},909:(t,e,n)=>{var i=n(641),a=n(8329)(i);t.exports=a},938:t=>{t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},945:(t,e,n)=>{var i=n(79),a=n(8223),o=n(3661);t.exports=function(t,e){var n=this.__data__;if(n instanceof i){var r=n.__data__;if(!a||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(r)}return n.set(t,e),this.size=n.size,this}},999:(t,e,n)=>{var i=n(9302),a=n(6800);t.exports=function(t){return i((function(e,n){var i=-1,o=n.length,r=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(r=t.length>3&&"function"==typeof r?(o--,r):void 0,s&&a(n[0],n[1],s)&&(r=o<3?void 0:r,o=1),e=Object(e);++i<o;){var l=n[i];l&&t(e,l,i,r)}return e}))}},1033:t=>{t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},1042:(t,e,n)=>{var i=n(6110)(Object,"create");t.exports=i},1074:t=>{t.exports=function(t){return t.split("")}},1175:(t,e,n)=>{var i=n(6025);t.exports=function(t,e){var n=this.__data__,a=i(n,t);return a<0?(++this.size,n.push([t,e])):n[a][1]=e,this}},1234:t=>{t.exports=function(t,e,n){for(var i=-1,a=t.length,o=e.length,r={};++i<a;){var s=i<o?e[i]:void 0;n(r,t[i],s)}return r}},1331:(t,e,n)=>{var i=n(2552),a=n(8879),o=n(346),r=Function.prototype,s=Object.prototype,l=r.toString,c=s.hasOwnProperty,d=l.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=i(t))return!1;var e=a(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==d}},1380:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},1420:(t,e,n)=>{var i=n(79);t.exports=function(){this.__data__=new i,this.size=0}},1448:(t,e,n)=>{var i=n(426),a=n(9326);t.exports=function(t,e){return null!=t&&a(t,e,i)}},1459:t=>{t.exports=function(t){return this.__data__.has(t)}},1489:(t,e,n)=>{var i=n(7400);t.exports=function(t){var e=i(t),n=e%1;return e==e?n?e-n:e:0}},1549:(t,e,n)=>{var i=n(2032),a=n(3862),o=n(6721),r=n(2749),s=n(5749);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=r,l.prototype.set=s,t.exports=l},1733:t=>{var e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;t.exports=function(t){return t.match(e)||[]}},1769:(t,e,n)=>{var i=n(6449),a=n(8586),o=n(1802),r=n(3222);t.exports=function(t,e){return i(t)?t:a(t,e)?[t]:o(r(t))}},1791:(t,e,n)=>{var i=n(6547),a=n(3360);t.exports=function(t,e,n,o){var r=!n;n||(n={});for(var s=-1,l=e.length;++s<l;){var c=e[s],d=o?o(n[c],t[c],c,n,t):void 0;void 0===d&&(d=t[c]),r?a(n,c,d):i(n,c,d)}return n}},1799:(t,e,n)=>{var i=n(7217),a=n(270);t.exports=function(t,e,n,o){var r=n.length,s=r,l=!o;if(null==t)return!s;for(t=Object(t);r--;){var c=n[r];if(l&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++r<s;){var d=(c=n[r])[0],h=t[d],u=c[1];if(l&&c[2]){if(void 0===h&&!(d in t))return!1}else{var p=new i;if(o)var g=o(h,u,d,t,e,p);if(!(void 0===g?a(u,h,3,o,p):g))return!1}}return!0}},1800:t=>{var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},1802:(t,e,n)=>{var i=n(2224),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,r=i((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(a,(function(t,n,i,a){e.push(i?a.replace(o,"$1"):n||t)})),e}));t.exports=r},1811:t=>{var e=Date.now;t.exports=function(t){var n=0,i=0;return function(){var a=e(),o=16-(a-i);if(i=a,o>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}},1873:(t,e,n)=>{var i=n(9325).Symbol;t.exports=i},1882:(t,e,n)=>{var i=n(2552),a=n(3805);t.exports=function(t){if(!a(t))return!1;var e=i(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},1961:(t,e,n)=>{var i=n(9653);t.exports=function(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},1986:(t,e,n)=>{var i=n(1873),a=n(7828),o=n(5288),r=n(5911),s=n(317),l=n(4247),c=i?i.prototype:void 0,d=c?c.valueOf:void 0;t.exports=function(t,e,n,i,c,h,u){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new a(t),new a(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var p=s;case"[object Set]":var g=1&i;if(p||(p=l),t.size!=e.size&&!g)return!1;var f=u.get(t);if(f)return f==e;i|=2,u.set(t,e);var m=r(p(t),p(e),i,c,h,u);return u.delete(t),m;case"[object Symbol]":if(d)return d.call(t)==d.call(e)}return!1}},2032:(t,e,n)=>{var i=n(1042);t.exports=function(){this.__data__=i?i(null):{},this.size=0}},2054:t=>{var e="\\ud800-\\udfff",n="["+e+"]",i="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",o="[^"+e+"]",r="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+i+"|"+a+")?",c="[\\ufe0e\\ufe0f]?",d=c+l+"(?:\\u200d(?:"+[o,r,s].join("|")+")"+c+l+")*",h="(?:"+[o+i+"?",i,r,s,n].join("|")+")",u=RegExp(a+"(?="+a+")|"+h+d,"g");t.exports=function(t){return t.match(u)||[]}},2199:(t,e,n)=>{var i=n(4528),a=n(6449);t.exports=function(t,e,n){var o=e(t);return a(t)?o:i(o,n(t))}},2224:(t,e,n)=>{var i=n(104);t.exports=function(t){var e=i(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},2225:t=>{var e="\\ud800-\\udfff",n="\\u2700-\\u27bf",i="a-z\\xdf-\\xf6\\xf8-\\xff",a="A-Z\\xc0-\\xd6\\xd8-\\xde",o="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",r="["+o+"]",s="\\d+",l="["+n+"]",c="["+i+"]",d="[^"+e+o+s+n+i+a+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",p="["+a+"]",g="(?:"+c+"|"+d+")",f="(?:"+p+"|"+d+")",m="(?:['’](?:d|ll|m|re|s|t|ve))?",v="(?:['’](?:D|LL|M|RE|S|T|VE))?",b="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",y="[\\ufe0e\\ufe0f]?",w=y+b+"(?:\\u200d(?:"+["[^"+e+"]",h,u].join("|")+")"+y+b+")*",C="(?:"+[l,h,u].join("|")+")"+w,x=RegExp([p+"?"+c+"+"+m+"(?="+[r,p,"$"].join("|")+")",f+"+"+v+"(?="+[r,p+g,"$"].join("|")+")",p+"?"+g+"+"+m,p+"+"+v,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",s,C].join("|"),"g");t.exports=function(t){return t.match(x)||[]}},2428:(t,e,n)=>{var i=n(7534),a=n(346),o=Object.prototype,r=o.hasOwnProperty,s=o.propertyIsEnumerable,l=i(function(){return arguments}())?i:function(t){return a(t)&&r.call(t,"callee")&&!s.call(t,"callee")};t.exports=l},2493:(t,e,n)=>{var i=n(4051),a=n(6800),o=n(1489),r=n(3222);t.exports=function(t,e,n){return e=(n?a(t,e,n):void 0===e)?1:o(e),i(r(t),e)}},2507:(t,e,n)=>{var i=n(8754),a=n(9698),o=n(3912),r=n(3222);t.exports=function(t){return function(e){e=r(e);var n=a(e)?o(e):void 0,s=n?n[0]:e.charAt(0),l=n?i(n,1).join(""):e.slice(1);return s[t]()+l}}},2523:t=>{t.exports=function(t,e,n,i){for(var a=t.length,o=n+(i?1:-1);i?o--:++o<a;)if(e(t[o],o,t))return o;return-1}},2552:(t,e,n)=>{var i=n(1873),a=n(659),o=n(9350),r=i?i.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":r&&r in Object(t)?a(t):o(t)}},2651:(t,e,n)=>{var i=n(4218);t.exports=function(t,e){var n=t.__data__;return i(e)?n["string"==typeof e?"string":"hash"]:n.map}},2660:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const i=n(5606),a=n(7193),o=n(8142),r=n(9106);e.AttributeMap=r.default;const s=n(5759);e.Op=s.default;const l=n(8317);e.OpIterator=l.default;const c=String.fromCharCode(0),d=(t,e)=>{if("object"!=typeof t||null===t)throw new Error("cannot retain a "+typeof t);if("object"!=typeof e||null===e)throw new Error("cannot retain a "+typeof e);const n=Object.keys(t)[0];if(!n||n!==Object.keys(e)[0])throw new Error(`embed types not matched: ${n} != ${Object.keys(e)[0]}`);return[n,t[n],e[n]]};class h{constructor(t){Array.isArray(t)?this.ops=t:null!=t&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]}static registerEmbed(t,e){this.handlers[t]=e}static unregisterEmbed(t){delete this.handlers[t]}static getHandler(t){const e=this.handlers[t];if(!e)throw new Error(`no handlers for embed type "${t}"`);return e}insert(t,e){const n={};return"string"==typeof t&&0===t.length?this:(n.insert=t,null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(n.attributes=e),this.push(n))}delete(t){return t<=0?this:this.push({delete:t})}retain(t,e){if("number"==typeof t&&t<=0)return this;const n={retain:t};return null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(n.attributes=e),this.push(n)}push(t){let e=this.ops.length,n=this.ops[e-1];if(t=a(t),"object"==typeof n){if("number"==typeof t.delete&&"number"==typeof n.delete)return this.ops[e-1]={delete:n.delete+t.delete},this;if("number"==typeof n.delete&&null!=t.insert&&(e-=1,n=this.ops[e-1],"object"!=typeof n))return this.ops.unshift(t),this;if(o(t.attributes,n.attributes)){if("string"==typeof t.insert&&"string"==typeof n.insert)return this.ops[e-1]={insert:n.insert+t.insert},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this;if("number"==typeof t.retain&&"number"==typeof n.retain)return this.ops[e-1]={retain:n.retain+t.retain},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this}chop(){const t=this.ops[this.ops.length-1];return t&&"number"==typeof t.retain&&!t.attributes&&this.ops.pop(),this}filter(t){return this.ops.filter(t)}forEach(t){this.ops.forEach(t)}map(t){return this.ops.map(t)}partition(t){const e=[],n=[];return this.forEach((i=>{(t(i)?e:n).push(i)})),[e,n]}reduce(t,e){return this.ops.reduce(t,e)}changeLength(){return this.reduce(((t,e)=>e.insert?t+s.default.length(e):e.delete?t-e.delete:t),0)}length(){return this.reduce(((t,e)=>t+s.default.length(e)),0)}slice(t=0,e=1/0){const n=[],i=new l.default(this.ops);let a=0;for(;a<e&&i.hasNext();){let o;a<t?o=i.next(t-a):(o=i.next(e-a),n.push(o)),a+=s.default.length(o)}return new h(n)}compose(t){const e=new l.default(this.ops),n=new l.default(t.ops),i=[],a=n.peek();if(null!=a&&"number"==typeof a.retain&&null==a.attributes){let t=a.retain;for(;"insert"===e.peekType()&&e.peekLength()<=t;)t-=e.peekLength(),i.push(e.next());a.retain-t>0&&n.next(a.retain-t)}const s=new h(i);for(;e.hasNext()||n.hasNext();)if("insert"===n.peekType())s.push(n.next());else if("delete"===e.peekType())s.push(e.next());else{const t=Math.min(e.peekLength(),n.peekLength()),i=e.next(t),a=n.next(t);if(a.retain){const l={};if("number"==typeof i.retain)l.retain="number"==typeof a.retain?t:a.retain;else if("number"==typeof a.retain)null==i.retain?l.insert=i.insert:l.retain=i.retain;else{const t=null==i.retain?"insert":"retain",[e,n,o]=d(i[t],a.retain),r=h.getHandler(e);l[t]={[e]:r.compose(n,o,"retain"===t)}}const c=r.default.compose(i.attributes,a.attributes,"number"==typeof i.retain);if(c&&(l.attributes=c),s.push(l),!n.hasNext()&&o(s.ops[s.ops.length-1],l)){const t=new h(e.rest());return s.concat(t).chop()}}else"number"==typeof a.delete&&("number"==typeof i.retain||"object"==typeof i.retain&&null!==i.retain)&&s.push(a)}return s.chop()}concat(t){const e=new h(this.ops.slice());return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e}diff(t,e){if(this.ops===t.ops)return new h;const n=[this,t].map((e=>e.map((n=>{if(null!=n.insert)return"string"==typeof n.insert?n.insert:c;throw new Error("diff() called "+(e===t?"on":"with")+" non-document")})).join(""))),a=new h,s=i(n[0],n[1],e,!0),d=new l.default(this.ops),u=new l.default(t.ops);return s.forEach((t=>{let e=t[1].length;for(;e>0;){let n=0;switch(t[0]){case i.INSERT:n=Math.min(u.peekLength(),e),a.push(u.next(n));break;case i.DELETE:n=Math.min(e,d.peekLength()),d.next(n),a.delete(n);break;case i.EQUAL:n=Math.min(d.peekLength(),u.peekLength(),e);const t=d.next(n),s=u.next(n);o(t.insert,s.insert)?a.retain(n,r.default.diff(t.attributes,s.attributes)):a.push(s).delete(n)}e-=n}})),a.chop()}eachLine(t,e="\n"){const n=new l.default(this.ops);let i=new h,a=0;for(;n.hasNext();){if("insert"!==n.peekType())return;const o=n.peek(),r=s.default.length(o)-n.peekLength(),l="string"==typeof o.insert?o.insert.indexOf(e,r)-r:-1;if(l<0)i.push(n.next());else if(l>0)i.push(n.next(l));else{if(!1===t(i,n.next(1).attributes||{},a))return;a+=1,i=new h}}i.length()>0&&t(i,{},a)}invert(t){const e=new h;return this.reduce(((n,i)=>{if(i.insert)e.delete(s.default.length(i));else{if("number"==typeof i.retain&&null==i.attributes)return e.retain(i.retain),n+i.retain;if(i.delete||"number"==typeof i.retain){const a=i.delete||i.retain;return t.slice(n,n+a).forEach((t=>{i.delete?e.push(t):i.retain&&i.attributes&&e.retain(s.default.length(t),r.default.invert(i.attributes,t.attributes))})),n+a}if("object"==typeof i.retain&&null!==i.retain){const a=t.slice(n,n+1),o=new l.default(a.ops).next(),[s,c,u]=d(i.retain,o.insert),p=h.getHandler(s);return e.retain({[s]:p.invert(c,u)},r.default.invert(i.attributes,o.attributes)),n+1}}return n}),0),e.chop()}transform(t,e=!1){if(e=!!e,"number"==typeof t)return this.transformPosition(t,e);const n=t,i=new l.default(this.ops),a=new l.default(n.ops),o=new h;for(;i.hasNext()||a.hasNext();)if("insert"!==i.peekType()||!e&&"insert"===a.peekType())if("insert"===a.peekType())o.push(a.next());else{const t=Math.min(i.peekLength(),a.peekLength()),n=i.next(t),s=a.next(t);if(n.delete)continue;if(s.delete)o.push(s);else{const i=n.retain,a=s.retain;let l="object"==typeof a&&null!==a?a:t;if("object"==typeof i&&null!==i&&"object"==typeof a&&null!==a){const t=Object.keys(i)[0];if(t===Object.keys(a)[0]){const n=h.getHandler(t);n&&(l={[t]:n.transform(i[t],a[t],e)})}}o.retain(l,r.default.transform(n.attributes,s.attributes,e))}}else o.retain(s.default.length(i.next()));return o.chop()}transformPosition(t,e=!1){e=!!e;const n=new l.default(this.ops);let i=0;for(;n.hasNext()&&i<=t;){const a=n.peekLength(),o=n.peekType();n.next(),"delete"!==o?("insert"===o&&(i<t||!e)&&(t+=a),i+=a):t-=Math.min(a,t-i)}return t}}h.Op=s.default,h.OpIterator=l.default,h.AttributeMap=r.default,h.handlers={},e.default=h,t.exports=h,t.exports.default=h},2749:(t,e,n)=>{var i=n(1042),a=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return i?void 0!==e[t]:a.call(e,t)}},2804:(t,e,n)=>{var i=n(6110)(n(9325),"Promise");t.exports=i},2824:(t,e,n)=>{var i=n(7805),a=n(3290),o=n(1961),r=n(3007),s=n(5529),l=n(2428),c=n(6449),d=n(3693),h=n(3656),u=n(1882),p=n(3805),g=n(1331),f=n(7167),m=n(4974),v=n(9884);t.exports=function(t,e,n,b,y,w,C){var x=m(t,n),T=m(e,n),I=C.get(T);if(I)i(t,n,I);else{var A=w?w(x,T,n+"",t,e,C):void 0,E=void 0===A;if(E){var S=c(T),L=!S&&h(T),M=!S&&!L&&f(T);A=T,S||L||M?c(x)?A=x:d(x)?A=r(x):L?(E=!1,A=a(T,!0)):M?(E=!1,A=o(T,!0)):A=[]:g(T)||l(T)?(A=x,l(x)?A=v(x):p(x)&&!u(x)||(A=s(T))):E=!1}E&&(C.set(T,A),y(A,T,b,w,C),C.delete(T)),i(t,n,A)}}},2865:(t,e,n)=>{var i=n(9570),a=n(1811)(i);t.exports=a},2903:(t,e,n)=>{var i=n(3805),a=n(5527),o=n(181),r=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return o(t);var e=a(t),n=[];for(var s in t)("constructor"!=s||!e&&r.call(t,s))&&n.push(s);return n}},2949:(t,e,n)=>{var i=n(2651);t.exports=function(t,e){var n=i(this,t),a=n.size;return n.set(t,e),this.size+=n.size==a?0:1,this}},3007:t=>{t.exports=function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}},3031:(t,e,n)=>{var i=n(3120),a=n(6155),o=n(9302),r=n(6800),s=o((function(t,e){if(null==t)return[];var n=e.length;return n>1&&r(t,e[0],e[1])?e=[]:n>2&&r(e[0],e[1],e[2])&&(e=[e[0]]),a(t,i(e,1),[])}));t.exports=s},3040:(t,e,n)=>{var i=n(1549),a=n(79),o=n(8223);t.exports=function(){this.size=0,this.__data__={hash:new i,map:new(o||a),string:new i}}},3120:(t,e,n)=>{var i=n(4528),a=n(5891);t.exports=function t(e,n,o,r,s){var l=-1,c=e.length;for(o||(o=a),s||(s=[]);++l<c;){var d=e[l];n>0&&o(d)?n>1?t(d,n-1,o,r,s):i(s,d):r||(s[s.length]=d)}return s}},3181:(t,e,n)=>{var i=n(5508)();t.exports=i},3221:t=>{t.exports=function(t){return function(e,n,i){for(var a=-1,o=Object(e),r=i(e),s=r.length;s--;){var l=r[t?s:++a];if(!1===n(o[l],l,o))break}return e}}},3222:(t,e,n)=>{var i=n(7556);t.exports=function(t){return null==t?"":i(t)}},3243:(t,e,n)=>{var i=n(6110),a=function(){try{var t=i(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=a},3290:(t,e,n)=>{t=n.nmd(t);var i=n(9325),a=e&&!e.nodeType&&e,o=a&&t&&!t.nodeType&&t,r=o&&o.exports===a?i.Buffer:void 0,s=r?r.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,i=s?s(n):new t.constructor(n);return t.copy(i),i}},3345:t=>{t.exports=function(){return[]}},3360:(t,e,n)=>{var i=n(3243);t.exports=function(t,e,n){"__proto__"==e&&i?i(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},3375:(t,e,n)=>{var i=n(5765);t.exports=function(t){return t&&t.length?i(t):[]}},3488:t=>{t.exports=function(t){return t}},3605:t=>{t.exports=function(t){return this.__data__.get(t)}},3650:(t,e,n)=>{var i=n(4335)(Object.keys,Object);t.exports=i},3656:(t,e,n)=>{t=n.nmd(t);var i=n(9325),a=n(9935),o=e&&!e.nodeType&&e,r=o&&t&&!t.nodeType&&t,s=r&&r.exports===o?i.Buffer:void 0,l=(s?s.isBuffer:void 0)||a;t.exports=l},3661:(t,e,n)=>{var i=n(3040),a=n(7670),o=n(289),r=n(4509),s=n(2949);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=r,l.prototype.set=s,t.exports=l},3663:(t,e,n)=>{var i=n(1799),a=n(776),o=n(7197);t.exports=function(t){var e=a(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||i(n,t,e)}}},3693:(t,e,n)=>{var i=n(4894),a=n(346);t.exports=function(t){return a(t)&&i(t)}},3697:t=>{"use strict";var e=Object.prototype.hasOwnProperty,n="~";function i(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,i,o,r){if("function"!=typeof i)throw new TypeError("The listener must be a function");var s=new a(i,o||t,r),l=n?n+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],s]:t._events[l].push(s):(t._events[l]=s,t._eventsCount++),t}function r(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function s(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),s.prototype.eventNames=function(){var t,i,a=[];if(0===this._eventsCount)return a;for(i in t=this._events)e.call(t,i)&&a.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(t)):a},s.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var a=0,o=i.length,r=new Array(o);a<o;a++)r[a]=i[a].fn;return r},s.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},s.prototype.emit=function(t,e,i,a,o,r){var s=n?n+t:t;if(!this._events[s])return!1;var l,c,d=this._events[s],h=arguments.length;if(d.fn){switch(d.once&&this.removeListener(t,d.fn,void 0,!0),h){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,e),!0;case 3:return d.fn.call(d.context,e,i),!0;case 4:return d.fn.call(d.context,e,i,a),!0;case 5:return d.fn.call(d.context,e,i,a,o),!0;case 6:return d.fn.call(d.context,e,i,a,o,r),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var u,p=d.length;for(c=0;c<p;c++)switch(d[c].once&&this.removeListener(t,d[c].fn,void 0,!0),h){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,e);break;case 3:d[c].fn.call(d[c].context,e,i);break;case 4:d[c].fn.call(d[c].context,e,i,a);break;default:if(!l)for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=arguments[u];d[c].fn.apply(d[c].context,l)}}return!0},s.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,i,a){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return r(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||a&&!s.once||i&&s.context!==i||r(this,o);else{for(var l=0,c=[],d=s.length;l<d;l++)(s[l].fn!==e||a&&!s[l].once||i&&s[l].context!==i)&&c.push(s[l]);c.length?this._events[o]=1===c.length?c[0]:c:r(this,o)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&r(this,e)):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s},3702:t=>{t.exports=function(){this.__data__=[],this.size=0}},3714:(t,e,n)=>{var i=n(3730);t.exports=function(t,e,n){for(var a=-1,o=t.criteria,r=e.criteria,s=o.length,l=n.length;++a<s;){var c=i(o[a],r[a]);if(c)return a>=l?c:c*("desc"==n[a]?-1:1)}return t.index-e.index}},3730:(t,e,n)=>{var i=n(4394);t.exports=function(t,e){if(t!==e){var n=void 0!==t,a=null===t,o=t==t,r=i(t),s=void 0!==e,l=null===e,c=e==e,d=i(e);if(!l&&!d&&!r&&t>e||r&&s&&c&&!l&&!d||a&&s&&c||!n&&c||!o)return 1;if(!a&&!r&&!d&&t<e||d&&n&&o&&!a&&!r||l&&n&&o||!s&&o||!c)return-1}return 0}},3805:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},3862:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},3912:(t,e,n)=>{var i=n(1074),a=n(9698),o=n(2054);t.exports=function(t){return a(t)?o(t):i(t)}},3937:t=>{t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},3950:t=>{t.exports=function(){}},4051:t=>{var e=Math.floor;t.exports=function(t,n){var i="";if(!t||n<1||n>9007199254740991)return i;do{n%2&&(i+=t),(n=e(n/2))&&(t+=t)}while(n);return i}},4058:(t,e,n)=>{var i=n(4792),a=n(5539)((function(t,e,n){return e=e.toLowerCase(),t+(n?i(e):e)}));t.exports=a},4128:(t,e,n)=>{var i=n(1800),a=/^\s+/;t.exports=function(t){return t?t.slice(0,i(t)+1).replace(a,""):t}},4218:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},4247:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},4248:t=>{t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}},4335:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},4394:(t,e,n)=>{var i=n(2552),a=n(346);t.exports=function(t){return"symbol"==typeof t||a(t)&&"[object Symbol]"==i(t)}},4509:(t,e,n)=>{var i=n(2651);t.exports=function(t){return i(this,t).has(t)}},4517:(t,e,n)=>{var i=n(6545),a=n(3950),o=n(4247),r=i&&1/o(new i([,-0]))[1]==1/0?function(t){return new i(t)}:a;t.exports=r},4528:t=>{t.exports=function(t,e){for(var n=-1,i=e.length,a=t.length;++n<i;)t[a+n]=e[n];return t}},4552:t=>{t.exports=function(t){return function(e){return null==t?void 0:t[e]}}},4647:(t,e,n)=>{var i=n(4552)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});t.exports=i},4664:(t,e,n)=>{var i=n(9770),a=n(3345),o=Object.prototype.propertyIsEnumerable,r=Object.getOwnPropertySymbols,s=r?function(t){return null==t?[]:(t=Object(t),i(r(t),(function(e){return o.call(t,e)})))}:a;t.exports=s},4739:(t,e,n)=>{var i=n(6025);t.exports=function(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]}},4792:(t,e,n)=>{var i=n(3222),a=n(5808);t.exports=function(t){return a(i(t).toLowerCase())}},4840:(t,e,n)=>{var i="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=i},4894:(t,e,n)=>{var i=n(1882),a=n(294);t.exports=function(t){return null!=t&&a(t.length)&&!i(t)}},4901:(t,e,n)=>{var i=n(2552),a=n(294),o=n(346),r={};r["[object Float32Array]"]=r["[object Float64Array]"]=r["[object Int8Array]"]=r["[object Int16Array]"]=r["[object Int32Array]"]=r["[object Uint8Array]"]=r["[object Uint8ClampedArray]"]=r["[object Uint16Array]"]=r["[object Uint32Array]"]=!0,r["[object Arguments]"]=r["[object Array]"]=r["[object ArrayBuffer]"]=r["[object Boolean]"]=r["[object DataView]"]=r["[object Date]"]=r["[object Error]"]=r["[object Function]"]=r["[object Map]"]=r["[object Number]"]=r["[object Object]"]=r["[object RegExp]"]=r["[object Set]"]=r["[object String]"]=r["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&a(t.length)&&!!r[i(t)]}},4932:t=>{t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,a=Array(i);++n<i;)a[n]=e(t[n],n,t);return a}},4974:t=>{t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},5083:(t,e,n)=>{var i=n(1882),a=n(7296),o=n(3805),r=n(7473),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,d=l.toString,h=c.hasOwnProperty,u=RegExp("^"+d.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||a(t))&&(i(t)?u:s).test(r(t))}},5128:(t,e,n)=>{var i=n(909),a=n(4894);t.exports=function(t,e){var n=-1,o=a(t)?Array(t.length):[];return i(t,(function(t,i,a){o[++n]=e(t,i,a)})),o}},5160:t=>{t.exports=function(t,e,n){var i=-1,a=t.length;e<0&&(e=-e>a?0:a+e),(n=n>a?a:n)<0&&(n+=a),a=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(a);++i<a;)o[i]=t[i+e];return o}},5250:(t,e,n)=>{var i=n(7217),a=n(7805),o=n(6649),r=n(2824),s=n(3805),l=n(7241),c=n(4974);t.exports=function t(e,n,d,h,u){e!==n&&o(n,(function(o,l){if(u||(u=new i),s(o))r(e,n,l,d,t,h,u);else{var p=h?h(c(e,l),o,l+"",e,n,u):void 0;void 0===p&&(p=o),a(e,l,p)}}),l)}},5288:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},5325:(t,e,n)=>{var i=n(6131);t.exports=function(t,e){return!(null==t||!t.length)&&i(t,e,0)>-1}},5364:(t,e,n)=>{var i=n(5250),a=n(999)((function(t,e,n){i(t,e,n)}));t.exports=a},5389:(t,e,n)=>{var i=n(3663),a=n(7978),o=n(3488),r=n(6449),s=n(583);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?r(t)?a(t[0],t[1]):i(t):s(t)}},5434:t=>{var e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;t.exports=function(t){return e.test(t)}},5463:t=>{t.exports=function(t){return t!=t}},5481:(t,e,n)=>{var i=n(9325)["__core-js_shared__"];t.exports=i},5508:(t,e,n)=>{var i=n(6151),a=n(6800),o=n(7400);t.exports=function(t){return function(e,n,r){return r&&"number"!=typeof r&&a(e,n,r)&&(n=r=void 0),e=o(e),void 0===n?(n=e,e=0):n=o(n),r=void 0===r?e<n?1:-1:o(r),i(e,n,r,t)}}},5527:t=>{var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},5529:(t,e,n)=>{var i=n(9344),a=n(8879),o=n(5527);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:i(a(t))}},5539:(t,e,n)=>{var i=n(882),a=n(828),o=n(6645),r=RegExp("['’]","g");t.exports=function(t){return function(e){return i(o(a(e).replace(r,"")),t,"")}}},5580:(t,e,n)=>{var i=n(6110)(n(9325),"DataView");t.exports=i},5606:t=>{var e=-1;function n(t,p,g,f,m){if(t===p)return t?[[0,t]]:[];if(null!=g){var b=function(t,e,n){var i="number"==typeof n?{index:n,length:0}:n.oldRange,a="number"==typeof n?null:n.newRange,o=t.length,r=e.length;if(0===i.length&&(null===a||0===a.length)){var s=i.index,l=t.slice(0,s),c=t.slice(s),d=a?a.index:null,h=s+r-o;if((null===d||d===h)&&!(h<0||h>r)){var u=e.slice(0,h);if((f=e.slice(h))===c){var p=Math.min(s,h);if((b=l.slice(0,p))===(w=u.slice(0,p)))return v(b,l.slice(p),u.slice(p),c)}}if(null===d||d===s){var g=s,f=(u=e.slice(0,g),e.slice(g));if(u===l){var m=Math.min(o-g,r-g);if((y=c.slice(c.length-m))===(C=f.slice(f.length-m)))return v(l,c.slice(0,c.length-m),f.slice(0,f.length-m),y)}}}if(i.length>0&&a&&0===a.length){var b=t.slice(0,i.index),y=t.slice(i.index+i.length);if(!(r<(p=b.length)+(m=y.length))){var w=e.slice(0,p),C=e.slice(r-m);if(b===w&&y===C)return v(b,t.slice(p,o-m),e.slice(p,r-m),y)}}return null}(t,p,g);if(b)return b}var y=a(t,p),w=t.substring(0,y);y=r(t=t.substring(y),p=p.substring(y));var C=t.substring(t.length-y),x=function(t,o){var s;if(!t)return[[1,o]];if(!o)return[[e,t]];var l=t.length>o.length?t:o,c=t.length>o.length?o:t,d=l.indexOf(c);if(-1!==d)return s=[[1,l.substring(0,d)],[0,c],[1,l.substring(d+c.length)]],t.length>o.length&&(s[0][0]=s[2][0]=e),s;if(1===c.length)return[[e,t],[1,o]];var h=function(t,e){var n=t.length>e.length?t:e,i=t.length>e.length?e:t;if(n.length<4||2*i.length<n.length)return null;function o(t,e,n){for(var i,o,s,l,c=t.substring(n,n+Math.floor(t.length/4)),d=-1,h="";-1!==(d=e.indexOf(c,d+1));){var u=a(t.substring(n),e.substring(d)),p=r(t.substring(0,n),e.substring(0,d));h.length<p+u&&(h=e.substring(d-p,d)+e.substring(d,d+u),i=t.substring(0,n-p),o=t.substring(n+u),s=e.substring(0,d-p),l=e.substring(d+u))}return 2*h.length>=t.length?[i,o,s,l,h]:null}var s,l,c,d,h,u=o(n,i,Math.ceil(n.length/4)),p=o(n,i,Math.ceil(n.length/2));return u||p?(s=p?u&&u[4].length>p[4].length?u:p:u,t.length>e.length?(l=s[0],c=s[1],d=s[2],h=s[3]):(d=s[0],h=s[1],l=s[2],c=s[3]),[l,c,d,h,s[4]]):null}(t,o);if(h){var u=h[0],p=h[1],g=h[2],f=h[3],m=h[4],v=n(u,g),b=n(p,f);return v.concat([[0,m]],b)}return function(t,n){for(var a=t.length,o=n.length,r=Math.ceil((a+o)/2),s=r,l=2*r,c=new Array(l),d=new Array(l),h=0;h<l;h++)c[h]=-1,d[h]=-1;c[s+1]=0,d[s+1]=0;for(var u=a-o,p=u%2!=0,g=0,f=0,m=0,v=0,b=0;b<r;b++){for(var y=-b+g;y<=b-f;y+=2){for(var w=s+y,C=(E=y===-b||y!==b&&c[w-1]<c[w+1]?c[w+1]:c[w-1]+1)-y;E<a&&C<o&&t.charAt(E)===n.charAt(C);)E++,C++;if(c[w]=E,E>a)f+=2;else if(C>o)g+=2;else if(p&&(I=s+u-y)>=0&&I<l&&-1!==d[I]&&E>=(T=a-d[I]))return i(t,n,E,C)}for(var x=-b+m;x<=b-v;x+=2){for(var T,I=s+x,A=(T=x===-b||x!==b&&d[I-1]<d[I+1]?d[I+1]:d[I-1]+1)-x;T<a&&A<o&&t.charAt(a-T-1)===n.charAt(o-A-1);)T++,A++;if(d[I]=T,T>a)v+=2;else if(A>o)m+=2;else if(!p){var E;if((w=s+u-x)>=0&&w<l&&-1!==c[w])if(C=s+(E=c[w])-w,E>=(T=a-T))return i(t,n,E,C)}}}return[[e,t],[1,n]]}(t,o)}(t=t.substring(0,t.length-y),p=p.substring(0,p.length-y));return w&&x.unshift([0,w]),C&&x.push([0,C]),u(x,m),f&&function(t){for(var n=!1,i=[],a=0,p=null,g=0,f=0,m=0,v=0,b=0;g<t.length;)0==t[g][0]?(i[a++]=g,f=v,m=b,v=0,b=0,p=t[g][1]):(1==t[g][0]?v+=t[g][1].length:b+=t[g][1].length,p&&p.length<=Math.max(f,m)&&p.length<=Math.max(v,b)&&(t.splice(i[a-1],0,[e,p]),t[i[a-1]+1][0]=1,a--,g=--a>0?i[a-1]:-1,f=0,m=0,v=0,b=0,p=null,n=!0)),g++;for(n&&u(t),function(t){function e(t,e){if(!t||!e)return 6;var n=t.charAt(t.length-1),i=e.charAt(0),a=n.match(s),o=i.match(s),r=a&&n.match(l),u=o&&i.match(l),p=r&&n.match(c),g=u&&i.match(c),f=p&&t.match(d),m=g&&e.match(h);return f||m?5:p||g?4:a&&!r&&u?3:r||u?2:a||o?1:0}for(var n=1;n<t.length-1;){if(0==t[n-1][0]&&0==t[n+1][0]){var i=t[n-1][1],a=t[n][1],o=t[n+1][1],u=r(i,a);if(u){var p=a.substring(a.length-u);i=i.substring(0,i.length-u),a=p+a.substring(0,a.length-u),o=p+o}for(var g=i,f=a,m=o,v=e(i,a)+e(a,o);a.charAt(0)===o.charAt(0);){i+=a.charAt(0),a=a.substring(1)+o.charAt(0),o=o.substring(1);var b=e(i,a)+e(a,o);b>=v&&(v=b,g=i,f=a,m=o)}t[n-1][1]!=g&&(g?t[n-1][1]=g:(t.splice(n-1,1),n--),t[n][1]=f,m?t[n+1][1]=m:(t.splice(n+1,1),n--))}n++}}(t),g=1;g<t.length;){if(t[g-1][0]==e&&1==t[g][0]){var y=t[g-1][1],w=t[g][1],C=o(y,w),x=o(w,y);C>=x?(C>=y.length/2||C>=w.length/2)&&(t.splice(g,0,[0,w.substring(0,C)]),t[g-1][1]=y.substring(0,y.length-C),t[g+1][1]=w.substring(C),g++):(x>=y.length/2||x>=w.length/2)&&(t.splice(g,0,[0,y.substring(0,x)]),t[g-1][0]=1,t[g-1][1]=w.substring(0,w.length-x),t[g+1][0]=e,t[g+1][1]=y.substring(x),g++),g++}g++}}(x),x}function i(t,e,i,a){var o=t.substring(0,i),r=e.substring(0,a),s=t.substring(i),l=e.substring(a),c=n(o,r),d=n(s,l);return c.concat(d)}function a(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),a=i,o=0;n<a;)t.substring(o,a)==e.substring(o,a)?o=n=a:i=a,a=Math.floor((i-n)/2+n);return p(t.charCodeAt(a-1))&&a--,a}function o(t,e){var n=t.length,i=e.length;if(0==n||0==i)return 0;n>i?t=t.substring(n-i):n<i&&(e=e.substring(0,n));var a=Math.min(n,i);if(t==e)return a;for(var o=0,r=1;;){var s=t.substring(a-r),l=e.indexOf(s);if(-1==l)return o;r+=l,0!=l&&t.substring(a-r)!=e.substring(0,r)||(o=r,r++)}}function r(t,e){if(!t||!e||t.slice(-1)!==e.slice(-1))return 0;for(var n=0,i=Math.min(t.length,e.length),a=i,o=0;n<a;)t.substring(t.length-a,t.length-o)==e.substring(e.length-a,e.length-o)?o=n=a:i=a,a=Math.floor((i-n)/2+n);return g(t.charCodeAt(t.length-a))&&a--,a}var s=/[^a-zA-Z0-9]/,l=/\s/,c=/[\r\n]/,d=/\n\r?\n$/,h=/^\r?\n\r?\n/;function u(t,n){t.push([0,""]);for(var i,o=0,s=0,l=0,c="",d="";o<t.length;)if(o<t.length-1&&!t[o][1])t.splice(o,1);else switch(t[o][0]){case 1:l++,d+=t[o][1],o++;break;case e:s++,c+=t[o][1],o++;break;case 0:var h=o-l-s-1;if(n){if(h>=0&&m(t[h][1])){var p=t[h][1].slice(-1);if(t[h][1]=t[h][1].slice(0,-1),c=p+c,d=p+d,!t[h][1]){t.splice(h,1),o--;var g=h-1;t[g]&&1===t[g][0]&&(l++,d=t[g][1]+d,g--),t[g]&&t[g][0]===e&&(s++,c=t[g][1]+c,g--),h=g}}f(t[o][1])&&(p=t[o][1].charAt(0),t[o][1]=t[o][1].slice(1),c+=p,d+=p)}if(o<t.length-1&&!t[o][1]){t.splice(o,1);break}if(c.length>0||d.length>0){c.length>0&&d.length>0&&(0!==(i=a(d,c))&&(h>=0?t[h][1]+=d.substring(0,i):(t.splice(0,0,[0,d.substring(0,i)]),o++),d=d.substring(i),c=c.substring(i)),0!==(i=r(d,c))&&(t[o][1]=d.substring(d.length-i)+t[o][1],d=d.substring(0,d.length-i),c=c.substring(0,c.length-i)));var v=l+s;0===c.length&&0===d.length?(t.splice(o-v,v),o-=v):0===c.length?(t.splice(o-v,v,[1,d]),o=o-v+1):0===d.length?(t.splice(o-v,v,[e,c]),o=o-v+1):(t.splice(o-v,v,[e,c],[1,d]),o=o-v+2)}0!==o&&0===t[o-1][0]?(t[o-1][1]+=t[o][1],t.splice(o,1)):o++,l=0,s=0,c="",d=""}""===t[t.length-1][1]&&t.pop();var b=!1;for(o=1;o<t.length-1;)0===t[o-1][0]&&0===t[o+1][0]&&(t[o][1].substring(t[o][1].length-t[o-1][1].length)===t[o-1][1]?(t[o][1]=t[o-1][1]+t[o][1].substring(0,t[o][1].length-t[o-1][1].length),t[o+1][1]=t[o-1][1]+t[o+1][1],t.splice(o-1,1),b=!0):t[o][1].substring(0,t[o+1][1].length)==t[o+1][1]&&(t[o-1][1]+=t[o+1][1],t[o][1]=t[o][1].substring(t[o+1][1].length)+t[o+1][1],t.splice(o+1,1),b=!0)),o++;b&&u(t,n)}function p(t){return t>=55296&&t<=56319}function g(t){return t>=56320&&t<=57343}function f(t){return g(t.charCodeAt(0))}function m(t){return p(t.charCodeAt(t.length-1))}function v(t,n,i,a){return m(t)||f(a)?null:function(t){for(var e=[],n=0;n<t.length;n++)t[n][1].length>0&&e.push(t[n]);return e}([[0,t],[e,n],[1,i],[0,a]])}function b(t,e,i,a){return n(t,e,i,a,!0)}b.INSERT=1,b.DELETE=e,b.EQUAL=0,t.exports=b},5749:(t,e,n)=>{var i=n(1042);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=i&&void 0===e?"__lodash_hash_undefined__":e,this}},5759:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.length=function(t){return"number"==typeof t.delete?t.delete:"number"==typeof t.retain?t.retain:"object"==typeof t.retain&&null!==t.retain?1:"string"==typeof t.insert?t.insert.length:1}}(n||(n={})),e.default=n},5765:(t,e,n)=>{var i=n(8859),a=n(5325),o=n(9905),r=n(9219),s=n(4517),l=n(4247);t.exports=function(t,e,n){var c=-1,d=a,h=t.length,u=!0,p=[],g=p;if(n)u=!1,d=o;else if(h>=200){var f=e?null:s(t);if(f)return l(f);u=!1,d=r,g=new i}else g=e?[]:p;t:for(;++c<h;){var m=t[c],v=e?e(m):m;if(m=n||0!==m?m:0,u&&v==v){for(var b=g.length;b--;)if(g[b]===v)continue t;e&&g.push(v),p.push(m)}else d(g,v,n)||(g!==p&&g.push(v),p.push(m))}return p}},5808:(t,e,n)=>{var i=n(2507)("toUpperCase");t.exports=i},5861:(t,e,n)=>{var i=n(5580),a=n(8223),o=n(2804),r=n(6545),s=n(8303),l=n(2552),c=n(7473),d="[object Map]",h="[object Promise]",u="[object Set]",p="[object WeakMap]",g="[object DataView]",f=c(i),m=c(a),v=c(o),b=c(r),y=c(s),w=l;(i&&w(new i(new ArrayBuffer(1)))!=g||a&&w(new a)!=d||o&&w(o.resolve())!=h||r&&w(new r)!=u||s&&w(new s)!=p)&&(w=function(t){var e=l(t),n="[object Object]"==e?t.constructor:void 0,i=n?c(n):"";if(i)switch(i){case f:return g;case m:return d;case v:return h;case b:return u;case y:return p}return e}),t.exports=w},5891:(t,e,n)=>{var i=n(1873),a=n(2428),o=n(6449),r=i?i.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||a(t)||!!(r&&t&&t[r])}},5911:(t,e,n)=>{var i=n(8859),a=n(4248),o=n(9219);t.exports=function(t,e,n,r,s,l){var c=1&n,d=t.length,h=e.length;if(d!=h&&!(c&&h>d))return!1;var u=l.get(t),p=l.get(e);if(u&&p)return u==e&&p==t;var g=-1,f=!0,m=2&n?new i:void 0;for(l.set(t,e),l.set(e,t);++g<d;){var v=t[g],b=e[g];if(r)var y=c?r(b,v,g,e,t,l):r(v,b,g,t,e,l);if(void 0!==y){if(y)continue;f=!1;break}if(m){if(!a(e,(function(t,e){if(!o(m,e)&&(v===t||s(v,t,n,r,l)))return m.push(e)}))){f=!1;break}}else if(v!==b&&!s(v,b,n,r,l)){f=!1;break}}return l.delete(t),l.delete(e),f}},5950:(t,e,n)=>{var i=n(695),a=n(8984),o=n(4894);t.exports=function(t){return o(t)?i(t):a(t)}},6009:(t,e,n)=>{t=n.nmd(t);var i=n(4840),a=e&&!e.nodeType&&e,o=a&&t&&!t.nodeType&&t,r=o&&o.exports===a&&i.process,s=function(){try{return o&&o.require&&o.require("util").types||r&&r.binding&&r.binding("util")}catch(t){}}();t.exports=s},6025:(t,e,n)=>{var i=n(5288);t.exports=function(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1}},6110:(t,e,n)=>{var i=n(5083),a=n(392);t.exports=function(t,e){var n=a(t,e);return i(n)?n:void 0}},6131:(t,e,n)=>{var i=n(2523),a=n(5463),o=n(6959);t.exports=function(t,e,n){return e==e?o(t,e,n):i(t,a,n)}},6151:t=>{var e=Math.ceil,n=Math.max;t.exports=function(t,i,a,o){for(var r=-1,s=n(e((i-t)/(a||1)),0),l=Array(s);s--;)l[o?s:++r]=t,t+=a;return l}},6155:(t,e,n)=>{var i=n(4932),a=n(7422),o=n(5389),r=n(5128),s=n(3937),l=n(7301),c=n(3714),d=n(3488),h=n(6449);t.exports=function(t,e,n){e=e.length?i(e,(function(t){return h(t)?function(e){return a(e,1===t.length?t[0]:t)}:t})):[d];var u=-1;e=i(e,l(o));var p=r(t,(function(t,n,a){return{criteria:i(e,(function(e){return e(t)})),index:++u,value:t}}));return s(p,(function(t,e){return c(t,e,n)}))}},6449:t=>{var e=Array.isArray;t.exports=e},6545:(t,e,n)=>{var i=n(6110)(n(9325),"Set");t.exports=i},6547:(t,e,n)=>{var i=n(3360),a=n(5288),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var r=t[e];o.call(t,e)&&a(r,n)&&(void 0!==n||e in t)||i(t,e,n)}},6645:(t,e,n)=>{var i=n(1733),a=n(5434),o=n(3222),r=n(2225);t.exports=function(t,e,n){return t=o(t),void 0===(e=n?void 0:e)?a(t)?r(t):i(t):t.match(e)||[]}},6649:(t,e,n)=>{var i=n(3221)();t.exports=i},6721:(t,e,n)=>{var i=n(1042),a=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(i){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return a.call(e,t)?e[t]:void 0}},6757:(t,e,n)=>{var i=n(1033),a=Math.max;t.exports=function(t,e,n){return e=a(void 0===e?t.length-1:e,0),function(){for(var o=arguments,r=-1,s=a(o.length-e,0),l=Array(s);++r<s;)l[r]=o[e+r];r=-1;for(var c=Array(e+1);++r<e;)c[r]=o[r];return c[e]=n(l),i(t,this,c)}}},6800:(t,e,n)=>{var i=n(5288),a=n(4894),o=n(361),r=n(3805);t.exports=function(t,e,n){if(!r(n))return!1;var s=typeof e;return!!("number"==s?a(n)&&o(e,n.length):"string"==s&&e in n)&&i(n[e],t)}},6959:t=>{t.exports=function(t,e,n){for(var i=n-1,a=t.length;++i<a;)if(t[i]===e)return i;return-1}},7068:(t,e,n)=>{var i=n(7217),a=n(5911),o=n(1986),r=n(689),s=n(5861),l=n(6449),c=n(3656),d=n(7167),h="[object Arguments]",u="[object Array]",p="[object Object]",g=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,f,m,v){var b=l(t),y=l(e),w=b?u:s(t),C=y?u:s(e),x=(w=w==h?p:w)==p,T=(C=C==h?p:C)==p,I=w==C;if(I&&c(t)){if(!c(e))return!1;b=!0,x=!1}if(I&&!x)return v||(v=new i),b||d(t)?a(t,e,n,f,m,v):o(t,e,w,n,f,m,v);if(!(1&n)){var A=x&&g.call(t,"__wrapped__"),E=T&&g.call(e,"__wrapped__");if(A||E){var S=A?t.value():t,L=E?e.value():e;return v||(v=new i),m(S,L,n,f,v)}}return!!I&&(v||(v=new i),r(t,e,n,f,m,v))}},7167:(t,e,n)=>{var i=n(4901),a=n(7301),o=n(6009),r=o&&o.isTypedArray,s=r?a(r):i;t.exports=s},7193:(t,e,n)=>{t=n.nmd(t);var i="__lodash_hash_undefined__",a=9007199254740991,o="[object Arguments]",r="[object Boolean]",s="[object Date]",l="[object Function]",c="[object GeneratorFunction]",d="[object Map]",h="[object Number]",u="[object Object]",p="[object Promise]",g="[object RegExp]",f="[object Set]",m="[object String]",v="[object Symbol]",b="[object WeakMap]",y="[object ArrayBuffer]",w="[object DataView]",C="[object Float32Array]",x="[object Float64Array]",T="[object Int8Array]",I="[object Int16Array]",A="[object Int32Array]",E="[object Uint8Array]",S="[object Uint8ClampedArray]",L="[object Uint16Array]",M="[object Uint32Array]",N=/\w*$/,k=/^\[object .+?Constructor\]$/,P=/^(?:0|[1-9]\d*)$/,_={};_[o]=_["[object Array]"]=_[y]=_[w]=_[r]=_[s]=_[C]=_[x]=_[T]=_[I]=_[A]=_[d]=_[h]=_[u]=_[g]=_[f]=_[m]=_[v]=_[E]=_[S]=_[L]=_[M]=!0,_["[object Error]"]=_[l]=_[b]=!1;var $="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,O="object"==typeof self&&self&&self.Object===Object&&self,j=$||O||Function("return this")(),B=e&&!e.nodeType&&e,q=B&&t&&!t.nodeType&&t,D=q&&q.exports===B;function H(t,e){return t.set(e[0],e[1]),t}function R(t,e){return t.add(e),t}function V(t,e,n,i){var a=-1,o=t?t.length:0;for(i&&o&&(n=t[++a]);++a<o;)n=e(n,t[a],a,t);return n}function U(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function F(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function z(t,e){return function(n){return t(e(n))}}function Z(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var W,G=Array.prototype,J=Function.prototype,K=Object.prototype,Y=j["__core-js_shared__"],X=(W=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"",Q=J.toString,tt=K.hasOwnProperty,et=K.toString,nt=RegExp("^"+Q.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),it=D?j.Buffer:void 0,at=j.Symbol,ot=j.Uint8Array,rt=z(Object.getPrototypeOf,Object),st=Object.create,lt=K.propertyIsEnumerable,ct=G.splice,dt=Object.getOwnPropertySymbols,ht=it?it.isBuffer:void 0,ut=z(Object.keys,Object),pt=jt(j,"DataView"),gt=jt(j,"Map"),ft=jt(j,"Promise"),mt=jt(j,"Set"),vt=jt(j,"WeakMap"),bt=jt(Object,"create"),yt=Rt(pt),wt=Rt(gt),Ct=Rt(ft),xt=Rt(mt),Tt=Rt(vt),It=at?at.prototype:void 0,At=It?It.valueOf:void 0;function Et(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function St(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Lt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Mt(t){this.__data__=new St(t)}function Nt(t,e,n){var i=t[e];tt.call(t,e)&&Vt(i,n)&&(void 0!==n||e in t)||(t[e]=n)}function kt(t,e){for(var n=t.length;n--;)if(Vt(t[n][0],e))return n;return-1}function Pt(t,e,n,i,a,p,b){var k;if(i&&(k=p?i(t,a,p,b):i(t)),void 0!==k)return k;if(!Wt(t))return t;var P=Ut(t);if(P){if(k=function(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&tt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!e)return function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}(t,k)}else{var $=qt(t),O=$==l||$==c;if(zt(t))return function(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}(t,e);if($==u||$==o||O&&!p){if(U(t))return p?t:{};if(k=function(t){return"function"!=typeof t.constructor||Ht(t)?{}:Wt(e=rt(t))?st(e):{};var e}(O?{}:t),!e)return function(t,e){return $t(t,Bt(t),e)}(t,function(t,e){return t&&$t(e,Gt(e),t)}(k,t))}else{if(!_[$])return p?t:{};k=function(t,e,n,i){var a,o=t.constructor;switch(e){case y:return _t(t);case r:case s:return new o(+t);case w:return function(t,e){var n=e?_t(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,i);case C:case x:case T:case I:case A:case E:case S:case L:case M:return function(t,e){var n=e?_t(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,i);case d:return function(t,e,n){return V(e?n(F(t),!0):F(t),H,new t.constructor)}(t,i,n);case h:case m:return new o(t);case g:return function(t){var e=new t.constructor(t.source,N.exec(t));return e.lastIndex=t.lastIndex,e}(t);case f:return function(t,e,n){return V(e?n(Z(t),!0):Z(t),R,new t.constructor)}(t,i,n);case v:return a=t,At?Object(At.call(a)):{}}}(t,$,Pt,e)}}b||(b=new Mt);var j=b.get(t);if(j)return j;if(b.set(t,k),!P)var B=n?function(t){return function(t,e,n){var i=e(t);return Ut(t)?i:function(t,e){for(var n=-1,i=e.length,a=t.length;++n<i;)t[a+n]=e[n];return t}(i,n(t))}(t,Gt,Bt)}(t):Gt(t);return function(t,e){for(var n=-1,i=t?t.length:0;++n<i&&!1!==e(t[n],n););}(B||t,(function(a,o){B&&(a=t[o=a]),Nt(k,o,Pt(a,e,n,i,o,t,b))})),k}function _t(t){var e=new t.constructor(t.byteLength);return new ot(e).set(new ot(t)),e}function $t(t,e,n,i){n||(n={});for(var a=-1,o=e.length;++a<o;){var r=e[a],s=i?i(n[r],t[r],r,n,t):void 0;Nt(n,r,void 0===s?t[r]:s)}return n}function Ot(t,e){var n,i,a=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?a["string"==typeof e?"string":"hash"]:a.map}function jt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Wt(t)||(e=t,X&&X in e))&&(Zt(t)||U(t)?nt:k).test(Rt(t));var e}(n)?n:void 0}Et.prototype.clear=function(){this.__data__=bt?bt(null):{}},Et.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Et.prototype.get=function(t){var e=this.__data__;if(bt){var n=e[t];return n===i?void 0:n}return tt.call(e,t)?e[t]:void 0},Et.prototype.has=function(t){var e=this.__data__;return bt?void 0!==e[t]:tt.call(e,t)},Et.prototype.set=function(t,e){return this.__data__[t]=bt&&void 0===e?i:e,this},St.prototype.clear=function(){this.__data__=[]},St.prototype.delete=function(t){var e=this.__data__,n=kt(e,t);return!(n<0||(n==e.length-1?e.pop():ct.call(e,n,1),0))},St.prototype.get=function(t){var e=this.__data__,n=kt(e,t);return n<0?void 0:e[n][1]},St.prototype.has=function(t){return kt(this.__data__,t)>-1},St.prototype.set=function(t,e){var n=this.__data__,i=kt(n,t);return i<0?n.push([t,e]):n[i][1]=e,this},Lt.prototype.clear=function(){this.__data__={hash:new Et,map:new(gt||St),string:new Et}},Lt.prototype.delete=function(t){return Ot(this,t).delete(t)},Lt.prototype.get=function(t){return Ot(this,t).get(t)},Lt.prototype.has=function(t){return Ot(this,t).has(t)},Lt.prototype.set=function(t,e){return Ot(this,t).set(t,e),this},Mt.prototype.clear=function(){this.__data__=new St},Mt.prototype.delete=function(t){return this.__data__.delete(t)},Mt.prototype.get=function(t){return this.__data__.get(t)},Mt.prototype.has=function(t){return this.__data__.has(t)},Mt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof St){var i=n.__data__;if(!gt||i.length<199)return i.push([t,e]),this;n=this.__data__=new Lt(i)}return n.set(t,e),this};var Bt=dt?z(dt,Object):function(){return[]},qt=function(t){return et.call(t)};function Dt(t,e){return!!(e=null==e?a:e)&&("number"==typeof t||P.test(t))&&t>-1&&t%1==0&&t<e}function Ht(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||K)}function Rt(t){if(null!=t){try{return Q.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Vt(t,e){return t===e||t!=t&&e!=e}(pt&&qt(new pt(new ArrayBuffer(1)))!=w||gt&&qt(new gt)!=d||ft&&qt(ft.resolve())!=p||mt&&qt(new mt)!=f||vt&&qt(new vt)!=b)&&(qt=function(t){var e=et.call(t),n=e==u?t.constructor:void 0,i=n?Rt(n):void 0;if(i)switch(i){case yt:return w;case wt:return d;case Ct:return p;case xt:return f;case Tt:return b}return e});var Ut=Array.isArray;function Ft(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}(t.length)&&!Zt(t)}var zt=ht||function(){return!1};function Zt(t){var e=Wt(t)?et.call(t):"";return e==l||e==c}function Wt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Gt(t){return Ft(t)?function(t,e){var n=Ut(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&Ft(t)}(t)&&tt.call(t,"callee")&&(!lt.call(t,"callee")||et.call(t)==o)}(t)?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],i=n.length,a=!!i;for(var r in t)!e&&!tt.call(t,r)||a&&("length"==r||Dt(r,i))||n.push(r);return n}(t):function(t){if(!Ht(t))return ut(t);var e=[];for(var n in Object(t))tt.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}t.exports=function(t){return Pt(t,!0,!0)}},7197:t=>{t.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},7217:(t,e,n)=>{var i=n(79),a=n(1420),o=n(938),r=n(3605),s=n(9817),l=n(945);function c(t){var e=this.__data__=new i(t);this.size=e.size}c.prototype.clear=a,c.prototype.delete=o,c.prototype.get=r,c.prototype.has=s,c.prototype.set=l,t.exports=c},7237:t=>{t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},7241:(t,e,n)=>{var i=n(695),a=n(2903),o=n(4894);t.exports=function(t){return o(t)?i(t,!0):a(t)}},7248:(t,e,n)=>{var i=n(6547),a=n(1234);t.exports=function(t,e){return a(t||[],e||[],i)}},7255:(t,e,n)=>{var i=n(7422);t.exports=function(t){return function(e){return i(e,t)}}},7296:(t,e,n)=>{var i,a=n(5481),o=(i=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";t.exports=function(t){return!!o&&o in t}},7301:t=>{t.exports=function(t){return function(e){return t(e)}}},7334:t=>{t.exports=function(t){return function(){return t}}},7400:(t,e,n)=>{var i=n(9374),a=1/0;t.exports=function(t){return t?(t=i(t))===a||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},7422:(t,e,n)=>{var i=n(1769),a=n(7797);t.exports=function(t,e){for(var n=0,o=(e=i(e,t)).length;null!=t&&n<o;)t=t[a(e[n++])];return n&&n==o?t:void 0}},7473:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},7534:(t,e,n)=>{var i=n(2552),a=n(346);t.exports=function(t){return a(t)&&"[object Arguments]"==i(t)}},7556:(t,e,n)=>{var i=n(1873),a=n(4932),o=n(6449),r=n(4394),s=i?i.prototype:void 0,l=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return a(e,t)+"";if(r(e))return l?l.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},7670:(t,e,n)=>{var i=n(2651);t.exports=function(t){var e=i(this,t).delete(t);return this.size-=e?1:0,e}},7797:(t,e,n)=>{var i=n(4394);t.exports=function(t){if("string"==typeof t||i(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},7805:(t,e,n)=>{var i=n(3360),a=n(5288);t.exports=function(t,e,n){(void 0!==n&&!a(t[e],n)||void 0===n&&!(e in t))&&i(t,e,n)}},7828:(t,e,n)=>{var i=n(9325).Uint8Array;t.exports=i},7978:(t,e,n)=>{var i=n(270),a=n(8156),o=n(631),r=n(8586),s=n(756),l=n(7197),c=n(7797);t.exports=function(t,e){return r(t)&&s(e)?l(c(t),e):function(n){var r=a(n,t);return void 0===r&&r===e?o(n,t):i(e,r,3)}}},8077:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},8096:t=>{t.exports=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}},8142:(t,e,n)=>{t=n.nmd(t);var i="__lodash_hash_undefined__",a=9007199254740991,o="[object Arguments]",r="[object Array]",s="[object Boolean]",l="[object Date]",c="[object Error]",d="[object Function]",h="[object Map]",u="[object Number]",p="[object Object]",g="[object Promise]",f="[object RegExp]",m="[object Set]",v="[object String]",b="[object WeakMap]",y="[object ArrayBuffer]",w="[object DataView]",C=/^\[object .+?Constructor\]$/,x=/^(?:0|[1-9]\d*)$/,T={};T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T[o]=T[r]=T[y]=T[s]=T[w]=T[l]=T[c]=T[d]=T[h]=T[u]=T[p]=T[f]=T[m]=T[v]=T[b]=!1;var I="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,A="object"==typeof self&&self&&self.Object===Object&&self,E=I||A||Function("return this")(),S=e&&!e.nodeType&&e,L=S&&t&&!t.nodeType&&t,M=L&&L.exports===S,N=M&&I.process,k=function(){try{return N&&N.binding&&N.binding("util")}catch(t){}}(),P=k&&k.isTypedArray;function _(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function $(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function O(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var j,B,q,D=Array.prototype,H=Function.prototype,R=Object.prototype,V=E["__core-js_shared__"],U=H.toString,F=R.hasOwnProperty,z=(j=/[^.]+$/.exec(V&&V.keys&&V.keys.IE_PROTO||""))?"Symbol(src)_1."+j:"",Z=R.toString,W=RegExp("^"+U.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),G=M?E.Buffer:void 0,J=E.Symbol,K=E.Uint8Array,Y=R.propertyIsEnumerable,X=D.splice,Q=J?J.toStringTag:void 0,tt=Object.getOwnPropertySymbols,et=G?G.isBuffer:void 0,nt=(B=Object.keys,q=Object,function(t){return B(q(t))}),it=Lt(E,"DataView"),at=Lt(E,"Map"),ot=Lt(E,"Promise"),rt=Lt(E,"Set"),st=Lt(E,"WeakMap"),lt=Lt(Object,"create"),ct=Pt(it),dt=Pt(at),ht=Pt(ot),ut=Pt(rt),pt=Pt(st),gt=J?J.prototype:void 0,ft=gt?gt.valueOf:void 0;function mt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function vt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function bt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function yt(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new bt;++e<n;)this.add(t[e])}function wt(t){var e=this.__data__=new vt(t);this.size=e.size}function Ct(t,e){for(var n=t.length;n--;)if(_t(t[n][0],e))return n;return-1}function xt(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Q&&Q in Object(t)?function(t){var e=F.call(t,Q),n=t[Q];try{t[Q]=void 0;var i=!0}catch(t){}var a=Z.call(t);return i&&(e?t[Q]=n:delete t[Q]),a}(t):function(t){return Z.call(t)}(t)}function Tt(t){return Ht(t)&&xt(t)==o}function It(t,e,n,i,a){return t===e||(null==t||null==e||!Ht(t)&&!Ht(e)?t!=t&&e!=e:function(t,e,n,i,a,d){var g=Ot(t),b=Ot(e),C=g?r:Nt(t),x=b?r:Nt(e),T=(C=C==o?p:C)==p,I=(x=x==o?p:x)==p,A=C==x;if(A&&jt(t)){if(!jt(e))return!1;g=!0,T=!1}if(A&&!T)return d||(d=new wt),g||Rt(t)?At(t,e,n,i,a,d):function(t,e,n,i,a,o,r){switch(n){case w:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case y:return!(t.byteLength!=e.byteLength||!o(new K(t),new K(e)));case s:case l:case u:return _t(+t,+e);case c:return t.name==e.name&&t.message==e.message;case f:case v:return t==e+"";case h:var d=$;case m:var p=1&i;if(d||(d=O),t.size!=e.size&&!p)return!1;var g=r.get(t);if(g)return g==e;i|=2,r.set(t,e);var b=At(d(t),d(e),i,a,o,r);return r.delete(t),b;case"[object Symbol]":if(ft)return ft.call(t)==ft.call(e)}return!1}(t,e,C,n,i,a,d);if(!(1&n)){var E=T&&F.call(t,"__wrapped__"),S=I&&F.call(e,"__wrapped__");if(E||S){var L=E?t.value():t,M=S?e.value():e;return d||(d=new wt),a(L,M,n,i,d)}}return!!A&&(d||(d=new wt),function(t,e,n,i,a,o){var r=1&n,s=Et(t),l=s.length;if(l!=Et(e).length&&!r)return!1;for(var c=l;c--;){var d=s[c];if(!(r?d in e:F.call(e,d)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var u=!0;o.set(t,e),o.set(e,t);for(var p=r;++c<l;){var g=t[d=s[c]],f=e[d];if(i)var m=r?i(f,g,d,e,t,o):i(g,f,d,t,e,o);if(!(void 0===m?g===f||a(g,f,n,i,o):m)){u=!1;break}p||(p="constructor"==d)}if(u&&!p){var v=t.constructor,b=e.constructor;v==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(u=!1)}return o.delete(t),o.delete(e),u}(t,e,n,i,a,d))}(t,e,n,i,It,a))}function At(t,e,n,i,a,o){var r=1&n,s=t.length,l=e.length;if(s!=l&&!(r&&l>s))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var d=-1,h=!0,u=2&n?new yt:void 0;for(o.set(t,e),o.set(e,t);++d<s;){var p=t[d],g=e[d];if(i)var f=r?i(g,p,d,e,t,o):i(p,g,d,t,e,o);if(void 0!==f){if(f)continue;h=!1;break}if(u){if(!_(e,(function(t,e){if(r=e,!u.has(r)&&(p===t||a(p,t,n,i,o)))return u.push(e);var r}))){h=!1;break}}else if(p!==g&&!a(p,g,n,i,o)){h=!1;break}}return o.delete(t),o.delete(e),h}function Et(t){return function(t,e,n){var i=e(t);return Ot(t)?i:function(t,e){for(var n=-1,i=e.length,a=t.length;++n<i;)t[a+n]=e[n];return t}(i,n(t))}(t,Vt,Mt)}function St(t,e){var n,i,a=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?a["string"==typeof e?"string":"hash"]:a.map}function Lt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Dt(t)||function(t){return!!z&&z in t}(t))&&(Bt(t)?W:C).test(Pt(t))}(n)?n:void 0}mt.prototype.clear=function(){this.__data__=lt?lt(null):{},this.size=0},mt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},mt.prototype.get=function(t){var e=this.__data__;if(lt){var n=e[t];return n===i?void 0:n}return F.call(e,t)?e[t]:void 0},mt.prototype.has=function(t){var e=this.__data__;return lt?void 0!==e[t]:F.call(e,t)},mt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=lt&&void 0===e?i:e,this},vt.prototype.clear=function(){this.__data__=[],this.size=0},vt.prototype.delete=function(t){var e=this.__data__,n=Ct(e,t);return!(n<0||(n==e.length-1?e.pop():X.call(e,n,1),--this.size,0))},vt.prototype.get=function(t){var e=this.__data__,n=Ct(e,t);return n<0?void 0:e[n][1]},vt.prototype.has=function(t){return Ct(this.__data__,t)>-1},vt.prototype.set=function(t,e){var n=this.__data__,i=Ct(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},bt.prototype.clear=function(){this.size=0,this.__data__={hash:new mt,map:new(at||vt),string:new mt}},bt.prototype.delete=function(t){var e=St(this,t).delete(t);return this.size-=e?1:0,e},bt.prototype.get=function(t){return St(this,t).get(t)},bt.prototype.has=function(t){return St(this,t).has(t)},bt.prototype.set=function(t,e){var n=St(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},yt.prototype.add=yt.prototype.push=function(t){return this.__data__.set(t,i),this},yt.prototype.has=function(t){return this.__data__.has(t)},wt.prototype.clear=function(){this.__data__=new vt,this.size=0},wt.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},wt.prototype.get=function(t){return this.__data__.get(t)},wt.prototype.has=function(t){return this.__data__.has(t)},wt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof vt){var i=n.__data__;if(!at||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new bt(i)}return n.set(t,e),this.size=n.size,this};var Mt=tt?function(t){return null==t?[]:(t=Object(t),function(e){for(var n=-1,i=null==e?0:e.length,a=0,o=[];++n<i;){var r=e[n];s=r,Y.call(t,s)&&(o[a++]=r)}var s;return o}(tt(t)))}:function(){return[]},Nt=xt;function kt(t,e){return!!(e=null==e?a:e)&&("number"==typeof t||x.test(t))&&t>-1&&t%1==0&&t<e}function Pt(t){if(null!=t){try{return U.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function _t(t,e){return t===e||t!=t&&e!=e}(it&&Nt(new it(new ArrayBuffer(1)))!=w||at&&Nt(new at)!=h||ot&&Nt(ot.resolve())!=g||rt&&Nt(new rt)!=m||st&&Nt(new st)!=b)&&(Nt=function(t){var e=xt(t),n=e==p?t.constructor:void 0,i=n?Pt(n):"";if(i)switch(i){case ct:return w;case dt:return h;case ht:return g;case ut:return m;case pt:return b}return e});var $t=Tt(function(){return arguments}())?Tt:function(t){return Ht(t)&&F.call(t,"callee")&&!Y.call(t,"callee")},Ot=Array.isArray,jt=et||function(){return!1};function Bt(t){if(!Dt(t))return!1;var e=xt(t);return e==d||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function qt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function Dt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ht(t){return null!=t&&"object"==typeof t}var Rt=P?function(t){return function(e){return t(e)}}(P):function(t){return Ht(t)&&qt(t.length)&&!!T[xt(t)]};function Vt(t){return null!=(e=t)&&qt(e.length)&&!Bt(e)?function(t,e){var n=Ot(t),i=!n&&$t(t),a=!n&&!i&&jt(t),o=!n&&!i&&!a&&Rt(t),r=n||i||a||o,s=r?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],l=s.length;for(var c in t)!e&&!F.call(t,c)||r&&("length"==c||a&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||kt(c,l))||s.push(c);return s}(t):function(t){if(n=(e=t)&&e.constructor,e!==("function"==typeof n&&n.prototype||R))return nt(t);var e,n,i=[];for(var a in Object(t))F.call(t,a)&&"constructor"!=a&&i.push(a);return i}(t);var e}t.exports=function(t,e){return It(t,e)}},8156:(t,e,n)=>{var i=n(7422);t.exports=function(t,e,n){var a=null==t?void 0:i(t,e);return void 0===a?n:a}},8223:(t,e,n)=>{var i=n(6110)(n(9325),"Map");t.exports=i},8303:(t,e,n)=>{var i=n(6110)(n(9325),"WeakMap");t.exports=i},8317:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(5759);e.default=class{constructor(t){this.ops=t,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(t){t||(t=1/0);const e=this.ops[this.index];if(e){const n=this.offset,a=i.default.length(e);if(t>=a-n?(t=a-n,this.index+=1,this.offset=0):this.offset+=t,"number"==typeof e.delete)return{delete:t};{const i={};return e.attributes&&(i.attributes=e.attributes),"number"==typeof e.retain?i.retain=t:"object"==typeof e.retain&&null!==e.retain?i.retain=e.retain:"string"==typeof e.insert?i.insert=e.insert.substr(n,t):i.insert=e.insert,i}}return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?i.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const t=this.ops[this.index];return t?"number"==typeof t.delete?"delete":"number"==typeof t.retain||"object"==typeof t.retain&&null!==t.retain?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);{const t=this.offset,e=this.index,n=this.next(),i=this.ops.slice(this.index);return this.offset=t,this.index=e,[n].concat(i)}}return[]}}},8329:(t,e,n)=>{var i=n(4894);t.exports=function(t,e){return function(n,a){if(null==n)return n;if(!i(n))return t(n,a);for(var o=n.length,r=e?o:-1,s=Object(n);(e?r--:++r<o)&&!1!==a(s[r],r,s););return n}}},8586:(t,e,n)=>{var i=n(6449),a=n(4394),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;t.exports=function(t,e){if(i(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!a(t))||r.test(t)||!o.test(t)||null!=e&&t in Object(e)}},8655:(t,e,n)=>{var i=n(6025);t.exports=function(t){return i(this.__data__,t)>-1}},8754:(t,e,n)=>{var i=n(5160);t.exports=function(t,e,n){var a=t.length;return n=void 0===n?a:n,!e&&n>=a?t:i(t,e,n)}},8859:(t,e,n)=>{var i=n(3661),a=n(1380),o=n(1459);function r(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new i;++e<n;)this.add(t[e])}r.prototype.add=r.prototype.push=a,r.prototype.has=o,t.exports=r},8879:(t,e,n)=>{var i=n(4335)(Object.getPrototypeOf,Object);t.exports=i},8984:(t,e,n)=>{var i=n(5527),a=n(3650),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return a(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},9106:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(7193),a=n(8142);var o;!function(t){t.compose=function(t={},e={},n=!1){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});let a=i(e);n||(a=Object.keys(a).reduce(((t,e)=>(null!=a[e]&&(t[e]=a[e]),t)),{}));for(const n in t)void 0!==t[n]&&void 0===e[n]&&(a[n]=t[n]);return Object.keys(a).length>0?a:void 0},t.diff=function(t={},e={}){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});const n=Object.keys(t).concat(Object.keys(e)).reduce(((n,i)=>(a(t[i],e[i])||(n[i]=void 0===e[i]?null:e[i]),n)),{});return Object.keys(n).length>0?n:void 0},t.invert=function(t={},e={}){t=t||{};const n=Object.keys(e).reduce(((n,i)=>(e[i]!==t[i]&&void 0!==t[i]&&(n[i]=e[i]),n)),{});return Object.keys(t).reduce(((n,i)=>(t[i]!==e[i]&&void 0===e[i]&&(n[i]=null),n)),n)},t.transform=function(t,e,n=!1){if("object"!=typeof t)return e;if("object"!=typeof e)return;if(!n)return e;const i=Object.keys(e).reduce(((n,i)=>(void 0===t[i]&&(n[i]=e[i]),n)),{});return Object.keys(i).length>0?i:void 0}}(o||(o={})),e.default=o},9219:t=>{t.exports=function(t,e){return t.has(e)}},9302:(t,e,n)=>{var i=n(3488),a=n(6757),o=n(2865);t.exports=function(t,e){return o(a(t,e,i),t+"")}},9325:(t,e,n)=>{var i=n(4840),a="object"==typeof self&&self&&self.Object===Object&&self,o=i||a||Function("return this")();t.exports=o},9326:(t,e,n)=>{var i=n(1769),a=n(2428),o=n(6449),r=n(361),s=n(294),l=n(7797);t.exports=function(t,e,n){for(var c=-1,d=(e=i(e,t)).length,h=!1;++c<d;){var u=l(e[c]);if(!(h=null!=t&&n(t,u)))break;t=t[u]}return h||++c!=d?h:!!(d=null==t?0:t.length)&&s(d)&&r(u,d)&&(o(t)||a(t))}},9344:(t,e,n)=>{var i=n(3805),a=Object.create,o=function(){function t(){}return function(e){if(!i(e))return{};if(a)return a(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},9350:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},9374:(t,e,n)=>{var i=n(4128),a=n(3805),o=n(4394),r=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(a(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=a(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=i(t);var n=s.test(t);return n||l.test(t)?c(t.slice(2),n?2:8):r.test(t)?NaN:+t}},9570:(t,e,n)=>{var i=n(7334),a=n(3243),o=n(3488),r=a?function(t,e){return a(t,"toString",{configurable:!0,enumerable:!1,value:i(e),writable:!0})}:o;t.exports=r},9653:(t,e,n)=>{var i=n(7828);t.exports=function(t){var e=new t.constructor(t.byteLength);return new i(e).set(new i(t)),e}},9698:t=>{var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},9770:t=>{t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,a=0,o=[];++n<i;){var r=t[n];e(r,n,t)&&(o[a++]=r)}return o}},9817:t=>{t.exports=function(t){return this.__data__.has(t)}},9884:(t,e,n)=>{var i=n(1791),a=n(7241);t.exports=function(t){return i(t,a(t))}},9905:t=>{t.exports=function(t,e,n){for(var i=-1,a=null==t?0:t.length;++i<a;)if(n(e,t[i]))return!0;return!1}},9935:t=>{t.exports=function(){return!1}}},e={};function n(i){var a=e[i];if(void 0!==a)return a.exports;var o=e[i]={id:i,loaded:!1,exports:{}};return t[i](o,o.exports,n),o.loaded=!0,o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t={};n.r(t),n.d(t,{Attributor:()=>we,AttributorStore:()=>Le,BlockBlot:()=>He,ClassAttributor:()=>Ae,ContainerBlot:()=>Ve,EmbedBlot:()=>Ue,InlineBlot:()=>qe,LeafBlot:()=>Pe,ParentBlot:()=>je,Registry:()=>Te,Scope:()=>ye,ScrollBlot:()=>Ze,StyleAttributor:()=>Se,TextBlot:()=>Ge});class e{constructor(){this._themes=[],this._suppliers=[],this._services=[],this._forms=[],this._media=[],this._currentVersion=null,this._currentThemeId=null,this._organisationLogo=null,this.currentLanguage="en",this._isInitialized=!1}static getInstance(){return e.instance||(e.instance=new e),e.instance}init(t,e,n,i,a,o,r,s,l,c,d,h){this._isInitialized?console.warn("AppConfig already initialized - ignoring new data"):(this.UC=t,this._themes=e,this._suppliers=n,this._services=i,this._forms=a,this._media=o,this._currentThemeId=r,this._currentVersion=s,this._organisationLogo=l,this.addServiceButtonEvent=d,this.addTemplatesButtonEvent=h,this.currentLanguage=c,this._isInitialized=!0)}get themes(){return this._themes}get suppliers(){return this._suppliers}get services(){return this._services}get forms(){return this._forms}get media(){return this._media}set media(t){this._media=t}get currentThemeId(){return this._currentThemeId}get currentVersion(){return this._currentVersion}set currentThemeId(t){this._currentThemeId=t}get organisationLogo(){return this._organisationLogo}get isInitialized(){return this._isInitialized}}e.instance=null;class i{constructor(t,e=300){this.preloaderElement=t,this.minDuration=e,this._loading=!1,this._startTime=0,this.transitionDuration=200}get loading(){return this._loading}set loading(t){this._loading=t,t?(this._startTime=performance.now(),this.showPreloader()):this.hidePreloader()}showPreloader(){this.preloaderElement.style.display="flex",requestAnimationFrame((()=>{this.preloaderElement.style.transform=`opacity ${this.transitionDuration}ms ease-in-out 0s`,this.preloaderElement.style.opacity="1"}))}hidePreloader(){const t=performance.now()-this._startTime;t>=this.minDuration?(this.preloaderElement.style.transition=`opacity ${this.transitionDuration}ms ease-in-out`,this.preloaderElement.style.opacity="0",setTimeout((()=>{this.preloaderElement.style.display="none"}),this.transitionDuration)):setTimeout((()=>{this.hidePreloader()}),this.minDuration-t)}}var a=function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}))};const o=window.location.origin+(window.location.origin.startsWith("http://localhost")?"/Comforta_version20DevelopmentNETPostgreSQL1":"");class r{constructor(){this.services=[],this.forms=[],this.preloaderEl=document.getElementById("preloader"),this.config=e.getInstance(),this.init()}init(){this.services=this.config.services,this.forms=window.app.forms,this.loadingManager=new i(this.preloaderEl)}fetchAPI(t){return a(this,arguments,void 0,(function*(t,e={},n=!1){const i={headers:{"Content-Type":"application/json"}};try{n||(this.loadingManager.loading=!0);const a=yield fetch(`${o}${t}`,Object.assign(Object.assign({},i),e));if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return yield a.json()}catch(e){throw console.error(`API Error (${t}):`,e),e}finally{n||(this.loadingManager.loading=!1)}}))}debugApp(t){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/debug",{method:"POST",body:JSON.stringify({PageUrlList:t})},!0)}))}getVersions(){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/appversions",{},!0)}))}getVersion(){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/appversion",{},!0)}))}createVersion(t){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/create-appversion",{method:"POST",body:JSON.stringify({AppVersionName:t})})}))}duplicateVersion(t,e){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/copy-appversion",{method:"POST",body:JSON.stringify({AppVersionId:t,AppVersionName:e})})}))}renameVersion(t,e){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/update-appversion",{method:"POST",body:JSON.stringify({AppVersionId:t,AppVersionName:e})})}))}activateVersion(t){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/activate-appversion",{method:"POST",body:JSON.stringify({AppVersionId:t})})}))}deleteVersion(t){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/delete-version",{method:"POST",body:JSON.stringify({AppVersionId:t})})}))}createMenuPage(t,e){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/create-menu-page",{method:"POST",body:JSON.stringify({appVersionId:t,pageName:e})})}))}createInfoPage(t,e){return a(this,void 0,void 0,(function*(){return console.log({appVersionId:t,pageName:e}),yield this.fetchAPI("/api/toolbox/v2/create-info-page",{method:"POST",body:JSON.stringify({appVersionId:t,pageName:e})})}))}createLinkPage(t,e,n,i){return a(this,void 0,void 0,(function*(){return console.log({appVersionId:t,pageName:e,url:n,WWPForm:i}),yield this.fetchAPI("/api/toolbox/v2/create-link-page",{method:"POST",body:JSON.stringify({appVersionId:t,pageName:e,url:n,WWPFormId:i})})}))}createServicePage(t,e){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/create-service-page",{method:"POST",body:JSON.stringify({appVersionId:t,ProductServiceId:e})})}))}createContentPage(t,e){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/create-content-page",{method:"POST",body:JSON.stringify({appVersionId:t,PageName:e})})}))}createServiceCTA(t){return a(this,void 0,void 0,(function*(){const e=yield this.fetchAPI("/api/toolbox/v2/create-service-cta",{method:"POST",body:JSON.stringify(t)});return console.log(e),e}))}autoSavePage(t){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/save-page",{method:"POST",body:JSON.stringify(t)},!0)}))}savePageThumbnail(t,e){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/save-page-thumbnail",{method:"POST",body:JSON.stringify({PageId:t,PageThumbnailData:e})},!0)}))}updatePageTitle(t){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/update-page-title",{method:"POST",body:JSON.stringify(t)},!0)}))}publishAppVersion(t){return a(this,arguments,void 0,(function*(t,e=!1){return yield this.fetchAPI("/api/toolbox/v2/publish-appversion",{method:"POST",body:JSON.stringify({AppVersionId:t,Notify:e})})}))}getPages(){return a(this,void 0,void 0,(function*(){return(yield this.fetchAPI("/api/toolbox/pages/list",{},!0)).SDT_PageCollection}))}getServices(){return a(this,void 0,void 0,(function*(){const t=yield this.fetchAPI("/api/toolbox/services",{},!0);return this.services=t.SDT_ProductServiceCollection,this.services}))}getSupplierForms(t){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI(`/api/toolbox/v2/supplier-forms?Supplierid=${t}`,{},!0)}))}getSinglePage(t){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI(`/api/toolbox/singlepage?Pageid=${t}`)}))}deletePage(t,e){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/V2/delete-page",{method:"POST",body:JSON.stringify({AppVersionId:t,PageId:e})})}))}getPagesService(){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/pages/tree")}))}createNewPage(t,e){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/create-page",{method:"POST",body:JSON.stringify({PageName:t,PageJsonContent:JSON.stringify({})})})}))}updatePage(t){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/update-page",{method:"POST",body:JSON.stringify(t)},!0)}))}updatePagesBatch(t){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/update-pages-batch",{method:"POST",body:JSON.stringify(t)})}))}addPageChild(t,e){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/add-page-children",{method:"POST",body:JSON.stringify({ParentPageId:e,ChildPageId:t})})}))}createDynamicFormPage(t,e){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/create-dynamic-form-page",{method:"POST",body:JSON.stringify({FormId:t,PageName:e})})}))}getLocationTheme(){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/location-theme")}))}updateLocationTheme(t){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/update-location-theme",{method:"POST",body:JSON.stringify({ThemeId:t})})}))}getMediaFiles(){return a(this,void 0,void 0,(function*(){return(yield this.fetchAPI("/api/toolbox/media",{},!0)).SDT_MediaCollection}))}deleteMedia(t){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI(`/api/media/delete?MediaId=${t}`)}))}uploadFile(t,e,n,i){return a(this,void 0,void 0,(function*(){if(!t)throw new Error("Please select a file!");return yield this.fetchAPI("/api/media/upload",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({MediaName:e,MediaImageData:t,MediaSize:n,MediaType:i})},!0)}))}uploadLogo(t){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/media/upload/logo",{method:"POST",body:JSON.stringify({LogoUrl:t})})}))}uploadProfileImage(t){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/media/upload/profile",{method:"POST",body:JSON.stringify({ProfileImageUrl:t})})}))}getContentPageData(t){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI(`/api/productservice?Productserviceid=${t}`,{},!0)}))}updateDescription(t){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/update-service",{method:"POST",body:JSON.stringify(t)})}))}updateContentImage(t){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/update-service",{method:"POST",body:JSON.stringify(t)})}))}deleteContentImage(t){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/delete-service-image",{method:"POST",body:JSON.stringify(t)})}))}getLocationData(){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/get-location",{},!0)}))}updateLocationInfo(t){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/update-location",{method:"POST",body:JSON.stringify(t)})}))}getTrashItems(){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/get-trash",{},!0)}))}restoreTrash(t,e){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/restore-trash",{method:"POST",body:JSON.stringify({Type:t,TrashId:e})})}))}deleteTrashForver(t,e){return a(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/delete-trash",{method:"POST",body:JSON.stringify({Type:t,TrashId:e})})}))}}class s{constructor(t,e,n=5e3){this.closeTimeout=null,this.alertContainer=document.createElement("div"),this.alertContainer.className="tb-alerts-container",this.alertContainer.id="tb-alerts-container",this.alertElement=document.createElement("div"),this.alertElement.className=`tb-alert ${t}`,this.alertElement.style.display="flex",this.alertElement.style.opacity="0",this.alertElement.id=Math.random().toString(36);const i=document.createElement("div");i.className="tb-alert-header";const a=document.createElement("strong");a.textContent=t.charAt(0).toUpperCase()+t.slice(1);const o=document.createElement("span");o.className="tb-alert-close-btn",o.textContent="✖",o.addEventListener("click",(()=>this.close())),i.appendChild(a),i.appendChild(o);const r=document.createElement("p");r.textContent=e,this.alertElement.appendChild(i),this.alertElement.appendChild(r),this.alertContainer.appendChild(this.alertElement),document.body.appendChild(this.alertContainer),setTimeout((()=>this.alertElement.style.opacity="1"),50),this.closeTimeout=window.setTimeout((()=>this.close()),n)}close(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null),this.alertElement.style.opacity="0",setTimeout((()=>this.alertElement.remove()),500)}}class l{constructor(t){this.modalContainer=document.createElement("div"),this.modalContainer.className="popup-modal-link",this.modalContainer.style.display="flex";const e=document.createElement("div");e.className="popup",t.width&&(e.style.width=t.width);const n=document.createElement("div");n.className="popup-header";const i=document.createElement("span");i.textContent=t.title;const a=document.createElement("hr");this.popupBody=document.createElement("div"),this.popupBody.className="popup-body",t.body&&("string"==typeof t.body?this.popupBody.innerHTML=t.body:this.popupBody.appendChild(t.body));const o=this.createCloseButton();n.appendChild(i),n.appendChild(o),e.appendChild(n),e.appendChild(a),e.appendChild(this.popupBody),this.modalContainer.appendChild(e)}createCloseButton(){const t=document.createElement("button");return t.className="close",t.innerHTML='\n            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 21 21">\n                <path id="Icon_material-close" data-name="Icon material-close" d="M28.5,9.615,26.385,7.5,18,15.885,9.615,7.5,7.5,9.615,15.885,18,7.5,26.385,9.615,28.5,18,20.115,26.385,28.5,28.5,26.385,20.115,18Z" transform="translate(-7.5 -7.5)" fill="#6a747f" opacity="0.54"></path>\n            </svg>\n        ',t.addEventListener("click",(()=>this.close())),t}open(t){(t||document.body).appendChild(this.modalContainer)}close(){this.modalContainer.remove()}}var c=function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}))};class d{constructor(){this.themes=[],this.appVersion=globalThis.activeVersion,this.config=e.getInstance()}getActiveVersion(){return c(this,void 0,void 0,(function*(){return globalThis.activeVersion=window.app.currentVersion,globalThis.activeVersion}))}getUpdatedActiveVersion(){return c(this,void 0,void 0,(function*(){const t=new r,e=yield t.getVersion();return globalThis.activeVersion=e.AppVersion,globalThis.activeVersion}))}refreshVersion(){return c(this,void 0,void 0,(function*(){const t=new r,e=yield t.getVersion();globalThis.activeVersion=e.AppVersion}))}getPages(){var t;return(null===(t=globalThis.activeVersion)||void 0===t?void 0:t.Pages)||null}preDefinedPages(){return c(this,void 0,void 0,(function*(){return(this.getPages()||[]).filter((t=>"Maps"==t.PageType||"Map"==t.PageType||"MyActivity"==t.PageType||"Calendar"==t.PageType&&"Home"!==t.PageName))}))}getActiveVersionId(){return c(this,void 0,void 0,(function*(){return window.app.currentVersion.AppVersionId}))}updatePageTitle(t){return c(this,void 0,void 0,(function*(){const e=globalThis.currentPageId;if(globalThis.tileMapper,globalThis.selectedComponent,!e)return;const n=new r,i={AppVersionId:yield this.getActiveVersionId(),PageId:e,PageName:t};if(yield n.updatePageTitle(i)){const n=localStorage.getItem(`data-${e}`);if(n){const i=JSON.parse(n);i.PageName=t,localStorage.setItem(`data-${e}`,JSON.stringify(i)),this.refreshVersion()}}this.refreshVersion()}))}}class h{constructor(t,e){this.button=null,this.pageData=t,this.toolboxService=new r,this.appVersion=new d,t&&(this.pageData=t,this.button=document.createElement("button"),this.button.innerHTML='\n                <svg fill="#4f6ba5" width="60" height="60" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n                    <path d="M19,6 L19,18.5 C19,19.8807119 17.8807119,21 16.5,21 L7.5,21 C6.11928813,21 5,19.8807119 5,18.5 L5,6 L4.5,6 C4.22385763,6 4,5.77614237 4,5.5 C4,5.22385763 4.22385763,5 4.5,5 L9,5 L9,4.5 C9,3.67157288 9.67157288,3 10.5,3 L13.5,3 C14.3284271,3 15,3.67157288 15,4.5 L15,5 L19.5,5 C19.7761424,5 20,5.22385763 20,5.5 C20,5.77614237 19.7761424,6 19.5,6 L19,6 Z M6,6 L6,18.5 C6,19.3284271 6.67157288,20 7.5,20 L16.5,20 C17.3284271,20 18,19.3284271 18,18.5 L18,6 L6,6 Z M14,5 L14,4.5 C14,4.22385763 13.7761424,4 13.5,4 L10.5,4 C10.2238576,4 10,4.22385763 10,4.5 L10,5 L14,5 Z M14,9.5 C14,9.22385763 14.2238576,9 14.5,9 C14.7761424,9 15,9.22385763 15,9.5 L15,16.5 C15,16.7761424 14.7761424,17 14.5,17 C14.2238576,17 14,16.7761424 14,16.5 L14,9.5 Z M9,9.5 C9,9.22385763 9.22385763,9 9.5,9 C9.77614237,9 10,9.22385763 10,9.5 L10,16.5 C10,16.7761424 9.77614237,17 9.5,17 C9.22385763,17 9,16.7761424 9,16.5 L9,9.5 Z"></path>\n                </svg>\n            ',this.button.className="delete-page-icon",this.button.title="Delete Page",this.button.setAttribute("data-id",t.PageId),this.button.addEventListener("click",(t=>this.handleDelete(t))),t.IsPredefined||e.insertBefore(this.button,e.firstChild))}handleDelete(t){t.preventDefault(),t.target.dataset.id;const e=document.createElement("div"),n=document.createElement("div");n.classList.add("popup-body"),n.id="confirmation_modal_message",n.innerText="Are you sure you want to delete this page?";const i=document.createElement("div");i.classList.add("popup-footer");const a=document.createElement("button");a.id="yes_delete",a.classList.add("tb-btn","tb-btn-primary"),a.innerText="Delete";const o=document.createElement("button");o.id="close_popup",o.classList.add("tb-btn","tb-btn-outline"),o.innerText="Cancel",i.appendChild(a),i.appendChild(o),e.appendChild(n),e.appendChild(i);const r=new l({title:"Delete Page",width:"100",body:e});r.open(),o.addEventListener("click",(t=>{r.close()})),a.addEventListener("click",(t=>{this.toolboxService.deletePage(this.appVersion.appVersion.AppVersionId,this.pageData.PageId).then((t=>{t.error.message?new s("error",t.error.message):(r.close(),localStorage.removeItem(`data-${this.pageData.PageId}`),window.app.toolboxApp.editor.init(),(new d).refreshVersion())}))}))}}class u{constructor(t){this.pageId=t}updateTime(){const t=new Date;let e=t.getHours();const n=e>=12?"PM":"AM";return e%=12,e=e||12,`${e}:${t.getMinutes().toString().padStart(2,"0")} ${n}`}}class p{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("header");const t=new u("clock"),e=document.createElement("span");e.id="clock",e.textContent=t.updateTime();const n=document.createElement("span");n.classList.add("icons");const i=document.createElement("i");i.classList.add("fas","fa-signal");const a=document.createElement("i");a.classList.add("fas","fa-wifi");const o=document.createElement("i");o.classList.add("fas","fa-battery"),n.appendChild(i),n.appendChild(a),n.appendChild(o),this.container.appendChild(e),this.container.appendChild(n)}render(t){t.appendChild(this.container)}}class g{constructor(){this.container=document.createElement("div"),this.editor=new Zc,this.init()}init(){this.container.classList.add("home-app-bar");const t=document.createElement("div");t.classList.add("logo-added");const e=document.createElement("img");e.src=this.editor.organisationLogo||"/Resources/ComfortaLogo1.png",e.style.height="35px",t.appendChild(e);const n=document.createElement("div");n.classList.add("profile-section"),n.style.display="flex",n.innerHTML='\n            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="18" viewBox="0 0 19.422 21.363">\n                <path id="Path_1327" data-name="Path 1327" d="M15.711,5a6.8,6.8,0,0,0-3.793,12.442A9.739,9.739,0,0,0,6,26.364H7.942a7.769,7.769,0,1,1,15.537,0h1.942A9.739,9.739,0,0,0,19.5,17.442,6.8,6.8,0,0,0,15.711,5Zm0,1.942A4.855,4.855,0,1,1,10.855,11.8,4.841,4.841,0,0,1,15.711,6.942Z" transform="translate(-6 -5)" fill="#fff"></path>\n            </svg>\n        ',this.container.appendChild(t),this.container.appendChild(n)}render(t){t.appendChild(this.container)}}const f=function(t,e){return t===e||t!=t&&e!=e},m=function(t,e){for(var n=t.length;n--;)if(f(t[n][0],e))return n;return-1};var v=Array.prototype.splice;function b(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}b.prototype.clear=function(){this.__data__=[],this.size=0},b.prototype.delete=function(t){var e=this.__data__,n=m(e,t);return!(n<0||(n==e.length-1?e.pop():v.call(e,n,1),--this.size,0))},b.prototype.get=function(t){var e=this.__data__,n=m(e,t);return n<0?void 0:e[n][1]},b.prototype.has=function(t){return m(this.__data__,t)>-1},b.prototype.set=function(t,e){var n=this.__data__,i=m(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this};const y=b,w="object"==typeof global&&global&&global.Object===Object&&global;var C="object"==typeof self&&self&&self.Object===Object&&self;const x=w||C||Function("return this")(),T=x.Symbol;var I=Object.prototype,A=I.hasOwnProperty,E=I.toString,S=T?T.toStringTag:void 0;var L=Object.prototype.toString;var M=T?T.toStringTag:void 0;const N=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":M&&M in Object(t)?function(t){var e=A.call(t,S),n=t[S];try{t[S]=void 0;var i=!0}catch(t){}var a=E.call(t);return i&&(e?t[S]=n:delete t[S]),a}(t):function(t){return L.call(t)}(t)},k=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},P=function(t){if(!k(t))return!1;var e=N(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},_=x["__core-js_shared__"];var $,O=($=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||""))?"Symbol(src)_1."+$:"";var j=Function.prototype.toString;const B=function(t){if(null!=t){try{return j.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var q=/^\[object .+?Constructor\]$/,D=Function.prototype,H=Object.prototype,R=D.toString,V=H.hasOwnProperty,U=RegExp("^"+R.call(V).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const F=function(t){return!(!k(t)||(e=t,O&&O in e))&&(P(t)?U:q).test(B(t));var e},z=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return F(n)?n:void 0},Z=z(x,"Map"),W=z(Object,"create");var G=Object.prototype.hasOwnProperty;var J=Object.prototype.hasOwnProperty;function K(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}K.prototype.clear=function(){this.__data__=W?W(null):{},this.size=0},K.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},K.prototype.get=function(t){var e=this.__data__;if(W){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return G.call(e,t)?e[t]:void 0},K.prototype.has=function(t){var e=this.__data__;return W?void 0!==e[t]:J.call(e,t)},K.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=W&&void 0===e?"__lodash_hash_undefined__":e,this};const Y=K,X=function(t,e){var n,i,a=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?a["string"==typeof e?"string":"hash"]:a.map};function Q(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Q.prototype.clear=function(){this.size=0,this.__data__={hash:new Y,map:new(Z||y),string:new Y}},Q.prototype.delete=function(t){var e=X(this,t).delete(t);return this.size-=e?1:0,e},Q.prototype.get=function(t){return X(this,t).get(t)},Q.prototype.has=function(t){return X(this,t).has(t)},Q.prototype.set=function(t,e){var n=X(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this};const tt=Q;function et(t){var e=this.__data__=new y(t);this.size=e.size}et.prototype.clear=function(){this.__data__=new y,this.size=0},et.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},et.prototype.get=function(t){return this.__data__.get(t)},et.prototype.has=function(t){return this.__data__.has(t)},et.prototype.set=function(t,e){var n=this.__data__;if(n instanceof y){var i=n.__data__;if(!Z||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new tt(i)}return n.set(t,e),this.size=n.size,this};const nt=et,it=function(){try{var t=z(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),at=function(t,e,n){"__proto__"==e&&it?it(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},ot=function(t,e,n){(void 0!==n&&!f(t[e],n)||void 0===n&&!(e in t))&&at(t,e,n)},rt=function(t,e,n){for(var i=-1,a=Object(t),o=n(t),r=o.length;r--;){var s=o[++i];if(!1===e(a[s],s,a))break}return t};var st="object"==typeof exports&&exports&&!exports.nodeType&&exports,lt=st&&"object"==typeof module&&module&&!module.nodeType&&module,ct=lt&&lt.exports===st?x.Buffer:void 0,dt=ct?ct.allocUnsafe:void 0;const ht=function(t,e){if(e)return t.slice();var n=t.length,i=dt?dt(n):new t.constructor(n);return t.copy(i),i},ut=x.Uint8Array,pt=function(t){var e=new t.constructor(t.byteLength);return new ut(e).set(new ut(t)),e},gt=function(t,e){var n=e?pt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},ft=function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e};var mt=Object.create;const vt=function(){function t(){}return function(e){if(!k(e))return{};if(mt)return mt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),bt=function(t,e){return function(n){return t(e(n))}},yt=bt(Object.getPrototypeOf,Object);var wt=Object.prototype;const Ct=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||wt)},xt=function(t){return"function"!=typeof t.constructor||Ct(t)?{}:vt(yt(t))},Tt=function(t){return null!=t&&"object"==typeof t},It=function(t){return Tt(t)&&"[object Arguments]"==N(t)};var At=Object.prototype,Et=At.hasOwnProperty,St=At.propertyIsEnumerable;const Lt=It(function(){return arguments}())?It:function(t){return Tt(t)&&Et.call(t,"callee")&&!St.call(t,"callee")},Mt=Array.isArray,Nt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},kt=function(t){return null!=t&&Nt(t.length)&&!P(t)};var Pt="object"==typeof exports&&exports&&!exports.nodeType&&exports,_t=Pt&&"object"==typeof module&&module&&!module.nodeType&&module,$t=_t&&_t.exports===Pt?x.Buffer:void 0;const Ot=($t?$t.isBuffer:void 0)||function(){return!1};var jt=Function.prototype,Bt=Object.prototype,qt=jt.toString,Dt=Bt.hasOwnProperty,Ht=qt.call(Object);var Rt={};Rt["[object Float32Array]"]=Rt["[object Float64Array]"]=Rt["[object Int8Array]"]=Rt["[object Int16Array]"]=Rt["[object Int32Array]"]=Rt["[object Uint8Array]"]=Rt["[object Uint8ClampedArray]"]=Rt["[object Uint16Array]"]=Rt["[object Uint32Array]"]=!0,Rt["[object Arguments]"]=Rt["[object Array]"]=Rt["[object ArrayBuffer]"]=Rt["[object Boolean]"]=Rt["[object DataView]"]=Rt["[object Date]"]=Rt["[object Error]"]=Rt["[object Function]"]=Rt["[object Map]"]=Rt["[object Number]"]=Rt["[object Object]"]=Rt["[object RegExp]"]=Rt["[object Set]"]=Rt["[object String]"]=Rt["[object WeakMap]"]=!1;const Vt=function(t){return function(e){return t(e)}};var Ut="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ft=Ut&&"object"==typeof module&&module&&!module.nodeType&&module,zt=Ft&&Ft.exports===Ut&&w.process;const Zt=function(){try{return Ft&&Ft.require&&Ft.require("util").types||zt&&zt.binding&&zt.binding("util")}catch(t){}}();var Wt=Zt&&Zt.isTypedArray;const Gt=Wt?Vt(Wt):function(t){return Tt(t)&&Nt(t.length)&&!!Rt[N(t)]},Jt=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};var Kt=Object.prototype.hasOwnProperty;const Yt=function(t,e,n){var i=t[e];Kt.call(t,e)&&f(i,n)&&(void 0!==n||e in t)||at(t,e,n)},Xt=function(t,e,n,i){var a=!n;n||(n={});for(var o=-1,r=e.length;++o<r;){var s=e[o],l=i?i(n[s],t[s],s,n,t):void 0;void 0===l&&(l=t[s]),a?at(n,s,l):Yt(n,s,l)}return n};var Qt=/^(?:0|[1-9]\d*)$/;const te=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Qt.test(t))&&t>-1&&t%1==0&&t<e};var ee=Object.prototype.hasOwnProperty;const ne=function(t,e){var n=Mt(t),i=!n&&Lt(t),a=!n&&!i&&Ot(t),o=!n&&!i&&!a&&Gt(t),r=n||i||a||o,s=r?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],l=s.length;for(var c in t)!e&&!ee.call(t,c)||r&&("length"==c||a&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||te(c,l))||s.push(c);return s};var ie=Object.prototype.hasOwnProperty;const ae=function(t){if(!k(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=Ct(t),n=[];for(var i in t)("constructor"!=i||!e&&ie.call(t,i))&&n.push(i);return n},oe=function(t){return kt(t)?ne(t,!0):ae(t)},re=function(t,e,n,i,a,o,r){var s,l=Jt(t,n),c=Jt(e,n),d=r.get(c);if(d)ot(t,n,d);else{var h=o?o(l,c,n+"",t,e,r):void 0,u=void 0===h;if(u){var p=Mt(c),g=!p&&Ot(c),f=!p&&!g&&Gt(c);h=c,p||g||f?Mt(l)?h=l:Tt(s=l)&&kt(s)?h=ft(l):g?(u=!1,h=ht(c,!0)):f?(u=!1,h=gt(c,!0)):h=[]:function(t){if(!Tt(t)||"[object Object]"!=N(t))return!1;var e=yt(t);if(null===e)return!0;var n=Dt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&qt.call(n)==Ht}(c)||Lt(c)?(h=l,Lt(l)?h=function(t){return Xt(t,oe(t))}(l):k(l)&&!P(l)||(h=xt(c))):u=!1}u&&(r.set(c,h),a(h,c,i,o,r),r.delete(c)),ot(t,n,h)}},se=function t(e,n,i,a,o){e!==n&&rt(n,(function(r,s){if(o||(o=new nt),k(r))re(e,n,s,i,t,a,o);else{var l=a?a(Jt(e,s),r,s+"",e,n,o):void 0;void 0===l&&(l=r),ot(e,s,l)}}),oe)},le=function(t){return t};var ce=Math.max;const de=it?function(t,e){return it(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:le;var he=Date.now;const ue=(pe=de,ge=0,fe=0,function(){var t=he(),e=16-(t-fe);if(fe=t,e>0){if(++ge>=800)return arguments[0]}else ge=0;return pe.apply(void 0,arguments)});var pe,ge,fe;const me=function(t,e){return ue(function(t,e,n){return e=ce(void 0===e?t.length-1:e,0),function(){for(var i=arguments,a=-1,o=ce(i.length-e,0),r=Array(o);++a<o;)r[a]=i[e+a];a=-1;for(var s=Array(e+1);++a<e;)s[a]=i[a];return s[e]=n(r),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,s)}}(t,e,le),t+"")},ve=(be=function(t,e,n){se(t,e,n)},me((function(t,e){var n=-1,i=e.length,a=i>1?e[i-1]:void 0,o=i>2?e[2]:void 0;for(a=be.length>3&&"function"==typeof a?(i--,a):void 0,o&&function(t,e,n){if(!k(n))return!1;var i=typeof e;return!!("number"==i?kt(n)&&te(e,n.length):"string"==i&&e in n)&&f(n[e],t)}(e[0],e[1],o)&&(a=i<3?void 0:a,i=1),t=Object(t);++n<i;){var r=e[n];r&&be(t,r,n)}return t})));var be,ye=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(ye||{});class we{constructor(t,e,n={}){this.attrName=t,this.keyName=e;const i=ye.TYPE&ye.ATTRIBUTE;this.scope=null!=n.scope?n.scope&ye.LEVEL|i:ye.ATTRIBUTE,null!=n.whitelist&&(this.whitelist=n.whitelist)}static keys(t){return Array.from(t.attributes).map((t=>t.name))}add(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)}canAdd(t,e){return null==this.whitelist||("string"==typeof e?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1)}remove(t){t.removeAttribute(this.keyName)}value(t){const e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""}}class Ce extends Error{constructor(t){super(t="[Parchment] "+t),this.message=t,this.name=this.constructor.name}}const xe=class t{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,e=!1){if(null==t)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(e){let n=null;try{n=t.parentNode}catch{return null}return this.find(n,e)}return null}create(e,n,i){const a=this.query(n);if(null==a)throw new Ce(`Unable to create ${n} blot`);const o=a,r=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:o.create(i),s=new o(e,r,i);return t.blots.set(s.domNode,s),s}find(e,n=!1){return t.find(e,n)}query(t,e=ye.ANY){let n;return"string"==typeof t?n=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?n=this.types.text:"number"==typeof t?t&ye.LEVEL&ye.BLOCK?n=this.types.block:t&ye.LEVEL&ye.INLINE&&(n=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some((t=>(n=this.classes[t],!!n))),n=n||this.tags[t.tagName]),null==n?null:"scope"in n&&e&ye.LEVEL&n.scope&&e&ye.TYPE&n.scope?n:null}register(...t){return t.map((t=>{const e="blotName"in t,n="attrName"in t;if(!e&&!n)throw new Ce("Invalid definition");if(e&&"abstract"===t.blotName)throw new Ce("Cannot register abstract class");const i=e?t.blotName:n?t.attrName:void 0;return this.types[i]=t,n?"string"==typeof t.keyName&&(this.attributes[t.keyName]=t):e&&(t.className&&(this.classes[t.className]=t),t.tagName&&(Array.isArray(t.tagName)?t.tagName=t.tagName.map((t=>t.toUpperCase())):t.tagName=t.tagName.toUpperCase(),(Array.isArray(t.tagName)?t.tagName:[t.tagName]).forEach((e=>{(null==this.tags[e]||null==t.className)&&(this.tags[e]=t)})))),t}))}};xe.blots=new WeakMap;let Te=xe;function Ie(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter((t=>0===t.indexOf(`${e}-`)))}const Ae=class extends we{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map((t=>t.split("-").slice(0,-1).join("-")))}add(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add(`${this.keyName}-${e}`),!0)}remove(t){Ie(t,this.keyName).forEach((e=>{t.classList.remove(e)})),0===t.classList.length&&t.removeAttribute("class")}value(t){const e=(Ie(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""}};function Ee(t){const e=t.split("-"),n=e.slice(1).map((t=>t[0].toUpperCase()+t.slice(1))).join("");return e[0]+n}const Se=class extends we{static keys(t){return(t.getAttribute("style")||"").split(";").map((t=>t.split(":")[0].trim()))}add(t,e){return!!this.canAdd(t,e)&&(t.style[Ee(this.keyName)]=e,!0)}remove(t){t.style[Ee(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){const e=t.style[Ee(this.keyName)];return this.canAdd(t,e)?e:""}},Le=class{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=Te.find(this.domNode);if(null==t)return;const e=we.keys(this.domNode),n=Ae.keys(this.domNode),i=Se.keys(this.domNode);e.concat(n).concat(i).forEach((e=>{const n=t.scroll.query(e,ye.ATTRIBUTE);n instanceof we&&(this.attributes[n.attrName]=n)}))}copy(t){Object.keys(this.attributes).forEach((e=>{const n=this.attributes[e].value(this.domNode);t.format(e,n)}))}move(t){this.copy(t),Object.keys(this.attributes).forEach((t=>{this.attributes[t].remove(this.domNode)})),this.attributes={}}values(){return Object.keys(this.attributes).reduce(((t,e)=>(t[e]=this.attributes[e].value(this.domNode),t)),{})}},Me=class{constructor(t,e){this.scroll=t,this.domNode=e,Te.blots.set(e,this),this.prev=null,this.next=null}static create(t){if(null==this.tagName)throw new Ce("Blot definition missing tagName");let e,n;return Array.isArray(this.tagName)?("string"==typeof t?(n=t.toUpperCase(),parseInt(n,10).toString()===n&&(n=parseInt(n,10))):"number"==typeof t&&(n=t),e="number"==typeof n?document.createElement(this.tagName[n-1]):n&&this.tagName.indexOf(n)>-1?document.createElement(n):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){const t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){null!=this.parent&&this.parent.removeChild(this),Te.blots.delete(this.domNode)}deleteAt(t,e){this.isolate(t,e).remove()}formatAt(t,e,n,i){const a=this.isolate(t,e);if(null!=this.scroll.query(n,ye.BLOT)&&i)a.wrap(n,i);else if(null!=this.scroll.query(n,ye.ATTRIBUTE)){const t=this.scroll.create(this.statics.scope);a.wrap(t),t.format(n,i)}}insertAt(t,e,n){const i=null==n?this.scroll.create("text",e):this.scroll.create(e,n),a=this.split(t);this.parent.insertBefore(i,a||void 0)}isolate(t,e){const n=this.split(t);if(null==n)throw new Error("Attempt to isolate at end");return n.split(e),n}length(){return 1}offset(t=this.parent){return null==this.parent||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,e){const n="string"==typeof t?this.scroll.create(t,e):t;return null!=this.parent&&(this.parent.insertBefore(n,this.next||void 0),this.remove()),n}split(t,e){return 0===t?this:this.next}update(t,e){}wrap(t,e){const n="string"==typeof t?this.scroll.create(t,e):t;if(null!=this.parent&&this.parent.insertBefore(n,this.next||void 0),"function"!=typeof n.appendChild)throw new Ce(`Cannot wrap ${t}`);return n.appendChild(this),n}};Me.blotName="abstract";let Ne=Me;const ke=class extends Ne{static value(t){return!0}index(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(t,e){let n=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(n+=1),[this.parent.domNode,n]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};ke.scope=ye.INLINE_BLOT;const Pe=ke;class _e{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){const e=t.slice(1);this.append(...e)}}at(t){const e=this.iterator();let n=e();for(;n&&t>0;)t-=1,n=e();return n}contains(t){const e=this.iterator();let n=e();for(;n;){if(n===t)return!0;n=e()}return!1}indexOf(t){const e=this.iterator();let n=e(),i=0;for(;n;){if(n===t)return i;i+=1,n=e()}return-1}insertBefore(t,e){null!=t&&(this.remove(t),t.next=e,null!=e?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let e=0,n=this.head;for(;null!=n;){if(n===t)return e;e+=n.length(),n=n.next}return-1}remove(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const e=t;return null!=t&&(t=t.next),e}}find(t,e=!1){const n=this.iterator();let i=n();for(;i;){const a=i.length();if(t<a||e&&t===a&&(null==i.next||0!==i.next.length()))return[i,t];t-=a,i=n()}return[null,0]}forEach(t){const e=this.iterator();let n=e();for(;n;)t(n),n=e()}forEachAt(t,e,n){if(e<=0)return;const[i,a]=this.find(t);let o=t-a;const r=this.iterator(i);let s=r();for(;s&&o<t+e;){const i=s.length();t>o?n(s,t-o,Math.min(e,o+i-t)):n(s,0,Math.min(i,t+e-o)),o+=i,s=r()}}map(t){return this.reduce(((e,n)=>(e.push(t(n)),e)),[])}reduce(t,e){const n=this.iterator();let i=n();for(;i;)e=t(e,i),i=n();return e}}function $e(t,e){const n=e.find(t);if(n)return n;try{return e.create(t)}catch{const n=e.create(ye.INLINE);return Array.from(t.childNodes).forEach((t=>{n.domNode.appendChild(t)})),t.parentNode&&t.parentNode.replaceChild(n.domNode,t),n.attach(),n}}const Oe=class t extends Ne{constructor(t,e){super(t,e),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach((t=>{t.attach()}))}attachUI(e){null!=this.uiNode&&this.uiNode.remove(),this.uiNode=e,t.uiClass&&this.uiNode.classList.add(t.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new _e,Array.from(this.domNode.childNodes).filter((t=>t!==this.uiNode)).reverse().forEach((t=>{try{const e=$e(t,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(t){if(t instanceof Ce)return;throw t}}))}deleteAt(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,((t,e,n)=>{t.deleteAt(e,n)}))}descendant(e,n=0){const[i,a]=this.children.find(n);return null==e.blotName&&e(i)||null!=e.blotName&&i instanceof e?[i,a]:i instanceof t?i.descendant(e,a):[null,-1]}descendants(e,n=0,i=Number.MAX_VALUE){let a=[],o=i;return this.children.forEachAt(n,i,((n,i,r)=>{(null==e.blotName&&e(n)||null!=e.blotName&&n instanceof e)&&a.push(n),n instanceof t&&(a=a.concat(n.descendants(e,i,o))),o-=r})),a}detach(){this.children.forEach((t=>{t.detach()})),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach((n=>{e||this.statics.allowedChildren.some((t=>n instanceof t))||(n.statics.scope===ye.BLOCK_BLOT?(null!=n.next&&this.splitAfter(n),null!=n.prev&&this.splitAfter(n.prev),n.parent.unwrap(),e=!0):n instanceof t?n.unwrap():n.remove())}))}formatAt(t,e,n,i){this.children.forEachAt(t,e,((t,e,a)=>{t.formatAt(e,a,n,i)}))}insertAt(t,e,n){const[i,a]=this.children.find(t);if(i)i.insertAt(a,e,n);else{const t=null==n?this.scroll.create("text",e):this.scroll.create(e,n);this.appendChild(t)}}insertBefore(t,e){null!=t.parent&&t.parent.children.remove(t);let n=null;this.children.insertBefore(t,e||null),t.parent=this,null!=e&&(n=e.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==n)&&this.domNode.insertBefore(t.domNode,n),t.attach()}length(){return this.children.reduce(((t,e)=>t+e.length()),0)}moveChildren(t,e){this.children.forEach((n=>{t.insertBefore(n,e)}))}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),null!=this.uiNode&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),0===this.children.length)if(null!=this.statics.defaultChild){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(e,n=!1){const[i,a]=this.children.find(e,n),o=[[this,e]];return i instanceof t?o.concat(i.path(a,n)):(null!=i&&o.push([i,a]),o)}removeChild(t){this.children.remove(t)}replaceWith(e,n){const i="string"==typeof e?this.scroll.create(e,n):e;return i instanceof t&&this.moveChildren(i),super.replaceWith(i)}split(t,e=!1){if(!e){if(0===t)return this;if(t===this.length())return this.next}const n=this.clone();return this.parent&&this.parent.insertBefore(n,this.next||void 0),this.children.forEachAt(t,this.length(),((t,i,a)=>{const o=t.split(i,e);null!=o&&n.appendChild(o)})),n}splitAfter(t){const e=this.clone();for(;null!=t.next;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,e){const n=[],i=[];t.forEach((t=>{t.target===this.domNode&&"childList"===t.type&&(n.push(...t.addedNodes),i.push(...t.removedNodes))})),i.forEach((t=>{if(null!=t.parentNode&&"IFRAME"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const e=this.scroll.find(t);null!=e&&(null==e.domNode.parentNode||e.domNode.parentNode===this.domNode)&&e.detach()})),n.filter((t=>t.parentNode===this.domNode&&t!==this.uiNode)).sort(((t,e)=>t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1)).forEach((t=>{let e=null;null!=t.nextSibling&&(e=this.scroll.find(t.nextSibling));const n=$e(t,this.scroll);(n.next!==e||null==n.next)&&(null!=n.parent&&n.parent.removeChild(this),this.insertBefore(n,e||void 0))})),this.enforceAllowedChildren()}};Oe.uiClass="";const je=Oe,Be=class t extends je{static create(t){return super.create(t)}static formats(e,n){const i=n.query(t.blotName);if(null==i||e.tagName!==i.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new Le(this.domNode)}format(e,n){if(e!==this.statics.blotName||n){const t=this.scroll.query(e,ye.INLINE);if(null==t)return;t instanceof we?this.attributes.attribute(t,n):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n)}else this.children.forEach((e=>{e instanceof t||(e=e.wrap(t.blotName,!0)),this.attributes.copy(e)})),this.unwrap()}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t}formatAt(t,e,n,i){null!=this.formats()[n]||this.scroll.query(n,ye.ATTRIBUTE)?this.isolate(t,e).format(n,i):super.formatAt(t,e,n,i)}optimize(e){super.optimize(e);const n=this.formats();if(0===Object.keys(n).length)return this.unwrap();const i=this.next;i instanceof t&&i.prev===this&&function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}(n,i.formats())&&(i.moveChildren(this),i.remove())}replaceWith(t,e){const n=super.replaceWith(t,e);return this.attributes.copy(n),n}update(t,e){super.update(t,e),t.some((t=>t.target===this.domNode&&"attributes"===t.type))&&this.attributes.build()}wrap(e,n){const i=super.wrap(e,n);return i instanceof t&&this.attributes.move(i),i}};Be.allowedChildren=[Be,Pe],Be.blotName="inline",Be.scope=ye.INLINE_BLOT,Be.tagName="SPAN";const qe=Be,De=class t extends je{static create(t){return super.create(t)}static formats(e,n){const i=n.query(t.blotName);if(null==i||e.tagName!==i.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new Le(this.domNode)}format(e,n){const i=this.scroll.query(e,ye.BLOCK);null!=i&&(i instanceof we?this.attributes.attribute(i,n):e!==this.statics.blotName||n?n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n):this.replaceWith(t.blotName))}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t}formatAt(t,e,n,i){null!=this.scroll.query(n,ye.BLOCK)?this.format(n,i):super.formatAt(t,e,n,i)}insertAt(t,e,n){if(null==n||null!=this.scroll.query(e,ye.INLINE))super.insertAt(t,e,n);else{const i=this.split(t);if(null==i)throw new Error("Attempt to insertAt after block boundaries");{const t=this.scroll.create(e,n);i.parent.insertBefore(t,i)}}}replaceWith(t,e){const n=super.replaceWith(t,e);return this.attributes.copy(n),n}update(t,e){super.update(t,e),t.some((t=>t.target===this.domNode&&"attributes"===t.type))&&this.attributes.build()}};De.blotName="block",De.scope=ye.BLOCK_BLOT,De.tagName="P",De.allowedChildren=[qe,De,Pe];const He=De,Re=class extends je{checkMerge(){return null!==this.next&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,e){super.deleteAt(t,e),this.enforceAllowedChildren()}formatAt(t,e,n,i){super.formatAt(t,e,n,i),this.enforceAllowedChildren()}insertAt(t,e,n){super.insertAt(t,e,n),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&null!=this.next&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Re.blotName="container",Re.scope=ye.BLOCK_BLOT;const Ve=Re,Ue=class extends Pe{static formats(t,e){}format(t,e){super.formatAt(0,this.length(),t,e)}formatAt(t,e,n,i){0===t&&e===this.length()?this.format(n,i):super.formatAt(t,e,n,i)}formats(){return this.statics.formats(this.domNode,this.scroll)}},Fe={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},ze=class extends je{constructor(t,e){super(null,e),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver((t=>{this.update(t)})),this.observer.observe(this.domNode,Fe),this.attach()}create(t,e){return this.registry.create(this,t,e)}find(t,e=!1){const n=this.registry.find(t,e);return n?n.scroll===this?n:e?this.find(n.scroll.domNode.parentNode,!0):null:null}query(t,e=ye.ANY){return this.registry.query(t,e)}register(...t){return this.registry.register(...t)}build(){null!=this.scroll&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,e){this.update(),0===t&&e===this.length()?this.children.forEach((t=>{t.remove()})):super.deleteAt(t,e)}formatAt(t,e,n,i){this.update(),super.formatAt(t,e,n,i)}insertAt(t,e,n){this.update(),super.insertAt(t,e,n)}optimize(t=[],e={}){super.optimize(e);const n=e.mutationsMap||new WeakMap;let i=Array.from(this.observer.takeRecords());for(;i.length>0;)t.push(i.pop());const a=(t,e=!0)=>{null==t||t===this||null!=t.domNode.parentNode&&(n.has(t.domNode)||n.set(t.domNode,[]),e&&a(t.parent))},o=t=>{n.has(t.domNode)&&(t instanceof je&&t.children.forEach(o),n.delete(t.domNode),t.optimize(e))};let r=t;for(let e=0;r.length>0;e+=1){if(e>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(r.forEach((t=>{const e=this.find(t.target,!0);null!=e&&(e.domNode===t.target&&("childList"===t.type?(a(this.find(t.previousSibling,!1)),Array.from(t.addedNodes).forEach((t=>{const e=this.find(t,!1);a(e,!1),e instanceof je&&e.children.forEach((t=>{a(t,!1)}))}))):"attributes"===t.type&&a(e.prev)),a(e))})),this.children.forEach(o),r=Array.from(this.observer.takeRecords()),i=r.slice();i.length>0;)t.push(i.pop())}}update(t,e={}){t=t||this.observer.takeRecords();const n=new WeakMap;t.map((t=>{const e=this.find(t.target,!0);return null==e?null:n.has(e.domNode)?(n.get(e.domNode).push(t),null):(n.set(e.domNode,[t]),e)})).forEach((t=>{null!=t&&t!==this&&n.has(t.domNode)&&t.update(n.get(t.domNode)||[],e)})),e.mutationsMap=n,n.has(this.domNode)&&super.update(n.get(this.domNode),e),this.optimize(t,e)}};ze.blotName="scroll",ze.defaultChild=He,ze.allowedChildren=[He,Ve],ze.scope=ye.BLOCK_BLOT,ze.tagName="DIV";const Ze=ze,We=class t extends Pe{static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,e){super(t,e),this.text=this.statics.value(this.domNode)}deleteAt(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)}index(t,e){return this.domNode===t?e:-1}insertAt(t,e,n){null==n?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,e,n)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,e=!1){return[this.domNode,t]}split(t,e=!1){if(!e){if(0===t)return this;if(t===this.length())return this.next}const n=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(n,this.next||void 0),this.text=this.statics.value(this.domNode),n}update(t,e){t.some((t=>"characterData"===t.type&&t.target===this.domNode))&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};We.blotName="text",We.scope=ye.INLINE_BLOT;const Ge=We;var Je=n(2660);const Ke=bt(Object.keys,Object);var Ye=Object.prototype.hasOwnProperty;const Xe=function(t){return kt(t)?ne(t):function(t){if(!Ct(t))return Ke(t);var e=[];for(var n in Object(t))Ye.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)},Qe=function(){return[]};var tn=Object.prototype.propertyIsEnumerable,en=Object.getOwnPropertySymbols;const nn=en?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,i=null==t?0:t.length,a=0,o=[];++n<i;){var r=t[n];e(r,n,t)&&(o[a++]=r)}return o}(en(t),(function(e){return tn.call(t,e)})))}:Qe,an=function(t,e){for(var n=-1,i=e.length,a=t.length;++n<i;)t[a+n]=e[n];return t},on=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)an(e,nn(t)),t=yt(t);return e}:Qe,rn=function(t,e,n){var i=e(t);return Mt(t)?i:an(i,n(t))},sn=function(t){return rn(t,Xe,nn)},ln=function(t){return rn(t,oe,on)},cn=z(x,"DataView"),dn=z(x,"Promise"),hn=z(x,"Set"),un=z(x,"WeakMap");var pn="[object Map]",gn="[object Promise]",fn="[object Set]",mn="[object WeakMap]",vn="[object DataView]",bn=B(cn),yn=B(Z),wn=B(dn),Cn=B(hn),xn=B(un),Tn=N;(cn&&Tn(new cn(new ArrayBuffer(1)))!=vn||Z&&Tn(new Z)!=pn||dn&&Tn(dn.resolve())!=gn||hn&&Tn(new hn)!=fn||un&&Tn(new un)!=mn)&&(Tn=function(t){var e=N(t),n="[object Object]"==e?t.constructor:void 0,i=n?B(n):"";if(i)switch(i){case bn:return vn;case yn:return pn;case wn:return gn;case Cn:return fn;case xn:return mn}return e});const In=Tn;var An=Object.prototype.hasOwnProperty;var En=/\w*$/;var Sn=T?T.prototype:void 0,Ln=Sn?Sn.valueOf:void 0;const Mn=function(t,e,n){var i,a,o,r=t.constructor;switch(e){case"[object ArrayBuffer]":return pt(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return function(t,e){var n=e?pt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return gt(t,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return(o=new(a=t).constructor(a.source,En.exec(a))).lastIndex=a.lastIndex,o;case"[object Symbol]":return i=t,Ln?Object(Ln.call(i)):{}}};var Nn=Zt&&Zt.isMap;const kn=Nn?Vt(Nn):function(t){return Tt(t)&&"[object Map]"==In(t)};var Pn=Zt&&Zt.isSet;const _n=Pn?Vt(Pn):function(t){return Tt(t)&&"[object Set]"==In(t)};var $n="[object Arguments]",On="[object Function]",jn="[object Object]",Bn={};Bn[$n]=Bn["[object Array]"]=Bn["[object ArrayBuffer]"]=Bn["[object DataView]"]=Bn["[object Boolean]"]=Bn["[object Date]"]=Bn["[object Float32Array]"]=Bn["[object Float64Array]"]=Bn["[object Int8Array]"]=Bn["[object Int16Array]"]=Bn["[object Int32Array]"]=Bn["[object Map]"]=Bn["[object Number]"]=Bn[jn]=Bn["[object RegExp]"]=Bn["[object Set]"]=Bn["[object String]"]=Bn["[object Symbol]"]=Bn["[object Uint8Array]"]=Bn["[object Uint8ClampedArray]"]=Bn["[object Uint16Array]"]=Bn["[object Uint32Array]"]=!0,Bn["[object Error]"]=Bn[On]=Bn["[object WeakMap]"]=!1;const qn=function t(e,n,i,a,o,r){var s,l=1&n,c=2&n,d=4&n;if(i&&(s=o?i(e,a,o,r):i(e)),void 0!==s)return s;if(!k(e))return e;var h=Mt(e);if(h){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&An.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(e),!l)return ft(e,s)}else{var u=In(e),p=u==On||"[object GeneratorFunction]"==u;if(Ot(e))return ht(e,l);if(u==jn||u==$n||p&&!o){if(s=c||p?{}:xt(e),!l)return c?function(t,e){return Xt(t,on(t),e)}(e,function(t,e){return t&&Xt(e,oe(e),t)}(s,e)):function(t,e){return Xt(t,nn(t),e)}(e,function(t,e){return t&&Xt(e,Xe(e),t)}(s,e))}else{if(!Bn[u])return o?e:{};s=Mn(e,u,l)}}r||(r=new nt);var g=r.get(e);if(g)return g;r.set(e,s),_n(e)?e.forEach((function(a){s.add(t(a,n,i,a,e,r))})):kn(e)&&e.forEach((function(a,o){s.set(o,t(a,n,i,o,e,r))}));var f=h?void 0:(d?c?ln:sn:c?oe:Xe)(e);return function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););}(f||e,(function(a,o){f&&(a=e[o=a]),Yt(s,o,t(a,n,i,o,e,r))})),s},Dn=function(t){return qn(t,5)};function Hn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new tt;++e<n;)this.add(t[e])}Hn.prototype.add=Hn.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Hn.prototype.has=function(t){return this.__data__.has(t)};const Rn=Hn,Vn=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1},Un=function(t,e,n,i,a,o){var r=1&n,s=t.length,l=e.length;if(s!=l&&!(r&&l>s))return!1;var c=o.get(t),d=o.get(e);if(c&&d)return c==e&&d==t;var h=-1,u=!0,p=2&n?new Rn:void 0;for(o.set(t,e),o.set(e,t);++h<s;){var g=t[h],f=e[h];if(i)var m=r?i(f,g,h,e,t,o):i(g,f,h,t,e,o);if(void 0!==m){if(m)continue;u=!1;break}if(p){if(!Vn(e,(function(t,e){if(r=e,!p.has(r)&&(g===t||a(g,t,n,i,o)))return p.push(e);var r}))){u=!1;break}}else if(g!==f&&!a(g,f,n,i,o)){u=!1;break}}return o.delete(t),o.delete(e),u},Fn=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n},zn=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n};var Zn=T?T.prototype:void 0,Wn=Zn?Zn.valueOf:void 0;var Gn=Object.prototype.hasOwnProperty;var Jn="[object Arguments]",Kn="[object Array]",Yn="[object Object]",Xn=Object.prototype.hasOwnProperty;const Qn=function(t,e,n,i,a,o){var r=Mt(t),s=Mt(e),l=r?Kn:In(t),c=s?Kn:In(e),d=(l=l==Jn?Yn:l)==Yn,h=(c=c==Jn?Yn:c)==Yn,u=l==c;if(u&&Ot(t)){if(!Ot(e))return!1;r=!0,d=!1}if(u&&!d)return o||(o=new nt),r||Gt(t)?Un(t,e,n,i,a,o):function(t,e,n,i,a,o,r){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new ut(t),new ut(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return f(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=Fn;case"[object Set]":var l=1&i;if(s||(s=zn),t.size!=e.size&&!l)return!1;var c=r.get(t);if(c)return c==e;i|=2,r.set(t,e);var d=Un(s(t),s(e),i,a,o,r);return r.delete(t),d;case"[object Symbol]":if(Wn)return Wn.call(t)==Wn.call(e)}return!1}(t,e,l,n,i,a,o);if(!(1&n)){var p=d&&Xn.call(t,"__wrapped__"),g=h&&Xn.call(e,"__wrapped__");if(p||g){var m=p?t.value():t,v=g?e.value():e;return o||(o=new nt),a(m,v,n,i,o)}}return!!u&&(o||(o=new nt),function(t,e,n,i,a,o){var r=1&n,s=sn(t),l=s.length;if(l!=sn(e).length&&!r)return!1;for(var c=l;c--;){var d=s[c];if(!(r?d in e:Gn.call(e,d)))return!1}var h=o.get(t),u=o.get(e);if(h&&u)return h==e&&u==t;var p=!0;o.set(t,e),o.set(e,t);for(var g=r;++c<l;){var f=t[d=s[c]],m=e[d];if(i)var v=r?i(m,f,d,e,t,o):i(f,m,d,t,e,o);if(!(void 0===v?f===m||a(f,m,n,i,o):v)){p=!1;break}g||(g="constructor"==d)}if(p&&!g){var b=t.constructor,y=e.constructor;b==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y||(p=!1)}return o.delete(t),o.delete(e),p}(t,e,n,i,a,o))},ti=function t(e,n,i,a,o){return e===n||(null==e||null==n||!Tt(e)&&!Tt(n)?e!=e&&n!=n:Qn(e,n,i,a,t,o))},ei=function(t,e){return ti(t,e)};class ni extends Ue{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}ni.blotName="break",ni.tagName="BR";const ii=ni;class ai extends Ge{}const oi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function ri(t){return t.replace(/[&<>"']/g,(t=>oi[t]))}class si extends qe{static allowedChildren=[si,ii,Ue,ai];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(t,e){const n=si.order.indexOf(t),i=si.order.indexOf(e);return n>=0||i>=0?n-i:t===e?0:t<e?-1:1}formatAt(t,e,n,i){if(si.compare(this.statics.blotName,n)<0&&this.scroll.query(n,ye.BLOT)){const a=this.isolate(t,e);i&&a.wrap(n,i)}else super.formatAt(t,e,n,i)}optimize(t){if(super.optimize(t),this.parent instanceof si&&si.compare(this.statics.blotName,this.parent.statics.blotName)>0){const t=this.parent.isolate(this.offset(),this.length());this.moveChildren(t),t.wrap(this)}}}const li=si;class ci extends He{cache={};delta(){return null==this.cache.delta&&(this.cache.delta=hi(this)),this.cache.delta}deleteAt(t,e){super.deleteAt(t,e),this.cache={}}formatAt(t,e,n,i){e<=0||(this.scroll.query(n,ye.BLOCK)?t+e===this.length()&&this.format(n,i):super.formatAt(t,Math.min(e,this.length()-t-1),n,i),this.cache={})}insertAt(t,e,n){if(null!=n)return super.insertAt(t,e,n),void(this.cache={});if(0===e.length)return;const i=e.split("\n"),a=i.shift();a.length>0&&(t<this.length()-1||null==this.children.tail?super.insertAt(Math.min(t,this.length()-1),a):this.children.tail.insertAt(this.children.tail.length(),a),this.cache={});let o=this;i.reduce(((t,e)=>(o=o.split(t,!0),o.insertAt(0,e),e.length)),t+a.length)}insertBefore(t,e){const{head:n}=this.children;super.insertBefore(t,e),n instanceof ii&&n.remove(),this.cache={}}length(){return null==this.cache.length&&(this.cache.length=super.length()+1),this.cache.length}moveChildren(t,e){super.moveChildren(t,e),this.cache={}}optimize(t){super.optimize(t),this.cache={}}path(t){return super.path(t,!0)}removeChild(t){super.removeChild(t),this.cache={}}split(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&(0===t||t>=this.length()-1)){const e=this.clone();return 0===t?(this.parent.insertBefore(e,this),this):(this.parent.insertBefore(e,this.next),e)}const n=super.split(t,e);return this.cache={},n}}ci.blotName="block",ci.tagName="P",ci.defaultChild=ii,ci.allowedChildren=[ii,li,Ue,ai];class di extends Ue{attach(){super.attach(),this.attributes=new Le(this.domNode)}delta(){return(new Je).insert(this.value(),{...this.formats(),...this.attributes.values()})}format(t,e){const n=this.scroll.query(t,ye.BLOCK_ATTRIBUTE);null!=n&&this.attributes.attribute(n,e)}formatAt(t,e,n,i){this.format(n,i)}insertAt(t,e,n){if(null!=n)return void super.insertAt(t,e,n);const i=e.split("\n"),a=i.pop(),o=i.map((t=>{const e=this.scroll.create(ci.blotName);return e.insertAt(0,t),e})),r=this.split(t);o.forEach((t=>{this.parent.insertBefore(t,r)})),a&&this.parent.insertBefore(this.scroll.create("text",a),r)}}function hi(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.descendants(Pe).reduce(((t,n)=>0===n.length()?t:t.insert(n.value(),ui(n,{},e))),new Je).insert("\n",ui(t))}function ui(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return null==t?e:("formats"in t&&"function"==typeof t.formats&&(e={...e,...t.formats()},n&&delete e["code-token"]),null==t.parent||"scroll"===t.parent.statics.blotName||t.parent.statics.scope!==t.statics.scope?e:ui(t.parent,e,n))}di.scope=ye.BLOCK_BLOT;class pi extends Ue{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\ufeff";static value(){}constructor(t,e,n){super(t,e),this.selection=n,this.textNode=document.createTextNode(pi.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){null!=this.parent&&this.parent.removeChild(this)}format(t,e){if(0!==this.savedLength)return void super.format(t,e);let n=this,i=0;for(;null!=n&&n.statics.scope!==ye.BLOCK_BLOT;)i+=n.offset(n.parent),n=n.parent;null!=n&&(this.savedLength=pi.CONTENTS.length,n.optimize(),n.formatAt(i,pi.CONTENTS.length,t,e),this.savedLength=0)}index(t,e){return t===this.textNode?0:super.index(t,e)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||null==this.parent)return null;const t=this.selection.getNativeRange();for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const e=this.prev instanceof ai?this.prev:null,n=e?e.length():0,i=this.next instanceof ai?this.next:null,a=i?i.text:"",{textNode:o}=this,r=o.data.split(pi.CONTENTS).join("");let s;if(o.data=pi.CONTENTS,e)s=e,(r||i)&&(e.insertAt(e.length(),r+a),i&&i.remove());else if(i)s=i,i.insertAt(0,r);else{const t=document.createTextNode(r);s=this.scroll.create(t),this.parent.insertBefore(s,this)}if(this.remove(),t){const a=(t,a)=>e&&t===e.domNode?a:t===o?n+a-1:i&&t===i.domNode?n+r.length+a:null,l=a(t.start.node,t.start.offset),c=a(t.end.node,t.end.offset);if(null!==l&&null!==c)return{startNode:s.domNode,startOffset:l,endNode:s.domNode,endOffset:c}}return null}update(t,e){if(t.some((t=>"characterData"===t.type&&t.target===this.textNode))){const t=this.restore();t&&(e.range=t)}}optimize(t){super.optimize(t);let{parent:e}=this;for(;e;){if("A"===e.domNode.tagName){this.savedLength=pi.CONTENTS.length,e.isolate(this.offset(e),this.length()).unwrap(),this.savedLength=0;break}e=e.parent}}value(){return""}}const gi=pi;var fi=n(3697);const mi=new WeakMap,vi=["error","warn","log","info"];let bi="warn";function yi(t){if(bi&&vi.indexOf(t)<=vi.indexOf(bi)){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];console[t](...n)}}function wi(t){return vi.reduce(((e,n)=>(e[n]=yi.bind(console,n,t),e)),{})}wi.level=t=>{bi=t},yi.level=wi.level;const Ci=wi,xi=Ci("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((t=>{document.addEventListener(t,(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Array.from(document.querySelectorAll(".ql-container")).forEach((t=>{const n=mi.get(t);n&&n.emitter&&n.emitter.handleDOM(...e)}))}))}));const Ti=class extends fi{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",xi.error)}emit(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return xi.log.call(xi,...e),super.emit(...e)}handleDOM(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(this.domListeners[t.type]||[]).forEach((e=>{let{node:i,handler:a}=e;(t.target===i||i.contains(t.target))&&a(t,...n)}))}listenDOM(t,e,n){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:e,handler:n})}},Ii=Ci("quill:selection");class Ai{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.index=t,this.length=e}}function Ei(t,e){try{e.parentNode}catch(t){return!1}return t.contains(e)}const Si=class{constructor(t,e){this.emitter=e,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Ai(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(()=>{this.mouseDown||this.composing||setTimeout(this.update.bind(this,Ti.sources.USER),1)})),this.emitter.on(Ti.events.SCROLL_BEFORE_UPDATE,(()=>{if(!this.hasFocus())return;const t=this.getNativeRange();null!=t&&t.start.node!==this.cursor.textNode&&this.emitter.once(Ti.events.SCROLL_UPDATE,((e,n)=>{try{this.root.contains(t.start.node)&&this.root.contains(t.end.node)&&this.setNativeRange(t.start.node,t.start.offset,t.end.node,t.end.offset);const i=n.some((t=>"characterData"===t.type||"childList"===t.type||"attributes"===t.type&&t.target===this.root));this.update(i?Ti.sources.SILENT:e)}catch(t){}}))})),this.emitter.on(Ti.events.SCROLL_OPTIMIZE,((t,e)=>{if(e.range){const{startNode:t,startOffset:n,endNode:i,endOffset:a}=e.range;this.setNativeRange(t,n,i,a),this.update(Ti.sources.SILENT)}})),this.update(Ti.sources.SILENT)}handleComposition(){this.emitter.on(Ti.events.COMPOSITION_BEFORE_START,(()=>{this.composing=!0})),this.emitter.on(Ti.events.COMPOSITION_END,(()=>{if(this.composing=!1,this.cursor.parent){const t=this.cursor.restore();if(!t)return;setTimeout((()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)}),1)}}))}handleDragging(){this.emitter.listenDOM("mousedown",document.body,(()=>{this.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(()=>{this.mouseDown=!1,this.update(Ti.sources.USER)}))}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,e){this.scroll.update();const n=this.getNativeRange();if(null!=n&&n.native.collapsed&&!this.scroll.query(t,ye.BLOCK)){if(n.start.node!==this.cursor.textNode){const t=this.scroll.find(n.start.node,!1);if(null==t)return;if(t instanceof Pe){const e=t.split(n.start.offset);t.parent.insertBefore(this.cursor,e)}else t.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.scroll.length();let i;t=Math.min(t,n-1),e=Math.min(t+e,n-1)-t;let[a,o]=this.scroll.leaf(t);if(null==a)return null;if(e>0&&o===a.length()){const[e]=this.scroll.leaf(t+1);if(e){const[n]=this.scroll.line(t),[i]=this.scroll.line(t+1);n===i&&(a=e,o=0)}}[i,o]=a.position(o,!0);const r=document.createRange();if(e>0)return r.setStart(i,o),[a,o]=this.scroll.leaf(t+e),null==a?null:([i,o]=a.position(o,!0),r.setEnd(i,o),r.getBoundingClientRect());let s,l="left";if(i instanceof Text){if(!i.data.length)return null;o<i.data.length?(r.setStart(i,o),r.setEnd(i,o+1)):(r.setStart(i,o-1),r.setEnd(i,o),l="right"),s=r.getBoundingClientRect()}else{if(!(a.domNode instanceof Element))return null;s=a.domNode.getBoundingClientRect(),o>0&&(l="right")}return{bottom:s.top+s.height,height:s.height,left:s[l],right:s[l],top:s.top,width:0}}getNativeRange(){const t=document.getSelection();if(null==t||t.rangeCount<=0)return null;const e=t.getRangeAt(0);if(null==e)return null;const n=this.normalizeNative(e);return Ii.info("getNativeRange",n),n}getRange(){const t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];const e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}hasFocus(){return document.activeElement===this.root||null!=document.activeElement&&Ei(this.root,document.activeElement)}normalizedToRange(t){const e=[[t.start.node,t.start.offset]];t.native.collapsed||e.push([t.end.node,t.end.offset]);const n=e.map((t=>{const[e,n]=t,i=this.scroll.find(e,!0),a=i.offset(this.scroll);return 0===n?a:i instanceof Pe?a+i.index(e,n):a+i.length()})),i=Math.min(Math.max(...n),this.scroll.length()-1),a=Math.min(i,...n);return new Ai(a,i-a)}normalizeNative(t){if(!Ei(this.root,t.startContainer)||!t.collapsed&&!Ei(this.root,t.endContainer))return null;const e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach((t=>{let{node:e,offset:n}=t;for(;!(e instanceof Text)&&e.childNodes.length>0;)if(e.childNodes.length>n)e=e.childNodes[n],n=0;else{if(e.childNodes.length!==n)break;e=e.lastChild,n=e instanceof Text?e.data.length:e.childNodes.length>0?e.childNodes.length:e.childNodes.length+1}t.node=e,t.offset=n})),e}rangeToNative(t){const e=this.scroll.length(),n=(t,n)=>{t=Math.min(e-1,t);const[i,a]=this.scroll.leaf(t);return i?i.position(a,n):[null,-1]};return[...n(t.index,!1),...n(t.index+t.length,!0)]}setNativeRange(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Ii.info("setNativeRange",t,e,n,i),null!=t&&(null==this.root.parentNode||null==t.parentNode||null==n.parentNode))return;const o=document.getSelection();if(null!=o)if(null!=t){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:r}=this.getNativeRange()||{};if(null==r||a||t!==r.startContainer||e!==r.startOffset||n!==r.endContainer||i!==r.endOffset){t instanceof Element&&"BR"===t.tagName&&(e=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),n instanceof Element&&"BR"===n.tagName&&(i=Array.from(n.parentNode.childNodes).indexOf(n),n=n.parentNode);const a=document.createRange();a.setStart(t,e),a.setEnd(n,i),o.removeAllRanges(),o.addRange(a)}}else o.removeAllRanges(),this.root.blur()}setRange(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ti.sources.API;if("string"==typeof e&&(n=e,e=!1),Ii.info("setRange",t),null!=t){const n=this.rangeToNative(t);this.setNativeRange(...n,e)}else this.setNativeRange(null);this.update(n)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ti.sources.USER;const e=this.lastRange,[n,i]=this.getRange();if(this.lastRange=n,this.lastNative=i,null!=this.lastRange&&(this.savedRange=this.lastRange),!ei(e,this.lastRange)){if(!this.composing&&null!=i&&i.native.collapsed&&i.start.node!==this.cursor.textNode){const t=this.cursor.restore();t&&this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)}const n=[Ti.events.SELECTION_CHANGE,Dn(this.lastRange),Dn(e),t];this.emitter.emit(Ti.events.EDITOR_CHANGE,...n),t!==Ti.sources.SILENT&&this.emitter.emit(...n)}}},Li=/^[ -~]*$/;function Mi(t,e,n){if(0===t.length){const[t]=Pi(n.pop());return e<=0?`</li></${t}>`:`</li></${t}>${Mi([],e-1,n)}`}const[{child:i,offset:a,length:o,indent:r,type:s},...l]=t,[c,d]=Pi(s);if(r>e)return n.push(s),r===e+1?`<${c}><li${d}>${Ni(i,a,o)}${Mi(l,r,n)}`:`<${c}><li>${Mi(t,e+1,n)}`;const h=n[n.length-1];if(r===e&&s===h)return`</li><li${d}>${Ni(i,a,o)}${Mi(l,r,n)}`;const[u]=Pi(n.pop());return`</li></${u}>${Mi(t,e-1,n)}`}function Ni(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("html"in t&&"function"==typeof t.html)return t.html(e,n);if(t instanceof ai)return ri(t.value().slice(e,e+n)).replaceAll(" ","&nbsp;");if(t instanceof je){if("list-container"===t.statics.blotName){const i=[];return t.children.forEachAt(e,n,((t,e,n)=>{const a="formats"in t&&"function"==typeof t.formats?t.formats():{};i.push({child:t,offset:e,length:n,indent:a.indent||0,type:a.list})})),Mi(i,-1,[])}const a=[];if(t.children.forEachAt(e,n,((t,e,n)=>{a.push(Ni(t,e,n))})),i||"list"===t.statics.blotName)return a.join("");const{outerHTML:o,innerHTML:r}=t.domNode,[s,l]=o.split(`>${r}<`);return"<table"===s?`<table style="border: 1px solid #000;">${a.join("")}<${l}`:`${s}>${a.join("")}<${l}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function ki(t,e){return Object.keys(e).reduce(((n,i)=>{if(null==t[i])return n;const a=e[i];return a===t[i]?n[i]=a:Array.isArray(a)?a.indexOf(t[i])<0?n[i]=a.concat([t[i]]):n[i]=a:n[i]=[a,t[i]],n}),{})}function Pi(t){const e="ordered"===t?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function _i(t){return t.reduce(((t,e)=>{if("string"==typeof e.insert){const n=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return t.insert(n,e.attributes)}return t.push(e)}),new Je)}function $i(t,e){let{index:n,length:i}=t;return new Ai(n+e,i)}const Oi=class{constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let e=this.scroll.length();this.scroll.batchStart();const n=_i(t),i=new Je;return function(t){const e=[];return t.forEach((t=>{"string"==typeof t.insert?t.insert.split("\n").forEach(((n,i)=>{i&&e.push({insert:"\n",attributes:t.attributes}),n&&e.push({insert:n,attributes:t.attributes})})):e.push(t)})),e}(n.ops.slice()).reduce(((t,n)=>{const a=Je.Op.length(n);let o=n.attributes||{},r=!1,s=!1;if(null!=n.insert){if(i.retain(a),"string"==typeof n.insert){const i=n.insert;s=!i.endsWith("\n")&&(e<=t||!!this.scroll.descendant(di,t)[0]),this.scroll.insertAt(t,i);const[a,r]=this.scroll.line(t);let l=ve({},ui(a));if(a instanceof ci){const[t]=a.descendant(Pe,r);t&&(l=ve(l,ui(t)))}o=Je.AttributeMap.diff(l,o)||{}}else if("object"==typeof n.insert){const i=Object.keys(n.insert)[0];if(null==i)return t;const a=null!=this.scroll.query(i,ye.INLINE);if(a)(e<=t||this.scroll.descendant(di,t)[0])&&(s=!0);else if(t>0){const[e,n]=this.scroll.descendant(Pe,t-1);e instanceof ai?"\n"!==e.value()[n]&&(r=!0):e instanceof Ue&&e.statics.scope===ye.INLINE_BLOT&&(r=!0)}if(this.scroll.insertAt(t,i,n.insert[i]),a){const[e]=this.scroll.descendant(Pe,t);if(e){const t=ve({},ui(e));o=Je.AttributeMap.diff(t,o)||{}}}}e+=a}else if(i.push(n),null!==n.retain&&"object"==typeof n.retain){const e=Object.keys(n.retain)[0];if(null==e)return t;this.scroll.updateEmbedAt(t,e,n.retain[e])}Object.keys(o).forEach((e=>{this.scroll.formatAt(t,a,e,o[e])}));const l=r?1:0,c=s?1:0;return e+=l+c,i.retain(l),i.delete(c),t+a+l+c}),0),i.reduce(((t,e)=>"number"==typeof e.delete?(this.scroll.deleteAt(t,e.delete),t):t+Je.Op.length(e)),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(n)}deleteText(t,e){return this.scroll.deleteAt(t,e),this.update((new Je).retain(t).delete(e))}formatLine(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.scroll.update(),Object.keys(n).forEach((i=>{this.scroll.lines(t,Math.max(e,1)).forEach((t=>{t.format(i,n[i])}))})),this.scroll.optimize();const i=(new Je).retain(t).retain(e,Dn(n));return this.update(i)}formatText(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.keys(n).forEach((i=>{this.scroll.formatAt(t,e,i,n[i])}));const i=(new Je).retain(t).retain(e,Dn(n));return this.update(i)}getContents(t,e){return this.delta.slice(t,t+e)}getDelta(){return this.scroll.lines().reduce(((t,e)=>t.concat(e.delta())),new Je)}getFormat(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],i=[];0===e?this.scroll.path(t).forEach((t=>{const[e]=t;e instanceof ci?n.push(e):e instanceof Pe&&i.push(e)})):(n=this.scroll.lines(t,e),i=this.scroll.descendants(Pe,t,e));const[a,o]=[n,i].map((t=>{const e=t.shift();if(null==e)return{};let n=ui(e);for(;Object.keys(n).length>0;){const e=t.shift();if(null==e)return n;n=ki(ui(e),n)}return n}));return{...a,...o}}getHTML(t,e){const[n,i]=this.scroll.line(t);if(n){const a=n.length();return n.length()>=i+e&&(0!==i||e!==a)?Ni(n,i,e,!0):Ni(this.scroll,t,e,!0)}return""}getText(t,e){return this.getContents(t,e).filter((t=>"string"==typeof t.insert)).map((t=>t.insert)).join("")}insertContents(t,e){const n=_i(e),i=(new Je).retain(t).concat(n);return this.scroll.insertContents(t,n),this.update(i)}insertEmbed(t,e,n){return this.scroll.insertAt(t,e,n),this.update((new Je).retain(t).insert({[e]:n}))}insertText(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(t,e),Object.keys(n).forEach((i=>{this.scroll.formatAt(t,e.length,i,n[i])})),this.update((new Je).retain(t).insert(e,Dn(n)))}isBlank(){if(0===this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;const t=this.scroll.children.head;if(t?.statics.blotName!==ci.blotName)return!1;const e=t;return!(e.children.length>1)&&e.children.head instanceof ii}removeFormat(t,e){const n=this.getText(t,e),[i,a]=this.scroll.line(t+e);let o=0,r=new Je;null!=i&&(o=i.length()-a,r=i.delta().slice(a,a+o-1).insert("\n"));const s=this.getContents(t,e+o).diff((new Je).insert(n).concat(r)),l=(new Je).retain(t).concat(s);return this.applyDelta(l)}update(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const i=this.delta;if(1===e.length&&"characterData"===e[0].type&&e[0].target.data.match(Li)&&this.scroll.find(e[0].target)){const a=this.scroll.find(e[0].target),o=ui(a),r=a.offset(this.scroll),s=e[0].oldValue.replace(gi.CONTENTS,""),l=(new Je).insert(s),c=(new Je).insert(a.value()),d=n&&{oldRange:$i(n.oldRange,-r),newRange:$i(n.newRange,-r)};t=(new Je).retain(r).concat(l.diff(c,d)).reduce(((t,e)=>e.insert?t.insert(e.insert,o):t.push(e)),new Je),this.delta=i.compose(t)}else this.delta=this.getDelta(),t&&ei(i.compose(t),this.delta)||(t=i.diff(this.delta,n));return t}},ji=class{static DEFAULTS={};constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.quill=t,this.options=e}},Bi="\ufeff",qi=class extends Ue{constructor(t,e){super(t,e),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach((t=>{this.contentNode.appendChild(t)})),this.leftGuard=document.createTextNode(Bi),this.rightGuard=document.createTextNode(Bi),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,e){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,e)}restore(t){let e,n=null;const i=t.data.split(Bi).join("");if(t===this.leftGuard)if(this.prev instanceof ai){const t=this.prev.length();this.prev.insertAt(t,i),n={startNode:this.prev.domNode,startOffset:t+i.length}}else e=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(e),this),n={startNode:e,startOffset:i.length};else t===this.rightGuard&&(this.next instanceof ai?(this.next.insertAt(0,i),n={startNode:this.next.domNode,startOffset:i.length}):(e=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(e),this.next),n={startNode:e,startOffset:i.length}));return t.data=Bi,n}update(t,e){t.forEach((t=>{if("characterData"===t.type&&(t.target===this.leftGuard||t.target===this.rightGuard)){const n=this.restore(t.target);n&&(e.range=n)}}))}},Di=class{isComposing=!1;constructor(t,e){this.scroll=t,this.emitter=e,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",(t=>{this.isComposing||this.handleCompositionStart(t)})),this.scroll.domNode.addEventListener("compositionend",(t=>{this.isComposing&&queueMicrotask((()=>{this.handleCompositionEnd(t)}))}))}handleCompositionStart(t){const e=t.target instanceof Node?this.scroll.find(t.target,!0):null;!e||e instanceof qi||(this.emitter.emit(Ti.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(Ti.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit(Ti.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(Ti.events.COMPOSITION_END,t),this.isComposing=!1}};class Hi{static DEFAULTS={modules:{}};static themes={default:Hi};modules={};constructor(t,e){this.quill=t,this.options=e}init(){Object.keys(this.options.modules).forEach((t=>{null==this.modules[t]&&this.addModule(t)}))}addModule(t){const e=this.quill.constructor.import(`modules/${t}`);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}}const Ri=Hi,Vi=t=>{const e=t.getBoundingClientRect(),n="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,i="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*n,bottom:e.top+t.clientHeight*i,left:e.left}},Ui=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e},Fi=(t,e,n,i,a,o)=>t<n&&e>i?0:t<n?-(n-t+a):e>i?e-t>i-n?t+a-n:e-i+o:0,zi=["block","break","cursor","inline","scroll","text"],Zi=Ci("quill"),Wi=new Te;je.uiClass="ql-ui";class Gi{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Wi,theme:"default"};static events=Ti.events;static sources=Ti.sources;static version="2.0.3";static imports={delta:Je,parchment:t,"core/module":ji,"core/theme":Ri};static debug(t){!0===t&&(t="log"),Ci.level(t)}static find(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return mi.get(t)||Wi.find(t,e)}static import(t){return null==this.imports[t]&&Zi.error(`Cannot import ${t}. Are you sure it was registered?`),this.imports[t]}static register(){if("string"!=typeof(arguments.length<=0?void 0:arguments[0])){const t=arguments.length<=0?void 0:arguments[0],e=!!(arguments.length<=1?void 0:arguments[1]),n="attrName"in t?t.attrName:t.blotName;"string"==typeof n?this.register(`formats/${n}`,t,e):Object.keys(t).forEach((n=>{this.register(n,t[n],e)}))}else{const t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],n=!!(arguments.length<=2?void 0:arguments[2]);null==this.imports[t]||n||Zi.warn(`Overwriting ${t} with`,e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&e&&"boolean"!=typeof e&&"abstract"!==e.blotName&&Wi.register(e),"function"==typeof e.register&&e.register(Wi)}}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options=function(t,e){const n=Ji(t);if(!n)throw new Error("Invalid Quill container");const i=!e.theme||e.theme===Gi.DEFAULTS.theme?Ri:Gi.import(`themes/${e.theme}`);if(!i)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:a,...o}=Gi.DEFAULTS,{modules:r,...s}=i.DEFAULTS;let l=Ki(e.modules);null!=l&&l.toolbar&&l.toolbar.constructor!==Object&&(l={...l,toolbar:{container:l.toolbar}});const c=ve({},Ki(a),Ki(r),l),d={...o,...Yi(s),...Yi(e)};let h=e.registry;return h?e.formats&&Zi.warn('Ignoring "formats" option because "registry" is specified'):h=e.formats?((t,e,n)=>{const i=new Te;return zi.forEach((t=>{const n=e.query(t);n&&i.register(n)})),t.forEach((t=>{let a=e.query(t);a||n.error(`Cannot register "${t}" specified in "formats" config. Are you sure it was registered?`);let o=0;for(;a;)if(i.register(a),a="blotName"in a?a.requiredContainer??null:null,o+=1,o>100){n.error(`Cycle detected in registering blot requiredContainer: "${t}"`);break}})),i})(e.formats,d.registry,Zi):d.registry,{...d,registry:h,container:n,theme:i,modules:Object.entries(c).reduce(((t,e)=>{let[n,i]=e;if(!i)return t;const a=Gi.import(`modules/${n}`);return null==a?(Zi.error(`Cannot load ${n} module. Are you sure you registered it?`),t):{...t,[n]:ve({},a.DEFAULTS||{},i)}}),{}),bounds:Ji(d.bounds)}}(t,e),this.container=this.options.container,null==this.container)return void Zi.error("Invalid Quill container",t);this.options.debug&&Gi.debug(this.options.debug);const n=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",mi.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Ti;const i=Ze.blotName,a=this.options.registry.query(i);if(!a||!("blotName"in a))throw new Error(`Cannot initialize Quill without "${i}" blot`);if(this.scroll=new a(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Oi(this.scroll),this.selection=new Si(this.scroll,this.emitter),this.composition=new Di(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Ti.events.EDITOR_CHANGE,(t=>{t===Ti.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())})),this.emitter.on(Ti.events.SCROLL_UPDATE,((t,e)=>{const n=this.selection.lastRange,[i]=this.selection.getRange(),a=n&&i?{oldRange:n,newRange:i}:void 0;Xi.call(this,(()=>this.editor.update(null,e,a)),t)})),this.emitter.on(Ti.events.SCROLL_EMBED_UPDATE,((t,e)=>{const n=this.selection.lastRange,[i]=this.selection.getRange(),a=n&&i?{oldRange:n,newRange:i}:void 0;Xi.call(this,(()=>{const n=(new Je).retain(t.offset(this)).retain({[t.statics.blotName]:e});return this.editor.update(n,[],a)}),Gi.sources.USER)})),n){const t=this.clipboard.convert({html:`${n}<p><br></p>`,text:"\n"});this.setContents(t)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof t){const e=t;(t=document.createElement("div")).classList.add(e)}return this.container.insertBefore(t,e),t}blur(){this.selection.setRange(null)}deleteText(t,e,n){return[t,e,,n]=Qi(t,e,n),Xi.call(this,(()=>this.editor.deleteText(t,e)),n,t,-1*e)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;const e=t();return this.allowReadOnlyEdits=!1,e}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ti.sources.API;return Xi.call(this,(()=>{const n=this.getSelection(!0);let i=new Je;if(null==n)return i;if(this.scroll.query(t,ye.BLOCK))i=this.editor.formatLine(n.index,n.length,{[t]:e});else{if(0===n.length)return this.selection.format(t,e),i;i=this.editor.formatText(n.index,n.length,{[t]:e})}return this.setSelection(n,Ti.sources.SILENT),i}),n)}formatLine(t,e,n,i,a){let o;return[t,e,o,a]=Qi(t,e,n,i,a),Xi.call(this,(()=>this.editor.formatLine(t,e,o)),a,t,0)}formatText(t,e,n,i,a){let o;return[t,e,o,a]=Qi(t,e,n,i,a),Xi.call(this,(()=>this.editor.formatText(t,e,o)),a,t,0)}getBounds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=null;if(n="number"==typeof t?this.selection.getBounds(t,e):this.selection.getBounds(t.index,t.length),!n)return null;const i=this.container.getBoundingClientRect();return{bottom:n.bottom-i.top,height:n.height,left:n.left-i.left,right:n.right-i.left,top:n.top-i.top,width:n.width}}getContents(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t;return[t,e]=Qi(t,e),this.editor.getContents(t,e)}getFormat(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof t?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof t?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}getModule(t){return this.theme.modules[t]}getSelection(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return"number"==typeof t&&(e=e??this.getLength()-t),[t,e]=Qi(t,e),this.editor.getHTML(t,e)}getText(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return"number"==typeof t&&(e=e??this.getLength()-t),[t,e]=Qi(t,e),this.editor.getText(t,e)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Gi.sources.API;return Xi.call(this,(()=>this.editor.insertEmbed(t,e,n)),i,t)}insertText(t,e,n,i,a){let o;return[t,,o,a]=Qi(t,0,n,i,a),Xi.call(this,(()=>this.editor.insertText(t,e,o)),a,t,e.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(t,e,n){return[t,e,,n]=Qi(t,e,n),Xi.call(this,(()=>this.editor.removeFormat(t,e)),n,t)}scrollRectIntoView(t){((t,e)=>{const n=t.ownerDocument;let i=e,a=t;for(;a;){const t=a===n.body,e=t?{top:0,right:window.visualViewport?.width??n.documentElement.clientWidth,bottom:window.visualViewport?.height??n.documentElement.clientHeight,left:0}:Vi(a),r=getComputedStyle(a),s=Fi(i.left,i.right,e.left,e.right,Ui(r.scrollPaddingLeft),Ui(r.scrollPaddingRight)),l=Fi(i.top,i.bottom,e.top,e.bottom,Ui(r.scrollPaddingTop),Ui(r.scrollPaddingBottom));if(s||l)if(t)n.defaultView?.scrollBy(s,l);else{const{scrollLeft:t,scrollTop:e}=a;l&&(a.scrollTop+=l),s&&(a.scrollLeft+=s);const n=a.scrollLeft-t,o=a.scrollTop-e;i={left:i.left-n,top:i.top-o,right:i.right-n,bottom:i.bottom-o}}a=t||"fixed"===r.position?null:(o=a).parentElement||o.getRootNode().host||null}var o})(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const t=this.selection.lastRange,e=t&&this.selection.getBounds(t.index,t.length);e&&this.scrollRectIntoView(e)}setContents(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ti.sources.API;return Xi.call(this,(()=>{t=new Je(t);const e=this.getLength(),n=this.editor.deleteText(0,e),i=this.editor.insertContents(0,t),a=this.editor.deleteText(this.getLength()-1,1);return n.compose(i).compose(a)}),e)}setSelection(t,e,n){null==t?this.selection.setRange(null,e||Gi.sources.API):([t,e,,n]=Qi(t,e,n),this.selection.setRange(new Ai(Math.max(0,t),e),n),n!==Ti.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ti.sources.API;const n=(new Je).insert(t);return this.setContents(n,e)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ti.sources.USER;const e=this.scroll.update(t);return this.selection.update(t),e}updateContents(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ti.sources.API;return Xi.call(this,(()=>(t=new Je(t),this.editor.applyDelta(t))),e,!0)}}function Ji(t){return"string"==typeof t?document.querySelector(t):t}function Ki(t){return Object.entries(t??{}).reduce(((t,e)=>{let[n,i]=e;return{...t,[n]:!0===i?{}:i}}),{})}function Yi(t){return Object.fromEntries(Object.entries(t).filter((t=>void 0!==t[1])))}function Xi(t,e,n,i){if(!this.isEnabled()&&e===Ti.sources.USER&&!this.allowReadOnlyEdits)return new Je;let a=null==n?null:this.getSelection();const o=this.editor.delta,r=t();if(null!=a&&(!0===n&&(n=a.index),null==i?a=ta(a,r,e):0!==i&&(a=ta(a,n,i,e)),this.setSelection(a,Ti.sources.SILENT)),r.length()>0){const t=[Ti.events.TEXT_CHANGE,r,o,e];this.emitter.emit(Ti.events.EDITOR_CHANGE,...t),e!==Ti.sources.SILENT&&this.emitter.emit(...t)}return r}function Qi(t,e,n,i,a){let o={};return"number"==typeof t.index&&"number"==typeof t.length?"number"!=typeof e?(a=i,i=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):"number"!=typeof e&&(a=i,i=n,n=e,e=0),"object"==typeof n?(o=n,a=i):"string"==typeof n&&(null!=i?o[n]=i:a=n),[t,e,o,a=a||Ti.sources.API]}function ta(t,e,n,i){const a="number"==typeof n?n:0;if(null==t)return null;let o,r;return e&&"function"==typeof e.transformPosition?[o,r]=[t.index,t.index+t.length].map((t=>e.transformPosition(t,i!==Ti.sources.USER))):[o,r]=[t.index,t.index+t.length].map((t=>t<e||t===e&&i===Ti.sources.USER?t:a>=0?t+a:Math.max(e,t+a))),new Ai(o,r-o)}const ea=class extends Ve{};function na(t){return t instanceof ci||t instanceof di}function ia(t){return"function"==typeof t.updateContent}function aa(t,e,n){n.reduce(((e,n)=>{const i=Je.Op.length(n);let a=n.attributes||{};if(null!=n.insert)if("string"==typeof n.insert){const i=n.insert;t.insertAt(e,i);const[o]=t.descendant(Pe,e),r=ui(o);a=Je.AttributeMap.diff(r,a)||{}}else if("object"==typeof n.insert){const i=Object.keys(n.insert)[0];if(null==i)return e;if(t.insertAt(e,i,n.insert[i]),null!=t.scroll.query(i,ye.INLINE)){const[n]=t.descendant(Pe,e),i=ui(n);a=Je.AttributeMap.diff(i,a)||{}}}return Object.keys(a).forEach((n=>{t.formatAt(e,i,n,a[n])})),e+i}),e)}const oa={scope:ye.BLOCK,whitelist:["right","center","justify"]},ra=new we("align","align",oa),sa=new Ae("align","ql-align",oa),la=new Se("align","text-align",oa);class ca extends Se{value(t){let e=super.value(t);return e.startsWith("rgb(")?(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${e.split(",").map((t=>`00${parseInt(t,10).toString(16)}`.slice(-2))).join("")}`):e}}const da=new Ae("color","ql-color",{scope:ye.INLINE}),ha=new ca("color","color",{scope:ye.INLINE}),ua=new Ae("background","ql-bg",{scope:ye.INLINE}),pa=new ca("background","background-color",{scope:ye.INLINE});class ga extends ea{static create(t){const e=super.create(t);return e.setAttribute("spellcheck","false"),e}code(t,e){return this.children.map((t=>t.length()<=1?"":t.domNode.innerText)).join("\n").slice(t,t+e)}html(t,e){return`<pre>\n${ri(this.code(t,e))}\n</pre>`}}class fa extends ci{static TAB="  ";static register(){Gi.register(ga)}}class ma extends li{}ma.blotName="code",ma.tagName="CODE",fa.blotName="code-block",fa.className="ql-code-block",fa.tagName="DIV",ga.blotName="code-block-container",ga.className="ql-code-block-container",ga.tagName="DIV",ga.allowedChildren=[fa],fa.allowedChildren=[ai,ii,gi],fa.requiredContainer=ga;const va={scope:ye.BLOCK,whitelist:["rtl"]},ba=new we("direction","dir",va),ya=new Ae("direction","ql-direction",va),wa=new Se("direction","direction",va),Ca={scope:ye.INLINE,whitelist:["serif","monospace"]},xa=new Ae("font","ql-font",Ca),Ta=new class extends Se{value(t){return super.value(t).replace(/["']/g,"")}}("font","font-family",Ca),Ia=new Ae("size","ql-size",{scope:ye.INLINE,whitelist:["small","large","huge"]}),Aa=new Se("size","font-size",{scope:ye.INLINE,whitelist:["10px","18px","32px"]}),Ea=Ci("quill:keyboard"),Sa=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class La extends ji{static match(t,e){return!["altKey","ctrlKey","metaKey","shiftKey"].some((n=>!!e[n]!==t[n]&&null!==e[n]))&&(e.key===t.key||e.key===t.which)}constructor(t,e){super(t,e),this.bindings={},Object.keys(this.options.bindings).forEach((t=>{this.options.bindings[t]&&this.addBinding(this.options.bindings[t])})),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},(()=>{})),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=function(t){if("string"==typeof t||"number"==typeof t)t={key:t};else{if("object"!=typeof t)return null;t=Dn(t)}return t.shortKey&&(t[Sa]=t.shortKey,delete t.shortKey),t}(t);null!=i?("function"==typeof e&&(e={handler:e}),"function"==typeof n&&(n={handler:n}),(Array.isArray(i.key)?i.key:[i.key]).forEach((t=>{const a={...i,key:t,...e,...n};this.bindings[a.key]=this.bindings[a.key]||[],this.bindings[a.key].push(a)}))):Ea.warn("Attempted to add invalid keyboard binding",i)}listen(){this.quill.root.addEventListener("keydown",(t=>{if(t.defaultPrevented||t.isComposing)return;if(229===t.keyCode&&("Enter"===t.key||"Backspace"===t.key))return;const e=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter((e=>La.match(t,e)));if(0===e.length)return;const n=Gi.find(t.target,!0);if(n&&n.scroll!==this.quill.scroll)return;const i=this.quill.getSelection();if(null==i||!this.quill.hasFocus())return;const[a,o]=this.quill.getLine(i.index),[r,s]=this.quill.getLeaf(i.index),[l,c]=0===i.length?[r,s]:this.quill.getLeaf(i.index+i.length),d=r instanceof Ge?r.value().slice(0,s):"",h=l instanceof Ge?l.value().slice(c):"",u={collapsed:0===i.length,empty:0===i.length&&a.length()<=1,format:this.quill.getFormat(i),line:a,offset:o,prefix:d,suffix:h,event:t};e.some((t=>{if(null!=t.collapsed&&t.collapsed!==u.collapsed)return!1;if(null!=t.empty&&t.empty!==u.empty)return!1;if(null!=t.offset&&t.offset!==u.offset)return!1;if(Array.isArray(t.format)){if(t.format.every((t=>null==u.format[t])))return!1}else if("object"==typeof t.format&&!Object.keys(t.format).every((e=>!0===t.format[e]?null!=u.format[e]:!1===t.format[e]?null==u.format[e]:ei(t.format[e],u.format[e]))))return!1;return!(null!=t.prefix&&!t.prefix.test(u.prefix)||null!=t.suffix&&!t.suffix.test(u.suffix)||!0===t.handler.call(this,i,u,t))}))&&t.preventDefault()}))}handleBackspace(t,e){const n=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(0===t.index||this.quill.getLength()<=1)return;let i={};const[a]=this.quill.getLine(t.index);let o=(new Je).retain(t.index-n).delete(n);if(0===e.offset){const[e]=this.quill.getLine(t.index-1);if(e&&!("block"===e.statics.blotName&&e.length()<=1)){const e=a.formats(),n=this.quill.getFormat(t.index-1,1);if(i=Je.AttributeMap.diff(e,n)||{},Object.keys(i).length>0){const e=(new Je).retain(t.index+a.length()-2).retain(1,i);o=o.compose(e)}}}this.quill.updateContents(o,Gi.sources.USER),this.quill.focus()}handleDelete(t,e){const n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(t.index>=this.quill.getLength()-n)return;let i={};const[a]=this.quill.getLine(t.index);let o=(new Je).retain(t.index).delete(n);if(e.offset>=a.length()-1){const[e]=this.quill.getLine(t.index+1);if(e){const n=a.formats(),r=this.quill.getFormat(t.index,1);i=Je.AttributeMap.diff(n,r)||{},Object.keys(i).length>0&&(o=o.retain(e.length()-1).retain(1,i))}}this.quill.updateContents(o,Gi.sources.USER),this.quill.focus()}handleDeleteRange(t){$a({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,e){const n=Object.keys(e.format).reduce(((t,n)=>(this.quill.scroll.query(n,ye.BLOCK)&&!Array.isArray(e.format[n])&&(t[n]=e.format[n]),t)),{}),i=(new Je).retain(t.index).delete(t.length).insert("\n",n);this.quill.updateContents(i,Gi.sources.USER),this.quill.setSelection(t.index+1,Gi.sources.SILENT),this.quill.focus()}}const Ma={bindings:{bold:Pa("bold"),italic:Pa("italic"),underline:Pa("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){return!(!e.collapsed||0===e.offset)||(this.quill.format("indent","+1",Gi.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,e){return!(!e.collapsed||0===e.offset)||(this.quill.format("indent","-1",Gi.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){null!=e.format.indent?this.quill.format("indent","-1",Gi.sources.USER):null!=e.format.list&&this.quill.format("list",!1,Gi.sources.USER)}},"indent code-block":Na(!0),"outdent code-block":Na(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,Gi.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return!0;this.quill.history.cutoff();const n=(new Je).retain(t.index).delete(t.length).insert("\t");return this.quill.updateContents(n,Gi.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,Gi.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,Gi.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,e){const n={list:!1};e.format.indent&&(n.indent=!1),this.quill.formatLine(t.index,t.length,n,Gi.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[e,n]=this.quill.getLine(t.index),i={...e.formats(),list:"checked"},a=(new Je).retain(t.index).insert("\n",i).retain(e.length()-n-1).retain(1,{list:"unchecked"});this.quill.updateContents(a,Gi.sources.USER),this.quill.setSelection(t.index+1,Gi.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,e){const[n,i]=this.quill.getLine(t.index),a=(new Je).retain(t.index).insert("\n",e.format).retain(n.length()-i-1).retain(1,{header:null});this.quill.updateContents(a,Gi.sources.USER),this.quill.setSelection(t.index+1,Gi.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[n,i,a,o]=e.getTable(t),r=function(t,e,n,i){return null==e.prev&&null==e.next?null==n.prev&&null==n.next?0===i?-1:1:null==n.prev?-1:1:null==e.prev?-1:null==e.next?1:null}(0,i,a,o);if(null==r)return;let s=n.offset();if(r<0){const e=(new Je).retain(s).insert("\n");this.quill.updateContents(e,Gi.sources.USER),this.quill.setSelection(t.index+1,t.length,Gi.sources.SILENT)}else if(r>0){s+=n.length();const t=(new Je).retain(s).insert("\n");this.quill.updateContents(t,Gi.sources.USER),this.quill.setSelection(s,Gi.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:n,line:i}=e,a=i.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(a-1,Gi.sources.USER):this.quill.setSelection(a+i.length(),Gi.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(null==this.quill.scroll.query("list"))return!0;const{length:n}=e.prefix,[i,a]=this.quill.getLine(t.index);if(a>n)return!0;let o;switch(e.prefix.trim()){case"[]":case"[ ]":o="unchecked";break;case"[x]":o="checked";break;case"-":case"*":o="bullet";break;default:o="ordered"}this.quill.insertText(t.index," ",Gi.sources.USER),this.quill.history.cutoff();const r=(new Je).retain(t.index-a).delete(n+1).retain(i.length()-2-a).retain(1,{list:o});return this.quill.updateContents(r,Gi.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-n,Gi.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,n]=this.quill.getLine(t.index);let i=2,a=e;for(;null!=a&&a.length()<=1&&a.formats()["code-block"];)if(a=a.prev,i-=1,i<=0){const i=(new Je).retain(t.index+e.length()-n-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(i,Gi.sources.USER),this.quill.setSelection(t.index-1,Gi.sources.SILENT),!1}return!0}},"embed left":ka("ArrowLeft",!1),"embed left shift":ka("ArrowLeft",!0),"embed right":ka("ArrowRight",!1),"embed right shift":ka("ArrowRight",!0),"table down":_a(!1),"table up":_a(!0)}};function Na(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(e,n){let{event:i}=n;const a=this.quill.scroll.query("code-block"),{TAB:o}=a;if(0===e.length&&!i.shiftKey)return this.quill.insertText(e.index,o,Gi.sources.USER),void this.quill.setSelection(e.index+o.length,Gi.sources.SILENT);const r=0===e.length?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:s,length:l}=e;r.forEach(((e,n)=>{t?(e.insertAt(0,o),0===n?s+=o.length:l+=o.length):e.domNode.textContent.startsWith(o)&&(e.deleteAt(0,o.length),0===n?s-=o.length:l-=o.length)})),this.quill.update(Gi.sources.USER),this.quill.setSelection(s,l,Gi.sources.SILENT)}}}function ka(t,e){const n="ArrowLeft"===t?"prefix":"suffix";return{key:t,shiftKey:e,altKey:null,[n]:/^$/,handler(n){let{index:i}=n;"ArrowRight"===t&&(i+=n.length+1);const[a]=this.quill.getLeaf(i);return!(a instanceof Ue&&("ArrowLeft"===t?e?this.quill.setSelection(n.index-1,n.length+1,Gi.sources.USER):this.quill.setSelection(n.index-1,Gi.sources.USER):e?this.quill.setSelection(n.index,n.length+1,Gi.sources.USER):this.quill.setSelection(n.index+n.length+1,Gi.sources.USER),1))}}}function Pa(t){return{key:t[0],shortKey:!0,handler(e,n){this.quill.format(t,!n.format[t],Gi.sources.USER)}}}function _a(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,n){const i=t?"prev":"next",a=n.line,o=a.parent[i];if(null!=o){if("table-row"===o.statics.blotName){let t=o.children.head,e=a;for(;null!=e.prev;)e=e.prev,t=t.next;const i=t.offset(this.quill.scroll)+Math.min(n.offset,t.length()-1);this.quill.setSelection(i,0,Gi.sources.USER)}}else{const e=a.table()[i];null!=e&&(t?this.quill.setSelection(e.offset(this.quill.scroll)+e.length()-1,0,Gi.sources.USER):this.quill.setSelection(e.offset(this.quill.scroll),0,Gi.sources.USER))}return!1}}}function $a(t){let{quill:e,range:n}=t;const i=e.getLines(n);let a={};if(i.length>1){const t=i[0].formats(),e=i[i.length-1].formats();a=Je.AttributeMap.diff(e,t)||{}}e.deleteText(n,Gi.sources.USER),Object.keys(a).length>0&&e.formatLine(n.index,1,a,Gi.sources.USER),e.setSelection(n.index,Gi.sources.SILENT)}La.DEFAULTS=Ma;const Oa=/font-weight:\s*normal/,ja=["P","OL","UL"],Ba=t=>t&&ja.includes(t.tagName),qa=/\bmso-list:[^;]*ignore/i,Da=/\bmso-list:[^;]*\bl(\d+)/i,Ha=/\bmso-list:[^;]*\blevel(\d+)/i,Ra=[function(t){"urn:schemas-microsoft-com:office:word"===t.documentElement.getAttribute("xmlns:w")&&(t=>{const e=Array.from(t.querySelectorAll("[style*=mso-list]")),n=[],i=[];e.forEach((t=>{(t.getAttribute("style")||"").match(qa)?n.push(t):i.push(t)})),n.forEach((t=>t.parentNode?.removeChild(t)));const a=t.documentElement.innerHTML,o=i.map((t=>((t,e)=>{const n=t.getAttribute("style"),i=n?.match(Da);if(!i)return null;const a=Number(i[1]),o=n?.match(Ha),r=o?Number(o[1]):1,s=new RegExp(`@list l${a}:level${r}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),l=e.match(s);return{id:a,indent:r,type:l&&"bullet"===l[1]?"bullet":"ordered",element:t}})(t,a))).filter((t=>t));for(;o.length;){const t=[];let e=o.shift();for(;e;)t.push(e),e=o.length&&o[0]?.element===e.element.nextElementSibling&&o[0].id===e.id?o.shift():null;const n=document.createElement("ul");t.forEach((t=>{const e=document.createElement("li");e.setAttribute("data-list",t.type),t.indent>1&&e.setAttribute("class","ql-indent-"+(t.indent-1)),e.innerHTML=t.element.innerHTML,n.appendChild(e)}));const i=t[0]?.element,{parentNode:a}=i??{};i&&a?.replaceChild(n,i),t.slice(1).forEach((t=>{let{element:e}=t;a?.removeChild(e)}))}})(t)},function(t){t.querySelector('[id^="docs-internal-guid-"]')&&((t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter((t=>t.getAttribute("style")?.match(Oa))).forEach((e=>{const n=t.createDocumentFragment();n.append(...e.childNodes),e.parentNode?.replaceChild(n,e)}))})(t),(t=>{Array.from(t.querySelectorAll("br")).filter((t=>Ba(t.previousElementSibling)&&Ba(t.nextElementSibling))).forEach((t=>{t.parentNode?.removeChild(t)}))})(t))}],Va=Ci("quill:clipboard"),Ua=[[Node.TEXT_NODE,function(t,e,n){let i=t.data;if("O:P"===t.parentElement?.tagName)return e.insert(i.trim());if(!Ka(t)){if(0===i.trim().length&&i.includes("\n")&&!function(t,e){return t.previousElementSibling&&t.nextElementSibling&&!Ga(t.previousElementSibling,e)&&!Ga(t.nextElementSibling,e)}(t,n))return e;i=i.replace(/[^\S\u00a0]/g," "),i=i.replace(/ {2,}/g," "),(null==t.previousSibling&&null!=t.parentElement&&Ga(t.parentElement,n)||t.previousSibling instanceof Element&&Ga(t.previousSibling,n))&&(i=i.replace(/^ /,"")),(null==t.nextSibling&&null!=t.parentElement&&Ga(t.parentElement,n)||t.nextSibling instanceof Element&&Ga(t.nextSibling,n))&&(i=i.replace(/ $/,"")),i=i.replaceAll(" "," ")}return e.insert(i)}],[Node.TEXT_NODE,Qa],["br",function(t,e){return Wa(e,"\n")||e.insert("\n"),e}],[Node.ELEMENT_NODE,Qa],[Node.ELEMENT_NODE,function(t,e,n){const i=n.query(t);if(null==i)return e;if(i.prototype instanceof Ue){const e={},a=i.value(t);if(null!=a)return e[i.blotName]=a,(new Je).insert(e,i.formats(t,n))}else if(i.prototype instanceof He&&!Wa(e,"\n")&&e.insert("\n"),"blotName"in i&&"formats"in i&&"function"==typeof i.formats)return Za(e,i.blotName,i.formats(t,n),n);return e}],[Node.ELEMENT_NODE,function(t,e,n){const i=we.keys(t),a=Ae.keys(t),o=Se.keys(t),r={};return i.concat(a).concat(o).forEach((e=>{let i=n.query(e,ye.ATTRIBUTE);null!=i&&(r[i.attrName]=i.value(t),r[i.attrName])||(i=Fa[e],null==i||i.attrName!==e&&i.keyName!==e||(r[i.attrName]=i.value(t)||void 0),i=za[e],null==i||i.attrName!==e&&i.keyName!==e||(i=za[e],r[i.attrName]=i.value(t)||void 0))})),Object.entries(r).reduce(((t,e)=>{let[i,a]=e;return Za(t,i,a,n)}),e)}],[Node.ELEMENT_NODE,function(t,e,n){const i={},a=t.style||{};return"italic"===a.fontStyle&&(i.italic=!0),"underline"===a.textDecoration&&(i.underline=!0),"line-through"===a.textDecoration&&(i.strike=!0),(a.fontWeight?.startsWith("bold")||parseInt(a.fontWeight,10)>=700)&&(i.bold=!0),e=Object.entries(i).reduce(((t,e)=>{let[i,a]=e;return Za(t,i,a,n)}),e),parseFloat(a.textIndent||0)>0?(new Je).insert("\t").concat(e):e}],["li",function(t,e,n){const i=n.query(t);if(null==i||"list"!==i.blotName||!Wa(e,"\n"))return e;let a=-1,o=t.parentNode;for(;null!=o;)["OL","UL"].includes(o.tagName)&&(a+=1),o=o.parentNode;return a<=0?e:e.reduce(((t,e)=>e.insert?e.attributes&&"number"==typeof e.attributes.indent?t.push(e):t.insert(e.insert,{indent:a,...e.attributes||{}}):t),new Je)}],["ol, ul",function(t,e,n){const i=t;let a="OL"===i.tagName?"ordered":"bullet";const o=i.getAttribute("data-checked");return o&&(a="true"===o?"checked":"unchecked"),Za(e,"list",a,n)}],["pre",function(t,e,n){const i=n.query("code-block");return Za(e,"code-block",!i||!("formats"in i)||"function"!=typeof i.formats||i.formats(t,n),n)}],["tr",function(t,e,n){const i="TABLE"===t.parentElement?.tagName?t.parentElement:t.parentElement?.parentElement;return null!=i?Za(e,"table",Array.from(i.querySelectorAll("tr")).indexOf(t)+1,n):e}],["b",Xa("bold")],["i",Xa("italic")],["strike",Xa("strike")],["style",function(){return new Je}]],Fa=[ra,ba].reduce(((t,e)=>(t[e.keyName]=e,t)),{}),za=[la,pa,ha,wa,Ta,Aa].reduce(((t,e)=>(t[e.keyName]=e,t)),{});function Za(t,e,n,i){return i.query(e)?t.reduce(((t,i)=>{if(!i.insert)return t;if(i.attributes&&i.attributes[e])return t.push(i);const a=n?{[e]:n}:{};return t.insert(i.insert,{...a,...i.attributes})}),new Je):t}function Wa(t,e){let n="";for(let i=t.ops.length-1;i>=0&&n.length<e.length;--i){const e=t.ops[i];if("string"!=typeof e.insert)break;n=e.insert+n}return n.slice(-1*e.length)===e}function Ga(t,e){if(!(t instanceof Element))return!1;const n=e.query(t);return!(n&&n.prototype instanceof Ue)&&["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}const Ja=new WeakMap;function Ka(t){return null!=t&&(Ja.has(t)||("PRE"===t.tagName?Ja.set(t,!0):Ja.set(t,Ka(t.parentNode))),Ja.get(t))}function Ya(t,e,n,i,a){return e.nodeType===e.TEXT_NODE?i.reduce(((n,i)=>i(e,n,t)),new Je):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce(((o,r)=>{let s=Ya(t,r,n,i,a);return r.nodeType===e.ELEMENT_NODE&&(s=n.reduce(((e,n)=>n(r,e,t)),s),s=(a.get(r)||[]).reduce(((e,n)=>n(r,e,t)),s)),o.concat(s)}),new Je):new Je}function Xa(t){return(e,n,i)=>Za(n,t,!0,i)}function Qa(t,e,n){if(!Wa(e,"\n")){if(Ga(t,n)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert("\n");if(e.length()>0&&t.nextSibling){let i=t.nextSibling;for(;null!=i;){if(Ga(i,n))return e.insert("\n");const t=n.query(i);if(t&&t.prototype instanceof di)return e.insert("\n");i=i.firstChild}}}return e}function to(t,e){let n=e;for(let e=t.length-1;e>=0;e-=1){const i=t[e];t[e]={delta:n.transform(i.delta,!0),range:i.range&&eo(i.range,n)},n=i.delta.transform(n),0===t[e].delta.length()&&t.splice(e,1)}}function eo(t,e){if(!t)return t;const n=e.transformPosition(t.index);return{index:n,length:e.transformPosition(t.index+t.length)-n}}class no extends ji{constructor(t,e){super(t,e),t.root.addEventListener("drop",(e=>{e.preventDefault();let n=null;if(document.caretRangeFromPoint)n=document.caretRangeFromPoint(e.clientX,e.clientY);else if(document.caretPositionFromPoint){const t=document.caretPositionFromPoint(e.clientX,e.clientY);n=document.createRange(),n.setStart(t.offsetNode,t.offset),n.setEnd(t.offsetNode,t.offset)}const i=n&&t.selection.normalizeNative(n);if(i){const n=t.selection.normalizedToRange(i);e.dataTransfer?.files&&this.upload(n,e.dataTransfer.files)}}))}upload(t,e){const n=[];Array.from(e).forEach((t=>{t&&this.options.mimetypes?.includes(t.type)&&n.push(t)})),n.length>0&&this.options.handler.call(this,t,n)}}no.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image"))return;const n=e.map((t=>new Promise((e=>{const n=new FileReader;n.onload=()=>{e(n.result)},n.readAsDataURL(t)}))));Promise.all(n).then((e=>{const n=e.reduce(((t,e)=>t.insert({image:e})),(new Je).retain(t.index).delete(t.length));this.quill.updateContents(n,Ti.sources.USER),this.quill.setSelection(t.index+e.length,Ti.sources.SILENT)}))}};const io=no,ao=["insertText","insertReplacementText"],oo=/Mac/i.test(navigator.platform);Gi.register({"blots/block":ci,"blots/block/embed":di,"blots/break":ii,"blots/container":ea,"blots/cursor":gi,"blots/embed":qi,"blots/inline":li,"blots/scroll":class extends Ze{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=ci;static allowedChildren=[ci,di,ea];constructor(t,e,n){let{emitter:i}=n;super(t,e),this.emitter=i,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",(t=>this.handleDragStart(t)))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const t=this.batch;this.batch=!1,this.update(t)}emitMount(t){this.emitter.emit(Ti.events.SCROLL_BLOT_MOUNT,t)}emitUnmount(t){this.emitter.emit(Ti.events.SCROLL_BLOT_UNMOUNT,t)}emitEmbedUpdate(t,e){this.emitter.emit(Ti.events.SCROLL_EMBED_UPDATE,t,e)}deleteAt(t,e){const[n,i]=this.line(t),[a]=this.line(t+e);if(super.deleteAt(t,e),null!=a&&n!==a&&i>0){if(n instanceof di||a instanceof di)return void this.optimize();const t=a.children.head instanceof ii?null:a.children.head;n.moveChildren(a,t),n.remove()}this.optimize()}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",t?"true":"false")}formatAt(t,e,n,i){super.formatAt(t,e,n,i),this.optimize()}insertAt(t,e,n){if(t>=this.length())if(null==n||null==this.scroll.query(e,ye.BLOCK)){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t),null==n&&e.endsWith("\n")?t.insertAt(0,e.slice(0,-1),n):t.insertAt(0,e,n)}else{const t=this.scroll.create(e,n);this.appendChild(t)}else super.insertAt(t,e,n);this.optimize()}insertBefore(t,e){if(t.statics.scope===ye.INLINE_BLOT){const n=this.scroll.create(this.statics.defaultChild.blotName);n.appendChild(t),super.insertBefore(n,e)}else super.insertBefore(t,e)}insertContents(t,e){const n=this.deltaToRenderBlocks(e.concat((new Je).insert("\n"))),i=n.pop();if(null==i)return;this.batchStart();const a=n.shift();if(a){const e="block"===a.type&&(0===a.delta.length()||!this.descendant(di,t)[0]&&t<this.length()),n="block"===a.type?a.delta:(new Je).insert({[a.key]:a.value});aa(this,t,n);const i="block"===a.type?1:0,o=t+n.length()+i;e&&this.insertAt(o-1,"\n");const r=ui(this.line(t)[0]),s=Je.AttributeMap.diff(r,a.attributes)||{};Object.keys(s).forEach((t=>{this.formatAt(o-1,1,t,s[t])})),t=o}let[o,r]=this.children.find(t);n.length&&(o&&(o=o.split(r),r=0),n.forEach((t=>{if("block"===t.type)aa(this.createBlock(t.attributes,o||void 0),0,t.delta);else{const e=this.create(t.key,t.value);this.insertBefore(e,o||void 0),Object.keys(t.attributes).forEach((n=>{e.format(n,t.attributes[n])}))}}))),"block"===i.type&&i.delta.length()&&aa(this,o?o.offset(o.scroll)+r:this.length(),i.delta),this.batchEnd(),this.optimize()}isEnabled(){return"true"===this.domNode.getAttribute("contenteditable")}leaf(t){const e=this.path(t).pop();if(!e)return[null,-1];const[n,i]=e;return n instanceof Pe?[n,i]:[null,-1]}line(t){return t===this.length()?this.line(t-1):this.descendant(na,t)}lines(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;const n=(t,e,i)=>{let a=[],o=i;return t.children.forEachAt(e,i,((t,e,i)=>{na(t)?a.push(t):t instanceof Ve&&(a=a.concat(n(t,e,o))),o-=i})),a};return n(this,t,e)}optimize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.batch||(super.optimize(t,e),t.length>0&&this.emitter.emit(Ti.events.SCROLL_OPTIMIZE,t,e))}path(t){return super.path(t).slice(1)}remove(){}update(t){if(this.batch)return void(Array.isArray(t)&&(this.batch=this.batch.concat(t)));let e=Ti.sources.USER;"string"==typeof t&&(e=t),Array.isArray(t)||(t=this.observer.takeRecords()),(t=t.filter((t=>{let{target:e}=t;const n=this.find(e,!0);return n&&!ia(n)}))).length>0&&this.emitter.emit(Ti.events.SCROLL_BEFORE_UPDATE,e,t),super.update(t.concat([])),t.length>0&&this.emitter.emit(Ti.events.SCROLL_UPDATE,e,t)}updateEmbedAt(t,e,n){const[i]=this.descendant((t=>t instanceof di),t);i&&i.statics.blotName===e&&ia(i)&&i.updateContent(n)}handleDragStart(t){t.preventDefault()}deltaToRenderBlocks(t){const e=[];let n=new Je;return t.forEach((t=>{const i=t?.insert;if(i)if("string"==typeof i){const a=i.split("\n");a.slice(0,-1).forEach((i=>{n.insert(i,t.attributes),e.push({type:"block",delta:n,attributes:t.attributes??{}}),n=new Je}));const o=a[a.length-1];o&&n.insert(o,t.attributes)}else{const a=Object.keys(i)[0];if(!a)return;this.query(a,ye.INLINE)?n.push(t):(n.length()&&e.push({type:"block",delta:n,attributes:{}}),n=new Je,e.push({type:"blockEmbed",key:a,value:i[a],attributes:t.attributes??{}}))}})),n.length()&&e.push({type:"block",delta:n,attributes:{}}),e}createBlock(t,e){let n;const i={};Object.entries(t).forEach((t=>{let[e,a]=t;null!=this.query(e,ye.BLOCK&ye.BLOT)?n=e:i[e]=a}));const a=this.create(n||this.statics.defaultChild.blotName,n?t[n]:void 0);this.insertBefore(a,e||void 0);const o=a.length();return Object.entries(i).forEach((t=>{let[e,n]=t;a.formatAt(0,o,e,n)})),a}},"blots/text":ai,"modules/clipboard":class extends ji{static DEFAULTS={matchers:[]};constructor(t,e){super(t,e),this.quill.root.addEventListener("copy",(t=>this.onCaptureCopy(t,!1))),this.quill.root.addEventListener("cut",(t=>this.onCaptureCopy(t,!0))),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],Ua.concat(this.options.matchers??[]).forEach((t=>{let[e,n]=t;this.addMatcher(e,n)}))}addMatcher(t,e){this.matchers.push([t,e])}convert(t){let{html:e,text:n}=t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i[fa.blotName])return(new Je).insert(n||"",{[fa.blotName]:i[fa.blotName]});if(!e)return(new Je).insert(n||"",i);const a=this.convertHTML(e);return Wa(a,"\n")&&(null==a.ops[a.ops.length-1].attributes||i.table)?a.compose((new Je).retain(a.length()-1).delete(1)):a}normalizeHTML(t){(t=>{t.documentElement&&Ra.forEach((e=>{e(t)}))})(t)}convertHTML(t){const e=(new DOMParser).parseFromString(t,"text/html");this.normalizeHTML(e);const n=e.body,i=new WeakMap,[a,o]=this.prepareMatching(n,i);return Ya(this.quill.scroll,n,a,o,i)}dangerouslyPasteHTML(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gi.sources.API;if("string"==typeof t){const n=this.convert({html:t,text:""});this.quill.setContents(n,e),this.quill.setSelection(0,Gi.sources.SILENT)}else{const i=this.convert({html:e,text:""});this.quill.updateContents((new Je).retain(t).concat(i),n),this.quill.setSelection(t+i.length(),Gi.sources.SILENT)}}onCaptureCopy(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.defaultPrevented)return;t.preventDefault();const[n]=this.quill.selection.getRange();if(null==n)return;const{html:i,text:a}=this.onCopy(n,e);t.clipboardData?.setData("text/plain",a),t.clipboardData?.setData("text/html",i),e&&$a({range:n,quill:this.quill})}normalizeURIList(t){return t.split(/\r?\n/).filter((t=>"#"!==t[0])).join("\n")}onCapturePaste(t){if(t.defaultPrevented||!this.quill.isEnabled())return;t.preventDefault();const e=this.quill.getSelection(!0);if(null==e)return;const n=t.clipboardData?.getData("text/html");let i=t.clipboardData?.getData("text/plain");if(!n&&!i){const e=t.clipboardData?.getData("text/uri-list");e&&(i=this.normalizeURIList(e))}const a=Array.from(t.clipboardData?.files||[]);if(!n&&a.length>0)this.quill.uploader.upload(e,a);else{if(n&&a.length>0){const t=(new DOMParser).parseFromString(n,"text/html");if(1===t.body.childElementCount&&"IMG"===t.body.firstElementChild?.tagName)return void this.quill.uploader.upload(e,a)}this.onPaste(e,{html:n,text:i})}}onCopy(t){const e=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:e}}onPaste(t,e){let{text:n,html:i}=e;const a=this.quill.getFormat(t.index),o=this.convert({text:n,html:i},a);Va.log("onPaste",o,{text:n,html:i});const r=(new Je).retain(t.index).delete(t.length).concat(o);this.quill.updateContents(r,Gi.sources.USER),this.quill.setSelection(r.length()-t.length,Gi.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(t,e){const n=[],i=[];return this.matchers.forEach((a=>{const[o,r]=a;switch(o){case Node.TEXT_NODE:i.push(r);break;case Node.ELEMENT_NODE:n.push(r);break;default:Array.from(t.querySelectorAll(o)).forEach((t=>{if(e.has(t)){const n=e.get(t);n?.push(r)}else e.set(t,[r])}))}})),[n,i]}},"modules/history":class extends ji{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(t,e){super(t,e),this.quill.on(Gi.events.EDITOR_CHANGE,((t,e,n,i)=>{t===Gi.events.SELECTION_CHANGE?e&&i!==Gi.sources.SILENT&&(this.currentRange=e):t===Gi.events.TEXT_CHANGE&&(this.ignoreChange||(this.options.userOnly&&i!==Gi.sources.USER?this.transform(e):this.record(e,n)),this.currentRange=eo(this.currentRange,e))})),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",(t=>{"historyUndo"===t.inputType?(this.undo(),t.preventDefault()):"historyRedo"===t.inputType&&(this.redo(),t.preventDefault())}))}change(t,e){if(0===this.stack[t].length)return;const n=this.stack[t].pop();if(!n)return;const i=this.quill.getContents(),a=n.delta.invert(i);this.stack[e].push({delta:a,range:eo(n.range,a)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n.delta,Gi.sources.USER),this.ignoreChange=!1,this.restoreSelection(n)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(t,e){if(0===t.ops.length)return;this.stack.redo=[];let n=t.invert(e),i=this.currentRange;const a=Date.now();if(this.lastRecorded+this.options.delay>a&&this.stack.undo.length>0){const t=this.stack.undo.pop();t&&(n=n.compose(t.delta),i=t.range)}else this.lastRecorded=a;0!==n.length()&&(this.stack.undo.push({delta:n,range:i}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(t){to(this.stack.undo,t),to(this.stack.redo,t)}undo(){this.change("undo","redo")}restoreSelection(t){if(t.range)this.quill.setSelection(t.range,Gi.sources.USER);else{const e=function(t,e){const n=e.reduce(((t,e)=>t+(e.delete||0)),0);let i=e.length()-n;return function(t,e){const n=e.ops[e.ops.length-1];return null!=n&&(null!=n.insert?"string"==typeof n.insert&&n.insert.endsWith("\n"):null!=n.attributes&&Object.keys(n.attributes).some((e=>null!=t.query(e,ye.BLOCK))))}(t,e)&&(i-=1),i}(this.quill.scroll,t.delta);this.quill.setSelection(e,Gi.sources.USER)}}},"modules/keyboard":La,"modules/uploader":io,"modules/input":class extends ji{constructor(t,e){super(t,e),t.root.addEventListener("beforeinput",(t=>{this.handleBeforeInput(t)})),/Android/i.test(navigator.userAgent)||t.on(Gi.events.COMPOSITION_BEFORE_START,(()=>{this.handleCompositionStart()}))}deleteRange(t){$a({range:t,quill:this.quill})}replaceText(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(0===t.length)return!1;if(e){const n=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents((new Je).retain(t.index).insert(e,n),Gi.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+e.length,0,Gi.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!ao.includes(t.inputType))return;const e=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!e||!0===e.collapsed)return;const n=function(t){return"string"==typeof t.data?t.data:t.dataTransfer?.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}(t);if(null==n)return;const i=this.quill.selection.normalizeNative(e),a=i?this.quill.selection.normalizedToRange(i):null;a&&this.replaceText(a,n)&&t.preventDefault()}handleCompositionStart(){const t=this.quill.getSelection();t&&this.replaceText(t)}},"modules/uiNode":class extends ji{isListening=!1;selectionChangeDeadline=0;constructor(t,e){super(t,e),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(t,e){let{line:n,event:i}=e;if(!(n instanceof je&&n.uiNode))return!0;const a="rtl"===getComputedStyle(n.domNode).direction;return!!(a&&"ArrowRight"!==i.key||!a&&"ArrowLeft"!==i.key)||(this.quill.setSelection(t.index-1,t.length+(i.shiftKey?1:0),Gi.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",(t=>{!t.defaultPrevented&&(t=>"ArrowLeft"===t.key||"ArrowRight"===t.key||"ArrowUp"===t.key||"ArrowDown"===t.key||"Home"===t.key||!(!oo||"a"!==t.key||!0!==t.ctrlKey))(t)&&this.ensureListeningToSelectionChange()}))}ensureListeningToSelectionChange(){this.selectionChangeDeadline=Date.now()+100,this.isListening||(this.isListening=!0,document.addEventListener("selectionchange",(()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()}),{once:!0}))}handleSelectionChange(){const t=document.getSelection();if(!t)return;const e=t.getRangeAt(0);if(!0!==e.collapsed||0!==e.startOffset)return;const n=this.quill.scroll.find(e.startContainer);if(!(n instanceof je&&n.uiNode))return;const i=document.createRange();i.setStartAfter(n.uiNode),i.setEndAfter(n.uiNode),t.removeAllRanges(),t.addRange(i)}}});const ro=Gi,so=new class extends Ae{add(t,e){let n=0;if("+1"===e||"-1"===e){const i=this.value(t)||0;n="+1"===e?i+1:i-1}else"number"==typeof e&&(n=e);return 0===n?(this.remove(t),!0):super.add(t,n.toString())}canAdd(t,e){return super.canAdd(t,e)||super.canAdd(t,parseInt(e,10))}value(t){return parseInt(super.value(t),10)||void 0}}("indent","ql-indent",{scope:ye.BLOCK,whitelist:[1,2,3,4,5,6,7,8]}),lo=so;class co extends ea{}co.blotName="list-container",co.tagName="OL";class ho extends ci{static create(t){const e=super.create();return e.setAttribute("data-list",t),e}static formats(t){return t.getAttribute("data-list")||void 0}static register(){Gi.register(co)}constructor(t,e){super(t,e);const n=e.ownerDocument.createElement("span"),i=n=>{if(!t.isEnabled())return;const i=this.statics.formats(e,t);"checked"===i?(this.format("list","unchecked"),n.preventDefault()):"unchecked"===i&&(this.format("list","checked"),n.preventDefault())};n.addEventListener("mousedown",i),n.addEventListener("touchstart",i),this.attachUI(n)}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-list",e):super.format(t,e)}}ho.blotName="list",ho.tagName="LI",co.allowedChildren=[ho],ho.requiredContainer=co;const uo=class extends li{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(t){super.optimize(t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}};class po extends li{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(t){const e=super.create(t);return e.setAttribute("href",this.sanitize(t)),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e}static formats(t){return t.getAttribute("href")}static sanitize(t){return go(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("href",this.constructor.sanitize(e)):super.format(t,e)}}function go(t,e){const n=document.createElement("a");n.href=t;const i=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(i)>-1}const fo=["alt","height","width"],mo=["height","width"],vo=new Ae("code-token","hljs",{scope:ye.INLINE});class bo extends li{static formats(t,e){for(;null!=t&&t!==e.domNode;){if(t.classList&&t.classList.contains(fa.className))return super.formats(t,e);t=t.parentNode}}constructor(t,e,n){super(t,e,n),vo.add(this.domNode,n)}format(t,e){t!==bo.blotName?super.format(t,e):e?vo.add(this.domNode,e):(vo.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),vo.value(this.domNode)||this.unwrap()}}bo.blotName="code-token",bo.className="ql-token";class yo extends fa{static create(t){const e=super.create(t);return"string"==typeof t&&e.setAttribute("data-language",t),e}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-language",e):super.format(t,e)}replaceWith(t,e){return this.formatAt(0,this.length(),bo.blotName,!1),super.replaceWith(t,e)}}class wo extends ga{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(t,e){t===yo.blotName&&(this.forceNext=!0,this.children.forEach((n=>{n.format(t,e)})))}formatAt(t,e,n,i){n===yo.blotName&&(this.forceNext=!0),super.formatAt(t,e,n,i)}highlight(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==this.children.head)return;const n=`${Array.from(this.domNode.childNodes).filter((t=>t!==this.uiNode)).map((t=>t.textContent)).join("\n")}\n`,i=yo.formats(this.children.head.domNode);if(e||this.forceNext||this.cachedText!==n){if(n.trim().length>0||null==this.cachedText){const e=this.children.reduce(((t,e)=>t.concat(hi(e,!1))),new Je),a=t(n,i);e.diff(a).reduce(((t,e)=>{let{retain:n,attributes:i}=e;return n?(i&&Object.keys(i).forEach((e=>{[yo.blotName,bo.blotName].includes(e)&&this.formatAt(t,n,e,i[e])})),t+n):t}),0)}this.cachedText=n,this.forceNext=!1}}html(t,e){const[n]=this.children.find(t);return`<pre data-language="${n?yo.formats(n.domNode):"plain"}">\n${ri(this.code(t,e))}\n</pre>`}optimize(t){if(super.optimize(t),null!=this.parent&&null!=this.children.head&&null!=this.uiNode){const t=yo.formats(this.children.head.domNode);t!==this.uiNode.value&&(this.uiNode.value=t)}}}wo.allowedChildren=[yo],yo.requiredContainer=wo,yo.allowedChildren=[bo,gi,ai,ii];class Co extends ji{static register(){Gi.register(bo,!0),Gi.register(yo,!0),Gi.register(wo,!0)}constructor(t,e){if(super(t,e),null==this.options.hljs)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce(((t,e)=>{let{key:n}=e;return t[n]=!0,t}),{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(Gi.events.SCROLL_BLOT_MOUNT,(t=>{if(!(t instanceof wo))return;const e=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach((t=>{let{key:n,label:i}=t;const a=e.ownerDocument.createElement("option");a.textContent=i,a.setAttribute("value",n),e.appendChild(a)})),e.addEventListener("change",(()=>{t.format(yo.blotName,e.value),this.quill.root.focus(),this.highlight(t,!0)})),null==t.uiNode&&(t.attachUI(e),t.children.head&&(e.value=yo.formats(t.children.head.domNode)))}))}initTimer(){let t=null;this.quill.on(Gi.events.SCROLL_OPTIMIZE,(()=>{t&&clearTimeout(t),t=setTimeout((()=>{this.highlight(),t=null}),this.options.interval)}))}highlight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.quill.selection.composing)return;this.quill.update(Gi.sources.USER);const n=this.quill.getSelection();(null==t?this.quill.scroll.descendants(wo):[t]).forEach((t=>{t.highlight(this.highlightBlot,e)})),this.quill.update(Gi.sources.SILENT),null!=n&&this.quill.setSelection(n,Gi.sources.SILENT)}highlightBlot(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"plain";if(e=this.languages[e]?e:"plain","plain"===e)return ri(t).split("\n").reduce(((t,n,i)=>(0!==i&&t.insert("\n",{[fa.blotName]:e}),t.insert(n))),new Je);const n=this.quill.root.ownerDocument.createElement("div");return n.classList.add(fa.className),n.innerHTML=((t,e,n)=>{if("string"==typeof t.versionString){const i=t.versionString.split(".")[0];if(parseInt(i,10)>=11)return t.highlight(n,{language:e}).value}return t.highlight(e,n).value})(this.options.hljs,e,t),Ya(this.quill.scroll,n,[(t,e)=>{const n=vo.value(t);return n?e.compose((new Je).retain(e.length(),{[bo.blotName]:n})):e}],[(t,n)=>t.data.split("\n").reduce(((t,n,i)=>(0!==i&&t.insert("\n",{[fa.blotName]:e}),t.insert(n))),n)],new WeakMap)}}Co.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class xo extends ci{static blotName="table";static tagName="TD";static create(t){const e=super.create();return t?e.setAttribute("data-row",t):e.setAttribute("data-row",Eo()),e}static formats(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(t,e){t===xo.blotName&&e?this.domNode.setAttribute("data-row",e):super.format(t,e)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class To extends ea{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&null!=this.next.children.head){const t=this.children.head.formats(),e=this.children.tail.formats(),n=this.next.children.head.formats(),i=this.next.children.tail.formats();return t.table===e.table&&t.table===n.table&&t.table===i.table}return!1}optimize(t){super.optimize(t),this.children.forEach((t=>{if(null==t.next)return;const e=t.formats(),n=t.next.formats();if(e.table!==n.table){const e=this.splitAfter(t);e&&e.optimize(),this.prev&&this.prev.optimize()}}))}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class Io extends ea{static blotName="table-body";static tagName="TBODY"}class Ao extends ea{static blotName="table-container";static tagName="TABLE";balanceCells(){const t=this.descendants(To),e=t.reduce(((t,e)=>Math.max(e.children.length,t)),0);t.forEach((t=>{new Array(e-t.children.length).fill(0).forEach((()=>{let e;null!=t.children.head&&(e=xo.formats(t.children.head.domNode));const n=this.scroll.create(xo.blotName,e);t.appendChild(n),n.optimize()}))}))}cells(t){return this.rows().map((e=>e.children.at(t)))}deleteColumn(t){const[e]=this.descendant(Io);null!=e&&null!=e.children.head&&e.children.forEach((e=>{const n=e.children.at(t);null!=n&&n.remove()}))}insertColumn(t){const[e]=this.descendant(Io);null!=e&&null!=e.children.head&&e.children.forEach((e=>{const n=e.children.at(t),i=xo.formats(e.children.head.domNode),a=this.scroll.create(xo.blotName,i);e.insertBefore(a,n)}))}insertRow(t){const[e]=this.descendant(Io);if(null==e||null==e.children.head)return;const n=Eo(),i=this.scroll.create(To.blotName);e.children.head.children.forEach((()=>{const t=this.scroll.create(xo.blotName,n);i.appendChild(t)}));const a=e.children.at(t);e.insertBefore(i,a)}rows(){const t=this.children.head;return null==t?[]:t.children.map((t=>t))}}function Eo(){return`row-${Math.random().toString(36).slice(2,6)}`}Ao.allowedChildren=[Io],Io.requiredContainer=Ao,Io.allowedChildren=[To],To.requiredContainer=Io,To.allowedChildren=[xo],xo.requiredContainer=To;const So=Ci("quill:toolbar");class Lo extends ji{constructor(t,e){if(super(t,e),Array.isArray(this.options.container)){const e=document.createElement("div");e.setAttribute("role","toolbar"),function(t,e){Array.isArray(e[0])||(e=[e]),e.forEach((e=>{const n=document.createElement("span");n.classList.add("ql-formats"),e.forEach((t=>{if("string"==typeof t)Mo(n,t);else{const e=Object.keys(t)[0],i=t[e];Array.isArray(i)?function(t,e,n){const i=document.createElement("select");i.classList.add(`ql-${e}`),n.forEach((t=>{const e=document.createElement("option");!1!==t?e.setAttribute("value",String(t)):e.setAttribute("selected","selected"),i.appendChild(e)})),t.appendChild(i)}(n,e,i):Mo(n,e,i)}})),t.appendChild(n)}))}(e,this.options.container),t.container?.parentNode?.insertBefore(e,t.container),this.container=e}else"string"==typeof this.options.container?this.container=document.querySelector(this.options.container):this.container=this.options.container;this.container instanceof HTMLElement?(this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach((t=>{const e=this.options.handlers?.[t];e&&this.addHandler(t,e)})),Array.from(this.container.querySelectorAll("button, select")).forEach((t=>{this.attach(t)})),this.quill.on(Gi.events.EDITOR_CHANGE,(()=>{const[t]=this.quill.selection.getRange();this.update(t)}))):So.error("Container required for toolbar",this.options)}addHandler(t,e){this.handlers[t]=e}attach(t){let e=Array.from(t.classList).find((t=>0===t.indexOf("ql-")));if(!e)return;if(e=e.slice(3),"BUTTON"===t.tagName&&t.setAttribute("type","button"),null==this.handlers[e]&&null==this.quill.scroll.query(e))return void So.warn("ignoring attaching to nonexistent format",e,t);const n="SELECT"===t.tagName?"change":"click";t.addEventListener(n,(n=>{let i;if("SELECT"===t.tagName){if(t.selectedIndex<0)return;const e=t.options[t.selectedIndex];i=!e.hasAttribute("selected")&&(e.value||!1)}else i=!t.classList.contains("ql-active")&&(t.value||!t.hasAttribute("value")),n.preventDefault();this.quill.focus();const[a]=this.quill.selection.getRange();if(null!=this.handlers[e])this.handlers[e].call(this,i);else if(this.quill.scroll.query(e).prototype instanceof Ue){if(i=prompt(`Enter ${e}`),!i)return;this.quill.updateContents((new Je).retain(a.index).delete(a.length).insert({[e]:i}),Gi.sources.USER)}else this.quill.format(e,i,Gi.sources.USER);this.update(a)})),this.controls.push([e,t])}update(t){const e=null==t?{}:this.quill.getFormat(t);this.controls.forEach((n=>{const[i,a]=n;if("SELECT"===a.tagName){let n=null;if(null==t)n=null;else if(null==e[i])n=a.querySelector("option[selected]");else if(!Array.isArray(e[i])){let t=e[i];"string"==typeof t&&(t=t.replace(/"/g,'\\"')),n=a.querySelector(`option[value="${t}"]`)}null==n?(a.value="",a.selectedIndex=-1):n.selected=!0}else if(null==t)a.classList.remove("ql-active"),a.setAttribute("aria-pressed","false");else if(a.hasAttribute("value")){const t=e[i],n=t===a.getAttribute("value")||null!=t&&t.toString()===a.getAttribute("value")||null==t&&!a.getAttribute("value");a.classList.toggle("ql-active",n),a.setAttribute("aria-pressed",n.toString())}else{const t=null!=e[i];a.classList.toggle("ql-active",t),a.setAttribute("aria-pressed",t.toString())}}))}}function Mo(t,e,n){const i=document.createElement("button");i.setAttribute("type","button"),i.classList.add(`ql-${e}`),i.setAttribute("aria-pressed","false"),null!=n?(i.value=n,i.setAttribute("aria-label",`${e}: ${n}`)):i.setAttribute("aria-label",e),t.appendChild(i)}Lo.DEFAULTS={},Lo.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(null!=t)if(0===t.length){const t=this.quill.getFormat();Object.keys(t).forEach((t=>{null!=this.quill.scroll.query(t,ye.INLINE)&&this.quill.format(t,!1,Gi.sources.USER)}))}else this.quill.removeFormat(t.index,t.length,Gi.sources.USER)},direction(t){const{align:e}=this.quill.getFormat();"rtl"===t&&null==e?this.quill.format("align","right",Gi.sources.USER):t||"right"!==e||this.quill.format("align",!1,Gi.sources.USER),this.quill.format("direction",t,Gi.sources.USER)},indent(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e),i=parseInt(n.indent||0,10);if("+1"===t||"-1"===t){let e="+1"===t?1:-1;"rtl"===n.direction&&(e*=-1),this.quill.format("indent",i+e,Gi.sources.USER)}},link(t){!0===t&&(t=prompt("Enter link URL:")),this.quill.format("link",t,Gi.sources.USER)},list(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e);"check"===t?"checked"===n.list||"unchecked"===n.list?this.quill.format("list",!1,Gi.sources.USER):this.quill.format("list","unchecked",Gi.sources.USER):this.quill.format("list",t,Gi.sources.USER)}}};const No='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',ko={align:{"":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',center:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',right:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',justify:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>'},background:'<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',blockquote:'<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',bold:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',clean:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',code:No,"code-block":No,color:'<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',direction:{"":'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',rtl:'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>'},formula:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',header:{1:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',2:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',3:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',4:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',5:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',6:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>'},italic:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',image:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',indent:{"+1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',"-1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>'},link:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',list:{bullet:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',check:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',ordered:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>'},script:{sub:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',super:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>'},strike:'<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',table:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',underline:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',video:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>'};let Po=0;function _o(t,e){t.setAttribute(e,`${!("true"===t.getAttribute(e))}`)}const $o=class{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(()=>{this.togglePicker()})),this.label.addEventListener("keydown",(t=>{switch(t.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),t.preventDefault()}})),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),_o(this.label,"aria-expanded"),_o(this.options,"aria-hidden")}buildItem(t){const e=document.createElement("span");e.tabIndex="0",e.setAttribute("role","button"),e.classList.add("ql-picker-item");const n=t.getAttribute("value");return n&&e.setAttribute("data-value",n),t.textContent&&e.setAttribute("data-label",t.textContent),e.addEventListener("click",(()=>{this.selectItem(e,!0)})),e.addEventListener("keydown",(t=>{switch(t.key){case"Enter":this.selectItem(e,!0),t.preventDefault();break;case"Escape":this.escape(),t.preventDefault()}})),e}buildLabel(){const t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>',t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){const t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${Po}`,Po+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach((e=>{const n=this.buildItem(e);t.appendChild(n),!0===e.selected&&this.selectItem(n)})),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach((t=>{this.container.setAttribute(t.name,t.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout((()=>this.label.focus()),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.container.querySelector(".ql-selected");t!==n&&(null!=n&&n.classList.remove("ql-selected"),null!=t&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){const e=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(e)}else this.selectItem(null);const e=null!=t&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}},Oo=class extends $o{constructor(t,e){super(t),this.label.innerHTML=e,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach((t=>{t.classList.add("ql-primary")}))}buildItem(t){const e=super.buildItem(t);return e.style.backgroundColor=t.getAttribute("value")||"",e}selectItem(t,e){super.selectItem(t,e);const n=this.label.querySelector(".ql-color-label"),i=t&&t.getAttribute("data-value")||"";n&&("line"===n.tagName?n.style.stroke=i:n.style.fill=i)}},jo=class extends $o{constructor(t,e){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach((t=>{t.innerHTML=e[t.getAttribute("data-value")||""]})),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,e){super.selectItem(t,e);const n=t||this.defaultItem;if(null!=n){if(this.label.innerHTML===n.innerHTML)return;this.label.innerHTML=n.innerHTML}}},Bo=class{constructor(t,e){this.quill=t,this.boundsContainer=e||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,(t=>{const{overflowY:e}=getComputedStyle(t,null);return"visible"!==e&&"clip"!==e})(this.quill.root)&&this.quill.root.addEventListener("scroll",(()=>{this.root.style.marginTop=-1*this.quill.root.scrollTop+"px"})),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){const e=t.left+t.width/2-this.root.offsetWidth/2,n=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${e}px`,this.root.style.top=`${n}px`,this.root.classList.remove("ql-flip");const i=this.boundsContainer.getBoundingClientRect(),a=this.root.getBoundingClientRect();let o=0;if(a.right>i.right&&(o=i.right-a.right,this.root.style.left=`${e+o}px`),a.left<i.left&&(o=i.left-a.left,this.root.style.left=`${e+o}px`),a.bottom>i.bottom){const e=a.bottom-a.top,i=t.bottom-t.top+e;this.root.style.top=n-i+"px",this.root.classList.add("ql-flip")}return o}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}},qo=[!1,"center","right","justify"],Do=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Ho=[!1,"serif","monospace"],Ro=["1","2","3",!1],Vo=["small",!1,"large","huge"];class Uo extends Ri{constructor(t,e){super(t,e);const n=e=>{document.body.contains(t.root)?(null==this.tooltip||this.tooltip.root.contains(e.target)||document.activeElement===this.tooltip.textbox||this.quill.hasFocus()||this.tooltip.hide(),null!=this.pickers&&this.pickers.forEach((t=>{t.container.contains(e.target)||t.close()}))):document.body.removeEventListener("click",n)};t.emitter.listenDOM("click",document.body,n)}addModule(t){const e=super.addModule(t);return"toolbar"===t&&this.extendToolbar(e),e}buildButtons(t,e){Array.from(t).forEach((t=>{(t.getAttribute("class")||"").split(/\s+/).forEach((n=>{if(n.startsWith("ql-")&&(n=n.slice(3),null!=e[n]))if("direction"===n)t.innerHTML=e[n][""]+e[n].rtl;else if("string"==typeof e[n])t.innerHTML=e[n];else{const i=t.value||"";null!=i&&e[n][i]&&(t.innerHTML=e[n][i])}}))}))}buildPickers(t,e){this.pickers=Array.from(t).map((t=>{if(t.classList.contains("ql-align")&&(null==t.querySelector("option")&&zo(t,qo),"object"==typeof e.align))return new jo(t,e.align);if(t.classList.contains("ql-background")||t.classList.contains("ql-color")){const n=t.classList.contains("ql-background")?"background":"color";return null==t.querySelector("option")&&zo(t,Do,"background"===n?"#ffffff":"#000000"),new Oo(t,e[n])}return null==t.querySelector("option")&&(t.classList.contains("ql-font")?zo(t,Ho):t.classList.contains("ql-header")?zo(t,Ro):t.classList.contains("ql-size")&&zo(t,Vo)),new $o(t)})),this.quill.on(Ti.events.EDITOR_CHANGE,(()=>{this.pickers.forEach((t=>{t.update()}))}))}}Uo.DEFAULTS=ve({},Ri.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");null==t&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",(()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""})),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class Fo extends Bo{constructor(t,e){super(t,e),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",(t=>{"Enter"===t.key?(this.save(),t.preventDefault()):"Escape"===t.key&&(this.cancel(),t.preventDefault())}))}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null==this.textbox)return;null!=e?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const n=this.quill.getBounds(this.quill.selection.savedRange);null!=n&&this.position(n),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:e}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,Ti.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,Ti.sources.USER)),this.quill.root.scrollTop=e;break}case"video":t=function(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:t}(t);case"formula":{if(!t)break;const e=this.quill.getSelection(!0);if(null!=e){const n=e.index+e.length;this.quill.insertEmbed(n,this.root.getAttribute("data-mode"),t,Ti.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(n+1," ",Ti.sources.USER),this.quill.setSelection(n+2,Ti.sources.USER)}break}}this.textbox.value="",this.hide()}}function zo(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.forEach((e=>{const i=document.createElement("option");e===n?i.setAttribute("selected","selected"):i.setAttribute("value",String(e)),t.appendChild(i)}))}const Zo=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class Wo extends Fo{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(t,e){super(t,e),this.quill.on(Ti.events.EDITOR_CHANGE,((t,e,n,i)=>{if(t===Ti.events.SELECTION_CHANGE)if(null!=e&&e.length>0&&i===Ti.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const t=this.quill.getLines(e.index,e.length);if(1===t.length){const t=this.quill.getBounds(e);null!=t&&this.position(t)}else{const n=t[t.length-1],i=this.quill.getIndex(n),a=Math.min(n.length()-1,e.index+e.length-i),o=this.quill.getBounds(new Ai(i,a));null!=o&&this.position(o)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()}))}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",(()=>{this.root.classList.remove("ql-editing")})),this.quill.on(Ti.events.SCROLL_OPTIMIZE,(()=>{setTimeout((()=>{if(this.root.classList.contains("ql-hidden"))return;const t=this.quill.getSelection();if(null!=t){const e=this.quill.getBounds(t);null!=e&&this.position(e)}}),1)}))}cancel(){this.show()}position(t){const e=super.position(t),n=this.root.querySelector(".ql-tooltip-arrow");return n.style.marginLeft="",0!==e&&(n.style.marginLeft=-1*e-n.offsetWidth/2+"px"),e}}class Go extends Uo{constructor(t,e){null!=e.modules.toolbar&&null==e.modules.toolbar.container&&(e.modules.toolbar.container=Zo),super(t,e),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new Wo(this.quill,this.options.bounds),null!=t.container&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),ko),this.buildPickers(t.container.querySelectorAll("select"),ko))}}Go.DEFAULTS=ve({},Uo.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,Gi.sources.USER)}}}}});const Jo=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class Ko extends Fo{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",(t=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),t.preventDefault()})),this.root.querySelector("a.ql-remove").addEventListener("click",(t=>{if(null!=this.linkRange){const t=this.linkRange;this.restoreFocus(),this.quill.formatText(t,"link",!1,Ti.sources.USER),delete this.linkRange}t.preventDefault(),this.hide()})),this.quill.on(Ti.events.SELECTION_CHANGE,((t,e,n)=>{if(null!=t){if(0===t.length&&n===Ti.sources.USER){const[e,n]=this.quill.scroll.descendant(po,t.index);if(null!=e){this.linkRange=new Ai(t.index-n,e.length());const i=po.formats(e.domNode);this.preview.textContent=i,this.preview.setAttribute("href",i),this.show();const a=this.quill.getBounds(this.linkRange);return void(null!=a&&this.position(a))}}else delete this.linkRange;this.hide()}}))}show(){super.show(),this.root.removeAttribute("data-mode")}}class Yo extends Uo{constructor(t,e){null!=e.modules.toolbar&&null==e.modules.toolbar.container&&(e.modules.toolbar.container=Jo),super(t,e),this.quill.container.classList.add("ql-snow")}extendToolbar(t){null!=t.container&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),ko),this.buildPickers(t.container.querySelectorAll("select"),ko),this.tooltip=new Ko(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},((e,n)=>{t.handlers.link.call(t,!n.format.link)})))}}Yo.DEFAULTS=ve({},Uo.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const t=this.quill.getSelection();if(null==t||0===t.length)return;let e=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(e)&&0!==e.indexOf("mailto:")&&(e=`mailto:${e}`);const{tooltip:n}=this.quill.theme;n.edit("link",e)}else this.quill.format("link",!1,Gi.sources.USER)}}}}});const Xo=Yo;ro.register({"attributors/attribute/direction":ba,"attributors/class/align":sa,"attributors/class/background":ua,"attributors/class/color":da,"attributors/class/direction":ya,"attributors/class/font":xa,"attributors/class/size":Ia,"attributors/style/align":la,"attributors/style/background":pa,"attributors/style/color":ha,"attributors/style/direction":wa,"attributors/style/font":Ta,"attributors/style/size":Aa},!0),ro.register({"formats/align":sa,"formats/direction":ya,"formats/indent":lo,"formats/background":pa,"formats/color":ha,"formats/font":xa,"formats/size":Ia,"formats/blockquote":class extends ci{static blotName="blockquote";static tagName="blockquote"},"formats/code-block":fa,"formats/header":class extends ci{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(t){return this.tagName.indexOf(t.tagName)+1}},"formats/list":ho,"formats/bold":uo,"formats/code":ma,"formats/italic":class extends uo{static blotName="italic";static tagName=["EM","I"]},"formats/link":po,"formats/script":class extends li{static blotName="script";static tagName=["SUB","SUP"];static create(t){return"super"===t?document.createElement("sup"):"sub"===t?document.createElement("sub"):super.create(t)}static formats(t){return"SUB"===t.tagName?"sub":"SUP"===t.tagName?"super":void 0}},"formats/strike":class extends uo{static blotName="strike";static tagName=["S","STRIKE"]},"formats/underline":class extends li{static blotName="underline";static tagName="U"},"formats/formula":class extends qi{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(t){if(null==window.katex)throw new Error("Formula module requires KaTeX.");const e=super.create(t);return"string"==typeof t&&(window.katex.render(t,e,{throwOnError:!1,errorColor:"#f00"}),e.setAttribute("data-value",t)),e}static value(t){return t.getAttribute("data-value")}html(){const{formula:t}=this.value();return`<span>${t}</span>`}},"formats/image":class extends Ue{static blotName="image";static tagName="IMG";static create(t){const e=super.create(t);return"string"==typeof t&&e.setAttribute("src",this.sanitize(t)),e}static formats(t){return fo.reduce(((e,n)=>(t.hasAttribute(n)&&(e[n]=t.getAttribute(n)),e)),{})}static match(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}static sanitize(t){return go(t,["http","https","data"])?t:"//:0"}static value(t){return t.getAttribute("src")}format(t,e){fo.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}},"formats/video":class extends di{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(t){const e=super.create(t);return e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen","true"),e.setAttribute("src",this.sanitize(t)),e}static formats(t){return mo.reduce(((e,n)=>(t.hasAttribute(n)&&(e[n]=t.getAttribute(n)),e)),{})}static sanitize(t){return po.sanitize(t)}static value(t){return t.getAttribute("src")}format(t,e){mo.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}html(){const{video:t}=this.value();return`<a href="${t}">${t}</a>`}},"modules/syntax":Co,"modules/table":class extends ji{static register(){Gi.register(xo),Gi.register(To),Gi.register(Io),Gi.register(Ao)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Ao).forEach((t=>{t.balanceCells()}))}deleteColumn(){const[t,,e]=this.getTable();null!=e&&(t.deleteColumn(e.cellOffset()),this.quill.update(Gi.sources.USER))}deleteRow(){const[,t]=this.getTable();null!=t&&(t.remove(),this.quill.update(Gi.sources.USER))}deleteTable(){const[t]=this.getTable();if(null==t)return;const e=t.offset();t.remove(),this.quill.update(Gi.sources.USER),this.quill.setSelection(e,Gi.sources.SILENT)}getTable(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.quill.getSelection();if(null==t)return[null,null,null,-1];const[e,n]=this.quill.getLine(t.index);if(null==e||e.statics.blotName!==xo.blotName)return[null,null,null,-1];const i=e.parent;return[i.parent.parent,i,e,n]}insertColumn(t){const e=this.quill.getSelection();if(!e)return;const[n,i,a]=this.getTable(e);if(null==a)return;const o=a.cellOffset();n.insertColumn(o+t),this.quill.update(Gi.sources.USER);let r=i.rowOffset();0===t&&(r+=1),this.quill.setSelection(e.index+r,e.length,Gi.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){const e=this.quill.getSelection();if(!e)return;const[n,i,a]=this.getTable(e);if(null==a)return;const o=i.rowOffset();n.insertRow(o+t),this.quill.update(Gi.sources.USER),t>0?this.quill.setSelection(e,Gi.sources.SILENT):this.quill.setSelection(e.index+i.children.length,e.length,Gi.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,e){const n=this.quill.getSelection();if(null==n)return;const i=new Array(t).fill(0).reduce((t=>{const n=new Array(e).fill("\n").join("");return t.insert(n,{table:Eo()})}),(new Je).retain(n.index));this.quill.updateContents(i,Gi.sources.USER),this.quill.setSelection(n.index,Gi.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(Gi.events.SCROLL_OPTIMIZE,(t=>{t.some((t=>!!["TD","TR","TBODY","TABLE"].includes(t.target.tagName)&&(this.quill.once(Gi.events.TEXT_CHANGE,((t,e,n)=>{n===Gi.sources.USER&&this.balanceTables()})),!0)))}))}},"modules/toolbar":Lo,"themes/bubble":Go,"themes/snow":Xo,"ui/icons":ko,"ui/picker":$o,"ui/icon-picker":jo,"ui/color-picker":Oo,"ui/tooltip":Bo},!0);const Qo=ro,tr='\n    data-gjs-draggable="false"\n    data-gjs-selectable="true"\n    data-gjs-editable="false"\n    data-gjs-highlightable="false"\n    data-gjs-droppable="false"\n    data-gjs-resizable="false"\n    data-gjs-hoverable="false"\n',er='\n    data-gjs-draggable="false"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-highlightable="false"\n    data-gjs-droppable="false"\n    data-gjs-resizable="false"\n    data-gjs-hoverable="false"\n    data-gjs-type="tile-wrapper"\n',nr='\n    data-gjs-draggable="false"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-highlightable="false"\n    data-gjs-droppable="false"\n    data-gjs-resizable="false"\n    data-gjs-hoverable="false"\n',ir='\n    data-gjs-type="template-wrapper"\n    data-gjs-draggable="false"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-highlightable="true"\n    data-gjs-droppable="[data-gjs-type=\'tile-wrapper\']"\n',ar='\n    data-gjs-draggable="false"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-droppable="false"\n    data-gjs-highlightable="false"\n    data-gjs-hoverable="false"\n',or='\n    data-gjs-draggable="false"\n    data-gjs-selectable="true"\n    data-gjs-editable="false"\n    data-gjs-highlightable="false"\n    data-gjs-droppable="false"\n    data-gjs-resizable="false"\n    data-gjs-hoverable="false"\n',rr='\n    data-gjs-type="template-wrapper"\n    data-gjs-draggable="false"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-highlightable="true"\n    data-gjs-droppable="[data-gjs-type=\'cta-buttons\']"\n',sr='\n    data-gjs-type="info-tiles-section"\n    data-gjs-draggable="false"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-highlightable="true"\n    data-gjs-droppable="[data-gjs-type=\'info-tiles-section\']"\n';class lr{constructor(t,e){this.containerId=e,this.paletteContainer=this.createPaletteContainer(e),this.populateColorPalette(t)}render(t){t.appendChild(this.paletteContainer)}refresh(t){const e=document.getElementById(this.containerId);e?e.replaceWith(this.paletteContainer):t.appendChild(this.paletteContainer)}createPaletteContainer(t){const e=document.createElement("div");return e.className="color-palette",e.id=t,e}populateColorPalette(t){Object.entries(t).forEach((([t,e])=>{const n=this.createColorItem(t,e);this.paletteContainer.appendChild(n)}))}createColorItem(t,e){const n=document.createElement("div");n.className="color-item";const i=this.createRadioInput(t,e),a=this.createColorLabel(t,e);return n.appendChild(i),n.appendChild(a),n.addEventListener("click",(n=>this.handleColorSelection(n,e,t,i))),n}createRadioInput(t,e){const n=document.createElement("input");return n.type="radio",n.id=`color-${t}`,n.name="theme-color",n.value=e,n}createColorLabel(t,e){const n=document.createElement("label");return n.htmlFor=`color-${t}`,n.className="color-box",n.setAttribute("data-tile-bgcolor",e),n.style.backgroundColor=e,n}handleColorSelection(t,e,n,i){t.preventDefault();const a=this.getSelectedComponent();if(!a)return;const o=a.parent(),r=o.parent(),s=this.getPageData(),l=this.getTileAttributes(s,r,o,a);(null==l?void 0:l.BGImageUrl)||(this.updateComponentStyle(a,e),this.updateTileData(s,r,o,a,n),i.checked=a.getStyle()["background-color"]==e)}getSelectedComponent(){return globalThis.selectedComponent}getPageData(){return globalThis.pageData}getTileAttributes(t,e,n,i){var a;if("Information"===t.PageType){const t=globalThis.infoContentMapper.getInfoContent(i.parent().parent().getId());return null===(a=null==t?void 0:t.Tiles)||void 0===a?void 0:a.find((t=>t.Id===i.parent().getId()))}return globalThis.tileMapper.getTile(e.getId(),n.getId())}updateComponentStyle(t,e){const n=t.getStyle()["background-color"]===e?"transparent":e;t.addStyle({"background-color":n}),t.getEl().style.backgroundColor=n}updateTileData(t,e,n,i,a){"Information"===t.PageType?(new uc).updateInfoTileAttributes(e.getId(),n.getId(),"BGColor",a):globalThis.tileMapper.updateTile(i.parent().getId(),"BGColor",a)}}const cr=t=>{let e="";for(let n=0;n<t;n++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".charAt(Math.floor(52*Math.random()));return e+(new Date).toISOString().replace(/[-:.TZ]/g,"")};function dr(t){return e=this,n=void 0,a=function*(){const e=yield fetch(t),n=yield e.blob();return new Promise(((t,e)=>{const i=new FileReader;i.onloadend=()=>t(i.result),i.onerror=e,i.readAsDataURL(n)}))},new((i=void 0)||(i=Promise))((function(t,o){function r(t){try{l(a.next(t))}catch(t){o(t)}}function s(t){try{l(a.throw(t))}catch(t){o(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(r,s)}l((a=a.apply(e,n||[])).next())}));var e,n,i,a}function hr(t,e){return t.length>e?t.slice(0,e)+"...":t}function ur(t){return t.replace(/\b\w/g,(t=>t.toUpperCase()))}class pr{constructor(t){this.pageId=t}contentRow(t){return JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}"),{ContentType:t.ContentType,ContentValue:t.Content}}moveContentRow(t,e){var n;const i=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(!(null===(n=null==i?void 0:i.PageContentStructure)||void 0===n?void 0:n.Content))return;const a=i.PageContentStructure.Content,o=a.findIndex((e=>e.ContentId===t));if(-1===o||e<0||e>=a.length)return;const[r]=a.splice(o,1);a.splice(e,0,r),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(i))}updateContentDescription(t,e){var n;const i=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(!(null===(n=null==i?void 0:i.PageContentStructure)||void 0===n?void 0:n.Content))return!1;const a=i.PageContentStructure.Content.find((e=>e.ContentId===t));return!!a&&(a.ContentValue=e,localStorage.setItem(`data-${this.pageId}`,JSON.stringify(i)),!0)}updateContentImage(t,e){var n;const i=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(!(null===(n=null==i?void 0:i.PageContentStructure)||void 0===n?void 0:n.Content))return!1;const a=i.PageContentStructure.Content.find((e=>e.ContentId===t));return!!a&&(a.ContentValue=e,localStorage.setItem(`data-${this.pageId}`,JSON.stringify(i)),!0)}moveCta(t,e){var n;const i=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(!(null===(n=null==i?void 0:i.PageContentStructure)||void 0===n?void 0:n.Cta))return;const a=i.PageContentStructure.Cta,o=a.findIndex((e=>e.CtaId===t));if(-1===o||e<0||e>=a.length)return;const[r]=a.splice(o,1);a.splice(e,0,r),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(i))}addContentCta(t){var e;const n=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}"),i={CtaId:t.CtaId,CtaType:t.CtaType,CtaLabel:t.CtaLabel,CtaAction:t.CtaAction,CtaColor:t.CtaColor,CtaBGColor:t.CtaBGColor,CtaButtonType:t.CtaButtonType,CtaButtonImgUrl:t.CtaButtonImgUrl||""};n.PageContentStructure.Cta||(n.PageContentStructure.Cta=[]),null===(e=null==n?void 0:n.PageContentStructure)||void 0===e||e.Cta.push(i),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(n))}removeContentCta(t){const e=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(e&&e.PageContentStructure&&e.PageContentStructure.Cta){const n=e.PageContentStructure.Cta.findIndex((e=>e.CtaId===t));if(-1!==n&&e.PageContentStructure.Cta[n])return e.PageContentStructure.Cta.splice(n,1),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(e)),!0}}updateContentCtaBGColor(t,e){const n=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(n&&n.PageContentStructure&&n.PageContentStructure.Cta){const i=n.PageContentStructure.Cta.findIndex((e=>e.CtaId===t));if(-1!==i&&n.PageContentStructure.Cta[i])return n.PageContentStructure.Cta[i].CtaBGColor=e,localStorage.setItem(`data-${this.pageId}`,JSON.stringify(n)),!0}}updateContentCtaColor(t,e){const n=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(n&&n.PageContentStructure&&n.PageContentStructure.Cta){const i=n.PageContentStructure.Cta.findIndex((e=>e.CtaId===t));if(-1!==i&&n.PageContentStructure.Cta[i])return n.PageContentStructure.Cta[i].CtaColor=e,localStorage.setItem(`data-${this.pageId}`,JSON.stringify(n)),!0}}updateContentButtonType(t,e,n){const i=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(i&&i.PageContentStructure&&i.PageContentStructure.Cta){const a=i.PageContentStructure.Cta.findIndex((e=>e.CtaId===t));if(-1!==a&&i.PageContentStructure.Cta[a])return i.PageContentStructure.Cta[a].CtaButtonType=e,n&&(i.PageContentStructure.Cta[a].CtaButtonImgUrl=n),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(i)),!0}}updateContentCtaLabel(t,e){const n=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(n&&n.PageContentStructure&&n.PageContentStructure.Cta){const i=n.PageContentStructure.Cta.findIndex((e=>e.CtaId===t));if(-1!==i&&n.PageContentStructure.Cta[i])return n.PageContentStructure.Cta[i].CtaLabel=e,localStorage.setItem(`data-${this.pageId}`,JSON.stringify(n)),!0}}getContentCta(t){const e=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(e&&e.PageContentStructure&&e.PageContentStructure.Cta)return e.PageContentStructure.Cta.find((e=>e.CtaId===t))}}class gr{constructor(t,e,n="label"){this.type="label",this.value=t,this.ctaAttributes=e,this.type=n,this.pageData=globalThis.pageData,this.input=document.createElement("input"),this.init()}init(){this.input.type="text",this.input.placeholder="Action",this.input.classList.add("tb-form-control"),this.input.classList.add("cta-action-input"),this.input.style.marginTop="10px",this.input.value=this.value||"",this.input.addEventListener("input",(t=>{const e=globalThis.selectedComponent;if(!e)return;const n=this.ctaAttributes.CtaButtonType,i=e.find(".cta-styled-btn")[0];if("label"===this.type){const t=e.find(".label")[0];if(t){const e="Round"===n?this.truncate(10):this.truncate(14);t.components(e),t.addAttributes({title:this.input.value})}}const a=i.parent(),o=globalThis.currentPageId;if("Information"===this.pageData.PageType){const t=new uc;let n="";n="label"===this.type?"CtaLabel":"CtaAction",t.updateInfoCtaAttributes(e.getId(),n,this.input.value.trim())}else new pr(o).updateContentCtaLabel(a.getId(),this.input.value.trim())}))}truncate(t){return this.input.value.length>t?this.input.value.substring(0,t)+"..":this.input.value}render(t){t.appendChild(this.input)}}class fr{constructor(t){this.type=t,this.container=document.createElement("div"),this.init()}init(){this.container.className="text-color-palette text-colors",this.container.id="text-color-palette",Object.entries({color1:"#ffffff",color2:"#333333"}).forEach((([t,e])=>{const n=document.createElement("div");n.className="color-item";const i=document.createElement("input");i.type="radio",i.id=`text-color-${t}`,i.name="text-color",i.value=e;const a=document.createElement("label");a.className="color-box",a.setAttribute("for",`text-color-${t}`),a.style.backgroundColor=e,a.setAttribute("data-tile-color",e),n.appendChild(i),n.appendChild(a),this.container.appendChild(n),n.onclick=t=>{t.preventDefault();const n=globalThis.selectedComponent;n&&("tile"===this.type?this.tileStyle(n,e):"cta"===this.type&&this.ctaStyle(n,e),i.checked=!0)}}))}tileStyle(t,e){var n;const i=t.find(".tile-icon")[0];if(i){const t=i&&i.view.el.querySelector("svg");t&&(null===(n=t.querySelector("path"))||void 0===n||n.setAttribute("fill",e))}t.addStyle({color:e}),"Information"===globalThis.pageData.PageType?(new uc).updateInfoTileAttributes(t.parent().parent().getId(),t.parent().getId(),"Color",e):globalThis.tileMapper.updateTile(t.parent().getId(),"Color",e)}ctaStyle(t,e){const n=t.find(".img-button-icon > svg > path")[0];n&&n.addAttributes({fill:e});const i=t.find(".label")[0];i&&i.addStyle({color:e});const a=t.find(".fa.fa-angle-right")[0];a&&a.addStyle({color:e});const o=t.find(".cta-button > svg > path")[0];o&&(o.addAttributes({fill:e}),i.addStyle({color:"#333333"}));const r=globalThis.currentPageId;"Information"===globalThis.pageData.PageType?(new uc).updateInfoCtaAttributes(t.getId(),"CtaColor",e):new pr(r).updateContentCtaColor(t.getId(),e)}render(t){const e=t.querySelector("#text-color-palette");e&&e.remove(),t.appendChild(this.container)}}class mr{constructor(t,e){this.selectedComponent=t,this.ctaAttributes=e,this.themeManager=new $s,this.pageData=globalThis.pageData}setctaAttributes(){this.waitForButtonLayoutContainer((()=>{this.displayButtonLayouts(),this.ctaColorAttributes(),this.ctaActionDisplay(),this.selectedButtonLayout(),this.ctaLabelColor()}))}waitForButtonLayoutContainer(t){const e=setInterval((()=>{const n=null===document||void 0===document?void 0:document.querySelector(".cta-button-layout-container"),i=null===document||void 0===document?void 0:document.querySelector("#content-page-section");n&&i&&(clearInterval(e),t())}),100)}displayButtonLayouts(){const t=null===document||void 0===document?void 0:document.querySelector(".cta-button-layout-container");if(!t)return;const e="Information"===this.pageData.PageType?this.selectedComponent.is("info-cta-section"):this.selectedComponent.parent().getClasses().includes("cta-button-container");t.style.display=e?"flex":"none"}selectedButtonLayout(){this.ctaAttributes&&document.querySelectorAll(".cta-button-layout").forEach((t=>{"FullWidth"===this.ctaAttributes.CtaButtonType&&"plain-button-layout"===t.id||"Icon"===this.ctaAttributes.CtaButtonType&&"icon-button-layout"===t.id||"Image"===this.ctaAttributes.CtaButtonType&&"image-button-layout"===t.id?t.style.border="2px solid #5068a8":t.style.border=""}))}ctaColorAttributes(){var t;const e=document.querySelector("#content-page-section"),n=null==e?void 0:e.querySelectorAll(".color-item > input");let i=this.themeManager.getThemeCtaColor(null===(t=this.ctaAttributes)||void 0===t?void 0:t.CtaBGColor);null==n||n.forEach((t=>{t.value===i&&(t.checked=!0)}))}ctaActionDisplay(){var t,e;const n=document.querySelector("#content-page-section"),i=null===(t=this.ctaAttributes)||void 0===t?void 0:t.CtaLabel;new gr(i,this.ctaAttributes).render(n);const a=null===(e=this.ctaAttributes)||void 0===e?void 0:e.CtaAction;new gr(a,this.ctaAttributes,"action").render(n)}ctaLabelColor(){var t;const e=document.querySelector("#content-page-section");new fr("cta").render(e);const n=null===(t=this.ctaAttributes)||void 0===t?void 0:t.CtaColor,i=null==e?void 0:e.querySelector("#text-color-palette"),a=null==i?void 0:i.querySelectorAll("input");null==a||a.forEach((t=>{t.value===n?t.checked=!0:t.checked=!1}))}}const vr=[{name:"Phone",svg:'\n    <svg id="ixdtl" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="22" height="32" viewBox="0 0 49.417 49.418"><path id="call" data-gjs-type="svg-in" d="M29.782,3a2.149,2.149,0,1,0,0,4.3A19.3,19.3,0,0,1,49.119,26.634a2.149,2.149,0,1,0,4.3,0A23.667,23.667,0,0,0,29.782,3ZM12.032,7.305a2.548,2.548,0,0,0-.818.067,8.342,8.342,0,0,0-3.9,2.342C2.775,14.254.366,21.907,17.437,38.98S42.16,53.643,46.7,49.1a8.348,8.348,0,0,0,2.346-3.907,2.524,2.524,0,0,0-1.179-2.786c-2.424-1.418-7.654-4.484-10.08-5.9a2.523,2.523,0,0,0-2.568.012l-4.012,2.392a2.517,2.517,0,0,1-2.845-.168,65.811,65.811,0,0,1-5.711-4.981,65.07,65.07,0,0,1-4.981-5.711A2.512,2.512,0,0,1,17.5,25.2L19.9,21.191a2.533,2.533,0,0,0,.008-2.577L14.012,8.556A2.543,2.543,0,0,0,12.032,7.305Zm17.751,4.289a2.149,2.149,0,1,0,0,4.3A10.709,10.709,0,0,1,40.525,26.634a2.149,2.149,0,1,0,4.3,0A15.072,15.072,0,0,0,29.782,11.594Zm0,8.594a2.149,2.149,0,1,0,0,4.3,2.114,2.114,0,0,1,2.149,2.148,2.149,2.149,0,1,0,4.3,0A6.479,6.479,0,0,0,29.782,20.188Z" transform="translate(-4 -3)" fill="#404040"></path></svg>\n    '},{name:"Email",svg:'\n    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="32.8" viewBox="0 0 41 32.8">\n        <path id="Path_1218" data-name="Path 1218" d="M6.1,4A4.068,4.068,0,0,0,2.789,5.7a1.5,1.5,0,0,0,.444,2.126l18,11.219a2.387,2.387,0,0,0,2.531,0L41.691,7.732a1.5,1.5,0,0,0,.384-2.2A4.063,4.063,0,0,0,38.9,4Zm35.907,8.376a.963.963,0,0,0-.508.152L23.765,23.711a2.392,2.392,0,0,1-2.531,0L3.5,12.656a.98.98,0,0,0-1.5.833V32.7a4.1,4.1,0,0,0,4.1,4.1H38.9A4.1,4.1,0,0,0,43,32.7V13.357A.981.981,0,0,0,42.007,12.376Z" transform="translate(-2 -4)" fill="#404040"/>\n    </svg>\n    '},{name:"Link",svg:'\n    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="28" viewBox="0 0 9.552 9.552">\n        <path id="Path_1213" data-name="Path 1213" d="M11.064,4A2.485,2.485,0,0,0,9.3,4.734l-.585.585A2.488,2.488,0,0,0,7.98,7.084a2.45,2.45,0,0,0,.174.908L8.8,7.346a1.706,1.706,0,0,1,.473-1.468l.585-.585a1.7,1.7,0,0,1,1.206-.5,1.675,1.675,0,0,1,1.194.5,1.7,1.7,0,0,1,0,2.4l-.585.585a1.7,1.7,0,0,1-1.206.5,1.456,1.456,0,0,1-.261-.025L9.559,9.4a2.45,2.45,0,0,0,.908.174,2.486,2.486,0,0,0,1.766-.734l.585-.585a2.488,2.488,0,0,0,.734-1.766A2.506,2.506,0,0,0,11.064,4Zm-.983,2.9L6.9,10.082l.572.572L10.654,7.47Zm-3,1.082a2.485,2.485,0,0,0-1.766.734L4.734,9.3A2.488,2.488,0,0,0,4,11.064a2.506,2.506,0,0,0,2.487,2.487,2.486,2.486,0,0,0,1.766-.734l.585-.585a2.488,2.488,0,0,0,.734-1.766A2.45,2.45,0,0,0,9.4,9.559l-.647.647a1.706,1.706,0,0,1-.473,1.468l-.585.585a1.7,1.7,0,0,1-1.206.5,1.675,1.675,0,0,1-1.194-.5,1.7,1.7,0,0,1,0-2.4l.585-.585a1.7,1.7,0,0,1,1.206-.5,1.457,1.457,0,0,1,.261.025l.647-.647A2.45,2.45,0,0,0,7.084,7.98Z" transform="translate(-4 -4)" fill="#404040"/>\n    </svg>\n    '},{name:"Form",svg:'\n    <svg id="igqdh" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="22" height="24"\n        viewBox="0 0 13 16">\n        <path id="Path_1209" data-gjs-type="svg-in" data-name="Path 1209"\n            d="M9.828,4A1.823,1.823,0,0,0,8,5.8V18.2A1.823,1.823,0,0,0,9.828,20h9.344A1.823,1.823,0,0,0,21,18.2V9.8a.6.6,0,0,0-.179-.424l-.006-.006L15.54,4.176A.614.614,0,0,0,15.109,4Zm0,1.2H14.5V8.6a1.823,1.823,0,0,0,1.828,1.8h3.453v7.8a.6.6,0,0,1-.609.6H9.828a.6.6,0,0,1-.609-.6V5.8A.6.6,0,0,1,9.828,5.2Zm5.891.848L18.92,9.2H16.328a.6.6,0,0,1-.609-.6Z"\n            transform="translate(-8 -4)" fill=""></path>\n    </svg>\n    '},{name:"Map",svg:'\n    <svg fill="#404040" width="25.909" height="25.909" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <path class="clr-i-outline clr-i-outline-path-1" d="M18,6.72a5.73,5.73,0,1,0,5.73,5.73A5.73,5.73,0,0,0,18,6.72Zm0,9.46a3.73,3.73,0,1,1,3.73-3.73A3.73,3.73,0,0,1,18,16.17Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M18,2A11.79,11.79,0,0,0,6.22,13.73c0,4.67,2.62,8.58,4.54,11.43l.35.52a99.61,99.61,0,0,0,6.14,8l.76.89.76-.89a99.82,99.82,0,0,0,6.14-8l.35-.53c1.91-2.85,4.53-6.75,4.53-11.42A11.79,11.79,0,0,0,18,2ZM23.59,24l-.36.53c-1.72,2.58-4,5.47-5.23,6.9-1.18-1.43-3.51-4.32-5.23-6.9L12.42,24c-1.77-2.64-4.2-6.25-4.2-10.31a9.78,9.78,0,1,1,19.56,0C27.78,17.79,25.36,21.4,23.59,24Z"></path>\n        <rect x="0" y="0" width="36" height="36" fill-opacity="0"/>\n    </svg>\n    '},{name:"Basket",svg:'\n            <svg xmlns="http://www.w3.org/2000/svg" width="21.202" height="23.999" viewBox="0 0 21.202 23.999">\n                <g id="noun-shopping-7351596" transform="translate(-78.269 -9.37)">\n                    <path id="Path_1308" data-name="Path 1308" d="M98.9,17.466a2.214,2.214,0,0,0-1.642-.732H94.479V15a5.627,5.627,0,1,0-11.255,0v1.737H80.481a2.211,2.211,0,0,0-2.195,2.492l1.585,12.219a2.214,2.214,0,0,0,2.191,1.924H95.991a2.207,2.207,0,0,0,2.2-1.981l1.269-12.219a2.2,2.2,0,0,0-.556-1.707ZM85.129,15a3.722,3.722,0,1,1,7.445,0v1.737H85.126V15ZM96.3,31.194a.3.3,0,0,1-.3.274H82.066a.3.3,0,0,1-.3-.267L80.18,18.983a.3.3,0,0,1,.072-.24.307.307,0,0,1,.229-.1H97.26a.3.3,0,0,1,.225.1.314.314,0,0,1,.076.236L96.292,31.194Z" transform="translate(0 0)" fill="#404040"/>\n                    <path id="Path_1309" data-name="Path 1309" d="M322.894,552.19a.956.956,0,1,0,.956.956A.957.957,0,0,0,322.894,552.19Z" transform="translate(-238.718 -531.79)" fill="#404040"/>\n                    <path id="Path_1310" data-name="Path 1310" d="M783.2,552.19a.956.956,0,1,0,.956.956A.957.957,0,0,0,783.2,552.19Z" transform="translate(-689.674 -531.79)" fill="#404040"/>\n                </g>\n            </svg>\n        '},{name:"Business",svg:'\n           <svg xmlns="http://www.w3.org/2000/svg" width="25.909" height="22.657" viewBox="0 0 25.909 22.657">\n                <path id="noun-business-7087804-converted-converted" d="M10.084.041A1.765,1.765,0,0,0,8.645.863a2.322,2.322,0,0,0-.31,1.442v.582L5.215,2.9c-3.114.017-3.121.017-3.4.115A2.724,2.724,0,0,0,.13,4.635L0,4.959V8.8c0,2.11.018,3.958.04,4.107a.807.807,0,0,0,.725.726l.177.028L.964,17.14c.013,2.079.039,3.585.066,3.737a2.363,2.363,0,0,0,1.7,1.752c.158.032,3.233.043,10.356.035l10.131-.012.381-.189A2.33,2.33,0,0,0,24.687,21.4a1.817,1.817,0,0,0,.2-.744c.028-.254.047-1.725.048-3.7l0-3.278.25-.069a1.331,1.331,0,0,0,.4-.193c.3-.244.288-.044.309-4.022.012-2.326,0-3.774-.028-4.124a1.764,1.764,0,0,0-.231-.907A2.734,2.734,0,0,0,24.034,3,21.582,21.582,0,0,0,20.676,2.9l-3.1-.018V2.412A2.2,2.2,0,0,0,17,.58,1.663,1.663,0,0,0,15.811.04C15.347,0,10.69,0,10.084.041M15.7,1.751c.122.025.144.128.145.678v.465H10.007l.026-.525a2.195,2.195,0,0,1,.073-.573A5.792,5.792,0,0,1,11.2,1.725c1.085-.025,4.345-.006,4.506.026m8.062,3a1.491,1.491,0,0,1,.254.237l.1.127.011,3.467c.011,3.085,0,3.467-.054,3.467-.036,0-1.975.244-4.309.542s-4.332.554-4.441.567l-.2.024-.03-.437a1.3,1.3,0,0,0-.6-1.2l-.261-.192-1.277.013c-1.446.015-1.441.014-1.8.387a1.221,1.221,0,0,0-.343.964c-.02.322-.044.454-.082.454s-1.568-.193-3.417-.429l-4.467-.569L1.74,12.035l-.028-.414c-.033-.5-.028-3.088.009-5.038l.028-1.429L1.871,5c.234-.308.229-.306,1.452-.333.607-.013,5.421-.023,10.7-.022l9.593,0,.154.109M13.388,14.468v1.425h-.863v-2.85h.863v1.425m-6.607-.063c2.149.273,3.93.505,3.956.514a3.2,3.2,0,0,1,.073.852,7.79,7.79,0,0,0,.075,1,1.441,1.441,0,0,0,.776.734,11.986,11.986,0,0,0,2.561.006,1.287,1.287,0,0,0,.8-.849c.023-.1.056-.544.073-.978.024-.617.043-.788.089-.788s1.8-.224,3.938-.5,3.935-.5,4-.5h.122l-.028,2.105q-.024,1.676-.029,3.353v1.247L23,20.8l-.188.189H3.064L2.871,20.8,2.678,20.6V13.875l.1.017c.053.009,1.856.24,4.006.513" transform="translate(0 -0.009)" fill="#404040" fill-rule="evenodd"/>\n           </svg> \n        '},{name:"Calendar",svg:'\n        <svg xmlns="http://www.w3.org/2000/svg" width="19.929" height="23.811" viewBox="0 0 19.929 23.811">\n            <path id="Group_718-converted" data-name="Group 718-converted" d="M5.809.048a1.008,1.008,0,0,0-.575.517c-.057.105-.065.214-.08,1.064l-.017.948L4.023,2.6a5.38,5.38,0,0,0-1.372.09A3.61,3.61,0,0,0,.109,5.237l-.092.332v15.2l.075.3a3.568,3.568,0,0,0,2.369,2.572c.554.181.219.173,7.513.173,7.4,0,6.994.011,7.6-.2a3.544,3.544,0,0,0,2.338-2.841c.028-.193.035-2.293.028-7.747l-.01-7.481-.091-.316A3.607,3.607,0,0,0,17.3,2.685,5.438,5.438,0,0,0,15.927,2.6l-1.114-.019L14.8,1.629,14.78.682,14.681.5a.922.922,0,0,0-.769-.5A.853.853,0,0,0,13.166.3c-.283.285-.3.359-.3,1.42v.878H7.082V1.718C7.082.649,7.068.578,6.788.3A.923.923,0,0,0,5.809.048M5.16,5.461c.01.888.014.947.082,1.073a.985.985,0,0,0,1.163.5.806.806,0,0,0,.379-.245c.282-.283.3-.359.3-1.4V4.522h5.786V5.38c0,1.052.015,1.125.294,1.4a.9.9,0,0,0,1.315.032c.3-.276.319-.355.319-1.412v-.88h.944a3.826,3.826,0,0,1,1.156.066,1.662,1.662,0,0,1,.925.768c.191.359.2.46.2,2.466V9.643H1.929V7.818c0-1.073.013-1.9.033-2a1.727,1.727,0,0,1,.75-1.08c.33-.193.443-.209,1.484-.211l.954,0,.01.939m12.861,10.51c0,3.007-.011,4.461-.035,4.6a1.648,1.648,0,0,1-1.255,1.275c-.249.052-13.263.052-13.512,0a1.646,1.646,0,0,1-1.254-1.254c-.026-.123-.036-1.5-.036-4.6V11.571H18.021v4.4m-6.549-.886c-.259.01-.362.027-.407.067s-.059.17-.059,1.927c0,1.829,0,1.875.066,1.94s.111.066,1.929.066,1.863,0,1.928-.066.067-.111.067-1.94,0-1.875-.066-1.933-.178-.06-1.588-.067q-.935-.007-1.87.006" transform="translate(-0.017 0.004)" fill="#404040" fill-rule="evenodd"/>\n        </svg>\n        '},{name:"Card",svg:'\n        <svg xmlns="http://www.w3.org/2000/svg" width="30.636" height="21.438" viewBox="0 0 30.636 21.438">\n            <path id="Path_1321-converted" data-name="Path 1321-converted" d="M2.954.053A3.566,3.566,0,0,0,.36,2.02C0,2.763.026,2.19.026,10.792v7.8L.165,19a3.5,3.5,0,0,0,.889,1.427,3.512,3.512,0,0,0,1.427.889l.409.139H27.8l.409-.139A3.715,3.715,0,0,0,30.523,19l.139-.409V2.89l-.139-.409a3.491,3.491,0,0,0-.889-1.427A3.491,3.491,0,0,0,28.207.165L27.8.026,15.5.018C8.732.015,3.088.03,2.954.053m24.9,1.906a1.739,1.739,0,0,1,.874.872,2.2,2.2,0,0,1,.164,1.042l.025.73H1.776L1.8,3.87a2.152,2.152,0,0,1,.163-1.035,1.737,1.737,0,0,1,1.225-.992c.117-.023,5.644-.039,12.283-.035l12.07.008.307.143m1.023,11.39v4.987l-.144.313a1.772,1.772,0,0,1-.879.874l-.307.143-12.017.013c-7.849.009-12.113,0-12.294-.037a1.7,1.7,0,0,1-1.389-1.378c-.058-.306-.075-9.836-.018-9.893.019-.019,6.113-.028,13.541-.021l13.507.012v4.987M4.6,10.741v.92h11V9.82H4.6v.921" transform="translate(-0.026 -0.018)" fill="#404040" fill-rule="evenodd"/>\n        </svg>\n        '},{name:"Document",svg:'\n        <svg xmlns="http://www.w3.org/2000/svg" width="18.648" height="23.81" viewBox="0 0 18.648 23.81">\n            <path id="file-text-converted" d="M2.658.045A3.408,3.408,0,0,0,1.34.567a4.264,4.264,0,0,0-.868.925A3.694,3.694,0,0,0,.07,2.5c-.051.239-.054.787-.054,9.416s0,9.177.054,9.416a3.7,3.7,0,0,0,.4,1.007,4.219,4.219,0,0,0,.868.925,3.551,3.551,0,0,0,1.24.513c.3.057,13.208.057,13.507,0a3.154,3.154,0,0,0,.853-.294,2.648,2.648,0,0,0,.735-.514,3.129,3.129,0,0,0,.959-1.906c.027-.217.034-2.1.027-7.034l-.01-6.738-.093-.175c-.071-.135-.823-.94-3.207-3.436Q13.736,1.987,12.115.3a1.278,1.278,0,0,0-.293-.2L11.651.016,7.28.011c-3.384,0-4.428,0-4.622.034M10.111,4.79c0,1.95.011,2.848.035,2.963a.972.972,0,0,0,.824.772c.108.018,1.321.03,2.945.031h2.761v6.093c0,3.938-.011,6.152-.031,6.258a1.139,1.139,0,0,1-.908.9c-.11.02-2.373.028-6.514.023-5.24-.007-6.365-.016-6.456-.051a1.374,1.374,0,0,1-.562-.441c-.232-.33-.214.456-.214-9.425s-.018-9.1.213-9.425a1.214,1.214,0,0,1,.627-.451c.145-.038.725-.045,3.726-.047l3.554,0v2.8m3.669.126c.84.881,1.527,1.612,1.527,1.625s-.721.024-1.6.024H12.1V3.159l.076.077,1.6,1.68m-8.993,2.8a.968.968,0,0,0-.473.388.986.986,0,0,0,.337,1.405c.215.127.443.144,1.713.134l1.181-.01.178-.083A1.056,1.056,0,0,0,8.246,9,.838.838,0,0,0,8.3,8.587a.977.977,0,0,0-.552-.845l-.14-.073L6.269,7.662a5.362,5.362,0,0,0-1.482.05m-.058,4.326a1.09,1.09,0,0,0-.626.531,1.181,1.181,0,0,0,0,.846,1.136,1.136,0,0,0,.5.489l.171.081,4.184.009c2.952.006,4.244,0,4.387-.026a.942.942,0,0,0,.581-.318.991.991,0,0,0-.307-1.554l-.134-.071-4.34-.006c-2.387,0-4.375.006-4.418.019m.054,3.987a.993.993,0,0,0-.433,1.711,1.189,1.189,0,0,0,.306.183c.167.063.221.064,4.444.064,4.252,0,4.277,0,4.448-.065A1.138,1.138,0,0,0,14.1,17.4a1.1,1.1,0,0,0-.012-.817,1.041,1.041,0,0,0-.494-.5l-.171-.081L9.162,16c-2.429,0-4.312.007-4.379.023" transform="translate(-0.016 -0.01)" fill="#404040" fill-rule="evenodd"/>\n        </svg>\n        '},{name:"Entertainment",svg:'\n        <svg xmlns="http://www.w3.org/2000/svg" width="24.688" height="24.678" viewBox="0 0 24.688 24.678">\n            <path id="noun-entertainment-7156613-converted" d="M9.749.041a.786.786,0,0,0-.482.385C9.183.6,9.182.651,9.182,3.735c0,1.8.018,3.314.042,3.559a9.016,9.016,0,0,0,.542,2.3l.137.355.678-.265c.374-.146.683-.269.687-.273q-.078-.266-.171-.527a7.271,7.271,0,0,1-.391-1.837c-.022-.267-.041-1.5-.041-2.737V2.062l.443.22a13.094,13.094,0,0,0,5.816,1.34,12.977,12.977,0,0,0,5.715-1.276c.283-.135.53-.246.549-.246.05,0,.044,4.408-.007,4.979A6.9,6.9,0,0,1,22.437,9.7a6.718,6.718,0,0,1-1.188,1.72c-.516.543-2.574,2.424-2.77,2.531-.15.083-.227.093-.7.093h-.529v1.482h.6c1.137,0,1.214-.042,2.852-1.546a17.756,17.756,0,0,0,2.2-2.2,9.017,9.017,0,0,0,1.69-3.932,25.148,25.148,0,0,0,.1-3.747c.013-2.376,0-3.354-.029-3.508A.73.73,0,0,0,23.8.04,3.868,3.868,0,0,0,23.2.354a14.807,14.807,0,0,1-1.662.86,11.939,11.939,0,0,1-9.321-.059A14.425,14.425,0,0,1,10.586.294,1.638,1.638,0,0,0,9.9,0a1.084,1.084,0,0,0-.154.037m3.859,5.425a2.7,2.7,0,0,0-.967.266,2.2,2.2,0,0,0-.689.5,2.257,2.257,0,0,0-.338.375,5.067,5.067,0,0,0,.558.5l.556.458.208-.22a1,1,0,0,1,.8-.387,1.065,1.065,0,0,1,.824.395.692.692,0,0,0,.188.181,5.911,5.911,0,0,0,.591-.458l.55-.457L15.7,6.4a2.8,2.8,0,0,0-1.285-.838,3.18,3.18,0,0,0-.8-.091m6.227.019a2.75,2.75,0,0,0-1.664.923l-.18.212.567.474.568.474.206-.22a1.045,1.045,0,0,1,.8-.388,1.1,1.1,0,0,1,.826.4l.187.208.561-.459a5.62,5.62,0,0,0,.564-.5,2.515,2.515,0,0,0-.339-.374,2.473,2.473,0,0,0-2.1-.753M14,7.551c-.053.029-.377.331-.72.67a11.663,11.663,0,0,1-3.424,2.433,11.456,11.456,0,0,1-5.352,1.107,11.15,11.15,0,0,1-3.237-.522c-.582-.179-.752-.16-1.036.116a.669.669,0,0,0-.213.6c.07.331,1.517,5.693,1.63,6.039a8.9,8.9,0,0,0,1,2.1,9.2,9.2,0,0,0,2.687,2.63c.541.335,3.394,1.806,3.657,1.885a2.251,2.251,0,0,0,.638.073,6.124,6.124,0,0,0,1.729-.363c1.511-.407,1.771-.516,2.141-.9A36.641,36.641,0,0,0,15.876,19.7a8.7,8.7,0,0,0,.861-4.853,11.818,11.818,0,0,0-.46-2.121L16,11.683l.121-.1a1.151,1.151,0,0,1,.822-.275.936.936,0,0,1,.539.109,1.637,1.637,0,0,1,.619.635.4.4,0,0,0,.31.22,11.2,11.2,0,0,0,1.159-.494,2.809,2.809,0,0,0-.55-1.009,2.743,2.743,0,0,0-3.171-.737,1,1,0,0,1-.259.1q-.154-.536-.294-1.076a11.7,11.7,0,0,0-.368-1.214.779.779,0,0,0-.924-.284m.521,4.38c.324,1.217.615,2.342.648,2.5a7.318,7.318,0,0,1-.777,4.9c-.3.535-1.8,2.881-1.928,3.011-.175.184-.286.223-1.616.575-1.109.293-1.2.312-1.38.271s-2.141-1.042-3.061-1.558a7.355,7.355,0,0,1-3.224-3.723c-.076-.2-.408-1.365-.738-2.6S1.84,13.039,1.827,13c-.018-.06-.007-.071.053-.052.165.052,1.008.194,1.517.255a16.493,16.493,0,0,0,2.676.019,13.472,13.472,0,0,0,7.515-3.23,4.047,4.047,0,0,1,.329-.27c.011,0,.286.995.609,2.212m-2.6,1.8a2.688,2.688,0,0,0-1.694,1.352.8.8,0,0,0-.121.357c.019.019.318.165.664.324l.629.289.1-.2a1.035,1.035,0,0,1,1.62-.466c.122.08.235.13.251.111a9.483,9.483,0,0,0,.8-1.2,2.734,2.734,0,0,0-2.251-.563m-6,1.628a2.548,2.548,0,0,0-1.456.786,2.909,2.909,0,0,0-.558.9c0,.041.217.161.628.347.345.157.641.291.657.3s.084-.094.151-.226a1.134,1.134,0,0,1,.669-.6.907.907,0,0,1,.9.164,1.358,1.358,0,0,0,.243.143,2.781,2.781,0,0,0,.313-.4c.155-.221.344-.489.421-.6l.139-.195-.317-.207a2.667,2.667,0,0,0-1.792-.412m5.193,3.484a1.378,1.378,0,0,1-.356.756,1.309,1.309,0,0,1-1.5.246,1.847,1.847,0,0,1-.376-.326,1.912,1.912,0,0,0-.25-.249c-.033,0-1.118.862-1.13.9a1.1,1.1,0,0,0,.194.267,2.693,2.693,0,0,0,2.142,1.031,2.633,2.633,0,0,0,1.276-.308,2.128,2.128,0,0,0,.681-.5,2.706,2.706,0,0,0,.8-1.645c.022-.136.018-.2-.013-.215q-.3-.058-.6-.1-.343-.051-.685-.105l-.13-.022-.048.275" transform="translate(-0.012 -0.003)" fill="#404040" fill-rule="evenodd"/>\n        </svg>\n        '},{name:"Food",svg:'\n        <svg xmlns="http://www.w3.org/2000/svg" width="30.333" height="24.656" viewBox="0 0 30.333 24.656">\n            <g id="food-17" transform="translate(-32 437.536)">\n                <path id="Path_1266" data-name="Path 1266" d="M341.073-437.452a1.061,1.061,0,0,0-.544.782c0,.109.17,1.2.374,2.435s.374,2.272.374,2.306-.2.075-.5.075a1.05,1.05,0,0,0-1.088.544c-.122.238-.116.354.36,8.964.272,4.795.517,8.794.544,8.875a1.116,1.116,0,0,0,.53.53c.1.034,1.483.061,3.224.061,3.367,0,3.305.007,3.6-.422.156-.211.163-.354.612-8.413.544-9.671.53-9.358.381-9.644-.245-.469-.2-.456-3.1-.5l-2.618-.034-.422-2.523c-.231-1.387-.456-2.591-.5-2.666A1,1,0,0,0,341.073-437.452Zm6.012,8.127c-.027.347-.218,3.754-.428,7.57l-.381,6.937-1.959.02a15.214,15.214,0,0,1-1.952-.048c0-.034-.184-3.367-.408-7.406s-.408-7.427-.408-7.522v-.177h5.57Z" transform="translate(-286.697 0)" fill="#404040"/>\n                <path id="Path_1267" data-name="Path 1267" d="M40.5-325.785a12.692,12.692,0,0,0-4.829,1.292,6.823,6.823,0,0,0-3.5,4.516c-.19.884-.109,1.258.32,1.571l.224.156H42c9.209,0,9.283,0,9.522-.136a1.18,1.18,0,0,0,.36-.374c.32-.612-.218-2.442-1.068-3.632A8.57,8.57,0,0,0,49-324.119a12.581,12.581,0,0,0-7.107-1.7C41.3-325.813,40.672-325.8,40.5-325.785Zm4.013,2.02c2.353.408,3.945,1.258,4.876,2.625a3.467,3.467,0,0,1,.456.864l.048.156H42.039c-5.693,0-7.862-.02-7.862-.075a4.688,4.688,0,0,1,.966-1.523,7.684,7.684,0,0,1,4.917-2.115A24.288,24.288,0,0,1,44.515-323.766Z" transform="translate(-0.069 -104.118)" fill="#404040"/>\n                <path id="Path_1268" data-name="Path 1268" d="M60.429-199.864a.933.933,0,0,0-.292,1.272c.272.456-.231.428,7.937.428,7.3,0,7.4,0,7.624-.136a.991.991,0,0,0,.422-.782.991.991,0,0,0-.422-.782c-.224-.136-.32-.136-7.638-.136C60.83-200,60.64-199.993,60.429-199.864Z" transform="translate(-26.096 -221.381)" fill="#404040"/>\n                <path id="Path_1269" data-name="Path 1269" d="M32.748-158.6a1.222,1.222,0,0,0-.36.17c-.381.272-.388.333-.388,2.652,0,2.387.014,2.469.483,2.72.224.116.619.122,9.562.109l9.324-.02.184-.17c.367-.347.374-.374.374-2.632,0-2.346-.014-2.435-.476-2.707-.238-.136-.32-.136-9.385-.143C37.033-158.632,32.843-158.618,32.748-158.6ZM50.023-155.8v.952H33.9v-1.9H50.023Z" transform="translate(0 -259.941)" fill="#404040"/>\n            </g>\n        </svg>\n        '},{name:"Globe",svg:'\n        <svg xmlns="http://www.w3.org/2000/svg" width="22.531" height="22.53" viewBox="0 0 22.531 22.53">\n            <path id="noun-website-7190948" d="M144.859,133.6h0a11.265,11.265,0,1,0,11.266,11.265A11.264,11.264,0,0,0,144.858,133.6Zm-3.679,2.292h0a16.019,16.019,0,0,0-1.689,3.267h0a14.548,14.548,0,0,1-1.777-.85,9.7,9.7,0,0,1,3.465-2.418Zm7.358,0h0A9.714,9.714,0,0,1,152,138.31h0a14.769,14.769,0,0,1-1.775.849,16.119,16.119,0,0,0-1.689-3.269Zm-2.894-.692h0c.138.01.272.025.408.042h0a14.507,14.507,0,0,1,2.683,4.418h0a14.555,14.555,0,0,1-3.09.5Zm-1.572,4.962h0a14.568,14.568,0,0,1-3.091-.5h0a14.535,14.535,0,0,1,2.681-4.418c.136-.017.272-.031.41-.042Zm-3.574.994h0a16.111,16.111,0,0,0,3.576.577l0,2.345h-4.031a14.525,14.525,0,0,1,.456-2.922Zm-3.758-1.594h0a16.07,16.07,0,0,0,2.266,1.095h0a16.139,16.139,0,0,0-.538,3.422H135.2a9.632,9.632,0,0,1,1.546-4.518Zm12.478,1.593h0a14.525,14.525,0,0,1,.457,2.924h-4.032l0-2.345a16.165,16.165,0,0,0,3.576-.579Zm3.758-1.594h0a9.645,9.645,0,0,1,1.546,4.518h-3.276a16.068,16.068,0,0,0-.537-3.423h0a16.1,16.1,0,0,0,2.262-1.1Zm-8.9,8.435a15.961,15.961,0,0,0-3.574.577,14.468,14.468,0,0,1-.456-2.924h4.031Zm5.6-2.346h0a14.538,14.538,0,0,1-.457,2.922,16.093,16.093,0,0,0-3.574-.579V145.65Zm-11.206,0a16.079,16.079,0,0,0,.537,3.422h0a15.861,15.861,0,0,0-2.263,1.095h0a9.633,9.633,0,0,1-1.546-4.518Zm16.054,0h0a9.635,9.635,0,0,1-1.548,4.518,16.1,16.1,0,0,0-2.263-1.095h0a16.1,16.1,0,0,0,.537-3.424Zm-4.3,4.92h0a14.457,14.457,0,0,1,1.777.849h0a9.71,9.71,0,0,1-3.465,2.416,16.074,16.074,0,0,0,1.688-3.267Zm-10.735,0a16.08,16.08,0,0,0,1.688,3.267h0a9.728,9.728,0,0,1-3.465-2.417h0a14.293,14.293,0,0,1,1.771-.848Zm6.155-1h0a14.433,14.433,0,0,1,3.092.5h0a14.526,14.526,0,0,1-2.682,4.417h0c-.136.016-.273.031-.411.042Zm-1.574,0v4.962c-.138-.011-.275-.025-.412-.042h0a14.572,14.572,0,0,1-2.679-4.418h0a14.494,14.494,0,0,1,3.09-.5Z" transform="translate(-133.593 -133.6)" fill="#404040"/>\n        </svg>\n        '},{name:"Info",svg:'\n        <svg xmlns="http://www.w3.org/2000/svg" width="22.932" height="22.946" viewBox="0 0 22.932 22.946">\n            <path id="Path_1302-converted" data-name="Path 1302-converted" d="M10.757.027c-.074.009-.324.035-.554.058A11.477,11.477,0,1,0,22.638,14.2a9.365,9.365,0,0,0,.3-2.709,9.4,9.4,0,0,0-.281-2.621A11.52,11.52,0,0,0,12.92.1a19.476,19.476,0,0,0-2.162-.07m2.119,1.934a9.076,9.076,0,0,1,2.876.9,9.574,9.574,0,0,1,4.362,4.362A8.632,8.632,0,0,1,20.8,9.042a8.768,8.768,0,0,1,.3,2.445,9.044,9.044,0,0,1-.986,4.268,9.643,9.643,0,0,1-6.735,5.182,7.954,7.954,0,0,1-1.895.174,8.674,8.674,0,0,1-2.679-.366,9.676,9.676,0,0,1-6.772-7.392,8.52,8.52,0,0,1-.167-1.9,9.118,9.118,0,0,1,.988-4.229A9.608,9.608,0,0,1,12.876,1.962M11.064,4.373a1.931,1.931,0,0,0-.9.511,1.783,1.783,0,0,0-.55,1.322,1.882,1.882,0,0,0,1.875,1.876A1.882,1.882,0,0,0,13.36,6.205a1.783,1.783,0,0,0-.55-1.322,1.891,1.891,0,0,0-1.746-.511m-1.943,5.67.01.928.469.011.469.011v5.356H9.111l.01.909.01.909h4.708l.01-.909.01-.909H12.9V9.114H9.111l.01.928" transform="translate(-0.01 -0.017)" fill="#404040" fill-rule="evenodd"/>\n        </svg>\n        '},{name:"Pill",svg:'\n        <svg xmlns="http://www.w3.org/2000/svg" width="22.203" height="22.204" viewBox="0 0 22.203 22.204">\n            <path id="Path_1320-converted" data-name="Path 1320-converted" d="M15.1.021a6.773,6.773,0,0,0-2.613.744c-.925.476-.725.29-5.943,5.5-2.626,2.62-4.88,4.89-5.007,5.043A6.725,6.725,0,0,0,.088,14.494,9.213,9.213,0,0,0,.07,16.532a6.721,6.721,0,0,0,1.9,3.749A6.455,6.455,0,0,0,4.337,21.8a6.169,6.169,0,0,0,2.335.414A6.25,6.25,0,0,0,9.021,21.8a6.511,6.511,0,0,0,1.692-.923c.324-.24,9.528-9.4,9.963-9.923A6.668,6.668,0,0,0,16.607.091a10,10,0,0,0-1.5-.07m1.242,1.927A4.82,4.82,0,0,1,20.3,5.912a6.166,6.166,0,0,1-.04,1.761,5.145,5.145,0,0,1-.857,1.88c-.216.294-3.7,3.829-3.773,3.829-.052,0-6.768-6.716-6.768-6.768,0-.022.805-.839,1.789-1.816,1.209-1.2,1.886-1.846,2.09-1.99a5.04,5.04,0,0,1,2.028-.859,6.02,6.02,0,0,1,1.581,0" transform="translate(-0.022 -0.014)" fill="#404040" fill-rule="evenodd"/>\n        </svg>\n        '},{name:"Taxi",svg:'\n        <svg xmlns="http://www.w3.org/2000/svg" width="23.189" height="23.616" viewBox="0 0 23.189 23.616">\n            <path id="noun-taxi-5761860-converted" d="M9.13.042a1.913,1.913,0,0,0-1.262.98,2.426,2.426,0,0,0-.212,1.153v.377H6.1c-1.732,0-1.793.007-2.3.257a2.9,2.9,0,0,0-1.005.919c-.3.5-.29.432-.663,4.115q-.166,1.7-.354,3.389a1.79,1.79,0,0,1-.222.055A2.013,2.013,0,0,0,.041,12.864c-.032.187-.041,1.144-.032,3.3C.02,19.11.023,19.2.1,19.414a2.452,2.452,0,0,0,.392.7,2.284,2.284,0,0,0,.787.542l.229.084v.706a3.016,3.016,0,0,0,.073.942,1.854,1.854,0,0,0,.971,1.1l.251.12h3.21l.251-.12a1.854,1.854,0,0,0,.971-1.1,2.879,2.879,0,0,0,.073-.908V20.8h8.545v.454a3.067,3.067,0,0,0,.2,1.354,1.992,1.992,0,0,0,.872.87l.264.125,1.523.011c1.725.012,1.759.008,2.176-.272a2.034,2.034,0,0,0,.694-.833,2.446,2.446,0,0,0,.1-1l.014-.778.226-.083a2.265,2.265,0,0,0,.784-.541,2.406,2.406,0,0,0,.385-.683l.087-.229.011-3.035c.009-2.154,0-3.112-.032-3.3a2.021,2.021,0,0,0-1.52-1.579c-.213-.043-.215-.044-.236-.2-.012-.088-.16-1.56-.33-3.272s-.334-3.226-.367-3.364a2.221,2.221,0,0,0-.668-1.161,2.136,2.136,0,0,0-.627-.476c-.519-.252-.576-.258-2.309-.258H15.544V2.175a2.426,2.426,0,0,0-.212-1.153A1.887,1.887,0,0,0,14.04.039c-.254-.048-4.663-.046-4.91,0m4.758,1.607c.06.055.071.127.071.484v.419H9.241V2.139c0-.329.013-.426.064-.483s.183-.071,2.288-.071a9.351,9.351,0,0,1,2.3.064m4.828,2.537a.92.92,0,0,1,.459.618c.023.112.173,1.517.333,3.123s.3,3,.314,3.1l.024.183H11.6c-4.533,0-8.241-.01-8.241-.023,0-.142.631-6.236.661-6.386a.92.92,0,0,1,.459-.618L4.656,4.1H18.544l.172.087M21.5,12.944l.113.127v2.92c0,3.171.006,3.081-.212,3.18-.078.036-2.364.046-9.807.046-10.561,0-9.861.015-9.964-.211-.035-.076-.047-.838-.047-3.014V13.08l.083-.1a.52.52,0,0,1,.164-.139c.045-.018,4.464-.029,9.82-.025l9.737.007.113.126m-15.866.631a2.33,2.33,0,0,0-1.462.732,2.55,2.55,0,0,0-.659,1.16,3.475,3.475,0,0,0,0,1.16,2.636,2.636,0,0,0,.945,1.419,2.264,2.264,0,0,0,1.479.479A2.215,2.215,0,0,0,7.7,17.791a2.442,2.442,0,0,0,0-3.489,2.353,2.353,0,0,0-2.06-.727m11.252,0a2.5,2.5,0,0,0-2.063,1.709,2.671,2.671,0,0,0-.021,1.459,2.515,2.515,0,0,0,1.765,1.72,3.237,3.237,0,0,0,1.256,0,2.521,2.521,0,0,0,1.78-1.782,2.491,2.491,0,0,0-2.717-3.106m-10.6,1.6a.9.9,0,0,1,.158,1.593.634.634,0,0,1-.471.109.622.622,0,0,1-.49-.125.885.885,0,0,1,.088-1.532.875.875,0,0,1,.715-.045m11.288.015a1.188,1.188,0,0,1,.286.2.885.885,0,0,1-.133,1.349c-.18.13-.207.137-.5.137a.62.62,0,0,1-.491-.125.885.885,0,0,1,.088-1.532.875.875,0,0,1,.751-.03M5.761,21.37c0,.474-.01.579-.064.638s-.15.071-1.268.071a4.707,4.707,0,0,1-1.28-.055c-.067-.049-.076-.114-.087-.638L3.049,20.8H5.761v.567m14.384,0c0,.474-.01.579-.064.638s-.151.071-1.293.071c-1.226,0-1.229,0-1.289-.086-.048-.068-.06-.2-.06-.638V20.8h2.706v.567" transform="translate(-0.006 -0.004)" fill="#404040" fill-rule="evenodd"/>\n        </svg>\n        '}];class br{constructor(){this.themeManager=new $s}getTypeSVG(t){var e;if(!t.CtaButtonIcon){let e;switch(t.CtaType){case"Phone":e=`\n        <svg ${nr} id="ixdtl" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32" height="32"\n                    viewBox="0 0 49.417 49.418">\n            <path ${nr} id="call" data-gjs-type="svg-in"\n                d="M29.782,3a2.149,2.149,0,1,0,0,4.3A19.3,19.3,0,0,1,49.119,26.634a2.149,2.149,0,1,0,4.3,0A23.667,23.667,0,0,0,29.782,3ZM12.032,7.305a2.548,2.548,0,0,0-.818.067,8.342,8.342,0,0,0-3.9,2.342C2.775,14.254.366,21.907,17.437,38.98S42.16,53.643,46.7,49.1a8.348,8.348,0,0,0,2.346-3.907,2.524,2.524,0,0,0-1.179-2.786c-2.424-1.418-7.654-4.484-10.08-5.9a2.523,2.523,0,0,0-2.568.012l-4.012,2.392a2.517,2.517,0,0,1-2.845-.168,65.811,65.811,0,0,1-5.711-4.981,65.07,65.07,0,0,1-4.981-5.711A2.512,2.512,0,0,1,17.5,25.2L19.9,21.191a2.533,2.533,0,0,0,.008-2.577L14.012,8.556A2.543,2.543,0,0,0,12.032,7.305Zm17.751,4.289a2.149,2.149,0,1,0,0,4.3A10.709,10.709,0,0,1,40.525,26.634a2.149,2.149,0,1,0,4.3,0A15.072,15.072,0,0,0,29.782,11.594Zm0,8.594a2.149,2.149,0,1,0,0,4.3,2.114,2.114,0,0,1,2.149,2.148,2.149,2.149,0,1,0,4.3,0A6.479,6.479,0,0,0,29.782,20.188Z"\n                transform="translate(-4 -3)" fill="${t.CtaColor?t.CtaColor:"#ffffff"}"></path>\n        </svg>\n        `;break;case"Email":e=`\n        <svg ${nr} id="inavf" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32"\n            height="28" viewBox="0 0 41 32.8">\n            <path ${nr} id="Path_1218" data-gjs-type="svg-in" data-name="Path 1218"\n                d="M6.1,4A4.068,4.068,0,0,0,2.789,5.7a1.5,1.5,0,0,0,.444,2.126l18,11.219a2.387,2.387,0,0,0,2.531,0L41.691,7.732a1.5,1.5,0,0,0,.384-2.2A4.063,4.063,0,0,0,38.9,4Zm35.907,8.376a.963.963,0,0,0-.508.152L23.765,23.711a2.392,2.392,0,0,1-2.531,0L3.5,12.656a.98.98,0,0,0-1.5.833V32.7a4.1,4.1,0,0,0,4.1,4.1H38.9A4.1,4.1,0,0,0,43,32.7V13.357A.981.981,0,0,0,42.007,12.376Z"\n                transform="translate(-2 -4)" fill="${t.CtaColor?t.CtaColor:"#ffffff"}"></path>\n        </svg>\n        `;break;case"WebLink":e=`\n        <svg ${nr} xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16">\n          <path${nr} id="Path_1213" data-name="Path 1213" d="M15.833,4a4.163,4.163,0,0,0-2.958,1.229l-.979.979a4.168,4.168,0,0,0-1.229,2.958,4.1,4.1,0,0,0,.292,1.521L12.042,9.6a2.857,2.857,0,0,1,.792-2.458l.979-.979a2.853,2.853,0,0,1,2.021-.833,2.805,2.805,0,0,1,2,.833,2.85,2.85,0,0,1,0,4.021l-.979.979A2.853,2.853,0,0,1,14.833,12a2.439,2.439,0,0,1-.437-.042l-1.083,1.083a4.1,4.1,0,0,0,1.521.292A4.163,4.163,0,0,0,17.792,12.1l.979-.979A4.168,4.168,0,0,0,20,8.167,4.2,4.2,0,0,0,15.833,4ZM14.188,8.854,8.854,14.188l.958.958,5.333-5.333ZM9.167,10.667A4.163,4.163,0,0,0,6.208,11.9l-.979.979A4.168,4.168,0,0,0,4,15.833,4.2,4.2,0,0,0,8.167,20a4.163,4.163,0,0,0,2.958-1.229l.979-.979a4.168,4.168,0,0,0,1.229-2.958,4.1,4.1,0,0,0-.292-1.521L11.958,14.4a2.857,2.857,0,0,1-.792,2.458l-.979.979a2.853,2.853,0,0,1-2.021.833,2.805,2.805,0,0,1-2-.833,2.85,2.85,0,0,1,0-4.021l.979-.979A2.853,2.853,0,0,1,9.167,12a2.44,2.44,0,0,1,.438.042l1.083-1.083A4.1,4.1,0,0,0,9.167,10.667Z" transform="translate(-4 -4)" fill="${t.CtaColor?t.CtaColor:"#ffffff"}"></path>\n        </svg>\n        `;break;case"Form":e=`\n        <svg ${nr} id="igqdh" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="26" height="30"\n              viewBox="0 0 13 16">\n              <path ${nr} id="Path_1209" data-gjs-type="svg-in" data-name="Path 1209"\n                  d="M9.828,4A1.823,1.823,0,0,0,8,5.8V18.2A1.823,1.823,0,0,0,9.828,20h9.344A1.823,1.823,0,0,0,21,18.2V9.8a.6.6,0,0,0-.179-.424l-.006-.006L15.54,4.176A.614.614,0,0,0,15.109,4Zm0,1.2H14.5V8.6a1.823,1.823,0,0,0,1.828,1.8h3.453v7.8a.6.6,0,0,1-.609.6H9.828a.6.6,0,0,1-.609-.6V5.8A.6.6,0,0,1,9.828,5.2Zm5.891.848L18.92,9.2H16.328a.6.6,0,0,1-.609-.6Z"\n                  transform="translate(-8 -4)" fill="${t.CtaColor?t.CtaColor:"#ffffff"}"></path>\n          </svg>\n        `}return e}{const n=null===(e=vr.find((e=>e.name===t.CtaButtonIcon)))||void 0===e?void 0:e.svg,i=document.createElement("div");i.innerHTML=n||"";const a=i.querySelector("svg");if(a)return a.setAttribute("height","32"),a.setAttribute("width","32"),a.querySelectorAll("path").forEach((e=>{e.setAttribute("fill",(null==t?void 0:t.CtaColor)||"#fff")})),this.addGrapesAttributes(i.innerHTML)}}addGrapesAttributes(t){const e=document.createElement("div");return"string"==typeof t&&(e.innerHTML=t),e.querySelectorAll("*").forEach((t=>{t.setAttribute("data-gjs-draggable","false"),t.setAttribute("data-gjs-selectable","false"),t.setAttribute("data-gjs-editable","false"),t.setAttribute("data-gjs-highlightable","false"),t.setAttribute("data-gjs-droppable","false"),t.setAttribute("data-gjs-resizable","false"),t.setAttribute("data-gjs-hoverable","false")})),e.innerHTML}phoneCta(t,e){return`\n        <div ${or} data-gjs-type="cta-buttons" button-type="${t.CallToActionType}" class="cta-container-child cta-child" id="${e}">\n                    <div ${nr} data-gjs-type="default" class="cta-button cta-styled-btn"\n                        style="background-color: ${this.themeManager.getThemeCtaColor("CtaColorOne")}">\n                        <svg ${nr} id="ixdtl" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32" height="32"\n                            viewBox="0 0 49.417 49.418">\n                            <path ${nr} id="call" data-gjs-type="svg-in"\n                                d="M29.782,3a2.149,2.149,0,1,0,0,4.3A19.3,19.3,0,0,1,49.119,26.634a2.149,2.149,0,1,0,4.3,0A23.667,23.667,0,0,0,29.782,3ZM12.032,7.305a2.548,2.548,0,0,0-.818.067,8.342,8.342,0,0,0-3.9,2.342C2.775,14.254.366,21.907,17.437,38.98S42.16,53.643,46.7,49.1a8.348,8.348,0,0,0,2.346-3.907,2.524,2.524,0,0,0-1.179-2.786c-2.424-1.418-7.654-4.484-10.08-5.9a2.523,2.523,0,0,0-2.568.012l-4.012,2.392a2.517,2.517,0,0,1-2.845-.168,65.811,65.811,0,0,1-5.711-4.981,65.07,65.07,0,0,1-4.981-5.711A2.512,2.512,0,0,1,17.5,25.2L19.9,21.191a2.533,2.533,0,0,0,.008-2.577L14.012,8.556A2.543,2.543,0,0,0,12.032,7.305Zm17.751,4.289a2.149,2.149,0,1,0,0,4.3A10.709,10.709,0,0,1,40.525,26.634a2.149,2.149,0,1,0,4.3,0A15.072,15.072,0,0,0,29.782,11.594Zm0,8.594a2.149,2.149,0,1,0,0,4.3,2.114,2.114,0,0,1,2.149,2.148,2.149,2.149,0,1,0,4.3,0A6.479,6.479,0,0,0,29.782,20.188Z"\n                                transform="translate(-4 -3)" fill="#fff"></path>\n                        </svg>\n                        <div ${nr} id="it1cq" data-gjs-type="default" class="cta-badge">\n                          <svg fill="#5068a8" id="ityrb" data-gjs-type="default" ${nr} width="14px" height="14px" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                              <title ${nr}>delete</title>\n                              <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-1" d="M27.14,34H8.86A2.93,2.93,0,0,1,6,31V11.23H8V31a.93.93,0,0,0,.86,1H27.14A.93.93,0,0,0,28,31V11.23h2V31A2.93,2.93,0,0,1,27.14,34Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M30.78,9H5A1,1,0,0,1,5,7H30.78a1,1,0,0,1,0,2Z"></path>\n                              <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-3" x="21" y="13" width="2" height="15"></rect>\n                              <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-4" x="13" y="13" width="2" height="15"></rect>\n                              <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-5" d="M23,5.86H21.1V4H14.9V5.86H13V4a2,2,0,0,1,1.9-2h6.2A2,2,0,0,1,23,4Z"></path>\n                              <rect fill="#5068a8" ${nr} x="0" y="0" width="36" height="36" fill-opacity="0"/>\n                          </svg>\n                        </div>\n                    </div>\n                    <div ${nr} id="irtak" data-gjs-type="text" class="cta-label label">${t.CallToActionName}</div>\n        </div>\n        `}emailCta(t,e){return`\n        <div ${or} data-gjs-type="cta-buttons"  button-type="${t.CallToActionType}" class="cta-container-child cta-child" id="${e}">\n                    <div ${nr} id="i4iaf" data-gjs-type="default" class="cta-button cta-styled-btn"\n                        style="background-color: ${this.themeManager.getThemeCtaColor("CtaColorOne")}">\n                        <svg ${nr} id="inavf" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32"\n                            height="28" viewBox="0 0 41 32.8">\n                            <path ${nr} id="Path_1218" data-gjs-type="svg-in" data-name="Path 1218"\n                                d="M6.1,4A4.068,4.068,0,0,0,2.789,5.7a1.5,1.5,0,0,0,.444,2.126l18,11.219a2.387,2.387,0,0,0,2.531,0L41.691,7.732a1.5,1.5,0,0,0,.384-2.2A4.063,4.063,0,0,0,38.9,4Zm35.907,8.376a.963.963,0,0,0-.508.152L23.765,23.711a2.392,2.392,0,0,1-2.531,0L3.5,12.656a.98.98,0,0,0-1.5.833V32.7a4.1,4.1,0,0,0,4.1,4.1H38.9A4.1,4.1,0,0,0,43,32.7V13.357A.981.981,0,0,0,42.007,12.376Z"\n                                transform="translate(-2 -4)" fill="#fff"></path>\n                        </svg>\n                        <div ${nr} id="i2knu" data-gjs-type="default" class="cta-badge">\n                            <svg fill="#5068a8" id="idkak" data-gjs-type="default" ${nr} width="14px" height="14px" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                                <title ${nr}>delete</title>\n                                <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-1" d="M27.14,34H8.86A2.93,2.93,0,0,1,6,31V11.23H8V31a.93.93,0,0,0,.86,1H27.14A.93.93,0,0,0,28,31V11.23h2V31A2.93,2.93,0,0,1,27.14,34Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M30.78,9H5A1,1,0,0,1,5,7H30.78a1,1,0,0,1,0,2Z"></path>\n                                <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-3" x="21" y="13" width="2" height="15"></rect>\n                                <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-4" x="13" y="13" width="2" height="15"></rect>\n                                <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-5" d="M23,5.86H21.1V4H14.9V5.86H13V4a2,2,0,0,1,1.9-2h6.2A2,2,0,0,1,23,4Z"></path>\n                                <rect fill="#5068a8" ${nr} x="0" y="0" width="36" height="36" fill-opacity="0"/>\n                            </svg>\n                        </div>\n                    </div>\n                    <div ${nr} id="irtak" data-gjs-type="text" class="cta-label label">${t.CallToActionName}</div>\n        </div>\n        `}formCta(t,e){return`\n        <div ${or} data-gjs-type="cta-buttons"  button-type="${t.CallToActionType}" class="cta-container-child cta-child" id="${e}">\n                    <div ${nr} id="i9rww" data-gjs-type="default" class="cta-button cta-styled-btn"\n                        style="background-color: ${this.themeManager.getThemeCtaColor("CtaColorOne")}">\n                        <svg ${nr} id="igqdh" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="26" height="30"\n                            viewBox="0 0 13 16">\n                            <path ${nr} id="Path_1209" data-gjs-type="svg-in" data-name="Path 1209"\n                                d="M9.828,4A1.823,1.823,0,0,0,8,5.8V18.2A1.823,1.823,0,0,0,9.828,20h9.344A1.823,1.823,0,0,0,21,18.2V9.8a.6.6,0,0,0-.179-.424l-.006-.006L15.54,4.176A.614.614,0,0,0,15.109,4Zm0,1.2H14.5V8.6a1.823,1.823,0,0,0,1.828,1.8h3.453v7.8a.6.6,0,0,1-.609.6H9.828a.6.6,0,0,1-.609-.6V5.8A.6.6,0,0,1,9.828,5.2Zm5.891.848L18.92,9.2H16.328a.6.6,0,0,1-.609-.6Z"\n                                transform="translate(-8 -4)" fill="#fff"></path>\n                        </svg>\n                        <div ${nr} id="iina3" data-gjs-type="default" class="cta-badge">\n                            <svg fill="#5068a8" id="iw1yc" data-gjs-type="default" ${nr} width="14px" height="14px" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                                <title ${nr}>delete</title>\n                                <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-1" d="M27.14,34H8.86A2.93,2.93,0,0,1,6,31V11.23H8V31a.93.93,0,0,0,.86,1H27.14A.93.93,0,0,0,28,31V11.23h2V31A2.93,2.93,0,0,1,27.14,34Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M30.78,9H5A1,1,0,0,1,5,7H30.78a1,1,0,0,1,0,2Z"></path>\n                                <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-3" x="21" y="13" width="2" height="15"></rect>\n                                <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-4" x="13" y="13" width="2" height="15"></rect>\n                                <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-5" d="M23,5.86H21.1V4H14.9V5.86H13V4a2,2,0,0,1,1.9-2h6.2A2,2,0,0,1,23,4Z"></path>\n                                <rect fill="#5068a8" ${nr} x="0" y="0" width="36" height="36" fill-opacity="0"/>\n                            </svg>\n                        </div>\n                    </div>\n                    <div ${nr} id="irtak" data-gjs-type="text" class="cta-label label">${t.CallToActionName}</div>\n        </div>\n        `}urlCta(t,e){return`\n        <div ${or} data-gjs-type="cta-buttons"  button-type="${t.CallToActionType}" class="cta-container-child cta-child" id="${e}">\n            <div ${nr} id="i4iaf" data-gjs-type="default" class="cta-button cta-styled-btn"\n                style="background-color: ${this.themeManager.getThemeCtaColor("CtaColorOne")}">\n                <svg ${nr} xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16">\n                    <path${nr} id="Path_1213" data-name="Path 1213" d="M15.833,4a4.163,4.163,0,0,0-2.958,1.229l-.979.979a4.168,4.168,0,0,0-1.229,2.958,4.1,4.1,0,0,0,.292,1.521L12.042,9.6a2.857,2.857,0,0,1,.792-2.458l.979-.979a2.853,2.853,0,0,1,2.021-.833,2.805,2.805,0,0,1,2,.833,2.85,2.85,0,0,1,0,4.021l-.979.979A2.853,2.853,0,0,1,14.833,12a2.439,2.439,0,0,1-.437-.042l-1.083,1.083a4.1,4.1,0,0,0,1.521.292A4.163,4.163,0,0,0,17.792,12.1l.979-.979A4.168,4.168,0,0,0,20,8.167,4.2,4.2,0,0,0,15.833,4ZM14.188,8.854,8.854,14.188l.958.958,5.333-5.333ZM9.167,10.667A4.163,4.163,0,0,0,6.208,11.9l-.979.979A4.168,4.168,0,0,0,4,15.833,4.2,4.2,0,0,0,8.167,20a4.163,4.163,0,0,0,2.958-1.229l.979-.979a4.168,4.168,0,0,0,1.229-2.958,4.1,4.1,0,0,0-.292-1.521L11.958,14.4a2.857,2.857,0,0,1-.792,2.458l-.979.979a2.853,2.853,0,0,1-2.021.833,2.805,2.805,0,0,1-2-.833,2.85,2.85,0,0,1,0-4.021l.979-.979A2.853,2.853,0,0,1,9.167,12a2.44,2.44,0,0,1,.438.042l1.083-1.083A4.1,4.1,0,0,0,9.167,10.667Z" transform="translate(-4 -4)" fill="#fff"></path>\n                </svg>\n                <div ${nr} id="i2knu" data-gjs-type="default" class="cta-badge">\n                    <svg fill="#5068a8" id="idkak" data-gjs-type="default" ${nr} width="14px" height="14px" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title ${nr}>delete</title>\n                        <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-1" d="M27.14,34H8.86A2.93,2.93,0,0,1,6,31V11.23H8V31a.93.93,0,0,0,.86,1H27.14A.93.93,0,0,0,28,31V11.23h2V31A2.93,2.93,0,0,1,27.14,34Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M30.78,9H5A1,1,0,0,1,5,7H30.78a1,1,0,0,1,0,2Z"></path>\n                        <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-3" x="21" y="13" width="2" height="15"></rect>\n                        <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-4" x="13" y="13" width="2" height="15"></rect>\n                        <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-5" d="M23,5.86H21.1V4H14.9V5.86H13V4a2,2,0,0,1,1.9-2h6.2A2,2,0,0,1,23,4Z"></path>\n                        <rect fill="#5068a8" ${nr} x="0" y="0" width="36" height="36" fill-opacity="0"/>\n                    </svg>\n                </div>\n            </div>\n            <div ${nr} id="irtak" data-gjs-type="text" class="cta-label label">${t.CallToActionName}</div>\n        </div>\n        `}}class yr{constructor(){this.editor=globalThis.activeEditor,this.pageId=globalThis.currentPageId,this.pageData=globalThis.pageData,this.contentMapper=new pr(this.pageId),this.themeManager=new $s,this.ctaSvgManager=new br}addCtaButton(t){const e=this.editor.Components.getWrapper().find(".cta-button-container")[0];if(!e)return;const n=cr(12),{ctaButtonEl:i,ctaAction:a}=this.getIconAndAction(t,n),o={CtaId:n,CtaLabel:t.CallToActionName,CtaType:t.CallToActionType,CtaButtonType:"Round",CtaBGColor:"CtaColorOne",CtaAction:a};e.append(i),this.contentMapper.addContentCta(o)}checkIfExisting(t){const e=document.createElement("div");e.innerHTML=t;const n=e.querySelector("[button-type]");if(!n)return!1;const i=n.getAttribute("button-type"),a=this.editor.Components.getWrapper().getEl().querySelectorAll(".cta-button-container [button-type]");return Array.from(a).some((t=>t.getAttribute("button-type")===i))}changeCtaColor(t){const e=globalThis.selectedComponent;if(!e)return;const n=e.find(".cta-styled-btn")[0];if(!n)return;n.addStyle({"background-color":t.CtaColorCode}),n.getEl().style.backgroundColor=t.CtaColorCode;const i=n.parent();this.isInformationPage()?(new uc).updateInfoCtaAttributes(e.getId(),"CtaBGColor",t.CtaColorName):this.contentMapper.updateContentCtaBGColor(i.getId(),t.CtaColorName)}changeToPlainButton(){const t=this.getSelectedComponent();if(!t)return;const e=this.getCtaButtonAttributes(t);if(!e)return;const n=this.createPlainButtonHTML(t.getId(),e);this.selectComponentAfterAdd(t.getId(),t,n),this.updateCtaButtonType(t.getId(),"FullWidth"),this.updateProperties()}changeToIconButton(){const t=this.getSelectedComponent();if(!t)return;const e=this.getCtaButtonAttributes(t);if(!e)return;const n=this.ctaSvgManager.getTypeSVG(e);if(!n)return;const i=this.createIconButtonHTML(t.getId(),e,n);this.selectComponentAfterAdd(t.getId(),t,i),this.updateCtaButtonType(t.getId(),"Icon"),this.updateProperties()}changeToImgButton(){const t=this.getSelectedComponent();if(!t)return;const e=this.getCtaButtonAttributes(t);if(!e)return;const n=this.createImgButtonHTML(t.getId(),e);if(this.selectComponentAfterAdd(t.getId(),t,n),this.updateCtaButtonType(t.getId(),"Image"),!this.isInformationPage()){const t="/Resources/UCGrapes1/src/images/image.png";this.contentMapper.updateContentButtonType(e.CtaId,"Image",t)}this.updateProperties()}changeToElipseButton(){const t=this.getSelectedComponent();if(!t)return;const e=this.getCtaButtonAttributes(t);if(!e)return;const n=this.ctaSvgManager.getTypeSVG(e);if(!n)return;const i=this.createElipseButtonHTML(t.getId(),e,n);this.selectComponentAfterAdd(t.getId(),t,i),this.updateCtaButtonType(t.getId(),"Round"),this.updateProperties()}removeCta(t){const e=t.parentElement;if(!(null==e?void 0:e.id))return;const n=this.editor.Components.getWrapper().find("#"+e.id)[0];if(!n)return;if(this.isInformationPage())return void(new uc).deleteCtaButton(n.parent().getId());const i=n.parent();i&&(i.remove(),this.contentMapper.removeContentCta(i.getId()))}getIconAndAction(t,e){let n,i;switch(null==t?void 0:t.CallToActionType){case"Phone":n=this.ctaSvgManager.phoneCta(t,e),i=null==t?void 0:t.CallToActionPhoneNumber;break;case"Email":n=this.ctaSvgManager.emailCta(t,e),i=null==t?void 0:t.CallToActionEmail;break;case"WebLink":n=this.ctaSvgManager.urlCta(t,e),i=null==t?void 0:t.CallToActionUrl;break;case"Form":n=this.ctaSvgManager.formCta(t,e),i=null==t?void 0:t.CallToActionUrl}return{ctaButtonEl:n,ctaAction:i}}getSelectedComponent(){return globalThis.selectedComponent}isInformationPage(){return"Information"===this.pageData.PageType}getCtaButtonAttributes(t){if(this.isInformationPage()){const e=globalThis.infoContentMapper.getInfoContent(t.getId());return null==e?void 0:e.CtaAttributes}return this.contentMapper.getContentCta(t.getId())}updateCtaButtonType(t,e){this.isInformationPage()?(new uc).updateInfoCtaAttributes(t,"CtaButtonType",e):this.contentMapper.updateContentButtonType(this.getCtaButtonAttributes(this.getSelectedComponent()).CtaId,e)}selectComponentAfterAdd(t,e,n){this.editor.once("component:add",(()=>{const e=this.editor.getWrapper().find(`#${t}`)[0];e&&this.editor.select(e)})),e.replaceWith(n)}updateProperties(){const t=this.getSelectedComponent(),e=this.getCtaButtonAttributes(t);""==e.CtaButtonIcon&&(e.CtaButtonIcon="Email"),e&&t&&new mr(t,e).setctaAttributes()}createPlainButtonHTML(t,e){const n=this.themeManager.getThemeCtaColor(e.CtaBGColor),i=e.CtaColor||"#ffffff",a=this.isInformationPage()?'data-gjs-type="info-cta-section"':"data-gjs-type=cta-buttons";return`\n            <div id="${t}" \n                button-type="${e.CtaType}"\n                class="plain-button-container"\n                ${a}\n                ${or}>\n                <button ${nr} class="plain-button cta-styled-btn"\n                    style="background-color: ${n}">\n                    <div ${nr} id="ihd0f" class="cta-badge">\n                            <svg fill="#5068a8" ${nr} width="14px" height="14px" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                            <title ${nr}>delete</title>\n                            <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-1" d="M27.14,34H8.86A2.93,2.93,0,0,1,6,31V11.23H8V31a.93.93,0,0,0,.86,1H27.14A.93.93,0,0,0,28,31V11.23h2V31A2.93,2.93,0,0,1,27.14,34Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M30.78,9H5A1,1,0,0,1,5,7H30.78a1,1,0,0,1,0,2Z"></path>\n                            <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-3" x="21" y="13" width="2" height="15"></rect>\n                            <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-4" x="13" y="13" width="2" height="15"></rect>\n                            <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-5" d="M23,5.86H21.1V4H14.9V5.86H13V4a2,2,0,0,1,1.9-2h6.2A2,2,0,0,1,23,4Z"></path>\n                            <rect fill="#5068a8" ${nr} x="0" y="0" width="36" height="36" fill-opacity="0"/>\n                        </svg>\n                    </div>\n                    <span ${nr} class="label" style="color:${i}"> ${e.CtaLabel}</span> \n                </button>\n            </div>\n        `}createIconButtonHTML(t,e,n){const i=this.themeManager.getThemeCtaColor(e.CtaBGColor),a=e.CtaColor||"#ffffff",o=this.isInformationPage()?'data-gjs-type="info-cta-section"':"data-gjs-type=cta-buttons";return`\n            <div id="${t}" \n                button-type="${e.CtaType}"\n                ${or} \n                ${o}\n                class="img-button-container">\n                <div ${nr} class="img-button cta-styled-btn"\n                    style="background-color: ${i}">\n                    <span ${nr} class="img-button-icon">\n                        ${n} \n                        <svg class="icon-edit-button" title="Change icon" ${nr} xmlns="http://www.w3.org/2000/svg" id="Component_57_1" data-name="Component 57 – 1" width="20" height="20" viewBox="0 0 33 33">\n                            <g ${nr} id="Ellipse_532" data-name="Ellipse 532" fill="#fff" stroke="#5068a8" stroke-width="2">\n                                <circle ${nr} cx="16.5" cy="16.5" r="16.5" stroke="none"/>\n                                <circle ${nr} cx="16.5" cy="16.5" r="16" fill="none"/>\n                            </g>\n                            <path ${nr} id="Icon_feather-edit-2" data-name="Icon feather-edit-2" d="M12.834,3.8a1.854,1.854,0,0,1,2.622,2.622L6.606,15.274,3,16.257l.983-3.606Z" transform="translate(7 6.742)" fill="#5068a8" stroke="#5068a8" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>\n                        </svg>\n                    </span>\n                    <div${nr} class="cta-badge">\n                        <svg fill="#5068a8" ${nr} width="14px" height="14px" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                            <title ${nr}>delete</title>\n                            <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-1" d="M27.14,34H8.86A2.93,2.93,0,0,1,6,31V11.23H8V31a.93.93,0,0,0,.86,1H27.14A.93.93,0,0,0,28,31V11.23h2V31A2.93,2.93,0,0,1,27.14,34Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M30.78,9H5A1,1,0,0,1,5,7H30.78a1,1,0,0,1,0,2Z"></path>\n                            <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-3" x="21" y="13" width="2" height="15"></rect>\n                            <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-4" x="13" y="13" width="2" height="15"></rect>\n                            <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-5" d="M23,5.86H21.1V4H14.9V5.86H13V4a2,2,0,0,1,1.9-2h6.2A2,2,0,0,1,23,4Z"></path>\n                            <rect fill="#5068a8" ${nr} x="0" y="0" width="36" height="36" fill-opacity="0"/>\n                        </svg>\n                    </div>\n                    <span ${nr} class="img-button-label label" style="color:${a}">${e.CtaLabel}</span>\n                    <i ${nr} class="fa fa-angle-right img-button-arrow" style="color:${a}"></i>\n                </div>\n            </div>\n        `}createImgButtonHTML(t,e){const n=this.themeManager.getThemeCtaColor(e.CtaBGColor),i=e.CtaColor||"#ffffff",a=this.isInformationPage()?'data-gjs-type="info-cta-section"':"data-gjs-type=cta-buttons",o=e.CtaButtonImgUrl||"/Resources/UCGrapes1/src/images/image.png",r=e.CtaButtonImgUrl?`<svg ${nr} xmlns="http://www.w3.org/2000/svg" id="Component_57_1" data-name="Component 57 – 1" width="22" height="22" viewBox="0 0 33 33">\n                <g ${nr} id="Ellipse_532" data-name="Ellipse 532" fill="#fff" stroke="#5068a8" stroke-width="2">\n                    <circle ${nr} cx="16.5" cy="16.5" r="16.5" stroke="none"/>\n                    <circle ${nr} cx="16.5" cy="16.5" r="16" fill="none"/>\n                </g>\n                <path ${nr} id="Icon_feather-edit-2" data-name="Icon feather-edit-2" d="M12.834,3.8a1.854,1.854,0,0,1,2.622,2.622L6.606,15.274,3,16.257l.983-3.606Z" transform="translate(7 6.742)" fill="#5068a8" stroke="#5068a8" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>\n              </svg>`:`<svg ${nr} xmlns="http://www.w3.org/2000/svg" id="Component_53_4" data-name="Component 53 – 4" width="22" height="22" viewBox="0 0 22 22">\n                <g ${nr} id="Group_2309" data-name="Group 2309">\n                    <g ${nr} id="Group_2307" data-name="Group 2307">\n                    <g ${nr} id="Ellipse_6" data-name="Ellipse 6" fill="#fdfdfd" stroke="#5068a8" stroke-width="1">\n                        <circle ${nr} cx="11" cy="11" r="11" stroke="none"/>\n                        <circle ${nr} cx="11" cy="11" r="10.5" fill="none"/>\n                    </g>\n                    </g>\n                </g>\n                <path ${nr} id="Icon_ionic-ios-add" data-name="Icon ionic-ios-add" d="M18.342,13.342H14.587V9.587a.623.623,0,1,0-1.245,0v3.755H9.587a.623.623,0,0,0,0,1.245h3.755v3.755a.623.623,0,1,0,1.245,0V14.587h3.755a.623.623,0,1,0,0-1.245Z" transform="translate(-2.965 -2.965)" fill="#5068a8"/>\n              </svg>`;return`\n            <div id="${t}" \n                button-type="${e.CtaType}"\n                ${or} \n                ${a}\n                class="img-button-container">\n                <div ${nr} class="img-button cta-styled-btn"\n                    style="background-color: ${n}">\n                    <span ${nr} class="img-button-section">\n                        <img ${nr} src="${o}" />\n                        <span ${nr} class="edit-cta-image">\n                            ${r}\n                        </span>\n                    </span>\n                    <div${nr} class="cta-badge">\n                        <svg fill="#5068a8" ${nr} width="14px" height="14px" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                            <title ${nr}>delete</title>\n                            <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-1" d="M27.14,34H8.86A2.93,2.93,0,0,1,6,31V11.23H8V31a.93.93,0,0,0,.86,1H27.14A.93.93,0,0,0,28,31V11.23h2V31A2.93,2.93,0,0,1,27.14,34Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M30.78,9H5A1,1,0,0,1,5,7H30.78a1,1,0,0,1,0,2Z"></path>\n                            <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-3" x="21" y="13" width="2" height="15"></rect>\n                            <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-4" x="13" y="13" width="2" height="15"></rect>\n                            <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-5" d="M23,5.86H21.1V4H14.9V5.86H13V4a2,2,0,0,1,1.9-2h6.2A2,2,0,0,1,23,4Z"></path>\n                            <rect fill="#5068a8" ${nr} x="0" y="0" width="36" height="36" fill-opacity="0"/>\n                        </svg>\n                    </div>\n                    <span ${nr} class="img-button-label label" style="color:${i}">${e.CtaLabel}</span>\n                    <i ${nr} class="fa fa-angle-right img-button-arrow" style="color:${i}"></i>\n                </div>\n            </div>\n        `}createElipseButtonHTML(t,e,n){const i=this.themeManager.getThemeCtaColor(e.CtaBGColor),a=(e.CtaColor,this.isInformationPage()?'data-gjs-type="info-cta-section"':"data-gjs-type=cta-buttons");return`\n        <div ${or} ${a}\n          data-gjs-type="cta-buttons" \n          button-type="${e.CtaType}" \n          class="cta-container-child cta-child"\n          id="${t}">\n            <div class="cta-button cta-styled-btn" ${nr}\n              style="background-color: ${i}">\n                ${n}\n                <div class="cta-badge" ${nr}>\n                    <svg fill="#5068a8" ${nr} width="14px" height="14px" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title ${nr}>delete</title>\n                        <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-1" d="M27.14,34H8.86A2.93,2.93,0,0,1,6,31V11.23H8V31a.93.93,0,0,0,.86,1H27.14A.93.93,0,0,0,28,31V11.23h2V31A2.93,2.93,0,0,1,27.14,34Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M30.78,9H5A1,1,0,0,1,5,7H30.78a1,1,0,0,1,0,2Z"></path>\n                        <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-3" x="21" y="13" width="2" height="15"></rect>\n                        <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-4" x="13" y="13" width="2" height="15"></rect>\n                        <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-5" d="M23,5.86H21.1V4H14.9V5.86H13V4a2,2,0,0,1,1.9-2h6.2A2,2,0,0,1,23,4Z"></path>\n                        <rect fill="#5068a8" ${nr} x="0" y="0" width="36" height="36" fill-opacity="0"/>\n                    </svg>\n                </div>\n            </div>\n            <span class="cta-label label" ${nr}>${e.CtaLabel}</span>\n        </div>\n        `}changeCtaButtonIcon(t,e,n){if(n&&e&&this.isInformationPage()){const i=this.getSelectedComponent();if(i){const a=i.find(".img-button-icon")[0];if(a){const i=document.createElement("div");i.innerHTML=t.svg;const o=i.querySelector("svg");if(o){o.setAttribute("height","32"),o.setAttribute("width","32"),o.querySelectorAll("path").forEach((t=>{t.setAttribute("fill",(null==n?void 0:n.CtaColor)||"#fff")}));const r=i.innerHTML,s=a.find("svg")[0];s&&s.replaceWith(r),this.updateCtaIconMapper(e,t)}}}}}updateCtaIconMapper(t,e){this.isInformationPage()&&this.getSelectedComponent()&&(new uc).updateInfoCtaAttributes(t,"CtaButtonIcon",e.name)}}class wr{constructor(t){this.colorList=t,this.ctaManager=new yr,this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("cta-style"),this.container.id="cta-style",this.container.style.display="flex";const t=document.createElement("div");t.classList.add("text-color-palette"),t.classList.add("text-colors"),t.id="cta-color-palette",this.colorList.forEach((e=>{const n=document.createElement("div");n.classList.add("color-item"),n.title=e.CtaColorName;const i=document.createElement("input");i.type="radio",i.name="cta-color",i.value=e.CtaColorCode,i.id=e.CtaColorCode;const a=document.createElement("label");a.setAttribute("for",e.CtaColorCode),a.classList.add("color-box"),a.style.backgroundColor=e.CtaColorCode,n.appendChild(i),n.appendChild(a),t.appendChild(n),n.addEventListener("click",(()=>{this.ctaManager.changeCtaColor(e)})),t.appendChild(n)})),this.container.appendChild(t)}render(t){t.appendChild(this.container)}refresh(t){const e=document.getElementById("cta-style");e?e.replaceWith(this.container):t.appendChild(this.container)}}var Cr=n(8156),xr=n.n(Cr),Tr=n(1448),Ir=n.n(Tr),Ar=n(5364),Er=n.n(Ar),Sr=n(3375),Lr=n.n(Sr);const Mr=(t,e)=>{const n=[],i=[];return n.push(e),e||n.push(t.locale),t.enableFallback&&n.push(t.defaultLocale),n.filter(Boolean).map((t=>t.toString())).forEach((function(e){if(i.includes(e)||i.push(e),!t.enableFallback)return;const n=e.split("-");3===n.length&&i.push(`${n[0]}-${n[1]}`),i.push(n[0])})),Lr()(i)};class Nr{constructor(t){this.i18n=t,this.registry={},this.register("default",Mr)}register(t,e){if("function"!=typeof e){const t=e;e=()=>t}this.registry[t]=e}get(t){let e=this.registry[t]||this.registry[this.i18n.locale]||this.registry.default;return"function"==typeof e&&(e=e(this.i18n,t)),e instanceof Array||(e=[e]),e}}const kr=function({pluralizer:t,includeZero:e=!0,ordinal:n=!1}){return function(i,a){return[e&&0===a?"zero":"",t(a,n)].filter(Boolean)}}({pluralizer:(t,e)=>{const n=String(t).split("."),i=!n[1],a=Number(n[0])==t,o=a&&n[0].slice(-1),r=a&&n[0].slice(-2);return e?1==o&&11!=r?"one":2==o&&12!=r?"two":3==o&&13!=r?"few":"other":1==t&&i?"one":"other"},includeZero:!0});class Pr{constructor(t){this.i18n=t,this.registry={},this.register("default",kr)}register(t,e){this.registry[t]=e}get(t){return this.registry[t]||this.registry[this.i18n.locale]||this.registry.default}}var _r=n(4058),$r=n.n(_r);function Or(t){return t?Object.keys(t).reduce(((e,n)=>(e[$r()(n)]=t[n],e)),{}):{}}function jr(t){return null!=t}var Br=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,qr=Math.ceil,Dr=Math.floor,Hr="[BigNumber Error] ",Rr=Hr+"Number primitive has more than 15 significant digits: ",Vr=1e14,Ur=14,Fr=9007199254740991,zr=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Zr=1e7,Wr=1e9;function Gr(t){var e=0|t;return t>0||t===e?e:e-1}function Jr(t){for(var e,n,i=1,a=t.length,o=t[0]+"";i<a;){for(e=t[i++]+"",n=Ur-e.length;n--;e="0"+e);o+=e}for(a=o.length;48===o.charCodeAt(--a););return o.slice(0,a+1||1)}function Kr(t,e){var n,i,a=t.c,o=e.c,r=t.s,s=e.s,l=t.e,c=e.e;if(!r||!s)return null;if(n=a&&!a[0],i=o&&!o[0],n||i)return n?i?0:-s:r;if(r!=s)return r;if(n=r<0,i=l==c,!a||!o)return i?0:!a^n?1:-1;if(!i)return l>c^n?1:-1;for(s=(l=a.length)<(c=o.length)?l:c,r=0;r<s;r++)if(a[r]!=o[r])return a[r]>o[r]^n?1:-1;return l==c?0:l>c^n?1:-1}function Yr(t,e,n,i){if(t<e||t>n||t!==Dr(t))throw Error(Hr+(i||"Argument")+("number"==typeof t?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function Xr(t){var e=t.c.length-1;return Gr(t.e/Ur)==e&&t.c[e]%2!=0}function Qr(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function ts(t,e,n){var i,a;if(e<0){for(a=n+".";++e;a+=n);t=a+t}else if(++e>(i=t.length)){for(a=n,e-=i;--e;a+=n);t+=a}else e<i&&(t=t.slice(0,e)+"."+t.slice(e));return t}var es,ns=function t(e){var n,i,a,o,r,s,l,c,d,h,u=E.prototype={constructor:E,toString:null,valueOf:null},p=new E(1),g=20,f=4,m=-7,v=21,b=-1e7,y=1e7,w=!1,C=1,x=0,T={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},I="0123456789abcdefghijklmnopqrstuvwxyz",A=!0;function E(t,e){var n,o,r,s,l,c,d,h,u=this;if(!(u instanceof E))return new E(t,e);if(null==e){if(t&&!0===t._isBigNumber)return u.s=t.s,void(!t.c||t.e>y?u.c=u.e=null:t.e<b?u.c=[u.e=0]:(u.e=t.e,u.c=t.c.slice()));if((c="number"==typeof t)&&0*t==0){if(u.s=1/t<0?(t=-t,-1):1,t===~~t){for(s=0,l=t;l>=10;l/=10,s++);return void(s>y?u.c=u.e=null:(u.e=s,u.c=[t]))}h=String(t)}else{if(!Br.test(h=String(t)))return a(u,h,c);u.s=45==h.charCodeAt(0)?(h=h.slice(1),-1):1}(s=h.indexOf("."))>-1&&(h=h.replace(".","")),(l=h.search(/e/i))>0?(s<0&&(s=l),s+=+h.slice(l+1),h=h.substring(0,l)):s<0&&(s=h.length)}else{if(Yr(e,2,I.length,"Base"),10==e&&A)return N(u=new E(t),g+u.e+1,f);if(h=String(t),c="number"==typeof t){if(0*t!=0)return a(u,h,c,e);if(u.s=1/t<0?(h=h.slice(1),-1):1,E.DEBUG&&h.replace(/^0\.0*|\./,"").length>15)throw Error(Rr+t)}else u.s=45===h.charCodeAt(0)?(h=h.slice(1),-1):1;for(n=I.slice(0,e),s=l=0,d=h.length;l<d;l++)if(n.indexOf(o=h.charAt(l))<0){if("."==o){if(l>s){s=d;continue}}else if(!r&&(h==h.toUpperCase()&&(h=h.toLowerCase())||h==h.toLowerCase()&&(h=h.toUpperCase()))){r=!0,l=-1,s=0;continue}return a(u,String(t),c,e)}c=!1,(s=(h=i(h,e,10,u.s)).indexOf("."))>-1?h=h.replace(".",""):s=h.length}for(l=0;48===h.charCodeAt(l);l++);for(d=h.length;48===h.charCodeAt(--d););if(h=h.slice(l,++d)){if(d-=l,c&&E.DEBUG&&d>15&&(t>Fr||t!==Dr(t)))throw Error(Rr+u.s*t);if((s=s-l-1)>y)u.c=u.e=null;else if(s<b)u.c=[u.e=0];else{if(u.e=s,u.c=[],l=(s+1)%Ur,s<0&&(l+=Ur),l<d){for(l&&u.c.push(+h.slice(0,l)),d-=Ur;l<d;)u.c.push(+h.slice(l,l+=Ur));l=Ur-(h=h.slice(l)).length}else l-=d;for(;l--;h+="0");u.c.push(+h)}}else u.c=[u.e=0]}function S(t,e,n,i){var a,o,r,s,l;if(null==n?n=f:Yr(n,0,8),!t.c)return t.toString();if(a=t.c[0],r=t.e,null==e)l=Jr(t.c),l=1==i||2==i&&(r<=m||r>=v)?Qr(l,r):ts(l,r,"0");else if(o=(t=N(new E(t),e,n)).e,s=(l=Jr(t.c)).length,1==i||2==i&&(e<=o||o<=m)){for(;s<e;l+="0",s++);l=Qr(l,o)}else if(e-=r,l=ts(l,o,"0"),o+1>s){if(--e>0)for(l+=".";e--;l+="0");}else if((e+=o-s)>0)for(o+1==s&&(l+=".");e--;l+="0");return t.s<0&&a?"-"+l:l}function L(t,e){for(var n,i,a=1,o=new E(t[0]);a<t.length;a++)(!(i=new E(t[a])).s||(n=Kr(o,i))===e||0===n&&o.s===e)&&(o=i);return o}function M(t,e,n){for(var i=1,a=e.length;!e[--a];e.pop());for(a=e[0];a>=10;a/=10,i++);return(n=i+n*Ur-1)>y?t.c=t.e=null:n<b?t.c=[t.e=0]:(t.e=n,t.c=e),t}function N(t,e,n,i){var a,o,r,s,l,c,d,h=t.c,u=zr;if(h){t:{for(a=1,s=h[0];s>=10;s/=10,a++);if((o=e-a)<0)o+=Ur,r=e,l=h[c=0],d=Dr(l/u[a-r-1]%10);else if((c=qr((o+1)/Ur))>=h.length){if(!i)break t;for(;h.length<=c;h.push(0));l=d=0,a=1,r=(o%=Ur)-Ur+1}else{for(l=s=h[c],a=1;s>=10;s/=10,a++);d=(r=(o%=Ur)-Ur+a)<0?0:Dr(l/u[a-r-1]%10)}if(i=i||e<0||null!=h[c+1]||(r<0?l:l%u[a-r-1]),i=n<4?(d||i)&&(0==n||n==(t.s<0?3:2)):d>5||5==d&&(4==n||i||6==n&&(o>0?r>0?l/u[a-r]:0:h[c-1])%10&1||n==(t.s<0?8:7)),e<1||!h[0])return h.length=0,i?(e-=t.e+1,h[0]=u[(Ur-e%Ur)%Ur],t.e=-e||0):h[0]=t.e=0,t;if(0==o?(h.length=c,s=1,c--):(h.length=c+1,s=u[Ur-o],h[c]=r>0?Dr(l/u[a-r]%u[r])*s:0),i)for(;;){if(0==c){for(o=1,r=h[0];r>=10;r/=10,o++);for(r=h[0]+=s,s=1;r>=10;r/=10,s++);o!=s&&(t.e++,h[0]==Vr&&(h[0]=1));break}if(h[c]+=s,h[c]!=Vr)break;h[c--]=0,s=1}for(o=h.length;0===h[--o];h.pop());}t.e>y?t.c=t.e=null:t.e<b&&(t.c=[t.e=0])}return t}function k(t){var e,n=t.e;return null===n?t.toString():(e=Jr(t.c),e=n<=m||n>=v?Qr(e,n):ts(e,n,"0"),t.s<0?"-"+e:e)}return E.clone=t,E.ROUND_UP=0,E.ROUND_DOWN=1,E.ROUND_CEIL=2,E.ROUND_FLOOR=3,E.ROUND_HALF_UP=4,E.ROUND_HALF_DOWN=5,E.ROUND_HALF_EVEN=6,E.ROUND_HALF_CEIL=7,E.ROUND_HALF_FLOOR=8,E.EUCLID=9,E.config=E.set=function(t){var e,n;if(null!=t){if("object"!=typeof t)throw Error(Hr+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(Yr(n=t[e],0,Wr,e),g=n),t.hasOwnProperty(e="ROUNDING_MODE")&&(Yr(n=t[e],0,8,e),f=n),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((n=t[e])&&n.pop?(Yr(n[0],-Wr,0,e),Yr(n[1],0,Wr,e),m=n[0],v=n[1]):(Yr(n,-Wr,Wr,e),m=-(v=n<0?-n:n))),t.hasOwnProperty(e="RANGE"))if((n=t[e])&&n.pop)Yr(n[0],-Wr,-1,e),Yr(n[1],1,Wr,e),b=n[0],y=n[1];else{if(Yr(n,-Wr,Wr,e),!n)throw Error(Hr+e+" cannot be zero: "+n);b=-(y=n<0?-n:n)}if(t.hasOwnProperty(e="CRYPTO")){if((n=t[e])!==!!n)throw Error(Hr+e+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw w=!n,Error(Hr+"crypto unavailable");w=n}else w=n}if(t.hasOwnProperty(e="MODULO_MODE")&&(Yr(n=t[e],0,9,e),C=n),t.hasOwnProperty(e="POW_PRECISION")&&(Yr(n=t[e],0,Wr,e),x=n),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(n=t[e]))throw Error(Hr+e+" not an object: "+n);T=n}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(n=t[e])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(Hr+e+" invalid: "+n);A="0123456789"==n.slice(0,10),I=n}}return{DECIMAL_PLACES:g,ROUNDING_MODE:f,EXPONENTIAL_AT:[m,v],RANGE:[b,y],CRYPTO:w,MODULO_MODE:C,POW_PRECISION:x,FORMAT:T,ALPHABET:I}},E.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!E.DEBUG)return!0;var e,n,i=t.c,a=t.e,o=t.s;t:if("[object Array]"=={}.toString.call(i)){if((1===o||-1===o)&&a>=-Wr&&a<=Wr&&a===Dr(a)){if(0===i[0]){if(0===a&&1===i.length)return!0;break t}if((e=(a+1)%Ur)<1&&(e+=Ur),String(i[0]).length==e){for(e=0;e<i.length;e++)if((n=i[e])<0||n>=Vr||n!==Dr(n))break t;if(0!==n)return!0}}}else if(null===i&&null===a&&(null===o||1===o||-1===o))return!0;throw Error(Hr+"Invalid BigNumber: "+t)},E.maximum=E.max=function(){return L(arguments,-1)},E.minimum=E.min=function(){return L(arguments,1)},E.random=(o=9007199254740992,r=Math.random()*o&2097151?function(){return Dr(Math.random()*o)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,n,i,a,o,s=0,l=[],c=new E(p);if(null==t?t=g:Yr(t,0,Wr),a=qr(t/Ur),w)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(a*=2));s<a;)(o=131072*e[s]+(e[s+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),e[s]=n[0],e[s+1]=n[1]):(l.push(o%1e14),s+=2);s=a/2}else{if(!crypto.randomBytes)throw w=!1,Error(Hr+"crypto unavailable");for(e=crypto.randomBytes(a*=7);s<a;)(o=281474976710656*(31&e[s])+1099511627776*e[s+1]+4294967296*e[s+2]+16777216*e[s+3]+(e[s+4]<<16)+(e[s+5]<<8)+e[s+6])>=9e15?crypto.randomBytes(7).copy(e,s):(l.push(o%1e14),s+=7);s=a/7}if(!w)for(;s<a;)(o=r())<9e15&&(l[s++]=o%1e14);for(a=l[--s],t%=Ur,a&&t&&(o=zr[Ur-t],l[s]=Dr(a/o)*o);0===l[s];l.pop(),s--);if(s<0)l=[i=0];else{for(i=-1;0===l[0];l.splice(0,1),i-=Ur);for(s=1,o=l[0];o>=10;o/=10,s++);s<Ur&&(i-=Ur-s)}return c.e=i,c.c=l,c}),E.sum=function(){for(var t=1,e=arguments,n=new E(e[0]);t<e.length;)n=n.plus(e[t++]);return n},i=function(){var t="0123456789";function e(t,e,n,i){for(var a,o,r=[0],s=0,l=t.length;s<l;){for(o=r.length;o--;r[o]*=e);for(r[0]+=i.indexOf(t.charAt(s++)),a=0;a<r.length;a++)r[a]>n-1&&(null==r[a+1]&&(r[a+1]=0),r[a+1]+=r[a]/n|0,r[a]%=n)}return r.reverse()}return function(i,a,o,r,s){var l,c,d,h,u,p,m,v,b=i.indexOf("."),y=g,w=f;for(b>=0&&(h=x,x=0,i=i.replace(".",""),p=(v=new E(a)).pow(i.length-b),x=h,v.c=e(ts(Jr(p.c),p.e,"0"),10,o,t),v.e=v.c.length),d=h=(m=e(i,a,o,s?(l=I,t):(l=t,I))).length;0==m[--h];m.pop());if(!m[0])return l.charAt(0);if(b<0?--d:(p.c=m,p.e=d,p.s=r,m=(p=n(p,v,y,w,o)).c,u=p.r,d=p.e),b=m[c=d+y+1],h=o/2,u=u||c<0||null!=m[c+1],u=w<4?(null!=b||u)&&(0==w||w==(p.s<0?3:2)):b>h||b==h&&(4==w||u||6==w&&1&m[c-1]||w==(p.s<0?8:7)),c<1||!m[0])i=u?ts(l.charAt(1),-y,l.charAt(0)):l.charAt(0);else{if(m.length=c,u)for(--o;++m[--c]>o;)m[c]=0,c||(++d,m=[1].concat(m));for(h=m.length;!m[--h];);for(b=0,i="";b<=h;i+=l.charAt(m[b++]));i=ts(i,d,l.charAt(0))}return i}}(),n=function(){function t(t,e,n){var i,a,o,r,s=0,l=t.length,c=e%Zr,d=e/Zr|0;for(t=t.slice();l--;)s=((a=c*(o=t[l]%Zr)+(i=d*o+(r=t[l]/Zr|0)*c)%Zr*Zr+s)/n|0)+(i/Zr|0)+d*r,t[l]=a%n;return s&&(t=[s].concat(t)),t}function e(t,e,n,i){var a,o;if(n!=i)o=n>i?1:-1;else for(a=o=0;a<n;a++)if(t[a]!=e[a]){o=t[a]>e[a]?1:-1;break}return o}function n(t,e,n,i){for(var a=0;n--;)t[n]-=a,a=t[n]<e[n]?1:0,t[n]=a*i+t[n]-e[n];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(i,a,o,r,s){var l,c,d,h,u,p,g,f,m,v,b,y,w,C,x,T,I,A=i.s==a.s?1:-1,S=i.c,L=a.c;if(!(S&&S[0]&&L&&L[0]))return new E(i.s&&a.s&&(S?!L||S[0]!=L[0]:L)?S&&0==S[0]||!L?0*A:A/0:NaN);for(m=(f=new E(A)).c=[],A=o+(c=i.e-a.e)+1,s||(s=Vr,c=Gr(i.e/Ur)-Gr(a.e/Ur),A=A/Ur|0),d=0;L[d]==(S[d]||0);d++);if(L[d]>(S[d]||0)&&c--,A<0)m.push(1),h=!0;else{for(C=S.length,T=L.length,d=0,A+=2,(u=Dr(s/(L[0]+1)))>1&&(L=t(L,u,s),S=t(S,u,s),T=L.length,C=S.length),w=T,b=(v=S.slice(0,T)).length;b<T;v[b++]=0);I=L.slice(),I=[0].concat(I),x=L[0],L[1]>=s/2&&x++;do{if(u=0,(l=e(L,v,T,b))<0){if(y=v[0],T!=b&&(y=y*s+(v[1]||0)),(u=Dr(y/x))>1)for(u>=s&&(u=s-1),g=(p=t(L,u,s)).length,b=v.length;1==e(p,v,g,b);)u--,n(p,T<g?I:L,g,s),g=p.length,l=1;else 0==u&&(l=u=1),g=(p=L.slice()).length;if(g<b&&(p=[0].concat(p)),n(v,p,b,s),b=v.length,-1==l)for(;e(L,v,T,b)<1;)u++,n(v,T<b?I:L,b,s),b=v.length}else 0===l&&(u++,v=[0]);m[d++]=u,v[0]?v[b++]=S[w]||0:(v=[S[w]],b=1)}while((w++<C||null!=v[0])&&A--);h=null!=v[0],m[0]||m.splice(0,1)}if(s==Vr){for(d=1,A=m[0];A>=10;A/=10,d++);N(f,o+(f.e=d+c*Ur-1)+1,r,h)}else f.e=c,f.r=+h;return f}}(),s=/^(-?)0([xbo])(?=\w[\w.]*$)/i,l=/^([^.]+)\.$/,c=/^\.([^.]+)$/,d=/^-?(Infinity|NaN)$/,h=/^\s*\+(?=[\w.])|^\s+|\s+$/g,a=function(t,e,n,i){var a,o=n?e:e.replace(h,"");if(d.test(o))t.s=isNaN(o)?null:o<0?-1:1;else{if(!n&&(o=o.replace(s,(function(t,e,n){return a="x"==(n=n.toLowerCase())?16:"b"==n?2:8,i&&i!=a?t:e})),i&&(a=i,o=o.replace(l,"$1").replace(c,"0.$1")),e!=o))return new E(o,a);if(E.DEBUG)throw Error(Hr+"Not a"+(i?" base "+i:"")+" number: "+e);t.s=null}t.c=t.e=null},u.absoluteValue=u.abs=function(){var t=new E(this);return t.s<0&&(t.s=1),t},u.comparedTo=function(t,e){return Kr(this,new E(t,e))},u.decimalPlaces=u.dp=function(t,e){var n,i,a,o=this;if(null!=t)return Yr(t,0,Wr),null==e?e=f:Yr(e,0,8),N(new E(o),t+o.e+1,e);if(!(n=o.c))return null;if(i=((a=n.length-1)-Gr(this.e/Ur))*Ur,a=n[a])for(;a%10==0;a/=10,i--);return i<0&&(i=0),i},u.dividedBy=u.div=function(t,e){return n(this,new E(t,e),g,f)},u.dividedToIntegerBy=u.idiv=function(t,e){return n(this,new E(t,e),0,1)},u.exponentiatedBy=u.pow=function(t,e){var n,i,a,o,r,s,l,c,d=this;if((t=new E(t)).c&&!t.isInteger())throw Error(Hr+"Exponent not an integer: "+k(t));if(null!=e&&(e=new E(e)),r=t.e>14,!d.c||!d.c[0]||1==d.c[0]&&!d.e&&1==d.c.length||!t.c||!t.c[0])return c=new E(Math.pow(+k(d),r?t.s*(2-Xr(t)):+k(t))),e?c.mod(e):c;if(s=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new E(NaN);(i=!s&&d.isInteger()&&e.isInteger())&&(d=d.mod(e))}else{if(t.e>9&&(d.e>0||d.e<-1||(0==d.e?d.c[0]>1||r&&d.c[1]>=24e7:d.c[0]<8e13||r&&d.c[0]<=9999975e7)))return o=d.s<0&&Xr(t)?-0:0,d.e>-1&&(o=1/o),new E(s?1/o:o);x&&(o=qr(x/Ur+2))}for(r?(n=new E(.5),s&&(t.s=1),l=Xr(t)):l=(a=Math.abs(+k(t)))%2,c=new E(p);;){if(l){if(!(c=c.times(d)).c)break;o?c.c.length>o&&(c.c.length=o):i&&(c=c.mod(e))}if(a){if(0===(a=Dr(a/2)))break;l=a%2}else if(N(t=t.times(n),t.e+1,1),t.e>14)l=Xr(t);else{if(0==(a=+k(t)))break;l=a%2}d=d.times(d),o?d.c&&d.c.length>o&&(d.c.length=o):i&&(d=d.mod(e))}return i?c:(s&&(c=p.div(c)),e?c.mod(e):o?N(c,x,f,void 0):c)},u.integerValue=function(t){var e=new E(this);return null==t?t=f:Yr(t,0,8),N(e,e.e+1,t)},u.isEqualTo=u.eq=function(t,e){return 0===Kr(this,new E(t,e))},u.isFinite=function(){return!!this.c},u.isGreaterThan=u.gt=function(t,e){return Kr(this,new E(t,e))>0},u.isGreaterThanOrEqualTo=u.gte=function(t,e){return 1===(e=Kr(this,new E(t,e)))||0===e},u.isInteger=function(){return!!this.c&&Gr(this.e/Ur)>this.c.length-2},u.isLessThan=u.lt=function(t,e){return Kr(this,new E(t,e))<0},u.isLessThanOrEqualTo=u.lte=function(t,e){return-1===(e=Kr(this,new E(t,e)))||0===e},u.isNaN=function(){return!this.s},u.isNegative=function(){return this.s<0},u.isPositive=function(){return this.s>0},u.isZero=function(){return!!this.c&&0==this.c[0]},u.minus=function(t,e){var n,i,a,o,r=this,s=r.s;if(e=(t=new E(t,e)).s,!s||!e)return new E(NaN);if(s!=e)return t.s=-e,r.plus(t);var l=r.e/Ur,c=t.e/Ur,d=r.c,h=t.c;if(!l||!c){if(!d||!h)return d?(t.s=-e,t):new E(h?r:NaN);if(!d[0]||!h[0])return h[0]?(t.s=-e,t):new E(d[0]?r:3==f?-0:0)}if(l=Gr(l),c=Gr(c),d=d.slice(),s=l-c){for((o=s<0)?(s=-s,a=d):(c=l,a=h),a.reverse(),e=s;e--;a.push(0));a.reverse()}else for(i=(o=(s=d.length)<(e=h.length))?s:e,s=e=0;e<i;e++)if(d[e]!=h[e]){o=d[e]<h[e];break}if(o&&(a=d,d=h,h=a,t.s=-t.s),(e=(i=h.length)-(n=d.length))>0)for(;e--;d[n++]=0);for(e=Vr-1;i>s;){if(d[--i]<h[i]){for(n=i;n&&!d[--n];d[n]=e);--d[n],d[i]+=Vr}d[i]-=h[i]}for(;0==d[0];d.splice(0,1),--c);return d[0]?M(t,d,c):(t.s=3==f?-1:1,t.c=[t.e=0],t)},u.modulo=u.mod=function(t,e){var i,a,o=this;return t=new E(t,e),!o.c||!t.s||t.c&&!t.c[0]?new E(NaN):!t.c||o.c&&!o.c[0]?new E(o):(9==C?(a=t.s,t.s=1,i=n(o,t,0,3),t.s=a,i.s*=a):i=n(o,t,0,C),(t=o.minus(i.times(t))).c[0]||1!=C||(t.s=o.s),t)},u.multipliedBy=u.times=function(t,e){var n,i,a,o,r,s,l,c,d,h,u,p,g,f,m,v=this,b=v.c,y=(t=new E(t,e)).c;if(!(b&&y&&b[0]&&y[0]))return!v.s||!t.s||b&&!b[0]&&!y||y&&!y[0]&&!b?t.c=t.e=t.s=null:(t.s*=v.s,b&&y?(t.c=[0],t.e=0):t.c=t.e=null),t;for(i=Gr(v.e/Ur)+Gr(t.e/Ur),t.s*=v.s,(l=b.length)<(h=y.length)&&(g=b,b=y,y=g,a=l,l=h,h=a),a=l+h,g=[];a--;g.push(0));for(f=Vr,m=Zr,a=h;--a>=0;){for(n=0,u=y[a]%m,p=y[a]/m|0,o=a+(r=l);o>a;)n=((c=u*(c=b[--r]%m)+(s=p*c+(d=b[r]/m|0)*u)%m*m+g[o]+n)/f|0)+(s/m|0)+p*d,g[o--]=c%f;g[o]=n}return n?++i:g.splice(0,1),M(t,g,i)},u.negated=function(){var t=new E(this);return t.s=-t.s||null,t},u.plus=function(t,e){var n,i=this,a=i.s;if(e=(t=new E(t,e)).s,!a||!e)return new E(NaN);if(a!=e)return t.s=-e,i.minus(t);var o=i.e/Ur,r=t.e/Ur,s=i.c,l=t.c;if(!o||!r){if(!s||!l)return new E(a/0);if(!s[0]||!l[0])return l[0]?t:new E(s[0]?i:0*a)}if(o=Gr(o),r=Gr(r),s=s.slice(),a=o-r){for(a>0?(r=o,n=l):(a=-a,n=s),n.reverse();a--;n.push(0));n.reverse()}for((a=s.length)-(e=l.length)<0&&(n=l,l=s,s=n,e=a),a=0;e;)a=(s[--e]=s[e]+l[e]+a)/Vr|0,s[e]=Vr===s[e]?0:s[e]%Vr;return a&&(s=[a].concat(s),++r),M(t,s,r)},u.precision=u.sd=function(t,e){var n,i,a,o=this;if(null!=t&&t!==!!t)return Yr(t,1,Wr),null==e?e=f:Yr(e,0,8),N(new E(o),t,e);if(!(n=o.c))return null;if(i=(a=n.length-1)*Ur+1,a=n[a]){for(;a%10==0;a/=10,i--);for(a=n[0];a>=10;a/=10,i++);}return t&&o.e+1>i&&(i=o.e+1),i},u.shiftedBy=function(t){return Yr(t,-9007199254740991,Fr),this.times("1e"+t)},u.squareRoot=u.sqrt=function(){var t,e,i,a,o,r=this,s=r.c,l=r.s,c=r.e,d=g+4,h=new E("0.5");if(1!==l||!s||!s[0])return new E(!l||l<0&&(!s||s[0])?NaN:s?r:1/0);if(0==(l=Math.sqrt(+k(r)))||l==1/0?(((e=Jr(s)).length+c)%2==0&&(e+="0"),l=Math.sqrt(+e),c=Gr((c+1)/2)-(c<0||c%2),i=new E(e=l==1/0?"5e"+c:(e=l.toExponential()).slice(0,e.indexOf("e")+1)+c)):i=new E(l+""),i.c[0])for((l=(c=i.e)+d)<3&&(l=0);;)if(o=i,i=h.times(o.plus(n(r,o,d,1))),Jr(o.c).slice(0,l)===(e=Jr(i.c)).slice(0,l)){if(i.e<c&&--l,"9999"!=(e=e.slice(l-3,l+1))&&(a||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(N(i,i.e+g+2,1),t=!i.times(i).eq(r));break}if(!a&&(N(o,o.e+g+2,0),o.times(o).eq(r))){i=o;break}d+=4,l+=4,a=1}return N(i,i.e+g+1,f,t)},u.toExponential=function(t,e){return null!=t&&(Yr(t,0,Wr),t++),S(this,t,e,1)},u.toFixed=function(t,e){return null!=t&&(Yr(t,0,Wr),t=t+this.e+1),S(this,t,e)},u.toFormat=function(t,e,n){var i,a=this;if(null==n)null!=t&&e&&"object"==typeof e?(n=e,e=null):t&&"object"==typeof t?(n=t,t=e=null):n=T;else if("object"!=typeof n)throw Error(Hr+"Argument not an object: "+n);if(i=a.toFixed(t,e),a.c){var o,r=i.split("."),s=+n.groupSize,l=+n.secondaryGroupSize,c=n.groupSeparator||"",d=r[0],h=r[1],u=a.s<0,p=u?d.slice(1):d,g=p.length;if(l&&(o=s,s=l,l=o,g-=o),s>0&&g>0){for(o=g%s||s,d=p.substr(0,o);o<g;o+=s)d+=c+p.substr(o,s);l>0&&(d+=c+p.slice(o)),u&&(d="-"+d)}i=h?d+(n.decimalSeparator||"")+((l=+n.fractionGroupSize)?h.replace(new RegExp("\\d{"+l+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):h):d}return(n.prefix||"")+i+(n.suffix||"")},u.toFraction=function(t){var e,i,a,o,r,s,l,c,d,h,u,g,m=this,v=m.c;if(null!=t&&(!(l=new E(t)).isInteger()&&(l.c||1!==l.s)||l.lt(p)))throw Error(Hr+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+k(l));if(!v)return new E(m);for(e=new E(p),d=i=new E(p),a=c=new E(p),g=Jr(v),r=e.e=g.length-m.e-1,e.c[0]=zr[(s=r%Ur)<0?Ur+s:s],t=!t||l.comparedTo(e)>0?r>0?e:d:l,s=y,y=1/0,l=new E(g),c.c[0]=0;h=n(l,e,0,1),1!=(o=i.plus(h.times(a))).comparedTo(t);)i=a,a=o,d=c.plus(h.times(o=d)),c=o,e=l.minus(h.times(o=e)),l=o;return o=n(t.minus(i),a,0,1),c=c.plus(o.times(d)),i=i.plus(o.times(a)),c.s=d.s=m.s,u=n(d,a,r*=2,f).minus(m).abs().comparedTo(n(c,i,r,f).minus(m).abs())<1?[d,a]:[c,i],y=s,u},u.toNumber=function(){return+k(this)},u.toPrecision=function(t,e){return null!=t&&Yr(t,1,Wr),S(this,t,e,2)},u.toString=function(t){var e,n=this,a=n.s,o=n.e;return null===o?a?(e="Infinity",a<0&&(e="-"+e)):e="NaN":(null==t?e=o<=m||o>=v?Qr(Jr(n.c),o):ts(Jr(n.c),o,"0"):10===t&&A?e=ts(Jr((n=N(new E(n),g+o+1,f)).c),n.e,"0"):(Yr(t,2,I.length,"Base"),e=i(ts(Jr(n.c),o,"0"),10,t,a,!0)),a<0&&n.c[0]&&(e="-"+e)),e},u.valueOf=u.toJSON=function(){return k(this)},u._isBigNumber=!0,u[Symbol.toStringTag]="BigNumber",u[Symbol.for("nodejs.util.inspect.custom")]=u.valueOf,null!=e&&E.set(e),E}();function is(t){var e;return null!==(e=es[t])&&void 0!==e?e:es.default}!function(t){t[t.up=ns.ROUND_UP]="up",t[t.down=ns.ROUND_DOWN]="down",t[t.truncate=ns.ROUND_DOWN]="truncate",t[t.halfUp=ns.ROUND_HALF_UP]="halfUp",t[t.default=ns.ROUND_HALF_UP]="default",t[t.halfDown=ns.ROUND_HALF_DOWN]="halfDown",t[t.halfEven=ns.ROUND_HALF_EVEN]="halfEven",t[t.banker=ns.ROUND_HALF_EVEN]="banker",t[t.ceiling=ns.ROUND_CEIL]="ceiling",t[t.ceil=ns.ROUND_CEIL]="ceil",t[t.floor=ns.ROUND_FLOOR]="floor"}(es||(es={}));var as=n(2493),os=n.n(as);function rs(t,e){const n=function(t,{precision:e,significant:n}){return n&&null!==e&&e>0?e-function(t){return t.isZero()?1:Math.floor(Math.log10(t.abs().toNumber())+1)}(t):e}(t,e);if(null===n)return t.toString();const i=is(e.roundMode);if(n>=0)return t.toFixed(n,i);const a=Math.pow(10,Math.abs(n));return(t=new ns(t.div(a).toFixed(0,i)).times(a)).toString()}function ss(t,e){var n,i,a;const o=new ns(t);if(e.raise&&!o.isFinite())throw new Error(`"${t}" is not a valid numeric value`);const r=rs(o,e),s=new ns(r),l=s.lt(0),c=s.isZero();let[d,h]=r.split(".");const u=[];let p;const g=null!==(n=e.format)&&void 0!==n?n:"%n",f=null!==(i=e.negativeFormat)&&void 0!==i?i:`-${g}`,m=l&&!c?f:g;for(d=d.replace("-","");d.length>0;)u.unshift(d.substr(Math.max(0,d.length-3),3)),d=d.substr(0,d.length-3);return d=u.join(""),p=u.join(e.delimiter),h=e.significant?function({significand:t,whole:e,precision:n}){if("0"===e||null===n)return t;const i=Math.max(0,n-e.length);return(null!=t?t:"").substr(0,i)}({whole:d,significand:h,precision:e.precision}):null!=h?h:os()("0",null!==(a=e.precision)&&void 0!==a?a:0),e.stripInsignificantZeros&&h&&(h=h.replace(/0+$/,"")),o.isNaN()&&(p=t.toString()),h&&o.isFinite()&&(p+=(e.separator||".")+h),function(t,{formattedNumber:e,unit:n}){return t.replace("%n",e).replace("%u",n)}(m,{formattedNumber:p,unit:e.unit})}function ls(t,e,n){let i="";return(e instanceof String||"string"==typeof e)&&(i=e),e instanceof Array&&(i=e.join(t.defaultSeparator)),n.scope&&(i=[n.scope,i].join(t.defaultSeparator)),i}function cs(t){var e,n;if(null===t)return"null";const i=typeof t;return"object"!==i?i:(null===(n=null===(e=null==t?void 0:t.constructor)||void 0===e?void 0:e.name)||void 0===n?void 0:n.toLowerCase())||"object"}function ds(t,e,n){n=Object.keys(n).reduce(((e,i)=>(e[t.transformKey(i)]=n[i],e)),{});const i=e.match(t.placeholder);if(!i)return e;for(;i.length;){let a;const o=i.shift(),r=o.replace(t.placeholder,"$1");a=jr(n[r])?n[r].toString().replace(/\$/gm,"_#$#_"):r in n?t.nullPlaceholder(t,o,e,n):t.missingPlaceholder(t,o,e,n);const s=new RegExp(o.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}"),"g");e=e.replace(s,a)}return e.replace(/_#\$#_/g,"$")}function hs(t,e,n={}){const i="locale"in(n=Object.assign({},n))?n.locale:t.locale,a=cs(i),o=t.locales.get("string"===a?i:typeof i).slice(),r=ls(t,e,n).split(t.defaultSeparator).map((e=>t.transformKey(e))),s=o.map((e=>r.reduce(((t,e)=>t&&t[e]),t.translations[e])));return s.push(n.defaultValue),s.find((t=>jr(t)))}var us=n(3031),ps=n.n(us),gs=n(7248);const fs={0:"unit",1:"ten",2:"hundred",3:"thousand",6:"million",9:"billion",12:"trillion",15:"quadrillion","-1":"deci","-2":"centi","-3":"mili","-6":"micro","-9":"nano","-12":"pico","-15":"femto"},ms=n.n(gs)()(Object.values(fs),Object.keys(fs).map((t=>parseInt(t,10))));const vs=["byte","kb","mb","gb","tb","pb","eb"];function bs(t){if(t instanceof Date)return t;if("number"==typeof t){const e=new Date;return e.setTime(t),e}const e=new String(t).match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2})(?:[.,](\d{1,3}))?)?(Z|\+00:?00)?/);if(e){const t=e.slice(1,8).map((t=>parseInt(t,10)||0));t[1]-=1;const[n,i,a,o,r,s,l]=t;return e[8]?new Date(Date.UTC(n,i,a,o,r,s,l)):new Date(n,i,a,o,r,s,l)}t.match(/([A-Z][a-z]{2}) ([A-Z][a-z]{2}) (\d+) (\d+:\d+:\d+) ([+-]\d+) (\d+)/)&&(new Date).setTime(Date.parse([RegExp.$1,RegExp.$2,RegExp.$3,RegExp.$6,RegExp.$4,RegExp.$5].join(" ")));const n=new Date;return n.setTime(Date.parse(t)),n}function ys({i18n:t,count:e,scope:n,options:i,baseScope:a}){let o,r;if(i=Object.assign({},i),o="object"==typeof n&&n?n:hs(t,n,i),!o)return t.missingTranslation.get(n,i);const s=t.pluralization.get(i.locale)(t,e),l=[];for(;s.length;){const t=s.shift();if(jr(o[t])){r=o[t];break}l.push(t)}return jr(r)?(i.count=e,t.interpolate(t,r,i)):t.missingTranslation.get(a.split(t.defaultSeparator).concat([l[0]]),i)}const ws={meridian:{am:"AM",pm:"PM"},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbrDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbrMonthNames:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};var Cs=n(3181),xs=n.n(Cs);const Ts=(t,e,n)=>n>=t&&n<=e,Is=function(t,e){e instanceof Array&&(e=e.join(t.defaultSeparator));const n=e.split(t.defaultSeparator).slice(-1)[0];return t.missingTranslationPrefix+n.replace("_"," ").replace(/([a-z])([A-Z])/g,((t,e,n)=>`${e} ${n.toLowerCase()}`))},As=(t,e,n)=>{const i=ls(t,e,n),a="locale"in n?n.locale:t.locale,o=cs(a);return`[missing "${["string"==o?a:o,i].join(t.defaultSeparator)}" translation]`},Es=(t,e,n)=>{const i=ls(t,e,n),a=[t.locale,i].join(t.defaultSeparator);throw new Error(`Missing translation: ${a}`)};class Ss{constructor(t){this.i18n=t,this.registry={},this.register("guess",Is),this.register("message",As),this.register("error",Es)}register(t,e){this.registry[t]=e}get(t,e){var n;return this.registry[null!==(n=e.missingBehavior)&&void 0!==n?n:this.i18n.missingBehavior](this.i18n,t,e)}}const Ls={defaultLocale:"en",locale:"en",defaultSeparator:".",placeholder:/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,enableFallback:!1,missingBehavior:"message",missingTranslationPrefix:"",missingPlaceholder:(t,e)=>`[missing "${e}" value]`,nullPlaceholder:(t,e,n,i)=>t.missingPlaceholder(t,e,n,i),transformKey:t=>t},Ms=new class{constructor(t={},e={}){this._locale=Ls.locale,this._defaultLocale=Ls.defaultLocale,this._version=0,this.onChangeHandlers=[],this.translations={},this.t=this.translate,this.p=this.pluralize,this.l=this.localize,this.distanceOfTimeInWords=this.timeAgoInWords;const{locale:n,enableFallback:i,missingBehavior:a,missingTranslationPrefix:o,missingPlaceholder:r,nullPlaceholder:s,defaultLocale:l,defaultSeparator:c,placeholder:d,transformKey:h}=Object.assign(Object.assign({},Ls),e);this.locale=n,this.defaultLocale=l,this.defaultSeparator=c,this.enableFallback=i,this.locale=n,this.missingBehavior=a,this.missingTranslationPrefix=o,this.missingPlaceholder=r,this.nullPlaceholder=s,this.placeholder=d,this.pluralization=new Pr(this),this.locales=new Nr(this),this.missingTranslation=new Ss(this),this.transformKey=h,this.interpolate=ds,this.store(t)}store(t){Er()(this.translations,t),this.hasChanged()}get locale(){return this._locale||this.defaultLocale||"en"}set locale(t){if("string"!=typeof t)throw new Error(`Expected newLocale to be a string; got ${cs(t)}`);const e=this._locale!==t;this._locale=t,e&&this.hasChanged()}get defaultLocale(){return this._defaultLocale||"en"}set defaultLocale(t){if("string"!=typeof t)throw new Error(`Expected newLocale to be a string; got ${cs(t)}`);const e=this._defaultLocale!==t;this._defaultLocale=t,e&&this.hasChanged()}translate(t,e){const n=function(t,e,n){let i=[{scope:e}];if(jr(n.defaults)&&(i=i.concat(n.defaults)),jr(n.defaultValue)){const a="function"==typeof n.defaultValue?n.defaultValue(t,e,n):n.defaultValue;i.push({message:a}),delete n.defaultValue}return i}(this,t,e=Object.assign({},e));let i;return n.some((t=>(jr(t.scope)?i=hs(this,t.scope,e):jr(t.message)&&(i=t.message),null!=i)))?("string"==typeof i?i=this.interpolate(this,i,e):"object"==typeof i&&i&&jr(e.count)&&(i=ys({i18n:this,count:e.count||0,scope:i,options:e,baseScope:ls(this,t,e)})),e&&i instanceof Array&&(i=i.map((t=>"string"==typeof t?ds(this,t,e):t))),i):this.missingTranslation.get(t,e)}pluralize(t,e,n){return ys({i18n:this,count:t,scope:e,options:Object.assign({},n),baseScope:ls(this,e,null!=n?n:{})})}localize(t,e,n){if(n=Object.assign({},n),null==e)return"";switch(t){case"currency":return this.numberToCurrency(e);case"number":return ss(e,Object.assign({delimiter:",",precision:3,separator:".",significant:!1,stripInsignificantZeros:!1},hs(this,"number.format")));case"percentage":return this.numberToPercentage(e);default:{let i;return i=t.match(/^(date|time)/)?this.toTime(t,e):e.toString(),ds(this,i,n)}}}toTime(t,e){const n=bs(e),i=hs(this,t);return n.toString().match(/invalid/i)?n.toString():i?this.strftime(n,i):n.toString()}numberToCurrency(t,e={}){return ss(t,Object.assign(Object.assign(Object.assign({delimiter:",",format:"%u%n",precision:2,separator:".",significant:!1,stripInsignificantZeros:!1,unit:"$"},Or(this.get("number.format"))),Or(this.get("number.currency.format"))),e))}numberToPercentage(t,e={}){return ss(t,Object.assign(Object.assign(Object.assign({delimiter:"",format:"%n%",precision:3,stripInsignificantZeros:!1,separator:".",significant:!1},Or(this.get("number.format"))),Or(this.get("number.percentage.format"))),e))}numberToHumanSize(t,e={}){return function(t,e,n){const i=is(n.roundMode),a=1024,o=new ns(e).abs(),r=o.lt(a);let s;const l=((t,e)=>{const n=e.length-1,i=new ns(Math.log(t.toNumber())).div(Math.log(a)).integerValue(ns.ROUND_DOWN).toNumber();return Math.min(n,i)})(o,vs);s=r?o.integerValue():new ns(rs(o.div(Math.pow(a,l)),{significant:n.significant,precision:n.precision,roundMode:n.roundMode}));const c=t.translate("number.human.storage_units.format",{defaultValue:"%n %u"}),d=t.translate(`number.human.storage_units.units.${r?"byte":vs[l]}`,{count:o.integerValue().toNumber()});let h=s.toFixed(n.precision,i);return n.stripInsignificantZeros&&(h=h.replace(/(\..*?)0+$/,"$1").replace(/\.$/,"")),c.replace("%n",h).replace("%u",d)}(this,t,Object.assign(Object.assign(Object.assign({delimiter:"",precision:3,significant:!0,stripInsignificantZeros:!0,units:{billion:"Billion",million:"Million",quadrillion:"Quadrillion",thousand:"Thousand",trillion:"Trillion",unit:""}},Or(this.get("number.human.format"))),Or(this.get("number.human.storage_units"))),e))}numberToHuman(t,e={}){return function(t,e,n){const i={roundMode:n.roundMode,precision:n.precision,significant:n.significant};let a;if("string"===cs(n.units)){const e=n.units;if(a=hs(t,e),!a)throw new Error(`The scope "${t.locale}${t.defaultSeparator}${ls(t,e,{})}" couldn't be found`)}else a=n.units;let o=rs(new ns(e),i);const r=((t,e)=>{const n=t.isZero()?0:Math.floor(Math.log10(t.abs().toNumber()));return(t=>ps()(Object.keys(t).map((t=>ms[t])),(t=>-1*t)))(e).find((t=>n>=t))||0})(new ns(o),a),s=((t,e)=>t[fs[e.toString()]]||"")(a,r);if(o=rs(new ns(o).div(Math.pow(10,r)),i),n.stripInsignificantZeros){let[t,e]=o.split(".");e=(e||"").replace(/0+$/,""),o=t,e&&(o+=`${n.separator}${e}`)}return n.format.replace("%n",o||"0").replace("%u",s).trim()}(this,t,Object.assign(Object.assign(Object.assign({delimiter:"",separator:".",precision:3,significant:!0,stripInsignificantZeros:!0,format:"%n %u",roundMode:"default",units:{billion:"Billion",million:"Million",quadrillion:"Quadrillion",thousand:"Thousand",trillion:"Trillion",unit:""}},Or(this.get("number.human.format"))),Or(this.get("number.human.decimal_units"))),e))}numberToRounded(t,e){return ss(t,Object.assign({unit:"",precision:3,significant:!1,separator:".",delimiter:"",stripInsignificantZeros:!1},e))}numberToDelimited(t,e={}){return function(t,e){const n=new ns(t);if(!n.isFinite())return t.toString();if(!e.delimiterPattern.global)throw new Error(`options.delimiterPattern must be a global regular expression; received ${e.delimiterPattern}`);let[i,a]=n.toString().split(".");return i=i.replace(e.delimiterPattern,(t=>`${t}${e.delimiter}`)),[i,a].filter(Boolean).join(e.separator)}(t,Object.assign({delimiterPattern:/(\d)(?=(\d\d\d)+(?!\d))/g,delimiter:",",separator:"."},e))}withLocale(t,e){return n=this,i=void 0,o=function*(){const n=this.locale;try{this.locale=t,yield e()}finally{this.locale=n}},new((a=void 0)||(a=Promise))((function(t,e){function r(t){try{l(o.next(t))}catch(t){e(t)}}function s(t){try{l(o.throw(t))}catch(t){e(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof a?n:new a((function(t){t(n)}))).then(r,s)}l((o=o.apply(n,i||[])).next())}));var n,i,a,o}strftime(t,e,n={}){return function(t,e,n={}){const{abbrDayNames:i,dayNames:a,abbrMonthNames:o,monthNames:r,meridian:s,utc:l}=Object.assign(Object.assign({},ws),n);if(isNaN(t.getTime()))throw new Error("strftime() requires a valid date object, but received an invalid date.");const c=l?t.getUTCDay():t.getDay(),d=l?t.getUTCDate():t.getDate(),h=l?t.getUTCFullYear():t.getFullYear(),u=(l?t.getUTCMonth():t.getMonth())+1,p=l?t.getUTCHours():t.getHours();let g=p;const f=p>11?"pm":"am",m=l?t.getUTCSeconds():t.getSeconds(),v=l?t.getUTCMinutes():t.getMinutes(),b=l?0:t.getTimezoneOffset(),y=Math.floor(Math.abs(b/60)),w=Math.abs(b)-60*y,C=(b>0?"-":"+")+(y.toString().length<2?"0"+y:y)+(w.toString().length<2?"0"+w:w);return g>12?g-=12:0===g&&(g=12),(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace("%a",i[c])).replace("%A",a[c])).replace("%b",o[u])).replace("%B",r[u])).replace("%d",d.toString().padStart(2,"0"))).replace("%e",d.toString())).replace("%-d",d.toString())).replace("%H",p.toString().padStart(2,"0"))).replace("%-H",p.toString())).replace("%k",p.toString())).replace("%I",g.toString().padStart(2,"0"))).replace("%-I",g.toString())).replace("%l",g.toString())).replace("%m",u.toString().padStart(2,"0"))).replace("%-m",u.toString())).replace("%M",v.toString().padStart(2,"0"))).replace("%-M",v.toString())).replace("%p",s[f])).replace("%P",s[f].toLowerCase())).replace("%S",m.toString().padStart(2,"0"))).replace("%-S",m.toString())).replace("%w",c.toString())).replace("%y",h.toString().padStart(2,"0").substr(-2))).replace("%-y",h.toString().padStart(2,"0").substr(-2).replace(/^0+/,""))).replace("%Y",h.toString())).replace(/%z/i,C)}(t,e,Object.assign(Object.assign(Object.assign({},Or(hs(this,"date"))),{meridian:{am:hs(this,"time.am")||"AM",pm:hs(this,"time.pm")||"PM"}}),n))}update(t,e,n={strict:!1}){if(n.strict&&!Ir()(this.translations,t))throw new Error(`The path "${t}" is not currently defined`);const i=xr()(this.translations,t),a=cs(i),o=cs(e);if(n.strict&&a!==o)throw new Error(`The current type for "${t}" is "${a}", but you're trying to override it with "${o}"`);let r;r="object"===o?Object.assign(Object.assign({},i),e):e;const s=t.split(this.defaultSeparator),l=s.pop();let c=this.translations;for(const t of s)c[t]||(c[t]={}),c=c[t];c[l]=r,this.hasChanged()}toSentence(t,e={}){const{wordsConnector:n,twoWordsConnector:i,lastWordConnector:a}=Object.assign(Object.assign({wordsConnector:", ",twoWordsConnector:" and ",lastWordConnector:", and "},Or(hs(this,"support.array"))),e),o=t.length;switch(o){case 0:return"";case 1:return`${t[0]}`;case 2:return t.join(i);default:return[t.slice(0,o-1).join(n),a,t[o-1]].join("")}}timeAgoInWords(t,e,n={}){return function(t,e,n,i={}){const a=i.scope||"datetime.distance_in_words",o=(e,n=0)=>t.t(e,{count:n,scope:a});e=bs(e),n=bs(n);let r=e.getTime()/1e3,s=n.getTime()/1e3;r>s&&([e,n,r,s]=[n,e,s,r]);const l=Math.round(s-r),c=Math.round((s-r)/60),d=c/60/24,h=Math.round(c/60),u=Math.round(d),p=Math.round(u/30);if(Ts(0,1,c))return i.includeSeconds?Ts(0,4,l)?o("less_than_x_seconds",5):Ts(5,9,l)?o("less_than_x_seconds",10):Ts(10,19,l)?o("less_than_x_seconds",20):Ts(20,39,l)?o("half_a_minute"):Ts(40,59,l)?o("less_than_x_minutes",1):o("x_minutes",1):0===c?o("less_than_x_minutes",1):o("x_minutes",c);if(Ts(2,44,c))return o("x_minutes",c);if(Ts(45,89,c))return o("about_x_hours",1);if(Ts(90,1439,c))return o("about_x_hours",h);if(Ts(1440,2519,c))return o("x_days",1);if(Ts(2520,43199,c))return o("x_days",u);if(Ts(43200,86399,c))return o("about_x_months",Math.round(c/43200));if(Ts(86400,525599,c))return o("x_months",p);let g=e.getFullYear();e.getMonth()+1>=3&&(g+=1);let f=n.getFullYear();n.getMonth()+1<3&&(f-=1);const m=525600,v=c-1440*(g>f?0:xs()(g,f).filter((t=>1==new Date(t,1,29).getMonth())).length),b=Math.trunc(v/m),y=parseFloat((v/m-b).toPrecision(3));return y<.25?o("about_x_years",b):y<.75?o("over_x_years",b):o("almost_x_years",b+1)}(this,t,e,n)}onChange(t){return this.onChangeHandlers.push(t),()=>{this.onChangeHandlers.splice(this.onChangeHandlers.indexOf(t),1)}}get version(){return this._version}formatNumber(t,e={}){return ss(t,e=Object.assign(Object.assign({delimiter:",",precision:3,separator:".",unit:"",format:"%u%n",significant:!1,stripInsignificantZeros:!1},Or(this.get("number.format"))),e))}get(t){return hs(this,t)}runCallbacks(){this.onChangeHandlers.forEach((t=>t(this)))}hasChanged(){this._version+=1,this.runCallbacks()}}({en:{navbar:{tree:"Tree",publish:{label:"Publish",modal_title:"Publish",modal_description:"Are you sure you want to publish? Once published, all currently visible pages will be finalized and visible to residents. This action cannot be undone.",notify_residents:"Notify residents about the updates made",modal_confirm:"Publish",modal_cancel:"Cancel",sidebar_mapping_title:"Mapping"},debug:{label:"Debug",modal_title:"App Debugging",total_urls:"Total URLs",total_successful:"Successful",total_failed:"Failed",full_url:"Full URL",status_code:"Status Code",status_message:"Status Message",affected_tile:"Affected Tile",affected_content:"Affected Content",affected_cta:"Affected CTA"},share:{label:"Share",modal_title:"Share link for a preview",modal_description:"A shareable link has been generated for you. Copy it and share for previews!",copy:"Copy",close:"Close",copied:"Linked copied to clipboard"},trash:{label:"Trash",modal_title:"Trash",modal_description:"A shareable link has been generated for you. Copy it and share for previews!",copy:"Copy",close:"Close",copied:"Linked copied to clipboard"},appversion:{create_new:"Create new version",duplicate:"Duplicate version",duplicate_button:"Duplicate",save:"Save",cancel:"Cancel",delete:"Delete"}},undo:"Undo",redo:"Redo",sidebar:{pages:"Pages",templates:{label:"Templates",click_to_add_template:"Click to add template",confirmation_title:"Confirmation",confirmation_message:"When you continue, all the changes you have made will be cleared."},confirmation_accept:"Confirm",confirmation_cancel:"Cancel",image_upload:{modal_title:"Edit Content",cancel:"Cancel",save:"Save",upload_message:"<p>Drag and drop or <a href='#' id='browseLink'>browse</a></p>"},icon_category:{general:"General",services:"Services",health:"Health",living:"Living"},action_list:{page:"Pages",services:"Services",forms:"Forms",weblink:"Web link",module:"Modules",content:"Content",call_to_action:"Call to Action"}},default:{reception:"Reception",mycare:"My Care",myliving:"My Living",myservice:"My Service",location:"Location",map:"Map",myactivity:"My Activity",calendar:"Calendar"},tile:{add_template_right:"Add tile right",add_template_bottom:"Add tile below",delete_tile:"Delete tile",title:"Title",add_menu_page:"Add menu page",add_content_page:"Add content page",information_page:"New Page",existing_pages:"Existing Pages",call_to_action:"Call to Action",forms:"Forms",modules:"Modules",email:"Email",phone:"Phone",maps:"Maps",calendar:"Calendar",services:"Services",edit_content:"Edit Content",save_button:"Save",cancel_button:"Cancel"},messages:{success:{published:"App published successfully",page_created:"Page created successfully"},error:{page_linking:"Page cannot be linked to itself",select_tile:"Select a tile to continue",empty_page_name:"Enter page name",templates_on_menu_pages:"Templates can only be added to menu pages",no_active_page:"No active page"}},Messages:"Messages",Requests:"Requests",NoMessagesYet:"No Messages Yet"},nl:{navbar:{tree:"Boom",publish:{label:"Publiceren",modal_title:"Publiceren",modal_description:"Weet je zeker dat je wilt publiceren? Zodra gepubliceerd, worden alle momenteel zichtbare pagina's afgerond en zichtbaar voor bewoners. Deze actie kan niet ongedaan worden gemaakt.",notify_residents:"Bewoners op de hoogte stellen van de gemaakte updates",modal_confirm:"Publiceren",modal_cancel:"Annuleren",sidebar_mapping_title:"Indeling"},debug:{label:"Debug",modal_title:"App Debugging",total_urls:"Totaal aantal URL's",total_successful:"Succesvol",total_failed:"Mislukt",full_url:"Volledige URL",status_code:"Statuscode",status_message:"Statusbericht",affected_tile:"Beïnvloede tegel",affected_content:"Beïnvloede inhoud",affected_cta:"Beïnvloede CTA"},share:{label:"Delen",modal_title:"Deel link voor een voorbeeldweergave",modal_description:"Er is een deelbare link gegenereerd voor jou. Kopieer deze en deel hem voor previews!",copy:"Kopiëren",close:"Sluiten",copied:"Link gekopieerd naar klembord"},appversion:{create_new:"Nieuwe versie maken",duplicate:"Versie dupliceren"}},undo:"Ongedaan maken",redo:"Opnieuw",sidebar:{pages:"Pagina's",templates:{label:"Sjablonen",click_to_add_template:"Klik om een sjabloon toe te voegen",confirmation_title:"Bevestiging",confirmation_message:"Als je doorgaat, worden alle wijzigingen die je hebt gemaakt gewist."},confirmation_accept:"Bevestigen",confirmation_cancel:"Annuleren",image_upload:{modal_title:"Inhoud bewerken",cancel:"Annuleren",save:"Opslaan",upload_message:"<p>Sleep en plaats of <a href='#' id='browseLink'>blader</a></p>"},icon_category:{general:"Algemeen",services:"Diensten",health:"Gezondheid",living:"Wonen"},action_list:{page:"Pagina's",services:"Diensten",forms:"Formulieren",weblink:"Weblink",module:"Modules",content:"Inhoud"}},default:{reception:"Receptie",mycare:"Mijn Zorg",myliving:"Mijn Wonen",myservice:"Mijn Dienst",location:"Locatie",map:"Kaart",myactivity:"Mijn Activiteit",calendar:"Kalender"},tile:{add_template_right:"Tegel rechts toevoegen",add_template_bottom:"Tegel hieronder toevoegen",delete_tile:"Tegel verwijderen",title:"Titel",add_menu_page:"Menu­pagina toevoegen",add_content_page:"Inhouds­pagina toevoegen",forms:"Formulieren",modules:"Modules",existing_pages:"Bestaande pagina's",call_to_action:"Call to Action",email:"e-mail",phone:"Telefoon",maps:"Kaarten",calendar:"Kalender",services:"Diensten",information_page:"Nieuwe Pagina",edit_content:"Inhoud Bewerken",save_button:"Bevestig",cancel_button:"Annuleer"},messages:{success:{published:"App succesvol gepubliceerd",page_created:"Pagina succesvol aangemaakt"},error:{page_linking:"Pagina kan niet aan zichzelf worden gekoppeld",select_tile:"Selecteer een tegel om door te gaan",empty_page_name:"Voer een paginanaam in",templates_on_menu_pages:"Sjablonen kunnen alleen aan menupagina's worden toegevoegd",no_active_page:"Geen actieve pagina"}},Messages:"Berichten",Requests:"Verzoeken",NoMessagesYet:"Nog geen berichten"}});class Ns{constructor(t,e){this.tileAttributes=e,this.selectedComponent=t,this.themeManager=new $s}setTileAttributes(){this.setBgColorProperties(),this.setOpacityProperties(),this.setTitleStyleProperties(),this.setTileActionProperties(),this.setTileIconProperties()}setBgColorProperties(){var t,e;const n=document.getElementById("theme-color-palette"),i=function(t){if(!t)return"";const e=t.match(/\d+/g);return e&&3===e.length?`#${e.map((t=>Number(t).toString(16).padStart(2,"0"))).join("")}`:""}(this.selectedComponent.getEl().style.backgroundColor),a=null===(t=this.selectedComponent.getStyle())||void 0===t?void 0:t["background-image"],o=this.themeManager.getThemeColor(null===(e=this.tileAttributes)||void 0===e?void 0:e.BGColor),r=null==n?void 0:n.children;for(let t=0;t<r.length;t++){const e=r[t].querySelector("input");a||i!==o||i!==e.value?e.checked=!1:e.checked=!0}}setOpacityProperties(){var t,e,n;const i=null===(t=this.tileAttributes)||void 0===t?void 0:t.BGImageUrl,a=null===(e=this.tileAttributes)||void 0===e?void 0:e.Opacity,o=null===(n=this.selectedComponent.getStyle())||void 0===n?void 0:n["background-image"];let r="";if(o&&o.startsWith("url(")&&(r=o.replace(/^url\(["']?/,"").replace(/["']?\)$/,"")),r&&i){if(r===i){const t=document.querySelector(".tile-img-section");if(t){t.querySelector("#slider-wrapper").style.display="flex";const e=t.querySelector("#bg-opacity"),n=Math.round(100*a)/100;e.value=n.toString(),t.querySelector("#valueDisplay").textContent=e.value+"%";const o=t.querySelector("#tile-img-container");o.style.display="flex";const r=o.querySelector(".tile-img-thumbnail");r&&(r.src=i),this.selectedComponent.addStyle({"background-color":`rgba(0, 0, 0, ${a/100})`})}}}else{const t=document.querySelector("#slider-wrapper"),e=document.querySelector("#tile-img-container");t.style.display="none",e.style.display="none"}}setTitleStyleProperties(){var t,e;const n=document.querySelector("#tile-title"),i=null===(t=this.tileAttributes)||void 0===t?void 0:t.Text;n.focus(),n.value=i;const a=null===(e=this.tileAttributes)||void 0===e?void 0:e.Color,o=document.querySelector("#text-color-palette"),r=null==o?void 0:o.querySelectorAll("input");null==r||r.forEach((t=>{t.value===a?t.checked=!0:t.checked=!1}))}setTileActionProperties(){var t;const e=null===(t=this.tileAttributes)||void 0===t?void 0:t.Align,n=document.querySelector(".text-alignment"),i=null==n?void 0:n.querySelectorAll("input");null==i||i.forEach((t=>{t.value===e?t.checked=!0:t.checked=!1}))}setTileIconProperties(){var t,e;const n=null===(t=this.tileAttributes)||void 0===t?void 0:t.Icon;if(n){const t=this.themeManager.getIconCategory(n);this.themeManager.updateThemeIcons(t);const e=document.querySelector("#icon-categories-list");e.querySelectorAll(".category-option").forEach((n=>{if(n.classList.remove("selected"),n.getAttribute("data-value")===t){n.classList.add("selected");const i=e.querySelector(".selected-category-value");i&&(i.textContent=Ms.t(`sidebar.icon_category.${t.toLowerCase()}`))}}))}const i=this.selectedComponent.getEl().querySelector(".tile-icon"),a=null!==(e=null==i?void 0:i.getAttribute("title"))&&void 0!==e?e:"";document.querySelector("#icons-list").querySelectorAll(".icon").forEach((t=>{var e;const i=t,o=null!==(e=i.getAttribute("title"))&&void 0!==e?e:"";if(n&&o===n&&o===a){i.style.border="2px solid #5068A8";const t=i.querySelector("svg path");t&&t.setAttribute("fill","#5068A8")}else{i.style.border="";const t=i.querySelector("svg path");t&&t.setAttribute("fill","#7c8791")}}))}}class ks{constructor(t,e){this.icons=[],this.iconsCategory="General",this.themeManager=t,this.iconsCategory=e,this.init()}init(){this.icons=[],this.themeManager.getActiveThemeIcons().filter((t=>t.IconCategory===this.iconsCategory)).forEach((t=>{const e=document.createElement("div");e.classList.add("icon"),e.title=t.IconName,e.innerHTML=`${t.IconSVG}`,e.addEventListener("click",(e=>{var n,i;e.preventDefault();const a=globalThis.selectedComponent;if(!a)return;const o=a.find(".tile-icon")[0];if(!o)return;const r=null===(n=a.getStyle())||void 0===n?void 0:n.color,s=t.IconSVG.replace(/fill="#[^"]*"/g,`fill="${r||"white"}"`).replace("<svg",`<svg ${nr}`);o.components(s),o.addAttributes({title:t.IconName}),o.parent().addStyle({display:"block"});const l=a.parent(),c=l.parent();let d;if("Information"===globalThis.pageData.PageType){(new uc).updateInfoTileAttributes(c.getId(),l.getId(),"Icon",t.IconName);const e=globalThis.infoContentMapper.getInfoContent(c.getId());d=null===(i=null==e?void 0:e.Tiles)||void 0===i?void 0:i.find((t=>t.Id===l.getId()))}else globalThis.tileMapper.updateTile(a.parent().getId(),"Icon",t.IconName),d=globalThis.tileMapper.getTile(c.getId(),l.getId());new Ns(a,d).setTileAttributes()})),this.icons.push(e)}))}render(t){this.icons.forEach((e=>t.appendChild(e)))}}class Ps{constructor(t="General"){this.categoryTitle=t,this.container=document.createElement("div"),this.selectionDiv=document.createElement("div"),this.categoryOptions=document.createElement("div"),this.selectedCategory=document.createElement("span"),this.themeManager=new $s,this.init(),document.addEventListener("click",this.handleOutsideClick.bind(this))}init(){this.container.className="sidebar-section services-section",this.container.id="icon-categories-list",this.selectionDiv.className="tb-custom-category-selection";const t=document.createElement("button");t.className="category-select-button",t.setAttribute("aria-haspopup","listbox"),t.setAttribute("aria-expanded","false"),this.selectedCategory.className="selected-category-value",this.selectedCategory.textContent=Ms.t("sidebar.icon_category.general"),t.appendChild(this.selectedCategory),t.onclick=e=>{e.preventDefault(),t.classList.contains("open")?this.closeSelection():(this.categoryOptions.classList.toggle("show"),t.classList.toggle("open"),t.setAttribute("aria-expanded","true"))},this.selectionDiv.appendChild(t),this.container.appendChild(this.selectionDiv),this.initializeCategoryOptions(),this.loadThemeIcons(this.categoryTitle)}initializeCategoryOptions(){this.categoryOptions.className="category-options-list",this.categoryOptions.setAttribute("role","listbox"),[{name:"General",label:Ms.t("sidebar.icon_category.general")},{name:"Services",label:Ms.t("sidebar.icon_category.services")},{name:"Health",label:Ms.t("sidebar.icon_category.health")},{name:"Living",label:Ms.t("sidebar.icon_category.living")}].forEach((t=>{const e=document.createElement("div");e.className="category-option",e.role="option",e.setAttribute("data-value",t.name),e.textContent=t.label,e.onclick=()=>{this.categoryOptions.querySelectorAll(".category-option").forEach((t=>t.classList.remove("selected"))),e.classList.add("selected"),this.selectedCategory.textContent=t.label,this.loadThemeIcons(t.name),this.closeSelection()},this.categoryOptions.appendChild(e)})),this.selectionDiv.appendChild(this.categoryOptions)}closeSelection(){if(this.categoryOptions.classList.contains("show")){this.categoryOptions.classList.remove("show");const t=this.container.querySelector(".category-select-button");t.setAttribute("aria-expanded","false"),t.classList.toggle("open")}}loadThemeIcons(t){document.querySelectorAll("#icons-list").forEach((t=>t.remove()));const e=document.createElement("div");e.classList.add("icons-list"),e.id="icons-list",new ks(this.themeManager,t||this.categoryTitle).render(e),this.container.appendChild(e)}handleOutsideClick(t){this.categoryOptions.classList.contains("show")&&!this.container.contains(t.target)&&this.closeSelection()}render(t){const e=t.querySelector("#icon-categories-list");e?e.replaceWith(this.container):t.appendChild(this.container)}}var _s=function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}))};class $s{constructor(){this.themes=[],this.config=e.getInstance(),this.appVersionManager=new d,this.setThemes(this.config.themes)}setThemes(t){this.themes=t,this.currentTheme=this.getThemes().find((t=>t.ThemeId===window.app.currentThemeId))}getThemes(){return this.themes}getActiveThemeIcons(){return this.currentTheme?this.currentTheme.ThemeIcons:[]}getActiveThemeColors(){return this.currentTheme?this.currentTheme.ThemeColors:{}}getActiveThemeCtaColors(){return this.currentTheme?this.currentTheme.ThemeCtaColors:{}}setTheme(t){this.currentTheme=t,window.app.currentThemeId=t.ThemeId,this.config.currentThemeId=t.ThemeId,this.updateColorPallete(t.ThemeColors),this.updateCtaColorPallete(t.ThemeCtaColors),this.updateThemeIcons(),this.applyTheme(t)}updateColorPallete(t){const e=new lr(t,"theme-color-palette"),n=document.querySelector(".sidebar-section .theme-section");e&&e.refresh(n)}updateCtaColorPallete(t){const e=new wr(t),n=document.getElementById("content-page-section");n&&e.refresh(n)}updateThemeIcons(t="General"){const e=document.getElementById("menu-page-section");new Ps(t).render(e)}getThemeColor(t){return this.currentTheme&&this.currentTheme.ThemeColors?this.currentTheme.ThemeColors[t]||"transparent":(console.error("ThemeColors is undefined or invalid:",this.currentTheme),null)}getThemeCtaColor(t){var e;return t||(t="CtaColorOne"),this.currentTheme&&this.currentTheme.ThemeCtaColors?(null===(e=this.currentTheme.ThemeCtaColors.find((e=>e.CtaColorName===t)))||void 0===e?void 0:e.CtaColorCode)||"#5068a8":(console.error("ThemeColors is undefined or invalid:",this.currentTheme),null)}getThemeIcon(t){var e,n;return(null===(n=null===(e=this.getActiveThemeIcons())||void 0===e?void 0:e.find((e=>e.IconName===t)))||void 0===n?void 0:n.IconSVG)||null}getIconCategory(t){var e,n;return(null===(n=null===(e=this.getActiveThemeIcons())||void 0===e?void 0:e.find((e=>e.IconName===t)))||void 0===n?void 0:n.IconCategory)||null}applyTheme(t){return _s(this,void 0,void 0,(function*(){const e=document.querySelectorAll(".mobile-frame iframe");if(!e.length)return;const n=globalThis.activeVersion;n&&n.Pages.forEach((n=>_s(this,void 0,void 0,(function*(){var i,a,o;const r=`data-${n.PageId}`,s=JSON.parse(localStorage.getItem(r)||"{}");if(s.PageMenuStructure&&(null===(i=s.PageMenuStructure)||void 0===i?void 0:i.Rows).forEach((n=>{n.Tiles.forEach((n=>{n.BGColor&&e.forEach((e=>{var i,a;const o=e.contentDocument||(null===(i=e.contentWindow)||void 0===i?void 0:i.document);if(o){this.updateFontFamily(o,t.ThemeFontFamily);const e=o.getElementById(n.Id);if(e){const i=e.querySelector(".template-block");i&&(i.style.backgroundColor=null===(a=null==t?void 0:t.ThemeColors)||void 0===a?void 0:a[n.BGColor]),this.updateTileIcon(n,e)}this.updateFrameColor(o)}}))}))})),s.PageContentStructure){const n=null===(a=s.PageContentStructure)||void 0===a?void 0:a.Cta;null==n||n.forEach(((n,i)=>{e.forEach((e=>{var i;const a=e.contentDocument||(null===(i=e.contentWindow)||void 0===i?void 0:i.document);if(a){this.updateFontFamily(a,t.ThemeFontFamily);const e=a.querySelector(`#${n.CtaId}`);e&&(e.querySelector(".cta-styled-btn").style.backgroundColor=this.getThemeCtaColor(n.CtaBGColor)),this.updateFrameColor(a)}}))}))}if(s.PageInfoStructure){const n=null===(o=s.PageInfoStructure)||void 0===o?void 0:o.InfoContent;null==n||n.forEach(((n,i)=>{e.forEach((e=>{var i,a;const o=e.contentDocument||(null===(i=e.contentWindow)||void 0===i?void 0:i.document);if(o){this.updateFontFamily(o,t.ThemeFontFamily);const e=o.querySelector(`#${n.InfoId}`);if(e)if("Cta"===n.InfoType)e.querySelector(".cta-styled-btn").style.backgroundColor=this.getThemeCtaColor(null===(a=null==n?void 0:n.CtaAttributes)||void 0===a?void 0:a.CtaBGColor);else if("TileRow"===n.InfoType){const e=null==n?void 0:n.Tiles;null==e||e.forEach((e=>{var n;const i=o.getElementById(e.Id);if(i){const a=i.querySelector(".template-block");a&&(a.style.backgroundColor=null===(n=null==t?void 0:t.ThemeColors)||void 0===n?void 0:n[e.BGColor]),this.updateTileIcon(e,i)}}))}this.updateFrameColor(o)}}))}))}}))))}))}updateTileIcon(t,e){if(t&&e){const n=e.querySelector(".tile-icon");if(n){const e=n.querySelector("svg");if(e){let i=this.getThemeIcon(t.Icon);if(i){i=i.replace('fill="#7c8791"',`fill="${t.Color}"`);const a=document.createElement("div");a.innerHTML=i.trim();const o=a.firstChild;o&&(e.remove(),n.appendChild(o))}}}}}updateFontFamily(t,e="Comic Sans MS"){try{t.documentElement.style.setProperty("--font-family",e)}catch(t){console.error("Error updating font family:",t)}}updateFrameColor(t){var e;const n=null===(e=t.querySelector(".tb-toggle-buttons"))||void 0===e?void 0:e.children[0];null==n||n.style.setProperty("background-color",this.getThemeColor("backgroundColor"));const i=t.querySelector(".tb-date-selector");null==i||i.style.setProperty("background-color",this.getThemeColor("backgroundColor"))}}function Os(t){return`\n        <button ${nr} title="${t}" class="tile-resize-button">\n            \x3c!-- <svg xmlns="http://www.w3.org/2000/svg" width="18.6" height="18.6" viewBox="0 0 18.6 18.6">\n                <g id="Icon_for_size" data-name="Icon for size" transform="translate(-253.747 -1134.203) rotate(45)">\n                <path id="Path_1035" data-name="Path 1035" d="M4.588,3.99A.6.6,0,0,0,4,4.67V7.579a.6.6,0,1,0,1.194,0V6.035l7.341,7.341c.15.157.213.054.422,0S15.886,15.3,15.94,15.1h0l-9.9-9.9H7.58A.6.6,0,1,0,7.58,4H4.664A.6.6,0,0,0,4.588,3.99Zm8.36,8.36a.6.6,0,0,0-.416,1.025L15.1,15.94H13.552a.6.6,0,1,0,0,1.194h2.895a.6.6,0,0,0,.688-.688V13.551a.6.6,0,1,0-1.194,0V15.1C13.439,12.608,13.11,12.351,12.948,12.351Z" transform="translate(984.014 612.01)" fill="#5068a8"/>\n                </g>\n            </svg> --\x3e\n        </button>\n    `}class js{constructor(){this.themeManager=new $s}openImageUpload(t){const e=document.createElement("div");e.classList.add("tb-modal"),e.style.display="flex",new bc("info",void 0,t).render(e);const n=document.createElement("input");n.type="file",n.multiple=!0,n.accept="image/jpeg, image/jpg, image/png",n.id="fileInput",n.style.display="none",document.body.appendChild(e),document.body.appendChild(n)}addCtaButton(t){return`\n    <div id="${t.CtaId}" \n        button-type="${t.CtaType}"\n        ${or} \n        data-gjs-type="info-cta-section" \n        class="img-button-container">\n        <div ${nr} class="img-button cta-styled-btn"\n            style="background-color: ${this.themeManager.getThemeCtaColor(t.CtaBGColor)}">\n            <span ${nr} class="img-button-section">\n                <img ${nr} \n                    src="${t.CtaButtonImgUrl?t.CtaButtonImgUrl:"/Resources/UCGrapes1/src/images/image.png"}" \n                />\n                <span ${nr} class="edit-cta-image">\n                    ${t.CtaButtonImgUrl?`\n                        <svg ${nr} xmlns="http://www.w3.org/2000/svg" id="Component_57_1" data-name="Component 57 – 1" width="22" height="22" viewBox="0 0 33 33">\n                            <g ${nr} id="Ellipse_532" data-name="Ellipse 532" fill="#fff" stroke="#5068a8" stroke-width="2">\n                                <circle ${nr} cx="16.5" cy="16.5" r="16.5" stroke="none"/>\n                                <circle ${nr} cx="16.5" cy="16.5" r="16" fill="none"/>\n                            </g>\n                            <path ${nr} id="Icon_feather-edit-2" data-name="Icon feather-edit-2" d="M12.834,3.8a1.854,1.854,0,0,1,2.622,2.622L6.606,15.274,3,16.257l.983-3.606Z" transform="translate(7 6.742)" fill="#5068a8" stroke="#5068a8" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>\n                        </svg>\n                        `:`\n                        <svg ${nr} xmlns="http://www.w3.org/2000/svg" id="Component_53_4" data-name="Component 53 – 4" width="22" height="22" viewBox="0 0 22 22">\n                            <g ${nr} id="Group_2309" data-name="Group 2309">\n                                <g ${nr} id="Group_2307" data-name="Group 2307">\n                                <g ${nr} id="Ellipse_6" data-name="Ellipse 6" fill="#fdfdfd" stroke="#5068a8" stroke-width="1">\n                                    <circle ${nr} cx="11" cy="11" r="11" stroke="none"/>\n                                    <circle ${nr} cx="11" cy="11" r="10.5" fill="none"/>\n                                </g>\n                                </g>\n                            </g>\n                            <path ${nr} id="Icon_ionic-ios-add" data-name="Icon ionic-ios-add" d="M18.342,13.342H14.587V9.587a.623.623,0,1,0-1.245,0v3.755H9.587a.623.623,0,0,0,0,1.245h3.755v3.755a.623.623,0,1,0,1.245,0V14.587h3.755a.623.623,0,1,0,0-1.245Z" transform="translate(-2.965 -2.965)" fill="#5068a8"/>\n                        </svg>\n                    `}\n                </span>\n            </span>\n            \n            <div${nr} class="cta-badge">\n                <svg fill="#5068a8" ${nr} width="14px" height="14px" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                <title ${nr}>delete</title>\n                <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-1" d="M27.14,34H8.86A2.93,2.93,0,0,1,6,31V11.23H8V31a.93.93,0,0,0,.86,1H27.14A.93.93,0,0,0,28,31V11.23h2V31A2.93,2.93,0,0,1,27.14,34Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M30.78,9H5A1,1,0,0,1,5,7H30.78a1,1,0,0,1,0,2Z"></path>\n                <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-3" x="21" y="13" width="2" height="15"></rect>\n                <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-4" x="13" y="13" width="2" height="15"></rect>\n                <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-5" d="M23,5.86H21.1V4H14.9V5.86H13V4a2,2,0,0,1,1.9-2h6.2A2,2,0,0,1,23,4Z"></path>\n                <rect fill="#5068a8" ${nr} x="0" y="0" width="36" height="36" fill-opacity="0"/>\n            </svg>\n            </div>\n            <span ${nr} class="img-button-label label" style="color:${t.CtaColor?t.CtaColor:"#ffffff"}">${t.CtaLabel}</span>\n                        <i ${nr} class="fa fa-angle-right img-button-arrow" style="color:${t.CtaColor?t.CtaColor:"#ffffff"}"></i>\n        </div>\n    </div>`}infoTileUi(){return`\n      <div class="container-row" ${sr} id="${cr(8)}">\n        <div ${er} style="height:80px" class="template-wrapper" id="${cr(8)}">\n            <div ${tr} class="template-block" style="background-color: transparent; color: #333333; justify-content: left">\n                <div ${nr} id="igtdq" data-gjs-type="default" class="tile-icon-section">\n                  <span ${nr} id="is1dw" data-gjs-type="text" class="tile-close-icon top-right selected-tile-title">×</span>\n                  <span ${nr} id="ic26t" data-gjs-type="text" class="tile-icon">Title</span>\n                </div>\n                <div ${nr} id="igtdq" data-gjs-type="default" class="tile-title-section">\n                  <span ${nr} id="is1dw" data-gjs-type="text" class="tile-close-title top-right selected-tile-title">×</span>\n                  <span ${nr} style="display: block" id="ic26t" data-gjs-type="text" is-hidden="false" title="Title" class="tile-title">Title</span>\n                </div>\n            </div>\n            <button ${nr} id="i9sxl" data-gjs-type="default" title="Delete template" class="action-button delete-button">&minus;</button>\n            <button ${nr} id="ifvvi" data-gjs-type="default" title="Add template right" class="action-button add-button-right">+</button>\n            ${Os("Resize")}\n            <svg ${nr} class="tile-open-menu" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 27 27">\n              <g ${nr} id="Group_2383" data-name="Group 2383" transform="translate(-921 -417.999)">\n                <g ${nr} id="Group_2382" data-name="Group 2382" transform="translate(921 418)">\n                  <circle ${nr} id="Ellipse_534" data-name="Ellipse 534" cx="13.5" cy="13.5" r="13.5" transform="translate(0 -0.001)" fill="#6a747f"/>\n                </g>\n                <path ${nr} id="Path_2320" data-name="Path 2320" d="M1.7,0a1.7,1.7,0,1,0,1.7,1.7A1.7,1.7,0,0,0,1.7,0ZM7.346,0a1.7,1.7,0,1,0,1.7,1.7A1.7,1.7,0,0,0,7.346,0ZM13,0a1.7,1.7,0,1,0,1.7,1.7A1.7,1.7,0,0,0,13,0Z" transform="translate(927 430)" fill="#fff"/>\n              </g>\n            </svg>\n          </div>\n      </div>\n    `}getDescription(t,e){return`\n      <div\n              style="flex: 1; padding: 0; margin: 0; height: auto; white-space: normal;"\n              class="info-desc-section"\n              ${ar} \n              id="${e||cr(15)}"\n              data-gjs-type="info-desc-section"\n          >\n            <button ${nr} class="tb-edit-content-icon">\n              <svg ${nr} width="14px" height="14px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path ${nr} fill-rule="evenodd" clip-rule="evenodd" d="M18.4324 4C18.2266 4 18.0227 4.04055 17.8325 4.11933C17.6423 4.19811 17.4695 4.31358 17.3239 4.45914L5.25659 16.5265L4.42524 19.5748L7.47353 18.7434L19.5409 6.67608C19.6864 6.53051 19.8019 6.3577 19.8807 6.16751C19.9595 5.97732 20 5.77348 20 5.56761C20 5.36175 19.9595 5.1579 19.8807 4.96771C19.8019 4.77752 19.6864 4.60471 19.5409 4.45914C19.3953 4.31358 19.2225 4.19811 19.0323 4.11933C18.8421 4.04055 18.6383 4 18.4324 4ZM17.0671 2.27157C17.5 2.09228 17.9639 2 18.4324 2C18.9009 2 19.3648 2.09228 19.7977 2.27157C20.2305 2.45086 20.6238 2.71365 20.9551 3.04493C21.2864 3.37621 21.5492 3.7695 21.7285 4.20235C21.9077 4.63519 22 5.09911 22 5.56761C22 6.03611 21.9077 6.50003 21.7285 6.93288C21.5492 7.36572 21.2864 7.75901 20.9551 8.09029L8.69996 20.3454C8.57691 20.4685 8.42387 20.5573 8.25597 20.6031L3.26314 21.9648C2.91693 22.0592 2.54667 21.9609 2.29292 21.7071C2.03917 21.4534 1.94084 21.0831 2.03526 20.7369L3.39694 15.7441C3.44273 15.5762 3.53154 15.4231 3.6546 15.3001L15.9097 3.04493C16.241 2.71365 16.6343 2.45086 17.0671 2.27157Z" fill="#5068a8"/>\n              </svg>\n            </button>\n            <button ${nr} class="tb-delete-image-icon">\n                <svg fill="#5068a8" ${nr} width="14px" height="14px" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                    <title ${nr}>delete</title>\n                    <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-1" d="M27.14,34H8.86A2.93,2.93,0,0,1,6,31V11.23H8V31a.93.93,0,0,0,.86,1H27.14A.93.93,0,0,0,28,31V11.23h2V31A2.93,2.93,0,0,1,27.14,34Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M30.78,9H5A1,1,0,0,1,5,7H30.78a1,1,0,0,1,0,2Z"></path>\n                    <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-3" x="21" y="13" width="2" height="15"></rect>\n                    <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-4" x="13" y="13" width="2" height="15"></rect>\n                    <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-5" d="M23,5.86H21.1V4H14.9V5.86H13V4a2,2,0,0,1,1.9-2h6.2A2,2,0,0,1,23,4Z"></path>\n                    <rect fill="#5068a8" ${nr} x="0" y="0" width="36" height="36" fill-opacity="0"/>\n                </svg>\n            </button>\n            ${this.addGrapesAttributes(`<div ${nr} class="info-desc-content">${t}</div>`)}      \n          </div>\n      `}getImage(t){return`\n    <div ${ar} class="info-image-section" id="${cr(15)}" data-gjs-type="info-image-section">\n          <button ${nr} data-gjs-type="default" class="tb-edit-image-icon">\n            <svg ${nr} data-gjs-type="svg" width="14px" height="14px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path ${nr} data-gjs-type="svg-in" fill-rule="evenodd" clip-rule="evenodd" d="M18.4324 4C18.2266 4 18.0227 4.04055 17.8325 4.11933C17.6423 4.19811 17.4695 4.31358 17.3239 4.45914L5.25659 16.5265L4.42524 19.5748L7.47353 18.7434L19.5409 6.67608C19.6864 6.53051 19.8019 6.3577 19.8807 6.16751C19.9595 5.97732 20 5.77348 20 5.56761C20 5.36175 19.9595 5.1579 19.8807 4.96771C19.8019 4.77752 19.6864 4.60471 19.5409 4.45914C19.3953 4.31358 19.2225 4.19811 19.0323 4.11933C18.8421 4.04055 18.6383 4 18.4324 4ZM17.0671 2.27157C17.5 2.09228 17.9639 2 18.4324 2C18.9009 2 19.3648 2.09228 19.7977 2.27157C20.2305 2.45086 20.6238 2.71365 20.9551 3.04493C21.2864 3.37621 21.5492 3.7695 21.7285 4.20235C21.9077 4.63519 22 5.09911 22 5.56761C22 6.03611 21.9077 6.50003 21.7285 6.93288C21.5492 7.36572 21.2864 7.75901 20.9551 8.09029L8.69996 20.3454C8.57691 20.4685 8.42387 20.5573 8.25597 20.6031L3.26314 21.9648C2.91693 22.0592 2.54667 21.9609 2.29292 21.7071C2.03917 21.4534 1.94084 21.0831 2.03526 20.7369L3.39694 15.7441C3.44273 15.5762 3.53154 15.4231 3.6546 15.3001L15.9097 3.04493C16.241 2.71365 16.6343 2.45086 17.0671 2.27157Z" fill="#5068a8"></path>\n            </svg>\n          </button>\n        <button ${nr} class="tb-delete-image-icon">\n            <svg fill="#5068a8" ${nr} width="14px" height="14px" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                <title ${nr}>delete</title>\n                <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-1" d="M27.14,34H8.86A2.93,2.93,0,0,1,6,31V11.23H8V31a.93.93,0,0,0,.86,1H27.14A.93.93,0,0,0,28,31V11.23h2V31A2.93,2.93,0,0,1,27.14,34Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M30.78,9H5A1,1,0,0,1,5,7H30.78a1,1,0,0,1,0,2Z"></path>\n                <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-3" x="21" y="13" width="2" height="15"></rect>\n                <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-4" x="13" y="13" width="2" height="15"></rect>\n                <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-5" d="M23,5.86H21.1V4H14.9V5.86H13V4a2,2,0,0,1,1.9-2h6.2A2,2,0,0,1,23,4Z"></path>\n                <rect fill="#5068a8" ${nr} x="0" y="0" width="36" height="36" fill-opacity="0"/>\n            </svg>\n        </button>\n        <img\n            class="product-service-image"\n            ${nr}\n            src="${t}"\n            data-gjs-type="default"\n            alt="Full-width Image"\n        />\n      </div>\n    `}addGrapesAttributes(t){const e=document.createElement("div");return"string"==typeof t&&(e.innerHTML=t),e.querySelectorAll("*").forEach((t=>{t.setAttribute("data-gjs-draggable","false"),t.setAttribute("data-gjs-selectable","false"),t.setAttribute("data-gjs-editable","false"),t.setAttribute("data-gjs-highlightable","false"),t.setAttribute("data-gjs-droppable","false"),t.setAttribute("data-gjs-resizable","false"),t.setAttribute("data-gjs-hoverable","false")})),e.innerHTML}createButton(t,e,n){const i=document.createElement("button");return i.id=t,i.classList.add("tb-btn",e),i.innerText=n,i}openContentEditModal(){const t=document.createElement("div"),e=document.createElement("div");e.id="editor",e.innerHTML="",e.style.minHeight="150px";const n=document.createElement("div");n.classList.add("popup-footer"),n.style.marginBottom="-12px";const i=this.createButton("submit_form","tb-btn-primary","Save");i.disabled=!0,i.style.opacity="0.6",i.style.cursor="not-allowed";const a=this.createButton("cancel_form","tb-btn-outline","Cancel");n.appendChild(i),n.appendChild(a),t.appendChild(e),t.appendChild(n);const o=new l({title:"Edit Content",width:"500px",body:t});o.open();const r=new Qo("#editor",{modules:{toolbar:[["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}]]},theme:"snow",placeholder:"Start typing here..."});setTimeout((()=>{r.focus()}),0),r.on("text-change",(()=>{const t=r.root.innerHTML,e="<p><br></p>"!==t&&""!==t.trim();i.disabled=!e,i.disabled?(i.style.opacity="0.6",i.style.cursor="not-allowed"):(i.style.opacity="1",i.style.cursor="pointer")})),i.addEventListener("click",(()=>{document.querySelector("#editor .ql-editor"),o.close()})),a.addEventListener("click",(()=>{o.close()}))}}class Bs{constructor(){this.toolboxService=new r,this.toolBoxManager=new cc,this.appVersions=new d}openModal(){const t=document.createElement("div"),e=document.createElement("p");e.innerText=Ms.t("navbar.publish.modal_description");const n=document.createElement("label");n.className="notify_residents";const i=document.createElement("input");i.type="checkbox",i.id="notify_residents",i.name="notify_residents";const a=document.createElement("span");a.innerText=Ms.t("navbar.publish.notify_residents"),n.appendChild(i),n.appendChild(a);const o=document.createElement("div");o.classList.add("popup-footer"),o.style.marginBottom="-12px";const r=this.createButton("submit_publish","tb-btn-primary",Ms.t("navbar.publish.modal_confirm")),c=this.createButton("cancel_publish","tb-btn-outline",Ms.t("navbar.publish.modal_cancel"));o.appendChild(r),o.appendChild(c),t.appendChild(e),t.appendChild(n),t.appendChild(o);const d=new l({title:Ms.t("navbar.publish.modal_title"),width:"500px",body:t});d.open(),r.addEventListener("click",(t=>{return e=this,n=void 0,o=function*(){t.preventDefault(),d.close(),this.toolBoxManager.savePages(!1).then((t=>{this.appVersions.getActiveVersion().then((t=>{this.toolboxService.publishAppVersion(t.AppVersionId,i.checked).then((t=>{t.message||(d.close(),new s("success",Ms.t("messages.success.published")))}))}))}))},new((a=void 0)||(a=Promise))((function(t,i){function r(t){try{l(o.next(t))}catch(t){i(t)}}function s(t){try{l(o.throw(t))}catch(t){i(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof a?n:new a((function(t){t(n)}))).then(r,s)}l((o=o.apply(e,n||[])).next())}));var e,n,a,o})),c.addEventListener("click",(t=>{t.preventDefault(),d.close()}))}processData(){}createButton(t,e,n){const i=document.createElement("button");return i.id=t,i.classList.add("tb-btn",e),i.innerText=n,i}}class qs{constructor(t,e,n={}){if(this.button=document.createElement("button"),this.button.id=t,this.button.className=`tb-btn tb-btn-${n.variant||"primary"}`,n.svg){const t=(new DOMParser).parseFromString(n.svg,"image/svg+xml").documentElement;this.button.appendChild(t)}const i=document.createElement("span");n.labelId&&(i.id=n.labelId),i.textContent=e,this.button.appendChild(i)}render(t){t.appendChild(this.button)}}class Ds{constructor(){this.container=document.createElement("div"),this.undoButton=document.createElement("button"),this.redoButton=document.createElement("button"),this.init()}init(){this.container.classList.add("edit-actions"),this.undoButton.id="undo",this.undoButton.disabled=!0,this.undoButton.className="btn-transparent",this.undoButton.title=`${Ms.t("undo")} (ctrl+z)`,this.undoButton.innerHTML="<span class='fa fa-undo'></span>",this.redoButton.id="redo",this.redoButton.disabled=!0,this.redoButton.className="btn-transparent",this.redoButton.title=`${Ms.t("undo")} (ctrl+shift+z)`,this.redoButton.innerHTML="<span class='fa fa-redo'></span>",this.container.appendChild(this.undoButton),this.container.appendChild(this.redoButton)}handleUndo(){console.log("Undo action triggered")}handleRedo(){console.log("Redo action triggered")}render(t){t.appendChild(this.container)}}class Hs extends $s{constructor(){super(),this.container=document.createElement("div"),this.selectionDiv=document.createElement("div"),this.themeOptions=document.createElement("div"),this.selectedTheme=document.createElement("span"),this.init(),document.addEventListener("click",this.handleOutsideClick.bind(this))}init(){this.container.classList.add("tb-custom-theme-selection");const t=document.createElement("button");t.classList.add("theme-select-button"),t.setAttribute("aria-haspopup","listbox"),this.selectedTheme.classList.add("selected-theme-value"),this.selectedTheme.textContent="Select Theme",t.appendChild(this.selectedTheme),this.container.appendChild(t),t.onclick=e=>{e.preventDefault(),t.classList.contains("open")?this.closeSelection():(this.themeOptions.classList.toggle("show"),t.classList.toggle("open"),t.setAttribute("aria-expanded","true"))},this.selectionDiv.appendChild(t),this.container.appendChild(this.selectionDiv),this.initializeCategoryOptions()}initializeCategoryOptions(){this.themeOptions.className="theme-options-list",this.themeOptions.setAttribute("role","listbox"),this.getThemes().forEach((t=>{const e=document.createElement("div");e.classList.add("theme-option"),e.classList.add("theme"),e.role="option",e.setAttribute("data-value",t.ThemeName),e.textContent=t.ThemeName;const n=this.currentTheme;n&&n.ThemeName===t.ThemeName&&(e.classList.add("selected"),this.selectedTheme.textContent=t.ThemeName),e.onclick=()=>{this.themeOptions.querySelectorAll(".theme-option").forEach((t=>t.classList.remove("selected"))),e.classList.add("selected"),this.selectedTheme.textContent=t.ThemeName,this.saveSelectedTheme(t),this.closeSelection()},this.themeOptions.appendChild(e)})),this.selectionDiv.appendChild(this.themeOptions)}saveSelectedTheme(t){(new r).updateLocationTheme(t.ThemeId).then((e=>{this.setTheme(t)}))}closeSelection(){if(this.themeOptions.classList.contains("show")){this.themeOptions.classList.remove("show");const t=this.container.querySelector(".theme-select-button");t.setAttribute("aria-expanded","false"),t.classList.toggle("open")}}handleOutsideClick(t){this.themeOptions.classList.contains("show")&&!this.container.contains(t.target)&&this.closeSelection()}render(t){t.appendChild(this.container)}}class Rs{constructor(t){this.appVersion=t,this.pages=this.appVersion.Pages,this.toolboxService=new r,this.showList()}showList(){const t=document.createElement("ul");t.classList.add("tb-custom-list"),this.pages.forEach((e=>{const n=this.buildListItem(e);t.appendChild(n)}));const e=document.getElementById("tree-container");e.innerHTML="",e.appendChild(t)}buildListItem(t){const e=document.createElement("li");e.classList.add("tb-custom-list-item");const n=document.createElement("div");n.classList.add("tb-custom-menu-item"),n.classList.add("page-list-items");const i=document.createElement("span");i.style.textTransform="capitalize",i.classList.add("tb-dropdown-toggle"),i.setAttribute("role","button"),i.setAttribute("aria-expanded","false"),i.innerHTML=`<i class="fa-regular fa-file tree-icon"></i><span>&nbsp; ${t.PageName}</span>`;const a=document.createElement("i");a.classList.add("fa-regular","fa-trash-can","tb-delete-icon");const o=document.createElement("i");o.classList.add("fa-regular","fa-edit","tb-update-icon"),"Home"!==t.PageName&&"Web Link"!==t.PageName||(a.style.display="none",o.style.display="none");const r=document.createElement("div");return r.classList.add("tb-menu-icons-container"),a.setAttribute("data-id",t.PageId),o.setAttribute("data-id",t.PageId),a.addEventListener("click",(t=>this.handleDelete(t))),n.appendChild(i),"Web Link"===t.PageName&&(n.style.display="none"),"Home"!==t.PageName&&(r.append(a),n.appendChild(r)),e.appendChild(n),e}handleDelete(t){const e=t.target.dataset.id,n=document.createElement("div"),i=document.createElement("div");i.classList.add("popup-body"),i.id="confirmation_modal_message",i.innerText="Are you sure you want to delete this page?";const a=document.createElement("div");a.classList.add("popup-footer");const o=document.createElement("button");o.id="yes_delete",o.classList.add("tb-btn","tb-btn-primary"),o.innerText="Delete";const r=document.createElement("button");r.id="close_popup",r.classList.add("tb-btn","tb-btn-outline"),r.innerText="Cancel",a.appendChild(o),a.appendChild(r),n.appendChild(i),n.appendChild(a);const c=new l({title:"Delete Page",width:"100",body:n});c.open(),r.addEventListener("click",(t=>{c.close()})),o.addEventListener("click",(t=>{this.toolboxService.deletePage(this.appVersion.AppVersionId,e).then((t=>{t.error.message?new s("error",t.error.message):(this.appVersion=t.AppVersion,this.pages=this.appVersion.Pages,this.showList(),c.close(),console.log(window.app.toolboxApp.editor.init()))}))}))}}class Vs{constructor(t){this.treeContainer=document.getElementById("tree-container"),this.treeContainer.style.display="block",this.appVersionManager=t,this.toolboxService=new r,this.appVersionManager.getUpdatedActiveVersion().then((t=>{var e;this.version=t,this.pages=t.Pages,this.homePage=null===(e=t.Pages)||void 0===e?void 0:e.find((t=>"Home"==t.PageName)),this.homePage&&(this.clearMappings(),this.createPageTree(this.homePage.PageId,"tree-container"))}))}renderTitle(){document.getElementById("sidebar_mapping_title").textContent=Ms.t("navbar.publish.sidebar_mapping_title")}renderHideOrShowPages(){const t=document.getElementById("current-page-title");let e=t.nextSibling;for(;e;){let t=e;e=e.nextSibling,1===t.nodeType&&t.remove()}const n=document.createElement("span");n.id="list_all_pages",n.style.display="block",n.textContent="List all pages";const i=document.createElement("span");i.id="hide_pages",i.style.display="none",i.textContent="Hide pages",n.addEventListener("click",(t=>{i.style.display="block",n.style.display="none",this.clearMappings(),this.showAllPages()})),i.addEventListener("click",(t=>{i.style.display="none",n.style.display="block",this.homePage&&(this.clearMappings(),this.createPageTree(this.homePage.PageId,"tree-container"))})),t.insertAdjacentElement("afterend",i),t.insertAdjacentElement("afterend",n)}getPage(t){return this.pages.find((e=>e.PageId==t))}showAllPages(){new Rs(this.version)}createPageTree(t,e){let n=this.getPage(t),i=[];if(n&&n.PageMenuStructure){n.PageMenuStructure.Rows.forEach((t=>{t.Tiles.forEach((t=>{n=this.getPage(t.Action.ObjectId),n&&i.push(n)}))}));const a=this.createTree(t,i),o=document.getElementById(e);o.innerHTML="",o.appendChild(a)}}createTree(t,e,n=!0){const i=document.createElement("ul");return i.classList.add("tb-custom-list"),e.forEach((e=>{const a=this.buildListItem(t,e,n);i.appendChild(a)})),i}buildListItem(t,e,n=!0){console.log("hello",e.PageType,n),"MyCare"!=e.PageType&&(n=!1),console.log("isOpenable",n);const i=document.createElement("li");i.classList.add("tb-custom-list-item"),i.dataset.parentPageId=t;const a=document.createElement("div");a.classList.add("child-div"),a.id=`child-div-${e.PageId}`,a.style.position="relative",a.style.paddingLeft="20px";const o=document.createElement("div");o.classList.add("tb-custom-menu-item");const r=document.createElement("span");r.classList.add("tb-dropdown-toggle"),r.setAttribute("role","button"),r.setAttribute("aria-expanded","false");let s="fa-regular fa-file tree-icon";return n&&(s="fa-caret-right tree-icon"),r.innerHTML=`<i class="fa ${s}"></i><span>${e.PageName}</span>`,o.appendChild(r),i.appendChild(o),i.appendChild(a),n&&i.addEventListener("click",(t=>{t.stopPropagation(),this.createPageTree(e.PageId,`child-div-${e.PageId}`)})),i}clearMappings(){var t;null===(t=this.treeContainer)||void 0===t||t.replaceChildren("")}addPageCreationEvent(){const t=document.getElementById("page-submit"),e=document.getElementById("page-title");t.addEventListener("click",(t=>{t.preventDefault();const n=e.value;n?this.createPage(n):new s("error",Ms.t("messages.error.empty_page_name"))}))}createPage(t){this.toolboxService.createMenuPage(this.version.AppVersionId,t).then((t=>{console.log(t)}))}}class Us{constructor(){this.themeManager=new $s,this.currentTheme=this.themeManager.currentTheme;const t=e.getInstance();this.logo=t.organisationLogo}getCtaColor(t){const e=this.currentTheme.ThemeCtaColors.find((e=>e.CtaColorName==t));return e?e.CtaColorCode:this.currentTheme.ThemeCtaColors[0].CtaColorCode}formatDate(){return(new Date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(/(\d{2} \w{3}) (\d{4})/,"$1, $2")}createMenuHTML(t){const e=t.PageMenuStructure,n=document.createElement("div");n.style.padding="5px";const i=this.createHeaderHTML(t);return n.appendChild(i),e.Rows.forEach((t=>{const e=document.createElement("div");e.style.display="flex",e.style.flexWrap="wrap",e.style.margin="5px 5px",e.style.gap="5px",t.Tiles.forEach((t=>{var n,i;const a=document.createElement("div");a.id=t.Id;const o=document.createElement("div");if(o.style.display="flex",o.style.flexDirection="column",o.style.alignItems=(null===(n=t.Align)||void 0===n?void 0:n.toLowerCase())||"left",o.style.justifyContent="center",o.style.color=t.Color,t.Icon){const e=document.createElement("div");e.innerHTML=this.themeManager.getThemeIcon(t.Icon),e.style.display="inline-block",e.style.color=t.Color,o.appendChild(e)}const r=document.createElement("span");r.textContent=t.Text,o.appendChild(r);let s=t.BGImageUrl?`url('${t.BGImageUrl}')`:"none",l=["left","right","center"].includes(null===(i=t.Align)||void 0===i?void 0:i.toLowerCase())?t.Align.toLowerCase():"left";a.style.cssText=`\n          padding: 2px;\n          min-width: 50px;\n          height: 70px;\n          flex: 1;\n          color: ${t.Color};\n          background-color: ${this.currentTheme.ThemeColors[t.BGColor]};\n          background-image: ${s};\n          background-size: cover;\n          background-repeat: no-repeat;\n          background-position: center;\n          text-align: ${l};\n          border-radius: 10px;\n          opacity: ${1-t.Opacity};\n          border: 0.5px solid #999;\n          font-size: 10px;\n        `,a.appendChild(o),e.appendChild(a)})),null==n||n.appendChild(e)})),n.outerHTML}createHeaderHTML(t){const e=document.createElement("div");let n=`\n        <div style="display:flex; padding:2px">\n            <svg xmlns="http://www.w3.org/2000/svg" data-name="Group 14" viewBox="0 0 47 47" class="content-back-butto" width="30" height="30">\n                <g id="Ellipse_6" data-name="Ellipse 6" fill="none" stroke="#262626" stroke-width="1">\n                <circle cx="23.5" cy="23.5" r="23.5" stroke="none"></circle>\n                <circle cx="23.5" cy="23.5" r="23" fill="none"></circle>\n                </g>\n                <path id="Icon_ionic-ios-arrow-round-up" data-name="Icon ionic-ios-arrow-round-up" d="M13.242,7.334a.919.919,0,0,1-1.294.007L7.667,3.073V19.336a.914.914,0,0,1-1.828,0V3.073L1.557,7.348A.925.925,0,0,1,.263,7.341.91.91,0,0,1,.27,6.054L6.106.26h0A1.026,1.026,0,0,1,6.394.07.872.872,0,0,1,6.746,0a.916.916,0,0,1,.64.26l5.836,5.794A.9.9,0,0,1,13.242,7.334Z" transform="translate(13 30.501) rotate(-90)" fill="#262626"></path>\n            </svg>\n            <div class="">\n                <div style="padding: 5px">${t.PageName.toUpperCase()}</div>\n            </div>\n        </div>\n        `;return"Home"==t.PageName&&(n=`\n            <div class="home-app-bar" style="padding:5px"><div class="logo-added"><img src="${this.logo}" style="height: 35px;"></div><div class="profile-section" style="display: flex;">\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="18" viewBox="0 0 19.422 21.363">\n                    <path id="Path_1327" data-name="Path 1327" d="M15.711,5a6.8,6.8,0,0,0-3.793,12.442A9.739,9.739,0,0,0,6,26.364H7.942a7.769,7.769,0,1,1,15.537,0h1.942A9.739,9.739,0,0,0,19.5,17.442,6.8,6.8,0,0,0,15.711,5Zm0,1.942A4.855,4.855,0,1,1,10.855,11.8,4.841,4.841,0,0,1,15.711,6.942Z" transform="translate(-6 -5)" fill="#fff"></path>\n                </svg>\n            </div></div>\n            `),e.innerHTML=`\n            <div class="header"><span id="clock">8:36 AM</span><span class="icons"><i class="fas fa-signal"></i><i class="fas fa-wifi"></i><i class="fas fa-battery"></i></span></div>\n            ${n}\n        `,e}createContentHTML(t){const e=t.PageContentStructure,n=document.createElement("div");n.style.padding="10px";const i=this.createHeaderHTML(t);n.appendChild(i),e.Content.forEach((t=>{const e=document.createElement("div");"Image"===t.ContentType?e.setAttribute("style",`\n              width: 100%;\n              height: 100px;\n              background-image: url('${t.ContentValue}');\n              background-size: cover;\n              background-position: center;\n              border-radius: 8px;\n            `):"Description"===t.ContentType&&(e.setAttribute("style","\n            "),e.innerHTML=t.ContentValue),n.appendChild(e)}));const a=this.createCTAs(e.Cta||[]);return n.appendChild(a),n.outerHTML}createMyActivityHTML(t){const e=document.createElement("div");e.style.padding="5px";const n=this.createHeaderHTML(t);e.appendChild(n);const i=document.createElement("div");return i.innerHTML=`\n        <div style="padding:5px;">\n        <div class="activity-tabs">\n            <button style="background:${this.currentTheme.ThemeColors.backgroundColor}" class="activity-tab active">Messages</button>\n            <button class="activity-tab inactive">Requests</button>\n          </div>\n          <div align="center">No Messages Yet</div>\n        </div>\n        `,e.appendChild(i),e.outerHTML}createAgendaHTML(t){const e=document.createElement("div");e.style.padding="5px";const n=this.createHeaderHTML(t);e.appendChild(n);const i=document.createElement("div");let a=`\n                <div class="tb-date-selector" \n                  style="background-color: ${this.currentTheme.ThemeColors.backgroundColor};">\n                  <span class="tb-arrow">❮</span>\n                  <span class="tb-date-text" id="current-date" > ${this.formatDate()}</span>\n                  <span class="tb-arrow">❯</span>\n                </div>\n                <div class="tb-schedule" id="schedule-container" >\n              `;for(let t=0;t<24;t++)a+=`\n                    <div class="tb-time-slot" >\n                      <div class="tb-time" >${t.toString().padStart(2,"0")+":00"}</div>\n                      <div class="tb-events" ></div>\n                      ${t===(new Date).getHours()?'\n                        <div class="tb-current-time-indicator" ></div>\n                        <div class="tb-current-time-dot" ></div>':""}\n                    </div>\n                  `;return a+="</div>",i.innerHTML=a,e.appendChild(i),e.outerHTML}createMapHTML(t){const e=document.createElement("div");e.style.padding="5px";const n=this.createHeaderHTML(t);e.appendChild(n);const i=document.createElement("div");return i.innerHTML='\n      <iframe\n        width="100%"\n        height="300"\n        frameborder="0"\n        style="border:0"\n        src="https://www.google.com/maps/embed/v1/view?key=AIzaSyBBaQo7_sF2xk3uNIyKp_Z-4BbaTebGGa4&center=52.0907,5.1214&zoom=18"\n        allowfullscreen>\n      </iframe>\n    ',e.appendChild(i),e.outerHTML}createLinkHTML(t,e){const n=document.createElement("div");n.style.padding="5px";const i=this.createHeaderHTML({PageName:t});n.appendChild(i);const a=document.createElement("div");return a.innerHTML=`\n      <iframe src="${e}" style="pointer-events: none;" width="100%" height="100%" frameborder="0" marginheight="0" marginwidth="0">Loading…</iframe>\n      `,n.appendChild(a),n.outerHTML}createCTAs(t){const e={Phone:'<svg data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 49.417 49.418"><path id="call" data-gjs-type="svg-in" d="M29.782,3a2.149,2.149,0,1,0,0,4.3A19.3,19.3,0,0,1,49.119,26.634a2.149,2.149,0,1,0,4.3,0A23.667,23.667,0,0,0,29.782,3ZM12.032,7.305a2.548,2.548,0,0,0-.818.067,8.342,8.342,0,0,0-3.9,2.342C2.775,14.254.366,21.907,17.437,38.98S42.16,53.643,46.7,49.1a8.348,8.348,0,0,0,2.346-3.907,2.524,2.524,0,0,0-1.179-2.786c-2.424-1.418-7.654-4.484-10.08-5.9a2.523,2.523,0,0,0-2.568.012l-4.012,2.392a2.517,2.517,0,0,1-2.845-.168,65.811,65.811,0,0,1-5.711-4.981,65.07,65.07,0,0,1-4.981-5.711A2.512,2.512,0,0,1,17.5,25.2L19.9,21.191a2.533,2.533,0,0,0,.008-2.577L14.012,8.556A2.543,2.543,0,0,0,12.032,7.305Zm17.751,4.289a2.149,2.149,0,1,0,0,4.3A10.709,10.709,0,0,1,40.525,26.634a2.149,2.149,0,1,0,4.3,0A15.072,15.072,0,0,0,29.782,11.594Zm0,8.594a2.149,2.149,0,1,0,0,4.3,2.114,2.114,0,0,1,2.149,2.148,2.149,2.149,0,1,0,4.3,0A6.479,6.479,0,0,0,29.782,20.188Z" transform="translate(-4 -3)" fill="#fff"></path></svg>',Email:'<svg data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32" height="28" viewBox="0 0 41 32.8"><path id="Path_1218" data-gjs-type="svg-in" data-name="Path 1218" d="M6.1,4A4.068,4.068,0,0,0,2.789,5.7a1.5,1.5,0,0,0,.444,2.126l18,11.219a2.387,2.387,0,0,0,2.531,0L41.691,7.732a1.5,1.5,0,0,0,.384-2.2A4.063,4.063,0,0,0,38.9,4Zm35.907,8.376a.963.963,0,0,0-.508.152L23.765,23.711a2.392,2.392,0,0,1-2.531,0L3.5,12.656a.98.98,0,0,0-1.5.833V32.7a4.1,4.1,0,0,0,4.1,4.1H38.9A4.1,4.1,0,0,0,43,32.7V13.357A.981.981,0,0,0,42.007,12.376Z" transform="translate(-2 -4)" fill="#fff"></path></svg>',Form:"",Link:""},n={FullWidth:t=>`\n              <div class="plain-button-container">\n                <button class="cta-plain-button style="background:${this.getCtaColor(t.CtaBGColor)}"">\n                  <span class="label">${t.CtaLabel}</span>\n                </button>\n              </div>\n            `,Round:t=>`\n              <div class="cta-round-button">\n                <div class="cta-round-button-icon" style="background:${this.getCtaColor(t.CtaBGColor)}">${e[t.CtaType]}</div>\n                <div>${t.CtaLabel}<div>\n              </div>\n            `,Image:t=>`\n              <div class="cta-image-button" style="background:${this.getCtaColor(t.CtaBGColor)}">\n                <div class="cta-image-button-image">${e[t.CtaImage]}</div>\n                <div class="cta-image-button-label">${t.CtaLabel}</div>\n                  ${t.CtaLabel}\n                </div>\n              </div>\n              `,Icon:t=>`\n              <div class="cta-icon-button" style="background:${this.getCtaColor(t.CtaBGColor)}">\n                <div class="cta-icon-button-icon" >${e[t.CtaType]}</div>\n                <div class="cta-icon-button-label">\n                  ${t.CtaLabel}\n                </div>\n                <i class="fa fa-angle-right img-button-arrow"></i>\n              </div>\n              `},i=document.createElement("div");return i.setAttribute("style","display: flex; justify-content: center; align-items: center; flex-wrap: wrap; gap: 5px;"),t.forEach((t=>{i.innerHTML+=n[t.CtaButtonType](t)})),i}}class Fs{constructor(){this.themeManager=new $s,this.currentTheme=this.themeManager.currentTheme;const t=e.getInstance();this.logo=t.organisationLogo}getCtaColor(t){const e=this.currentTheme.ThemeCtaColors.find((e=>e.CtaColorName==t));return e?e.CtaColorCode:this.currentTheme.ThemeCtaColors[0].CtaColorCode}formatDate(){return(new Date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(/(\d{2} \w{3}) (\d{4})/,"$1, $2")}createMenuHTML(t){const e=t.PageInfoStructure,n=document.createElement("div");n.style.padding="5px";const i=this.createHeaderHTML(t);return n.appendChild(i),e.InfoContent.forEach((t=>{if("TileRow"===t.InfoType){const e=document.createElement("div");e.style.display="flex",e.style.flexWrap="wrap",e.style.margin="5px 5px",e.style.gap="5px",t.Tiles.forEach((t=>{var i;const a=document.createElement("div");a.id=t.Id,a.style.justifyContent="center"===t.Align?"center":"flex-start";let o=t.BGImageUrl?`url('${t.BGImageUrl}')`:"none";t.Align;const r=document.createElement("div");r.style.color=t.Color,t.Icon&&(r.innerHTML=this.themeManager.getThemeIcon(t.Icon).replace(/fill="[^"]*"/g,'fill="currentColor"').replace(/style="[^"]*background[^"]*"/g,"").replace(/<rect[^>]*fill="[^"]*"/g,'<rect fill="none"').replace("<svg",'<svg style="width: 30px; height: 30px;"'));const s=document.createElement("div");s.style.color=t.Color,s.style.textAlign=t.Align,t.Text&&(s.innerHTML=t.Text),a.appendChild(r),a.appendChild(s),a.style.cssText=`\n          display: flex; /* Ensures flexbox layout */\n          flex-direction: column; /* Aligns icon and title vertically */\n          align-items: ${"center"===t.Align?"center":"flex-start"}; /* Aligns content horizontally */\n          justify-content: ${"center"===t.Align?"center":"flex-start"}; /* Aligns content vertically */\n          padding: 2px;\n          min-width: 50px;\n          height: ${null!==(i=t.size)&&void 0!==i?i:80}px;\n          flex: 1;\n          color: ${t.Color};\n          background-color: ${this.currentTheme.ThemeColors[t.BGColor]};\n          background-image: ${o};\n          background-size: cover;\n          background-repeat: no-repeat;\n          background-position: center;\n          text-align: ${t.Align};\n          border-radius: 10px;\n          opacity: ${1-t.Opacity};\n          border: 0.5px solid #999;\n          font-size: 10px;\n        `,e.appendChild(a),null==n||n.appendChild(e)}))}else if("Description"===t.InfoType){const e=document.createElement("div");e.style.margin="5px",e.style.padding="10px",e.style.borderRadius="8px",e.style.color="#333",e.style.fontSize="12px",e.innerHTML=t.InfoValue,e.style.fontFamily=this.currentTheme.ThemeFontFamily,n.appendChild(e)}else if("Image"===t.InfoType){const e=document.createElement("div");e.style.margin="5px",e.style.borderRadius="8px",e.style.overflow="hidden",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center";const i=document.createElement("img");i.src=t.InfoValue,i.alt="Image description",i.style.width="100%",i.style.height="100px",i.style.objectFit="cover",e.appendChild(i),n.appendChild(e)}else if("Cta"===t.InfoType){const e=document.createElement("div");"Round"===t.CtaAttributes.CtaType&&e.setAttribute("style",`\n              display: flex;\n              justify-content: center;\n              align-items: center;\n              background-color: ${this.getCtaColor(t.CtaAttributes.CtaBGColor)};\n              border-radius: 50%;\n              width: 50px;\n              height: 50px;\n            `),n.appendChild(e)}})),n.outerHTML}createHeaderHTML(t){const e=document.createElement("div");let n=`\n        <div style="display:flex; padding:2px">\n            <svg xmlns="http://www.w3.org/2000/svg" data-name="Group 14" viewBox="0 0 47 47" class="content-back-butto" width="30" height="30">\n                <g id="Ellipse_6" data-name="Ellipse 6" fill="none" stroke="#262626" stroke-width="1">\n                <circle cx="23.5" cy="23.5" r="23.5" stroke="none"></circle>\n                <circle cx="23.5" cy="23.5" r="23" fill="none"></circle>\n                </g>\n                <path id="Icon_ionic-ios-arrow-round-up" data-name="Icon ionic-ios-arrow-round-up" d="M13.242,7.334a.919.919,0,0,1-1.294.007L7.667,3.073V19.336a.914.914,0,0,1-1.828,0V3.073L1.557,7.348A.925.925,0,0,1,.263,7.341.91.91,0,0,1,.27,6.054L6.106.26h0A1.026,1.026,0,0,1,6.394.07.872.872,0,0,1,6.746,0a.916.916,0,0,1,.64.26l5.836,5.794A.9.9,0,0,1,13.242,7.334Z" transform="translate(13 30.501) rotate(-90)" fill="#262626"></path>\n            </svg>\n            <div class="">\n                <div style="padding: 5px">${t.PageName.toUpperCase()}</div>\n            </div>\n        </div>\n        `;return"Home"==t.PageName&&(n=`\n            <div class="home-app-bar" style="padding:5px"><div class="logo-added"><img src="${this.logo}" style="height: 35px;"></div><div class="profile-section" style="display: flex;">\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="18" viewBox="0 0 19.422 21.363">\n                    <path id="Path_1327" data-name="Path 1327" d="M15.711,5a6.8,6.8,0,0,0-3.793,12.442A9.739,9.739,0,0,0,6,26.364H7.942a7.769,7.769,0,1,1,15.537,0h1.942A9.739,9.739,0,0,0,19.5,17.442,6.8,6.8,0,0,0,15.711,5Zm0,1.942A4.855,4.855,0,1,1,10.855,11.8,4.841,4.841,0,0,1,15.711,6.942Z" transform="translate(-6 -5)" fill="#fff"></path>\n                </svg>\n            </div></div>\n            `),e.innerHTML=`\n            <div class="header"><span id="clock">8:36 AM</span><span class="icons"><i class="fas fa-signal"></i><i class="fas fa-wifi"></i><i class="fas fa-battery"></i></span></div>\n            ${n}\n        `,e}createContentHTML(t){const e=t.PageContentStructure,n=document.createElement("div");n.style.padding="10px";const i=this.createHeaderHTML(t);n.appendChild(i),e.Content.forEach((t=>{const e=document.createElement("div");"Image"===t.ContentType?e.setAttribute("style",`\n              width: 100%;\n              height: 100px;\n              background-image: url('${t.ContentValue}');\n              background-size: cover;\n              background-position: center;\n              border-radius: 8px;\n            `):"Description"===t.ContentType&&(e.setAttribute("style","\n          "),e.innerHTML=t.ContentValue),n.appendChild(e)}));const a=this.createCTAs(e.Cta||[]);return n.appendChild(a),n.outerHTML}createMyActivityHTML(t){const e=document.createElement("div");e.style.padding="5px";const n=this.createHeaderHTML(t);e.appendChild(n);const i=document.createElement("div");return i.innerHTML=`\n        <div style="padding:5px;">\n        <div class="activity-tabs">\n            <button style="background:${this.currentTheme.ThemeColors.backgroundColor}" class="activity-tab active">Messages</button>\n            <button class="activity-tab inactive">Requests</button>\n          </div>\n          <div align="center">No Messages Yet</div>\n        </div>\n        `,e.appendChild(i),e.outerHTML}createAgendaHTML(t){const e=document.createElement("div");e.style.padding="5px";const n=this.createHeaderHTML(t);e.appendChild(n);const i=document.createElement("div");let a=`\n                <div class="tb-date-selector" \n                  style="background-color: ${this.currentTheme.ThemeColors.backgroundColor};">\n                  <span class="tb-arrow">❮</span>\n                  <span class="tb-date-text" id="current-date" > ${this.formatDate()}</span>\n                  <span class="tb-arrow">❯</span>\n                </div>\n                <div class="tb-schedule" id="schedule-container" >\n              `;for(let t=0;t<24;t++)a+=`\n                    <div class="tb-time-slot" >\n                      <div class="tb-time" >${t.toString().padStart(2,"0")+":00"}</div>\n                      <div class="tb-events" ></div>\n                      ${t===(new Date).getHours()?'\n                        <div class="tb-current-time-indicator" ></div>\n                        <div class="tb-current-time-dot" ></div>':""}\n                    </div>\n                  `;return a+="</div>",i.innerHTML=a,e.appendChild(i),e.outerHTML}createMapHTML(t){const e=document.createElement("div");e.style.padding="5px";const n=this.createHeaderHTML(t);e.appendChild(n);const i=document.createElement("div");return i.innerHTML='\n      <iframe\n        width="100%"\n        height="300"\n        frameborder="0"\n        style="border:0"\n        src="https://www.google.com/maps/embed/v1/view?key=AIzaSyBBaQo7_sF2xk3uNIyKp_Z-4BbaTebGGa4&center=52.0907,5.1214&zoom=18"\n        allowfullscreen>\n      </iframe>\n    ',e.appendChild(i),e.outerHTML}createLinkHTML(t,e){const n=document.createElement("div");n.style.padding="5px";const i=this.createHeaderHTML({PageName:t});n.appendChild(i);const a=document.createElement("div");return a.innerHTML=`\n      <iframe src="${e}" style="pointer-events: none;" width="100%" height="100%" frameborder="0" marginheight="0" marginwidth="0">Loading…</iframe>\n      `,n.appendChild(a),n.outerHTML}createCTAs(t){const e={Phone:'<svg data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 49.417 49.418"><path id="call" data-gjs-type="svg-in" d="M29.782,3a2.149,2.149,0,1,0,0,4.3A19.3,19.3,0,0,1,49.119,26.634a2.149,2.149,0,1,0,4.3,0A23.667,23.667,0,0,0,29.782,3ZM12.032,7.305a2.548,2.548,0,0,0-.818.067,8.342,8.342,0,0,0-3.9,2.342C2.775,14.254.366,21.907,17.437,38.98S42.16,53.643,46.7,49.1a8.348,8.348,0,0,0,2.346-3.907,2.524,2.524,0,0,0-1.179-2.786c-2.424-1.418-7.654-4.484-10.08-5.9a2.523,2.523,0,0,0-2.568.012l-4.012,2.392a2.517,2.517,0,0,1-2.845-.168,65.811,65.811,0,0,1-5.711-4.981,65.07,65.07,0,0,1-4.981-5.711A2.512,2.512,0,0,1,17.5,25.2L19.9,21.191a2.533,2.533,0,0,0,.008-2.577L14.012,8.556A2.543,2.543,0,0,0,12.032,7.305Zm17.751,4.289a2.149,2.149,0,1,0,0,4.3A10.709,10.709,0,0,1,40.525,26.634a2.149,2.149,0,1,0,4.3,0A15.072,15.072,0,0,0,29.782,11.594Zm0,8.594a2.149,2.149,0,1,0,0,4.3,2.114,2.114,0,0,1,2.149,2.148,2.149,2.149,0,1,0,4.3,0A6.479,6.479,0,0,0,29.782,20.188Z" transform="translate(-4 -3)" fill="#fff"></path></svg>',Email:'<svg data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32" height="28" viewBox="0 0 41 32.8"><path id="Path_1218" data-gjs-type="svg-in" data-name="Path 1218" d="M6.1,4A4.068,4.068,0,0,0,2.789,5.7a1.5,1.5,0,0,0,.444,2.126l18,11.219a2.387,2.387,0,0,0,2.531,0L41.691,7.732a1.5,1.5,0,0,0,.384-2.2A4.063,4.063,0,0,0,38.9,4Zm35.907,8.376a.963.963,0,0,0-.508.152L23.765,23.711a2.392,2.392,0,0,1-2.531,0L3.5,12.656a.98.98,0,0,0-1.5.833V32.7a4.1,4.1,0,0,0,4.1,4.1H38.9A4.1,4.1,0,0,0,43,32.7V13.357A.981.981,0,0,0,42.007,12.376Z" transform="translate(-2 -4)" fill="#fff"></path></svg>',Form:"",Link:""},n={FullWidth:t=>`\n              <div class="plain-button-container">\n                <button class="cta-plain-button style="background:${this.getCtaColor(t.CtaBGColor)}"">\n                  <span class="label">${t.CtaLabel}</span>\n                </button>\n              </div>\n            `,Round:t=>`\n              <div class="cta-round-button">\n                <div class="cta-round-button-icon" style="background:${this.getCtaColor(t.CtaBGColor)}">${e[t.CtaType]}</div>\n                <div>${t.CtaLabel}<div>\n              </div>\n            `,Image:t=>`\n              <div class="cta-image-button" style="background:${this.getCtaColor(t.CtaBGColor)}">\n                <div class="cta-image-button-image">${e[t.CtaImage]}</div>\n                <div class="cta-image-button-label">${t.CtaLabel}</div>\n                  ${t.CtaLabel}\n                </div>\n              </div>\n              `,Icon:t=>`\n              <div class="cta-icon-button" style="background:${this.getCtaColor(t.CtaBGColor)}">\n                <div class="cta-icon-button-icon" >${e[t.CtaType]}</div>\n                <div class="cta-icon-button-label">\n                  ${t.CtaLabel}\n                </div>\n                <i class="fa fa-angle-right img-button-arrow"></i>\n              </div>\n              `},i=document.createElement("div");return i.setAttribute("style","display: flex; justify-content: center; align-items: center; flex-wrap: wrap; gap: 5px;"),t.forEach((t=>{i.innerHTML+=n[t.CtaButtonType](t)})),i}}class zs{constructor(){this.width=100,this.height=40,this.selfLinks=[],this.normalLinks=[],this.primaryNodeId=null,this.pageTreeRenderer=new Us,this.PageTreeRendererInfoPage=new Fs;const t=e.getInstance();this.d3=t.UC.d3,this.themeManager=new $s;const n=this.themeManager.appVersionManager;this.appVersionManager=n,this.pages=n.getPages(),this.processedPages=this.processPageData(this.pages);const i=this.processedPages.find((t=>"Home"===t.title));i&&(this.primaryNodeId=i.id),this.nodes=this.createNodes(),this.links=this.createLinks(),this.init()}init(){this.graphContainer=this.build(),this.buildTree()}show(){const t=document.getElementsByClassName("editor-main-section"),e=document.getElementById("tools-section"),n=document.getElementById("tree-container");if(t.length>0){const i=t[0];"none"===i.style.display?(i.style.display="block",this.graphContainer.style.display="none",e.style.display="block",n.style.display="none"):(e.style.display="none",i.style.display="none",this.graphContainer.style.display="block",this.graphContainer.style.width="100%",this.graphContainer.style.height="100%",new Vs(this.appVersionManager))}}build(){const t=document.getElementById("main-content");return this.graphContainer=document.getElementById("graph-container-1"),this.graphContainer||(this.graphContainer=document.createElement("div"),this.graphContainer.id="graph-container-1"),this.graphContainer.innerHTML="<svg></svg>",t.appendChild(this.graphContainer),this.graphContainer.setAttribute("style","display:block;width:100%;"),this.graphContainer}processPageData(t){const e=[];return(t=t.map((t=>{let n={id:t.PageId,title:t.PageName,structure:"",thumbnail:t.PageThumbnailUrl,children:[],x:0,y:0};return"Menu"===t.PageType||"MyCare"===t.PageType||"MyLiving"===t.PageType||"MyService"===t.PageType?(n.structure=this.pageTreeRenderer.createMenuHTML(t),t.PageMenuStructure.Rows.forEach((i=>{i.Tiles.forEach((i=>{if("DynamicForm"==i.Action.ObjectType||"WebLink"==i.Action.ObjectType){const a="DynamicForm"==i.Action.ObjectType?"Dynamic Form":"Web Link";e.push({id:i.Action.ObjectId,title:a,structure:this.pageTreeRenderer.createLinkHTML(a,i.Action.ObjectUrl),thumbnail:t.PageThumbnailUrl,children:[],x:0,y:0}),n.children.push(i.Action.ObjectId)}else i.Action.ObjectId&&this.pages.filter((t=>t.PageId===i.Action.ObjectId))&&(this.primaryNodeId=t.PageId,n.children.push(i.Action.ObjectId))}))}))):"Information"===t.PageType?t.PageInfoStructure.InfoContent&&(n.structure=this.PageTreeRendererInfoPage.createMenuHTML(t),t.PageInfoStructure.InfoContent.forEach((i=>{"TileRow"===i.InfoType&&i.Tiles.forEach((i=>{if("DynamicForm"==i.Action.ObjectType||"WebLink"==i.Action.ObjectType){const a="DynamicForm"==i.Action.ObjectType?"Dynamic Form":"Web Link";e.push({id:i.Action.ObjectId,title:a,structure:"",thumbnail:t.PageThumbnailUrl,children:[],x:0,y:0}),n.children.push(i.Action.ObjectId)}else i.Action.ObjectId&&this.pages.some((t=>t.PageId===i.Action.ObjectId))&&n.children.push(i.Action.ObjectId)}))}))):"Content"==t.PageType||"Location"==t.PageType||"Reception"==t.PageType?n.structure=this.pageTreeRenderer.createContentHTML(t):"Calendar"==t.PageType?n.structure=this.pageTreeRenderer.createAgendaHTML(t):"MyActivity"==t.PageType?n.structure=this.pageTreeRenderer.createMyActivityHTML(t):"Map"==t.PageType&&(n.structure=this.pageTreeRenderer.createMapHTML(t)),n}))).concat(e)}createNodes(t=this.processedPages){return t.map((t=>({id:t.id,name:t.title,children:t.children,structure:t.structure,thumbnail:t.thumbnail})))}createLinks(t=this.processedPages){return t.flatMap((t=>t.children.map((e=>({source:t.id,target:e})))))}buildTree(){const t=this.nodes.length;this.width=Math.max(800,300*Math.ceil(Math.sqrt(t))),this.height=this.width,this.svg=this.d3.select("#graph-container-1").select("svg").attr("viewBox",[0,0,this.width,this.height]).attr("preserveAspectRatio","xMidYMid meet"),this.container=this.svg.append("g"),this.splitLinks(),this.forceSimulation(),this.createNormalLinks(),this.createLinkArrows(),this.createSelfArcs(),this.createCircularNodes(),this.onTick(),this.panAndZoom()}splitLinks(){this.selfLinks=this.links.filter((t=>t.source===t.target)),this.normalLinks=this.links.filter((t=>t.source!==t.target))}forceSimulation(){this.simulation=this.d3.forceSimulation(this.nodes).force("link",this.d3.forceLink(this.normalLinks).id((t=>t.id)).distance(300)).force("charge",this.d3.forceManyBody().strength(-1e3)).force("center",this.d3.forceCenter(this.width/2,this.height/2))}createNormalLinks(){this.link=this.container.append("g").attr("stroke","#fff").attr("stroke-opacity",.6).selectAll("line").data(this.normalLinks).join("line").attr("stroke-width",2)}createLinkArrows(){this.svg.append("defs").append("marker").attr("id","arrow").attr("viewBox","0 -5 10 10").attr("refX",5).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("fill","#fff"),this.arrows=this.container.append("g").selectAll("path").data(this.normalLinks).join("path").attr("fill","#fff").attr("marker-end","url(#arrow)")}createSelfArcs(){this.selfArcs=this.container.append("g").selectAll("path").data(this.selfLinks).join("path").attr("fill","none").attr("stroke","#fff").attr("stroke-width",2).attr("marker-end","url(#arrow)")}createCircularNodes(){this.node=this.container.append("g").attr("stroke","#222f54").attr("stroke-width",1.5).selectAll("g").data(this.nodes).join("g").call(this.drag()).on("click",((t,e)=>this.onNodeClick(t,e))),this.node.append("rect").attr("width",200).attr("height",350).attr("x",(t=>-Math.max(8*t.name.length,100)/2)).attr("y",-20).attr("stroke",(t=>t.id===this.primaryNodeId?"#FF5722":"#222f54")).attr("fill","#efeeec"),this.node.append("foreignObject").attr("height",350).attr("width",200).attr("y",-20).attr("x",-50).attr("fill","#efeeec").html((t=>`\n        <div xmlns="http://www.w3.org/1999/xhtml" style="width: 100%; height: 100%; padding:2px">\n            <div style="display:flex; ">\n              <svg xmlns="http://www.w3.org/2000/svg" data-name="Group 14" viewBox="0 0 47 47" class="content-back-butto" width="30" height="30">\n                  <g id="Ellipse_6" data-name="Ellipse 6" fill="none" stroke="#262626" stroke-width="1">\n                  <circle cx="23.5" cy="23.5" r="23.5" stroke="none"></circle>\n                  <circle cx="23.5" cy="23.5" r="23" fill="none"></circle>\n                  </g>\n                  <path id="Icon_ionic-ios-arrow-round-up" data-name="Icon ionic-ios-arrow-round-up" d="M13.242,7.334a.919.919,0,0,1-1.294.007L7.667,3.073V19.336a.914.914,0,0,1-1.828,0V3.073L1.557,7.348A.925.925,0,0,1,.263,7.341.91.91,0,0,1,.27,6.054L6.106.26h0A1.026,1.026,0,0,1,6.394.07.872.872,0,0,1,6.746,0a.916.916,0,0,1,.64.26l5.836,5.794A.9.9,0,0,1,13.242,7.334Z" transform="translate(13 30.501) rotate(-90)" fill="#262626"></path>\n              </svg>\n              <div class="">\n                <div style="padding: 5px; text-transform: uppercase;">${t.name}</div>\n              </div>\n            </div>\n           <img src="${t.thumbnail}" alt="${t.name}" style="max-width: 100%; margin-top:0px; height: auto; text-transform: uppercase;" />\n        </div>\n        `))}onTick(){this.simulation.on("tick",(()=>{this.link.attr("x1",(t=>t.source.x)).attr("y1",(t=>t.source.y)).attr("x2",(t=>t.target.x)).attr("y2",(t=>t.target.y)),this.arrows.attr("d",(t=>{const e=t.source.x,n=t.source.y,i=t.target.x,a=t.target.y,o=(e+i)/2,r=(n+a)/2,s=Math.atan2(a-n,i-e);return`M${o-10*Math.cos(s)},${r-10*Math.sin(s)}L${o+10*Math.cos(s)},${r+10*Math.sin(s)}`})),this.selfArcs.attr("d",(t=>`\n                M ${t.source.x} ${t.source.y}\n                m 0 -60\n                a 60 60 0 1 1 1 0.01\n                `)),this.node.attr("transform",(t=>(t.x=Math.max(100,Math.min(this.width-100,t.x)),t.y=Math.max(100,Math.min(this.height-100,t.y)),`translate(${t.x},${t.y})`)))}))}panAndZoom(){}drag(){return this.d3.drag().on("start",((t,e)=>this.dragstarted(t,e))).on("drag",((t,e)=>this.dragged(t,e))).on("end",((t,e)=>this.dragended(t,e)))}dragstarted(t,e){t.active||this.simulation.alphaTarget(.3).restart(),e.fx=e.x,e.fy=e.y}dragged(t,e){e.fx=t.x,e.fy=t.y}dragended(t,e){t.active||this.simulation.alphaTarget(0),e.fx=null,e.fy=null}onNodeClick(t,e){this.primaryNodeId=e.id,e.title=e.name;let n=[e.id];console.log("d",e);const i=[e],a=[...e.children||[]];for(;a.length>0;){const t=a.pop();if(!t||n.includes(t))continue;n.push(t);const e=this.processedPages.find((e=>e.id===t));e&&(i.push(e),e.children&&a.push(...e.children))}this.nodes=this.createNodes(i),this.links=this.createLinks(i),this.init()}}class Zs{constructor(){this.appVersions=new d,this.container=document.getElementById("navbar-buttons"),this.init()}init(){const t=new Ds,e=new Hs;let n=new qs("open-mapping",Ms.t("navbar.tree"),{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="18.818" height="16" viewBox="0 0 18.818 18">\n        <path id="Path_993" data-name="Path 993" d="M19.545,5a3.283,3.283,0,0,0-3.273,3.273A3.228,3.228,0,0,0,16.784,10l-2.541,3.177H10.427a3.273,3.273,0,1,0,0,1.636h3.816L16.784,18a3.229,3.229,0,0,0-.511,1.732,3.273,3.273,0,1,0,3.273-3.273,3.207,3.207,0,0,0-1.563.419L15.685,14l2.3-2.873a3.207,3.207,0,0,0,1.563.419,3.273,3.273,0,0,0,0-6.545Zm0,1.636a1.636,1.636,0,1,1-1.636,1.636A1.623,1.623,0,0,1,19.545,6.636ZM7.273,12.364A1.636,1.636,0,1,1,5.636,14,1.623,1.623,0,0,1,7.273,12.364Zm12.273,5.727a1.636,1.636,0,1,1-1.636,1.636A1.623,1.623,0,0,1,19.545,18.091Z" transform="translate(-4 -5)"></path>\n        </svg>',variant:"outline",labelId:"navbar_tree_label"});n.button.disabled=!0,n.button.addEventListener("click",(t=>{t.preventDefault(),(new zs).show();const e=document.getElementById("mapping-section");e&&(console.log("mappingSection",e),e.style.display="block")}));let i=new qs("publish",Ms.t("navbar.publish.label"),{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="13" height="16" viewBox="0 0 13 18">\n        <path id="Path_958" data-name="Path 958" d="M13.5,3.594l-.519.507L7.925,9.263l1.038,1.06,3.814-3.9V18.644h1.444V6.429l3.814,3.9,1.038-1.06L14.019,4.1ZM7,20.119v1.475H20V20.119Z" transform="translate(-7 -3.594)" fill="#fff"></path>\n      </svg>',labelId:"navbar_tree_label"});t.render(this.container),e.render(this.container),i.render(this.container),i.button.addEventListener("click",(t=>{t.preventDefault(),(new Bs).openModal()}))}render(t){t.appendChild(this.container)}}class Ws{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("tb-tabs");const t=document.createElement("button");t.id="pages-button",t.className="tb-tab-button active",t.setAttribute("data-tab","pages");const e=document.createElement("span");e.id="sidebar_tabs_pages_label",e.innerText=Ms.t("sidebar.pages"),t.appendChild(e);const n=document.createElement("button");n.id="templates-button",n.className="tb-tab-button",n.setAttribute("data-tab","templates");const i=document.createElement("span");i.id="sidebar_tabs_templates_label",i.innerText=Ms.t("sidebar.templates.label"),n.appendChild(i),t.addEventListener("click",(e=>{e.preventDefault(),null==t||t.classList.add("active"),null==n||n.classList.remove("active"),this.switchTabs("pages-content","templates-content")})),n.addEventListener("click",(e=>{e.preventDefault(),null==n||n.classList.add("active"),null==t||t.classList.remove("active"),this.switchTabs("templates-content","pages-content")})),this.container.appendChild(t),this.container.appendChild(n)}switchTabs(t,e){const n=document.getElementById(t),i=document.getElementById(e);console.log(n,i),n.style.display="block",i.style.display="none"}render(t){t.appendChild(this.container)}}class Gs{constructor(){this.ctaManager=new yr,this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("cta-button-layout-container"),this.container.style.display="none";const t=document.createElement("button");t.classList.add("cta-button-layout"),t.id="plain-button-layout",t.innerText="Button";const e=document.createElement("button");e.classList.add("cta-button-layout"),e.id="image-button-layout",e.innerHTML='\n            <span class="img-button-icon">\n                <img src="Resources/UCGrapes/dist/images/food.png" alt="img-button-icon" width="35px" height="auto">  \n            </span>\n            <label>Button</label>\n            <i class="fa fa-angle-right img-button-arrow"></i>\n        ';const n=document.createElement("button");n.classList.add("cta-button-layout"),n.id="icon-button-layout",n.innerHTML='\n            <span>\n                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 35.401 42.251">\n                    <path id="calendar" d="M31.713,3.7H28.858V.849a1.713,1.713,0,0,0-3.425,0h0V3.7H15.157V.849a1.713,1.713,0,1,0-3.425,0h0V3.7H8.877A6.281,6.281,0,0,0,2.6,9.984h0V35.106a6.281,6.281,0,0,0,6.281,6.281H31.716A6.281,6.281,0,0,0,38,35.106h0V9.984A6.281,6.281,0,0,0,31.716,3.7h0ZM8.876,7.13H11.73V9.984a1.713,1.713,0,1,0,3.425,0h0V7.13H25.432V9.984a1.713,1.713,0,0,0,3.425,0h0V7.13h2.855a2.855,2.855,0,0,1,2.855,2.855h0v6.281H6.018V9.984A2.855,2.855,0,0,1,8.873,7.13h0ZM31.713,37.96H8.874A2.855,2.855,0,0,1,6.02,35.106h0V19.69H34.568V35.106a2.855,2.855,0,0,1-2.855,2.855Z" transform="translate(-2.596 0.864)" fill="#747474"/>\n                </svg>\n            </span>\n            <label>Button</label>\n            <i class="fa fa-angle-right img-button-arrow"></i>\n        ';const i=document.createElement("div");i.classList.add("call-to-action-item"),i.innerHTML='\n            <svg data-gjs-draggable="false" data-gjs-selectable="false" data-gjs-editable="false" data-gjs-highlightable="false" data-gjs-droppable="false" data-gjs-resizable="false" data-gjs-hoverable="false" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 49.417 49.418">\n                <path data-gjs-draggable="false" data-gjs-selectable="false" data-gjs-editable="false" data-gjs-highlightable="false" data-gjs-droppable="false" data-gjs-resizable="false" data-gjs-hoverable="false" id="call" d="M29.782,3a2.149,2.149,0,1,0,0,4.3A19.3,19.3,0,0,1,49.119,26.634a2.149,2.149,0,1,0,4.3,0A23.667,23.667,0,0,0,29.782,3ZM12.032,7.305a2.548,2.548,0,0,0-.818.067,8.342,8.342,0,0,0-3.9,2.342C2.775,14.254.366,21.907,17.437,38.98S42.16,53.643,46.7,49.1a8.348,8.348,0,0,0,2.346-3.907,2.524,2.524,0,0,0-1.179-2.786c-2.424-1.418-7.654-4.484-10.08-5.9a2.523,2.523,0,0,0-2.568.012l-4.012,2.392a2.517,2.517,0,0,1-2.845-.168,65.811,65.811,0,0,1-5.711-4.981,65.07,65.07,0,0,1-4.981-5.711A2.512,2.512,0,0,1,17.5,25.2L19.9,21.191a2.533,2.533,0,0,0,.008-2.577L14.012,8.556A2.543,2.543,0,0,0,12.032,7.305Zm17.751,4.289a2.149,2.149,0,1,0,0,4.3A10.709,10.709,0,0,1,40.525,26.634a2.149,2.149,0,1,0,4.3,0A15.072,15.072,0,0,0,29.782,11.594Zm0,8.594a2.149,2.149,0,1,0,0,4.3,2.114,2.114,0,0,1,2.149,2.148,2.149,2.149,0,1,0,4.3,0A6.479,6.479,0,0,0,29.782,20.188Z" transform="translate(-4 -3)" fill="#fff"></path>\n            </svg>\n        ',t.addEventListener("click",(t=>{t.preventDefault(),this.ctaManager.changeToPlainButton()})),n.addEventListener("click",(t=>{t.preventDefault(),this.ctaManager.changeToIconButton()})),e.addEventListener("click",(t=>{t.preventDefault(),this.ctaManager.changeToImgButton()})),i.addEventListener("click",(t=>{t.preventDefault(),this.ctaManager.changeToElipseButton()})),this.container.appendChild(t),this.container.appendChild(n),this.container.appendChild(e),this.container.appendChild(i)}render(t){t.appendChild(this.container)}}var Js=function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}))};class Ks{constructor(){this.themeManager=new $s,this.container=document.createElement("div"),this.container.id="content-page-section",this.initializeContentSection()}initializeContentSection(){return Js(this,void 0,void 0,(function*(){this.toggleSideBar(),this.setupContainerStyles()}))}checkIfRendered(){const t=document.getElementById("pages-content");return!(!t||!t.querySelector("#content-page-section"))}prepareContentData(){return Js(this,void 0,void 0,(function*(){var t;const e=new r;if("Location"===this.page.PageName||"Reception"===this.page.PageName){const t=yield e.getLocationData();if(!t)return;const n=null==t?void 0:t.BC_Trn_Location;this.iconsList=[{CallToActionName:"Phone",CallToActionPhone:null==n?void 0:n.LocationPhone,CallToActionType:"Phone"},{CallToActionName:"Email",CallToActionEmail:null==n?void 0:n.LocationEmail,CallToActionType:"Email"}]}else{const n=yield e.getContentPageData(null===(t=this.page)||void 0===t?void 0:t.PageId);n&&(this.iconsList=n.SDT_ProductService.CallToActions)}}))}setupContainerStyles(){this.container.classList.add("sidebar-section","content-page-section"),this.container.style.display="block"}renderComponents(){this.container.innerHTML="";const t=new Gs,e=this.themeManager.currentTheme.ThemeCtaColors;console.log(window.app.currentThemeId);const n=new wr(e);t.render(this.container),n.render(this.container)}toggleSideBar(){const t=document.getElementById("menu-page-section");t&&(t.style.display="none")}render(t){t.append(this.container)}}class Ys extends $s{constructor(){super(),this.container=document.createElement("div"),this.init()}init(){this.container.className="sidebar-section theme-section",this.container.style.paddingTop="0px";const t=this.getActiveThemeColors();new lr(t,"theme-color-palette").render(this.container)}render(t){t.appendChild(this.container)}}class Xs{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.className="bg-section";const t=document.createElement("button");t.className="add-image",t.id="image-bg",t.innerHTML='\n            <span class="plus">\n               <i class="fa fa-plus"></i>\n            </span>\n            <span class="image-icon">\n                <i class="fa fa-image"></i>\n            </span>\n        ';const e=document.createElement("div");e.className="slider-wrapper",e.id="slider-wrapper",e.style.display="none";const n=document.createElement("input");n.type="range",n.id="bg-opacity",n.min="0",n.max="100",n.value="0",n.addEventListener("input",(t=>{const e=t.target.value,n=document.getElementById("valueDisplay");n&&(n.innerHTML=`${e}%`),this.updateImageOpacity(e)}));const i=document.createElement("span");i.id="valueDisplay",i.innerHTML="0%",e.appendChild(n),e.appendChild(i),t.addEventListener("click",(t=>{if(t.preventDefault(),!globalThis.selectedComponent)return;const e=document.createElement("div");e.classList.add("tb-modal"),e.style.display="flex",new bc("tile").render(e);const n=document.createElement("input");n.type="file",n.multiple=!0,n.accept="image/jpeg, image/jpg, image/png",n.id="fileInput",n.style.display="none",document.body.appendChild(e),document.body.appendChild(n)})),this.container.appendChild(t),this.container.appendChild(e)}updateImageOpacity(t){const e=globalThis.selectedComponent;if(!e)return;const n=t/100;e.getEl().style.backgroundColor=`rgba(0, 0, 0, ${n})`,"Information"===globalThis.pageData.PageType?(new uc).updateInfoTileAttributes(e.parent().parent().getId(),e.parent().getId(),"Opacity",t):globalThis.tileMapper.updateTile(e.parent().getId(),"Opacity",t)}render(t){t.appendChild(this.container)}}class Qs{constructor(){this.positionX=50,this.positionY=50,this.zoomLevel=1,this.container=document.createElement("div"),this.init()}init(){let t;this.container.classList.add("tile-img-container"),this.container.id="tile-img-container",this.container.innerHTML='\n    <svg width="20" height="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="#4C5357" stroke-width="1" stroke-linecap="round" stroke-linejoin="miter">\n      <line x1="2" y1="6" x2="22" y2="6"></line>\n      <polyline points="8 6 8 2 16 2 16 6"></polyline>\n      <line x1="9" y1="10" x2="9" y2="18"></line><line x1="15" y1="10" x2="15" y2="18"></line>\n      <polyline points="20 6 20 22 4 22 4 6"></polyline>\n    </svg>\n    ',this.container.addEventListener("click",(e=>{e.preventDefault();const n=globalThis.selectedComponent;if(!n)return;const i=n.parent(),a=i.parent();t=globalThis.tileMapper.getTile(a.getId(),i.getId());const o=n.getStyle();delete o["background-image"],o["background-color"]=t.BGColor,n.setStyle(o),globalThis.tileMapper.updateTile(n.parent().getId(),"BGImageUrl",""),globalThis.tileMapper.updateTile(n.parent().getId(),"Opacity","0"),this.container.style.display="none",this.container.style.position="relative",this.container.style.overflow="hidden",document.getElementById("slider-wrapper").style.display="none"}))}render(t){t.appendChild(this.container)}}class tl{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("tile-img-section");const t=new Qs;(new Xs).render(this.container),t.render(this.container)}render(t){t.appendChild(this.container)}}class el{constructor(){this.input=document.createElement("input"),this.init()}init(){this.input.type="text",this.input.placeholder="Enter a title",this.input.classList.add("tb-form-control"),this.input.id="tile-title",this.input.addEventListener("input",(t=>{const e=globalThis.selectedComponent;let n=e.getClasses().includes("first-tile")&&e.getClasses().includes("high-priority-template");if(!e)return;const i=e.closest(".container-row").components().length,a=e.find(".tile-title")[0];if(a){const t=3===i?this.truncate(11):2===i?this.truncate(14):this.truncate(25);a.components(t),a.addAttributes({title:this.input.value})}n&&(this.input.value=this.input.value.toUpperCase()),"Information"===this.getPageData().PageType?(new uc).updateInfoTileAttributes(e.parent().parent().getId(),e.parent().getId(),"Text",this.input.value.trim()):globalThis.tileMapper.updateTile(e.parent().getId(),"Text",this.input.value.trim());const o=a.parent();o&&"none"===o.getStyle().display&&o.addStyle({display:"block"})}))}truncate(t){return this.input.value.length>t?this.input.value.substring(0,t)+"..":this.input.value}getPageData(){return globalThis.pageData}render(t){t.appendChild(this.input)}}class nl{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("text-alignment");const t=document.createElement("div");t.classList.add("align-item"),t.innerHTML='\n            <input type="radio" id="tile-left"\n                name="alignment" value="left" />\n            <label for="tile-left" class="fas fa-align-left">\n            </label>\n        ';const e=document.createElement("div");e.classList.add("align-item"),e.innerHTML='\n            <input type="radio" id="tile-center"\n                     name="alignment" value="center" />\n            <label for="tile-center">\n                <svg xmlns="http://www.w3.org/2000/svg"\n                width="12.7" height="14.626"\n                viewBox="0 0 12.7 14.626">\n                <path id="Group_2344-converted"\n                    data-name="Group 2344-converted"\n                    d="M5.863,1.868V3.736L5.031,2.9,4.2,2.073l-.336.341-.336.342,1.411,1.41L6.35,5.577,7.758,4.17,9.165,2.762l-.333-.333L8.5,2.1l-.831.817-.83.817V0H5.863V1.868M0,7.313v.794H12.7V6.519H0v.794m4.937,3.149-1.4,1.4.333.333.334.333.83-.816.831-.817v3.729h.974V10.89l.832.832.831.832.336-.342.336-.341L7.766,10.465c-.773-.773-1.41-1.406-1.416-1.406s-.642.631-1.413,1.4"\n                    fill-rule="evenodd" fill="#696969" />\n                </svg>\n            </label>\n        ',t.onclick=t=>{t.preventDefault();const e=document.getElementById("tile-left"),n=globalThis.selectedComponent;if(!n)return;n.addStyle({"justify-content":"start","align-items":"start"});const i=n.find(".tile-title")[0];i&&i.addStyle({"text-align":"left"}),"Information"===globalThis.pageData.PageType?(new uc).updateInfoTileAttributes(n.parent().parent().getId(),n.parent().getId(),"Align","left"):globalThis.tileMapper.updateTile(n.parent().getId(),"Align","left"),e.checked=!0},e.onclick=t=>{t.preventDefault();const e=document.getElementById("tile-center"),n=globalThis.selectedComponent;if(!n)return;n.addStyle({"justify-content":"center","align-items":"center"});const i=n.find(".tile-title")[0];i&&i.addStyle({"text-align":"center"}),"Information"===globalThis.pageData.PageType?(new uc).updateInfoTileAttributes(n.parent().parent().getId(),n.parent().getId(),"Align","center"):globalThis.tileMapper.updateTile(n.parent().getId(),"Align","center"),e.checked=!0},this.container.appendChild(t),this.container.appendChild(e)}render(t){t.appendChild(this.container)}}class il{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("title-style");const t=new fr("tile"),e=new nl;t.render(this.container),e.render(this.container)}render(t){t.appendChild(this.container)}}class al{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.className="sidebar-section title-section";const t=new el,e=new il;t.render(this.container),e.render(this.container)}render(t){t.appendChild(this.container)}}class ol{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.id="menu-page-section";const t=new Ys,e=new tl,n=new al,i=new Ps;t.render(this.container),e.render(this.container),n.render(this.container),i.render(this.container)}render(t){t.appendChild(this.container)}}class rl{constructor(){this.contentSection=new Ks,this.container=document.createElement("div"),this.init()}init(){this.container.className="tb-tab-content active-tab",this.container.id="pages-content",(new ol).render(this.container),this.contentSection=new Ks,this.contentSection.render(this.container)}render(t){t.appendChild(this.container)}}const sl={Templates:[{Id:"template-one",Rows:[{Id:"8024f98a-fef5-410c-8350-916b7394862e",Tiles:[{Id:"MQhNnVTdyWtKhTq",Name:"Title",Text:"Title",Color:"#000000",Align:"center",Icon:"",BGColor:"",BGImageUrl:"",Opacity:0,Action:{ObjectType:"",ObjectId:"",ObjectUrl:""}}]},{Id:"ZngzLIvl20250326202112011",Tiles:[{Id:"cBggkiXC20250326202112011",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"FjjiLxOp20250326202113039",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"qnDgmZMJ20250326202115737",Tiles:[{Id:"vWMSlmsk20250326202115736",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"hGqxooDx20250326202118005",Tiles:[{Id:"jHltKWiP20250326202118005",Name:"Title",Text:"Title",Color:"#333333",Align:"center",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"MyHZFUgV20250326202119203",Name:"Title",Text:"Title",Color:"#333333",Align:"center",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"ilvtXnXw20250326202119576",Name:"Title",Text:"Title",Color:"#333333",Align:"center",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]}]},{Id:"template-two",Rows:[{Id:"8024f98a-fef5-410c-8350-916b7394862e",Tiles:[{Id:"MQhNnVTdyWtKhTq",Name:"Title",Text:"Title",Color:"#000000",Align:"center",Icon:"",BGColor:"",BGImageUrl:"",Opacity:0,Action:{ObjectType:"",ObjectId:"",ObjectUrl:""}}]},{Id:"hGqxooDx20250326202118005",Tiles:[{Id:"jHltKWiP20250326202118005",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"ZvCzVboB20250326202531961",Tiles:[{Id:"ipSbryyM20250326202531961",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]}]},{Id:"template-three",Rows:[{Id:"8024f98a-fef5-410c-8350-916b7394862e",Tiles:[{Id:"MQhNnVTdyWtKhTq",Name:"Title",Text:"Title",Color:"#000000",Align:"left",Icon:"",BGColor:"",BGImageUrl:"",Opacity:0,Action:{ObjectType:"",ObjectId:"",ObjectUrl:""}},{Id:"ntcFxRKO20250326202614640",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"hGqxooDx20250326202118005",Tiles:[{Id:"jHltKWiP20250326202118005",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"ZvCzVboB20250326202531961",Tiles:[{Id:"ipSbryyM20250326202531961",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"pbaPLIje20250326202617562",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"yCtmNReZ20250326202618523",Tiles:[{Id:"dgXzpgXE20250326202618523",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"omnlZjhw20250326202619269",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]}]},{Id:"template-four",Rows:[{Id:"8024f98a-fef5-410c-8350-916b7394862e",Tiles:[{Id:"MQhNnVTdyWtKhTq",Name:"Title",Text:"Title",Color:"#000000",Align:"left",Icon:"",BGColor:"",BGImageUrl:"",Opacity:0,Action:{ObjectType:"",ObjectId:"",ObjectUrl:""}}]},{Id:"ZvCzVboB20250326202531961",Tiles:[{Id:"ipSbryyM20250326202531961",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"pbaPLIje20250326202617562",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"yCtmNReZ20250326202618523",Tiles:[{Id:"dgXzpgXE20250326202618523",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"omnlZjhw20250326202619269",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]}]}]};class ll{constructor(t){this.data=t,this.themeManager=new $s}addNewInfoSection(){return`\n    <div style="margin-top: 0;"\n      ${nr} class="tb-add-new-info-section">\n          <hr ${nr} class="add-new-info-hr" />\n          <svg ${nr} xmlns="http://www.w3.org/2000/svg" id="Component_67_2" data-name="Component 67 – 2" width="30" height="30" viewBox="0 0 30 30">\n          <g ${nr} id="Group_2309" data-name="Group 2309">\n            <g ${nr} id="Group_2307" data-name="Group 2307">\n              <g ${nr} id="Ellipse_6" data-name="Ellipse 6" fill="#fdfdfd" stroke="#5068a8" stroke-width="1">\n                <circle ${nr} cx="15" cy="15" r="15" stroke="none"/>\n                <circle ${nr} cx="15" cy="15" r="14.5" fill="none"/>\n              </g>\n            </g>\n          </g>\n          <path ${nr} id="Icon_ionic-ios-add" data-name="Icon ionic-ios-add" d="M21.895,15H16.717V9.823a.858.858,0,1,0-1.717,0V15H9.823a.858.858,0,0,0,0,1.717H15v5.177a.858.858,0,1,0,1.717,0V16.717h5.177a.858.858,0,1,0,0-1.717Z" transform="translate(-0.692 -1.025)" fill="#5068a8"/>\n        </svg>\n      </div>\n    `}generateTile(t,e,n,i,a){return`\n      <div ${n?'\n    data-gjs-draggable="false"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-highlightable="false"\n    data-gjs-droppable="false"\n    data-gjs-resizable="false"\n    data-gjs-hoverable="false"\n    data-gjs-type="tile-wrapper"\n':er} class="template-wrapper" id="${t.Id}" style="height:${t.Size||80}px;">\n        <div ${tr} class="template-block${n?" first-tile high-priority-template":""}" \n          style="color: ${t.Color?t.Color:"#333333"}; text-align: ${t.Align};\n        ${i?"align-items: center; justify-content: center;":`align-items: ${"left"===t.Align?"start":t.Align}; justify-content: ${"left"===t.Align?"start":t.Align};`}; \n        ${t.BGImageUrl?`background-color: rgba(0,0,0, ${t.Opacity/100});\n               background-image: url('${t.BGImageUrl}');\n               background-size: cover;\n               background-position: center;\n               background-blend-mode: overlay;`:`\n            background-color: ${this.themeManager.getThemeColor(t.BGColor)}; \n            `}">\n        \n        <div ${nr} class="tile-icon-section" ${t.Icon?'style="display: block;"':""}>\n          <span ${nr} class="tile-close-icon top-right">×</span>\n          <span ${nr} title="${t.Icon}" class="tile-icon">\n            ${this.getTileIcon(t)}\n          </span>\n        </div>\n                \n                <div ${nr} class="tile-title-section" style="${i?"text-align: center;":"text-align: left"}">\n                  <span ${nr} class="tile-close-title top-right">×</span>\n                  <span ${nr} class="tile-title" title="${t.Text}" style="${i?"text-align: center;":`text-align: ${t.Align}`}">${this.truncateText(t,t.Text,i)}</span>\n        </div>\n      </div>\n      ${n?"":`\n        <button ${nr} title="${Ms.t("tile.delete_tile")}" class="action-button delete-button">−</button>`}\n      <button ${nr} title="${Ms.t("tile.add_template_right")}" ${i&&a?'style="display: none;"':""} class="action-button add-button-right">\n        <svg ${nr} fill="#fff" width="15" height="15" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n          <path ${nr} d="M19,11H13V5a1,1,0,0,0-2,0v6H5a1,1,0,0,0,0,2h6v6a1,1,0,0,0,2,0V13h6a1,1,0,0,0,0-2Z"/>\n        </svg>\n      </button>\n      ${1===e.Tiles.length?`\n          ${Os("Resize")}\n        `:""}\n      ${a?"":`\n        <button ${nr} title="${Ms.t("tile.add_template_bottom")}" class="action-button add-button-bottom">\n          <svg ${nr} fill="#fff" width="15" height="15" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n            <path ${nr} d="M19,11H13V5a1,1,0,0,0-2,0v6H5a1,1,0,0,0,0,2h6v6a1,1,0,0,0,2,0V13h6a1,1,0,0,0,0-2Z"/>\n          </svg>\n        </button>`}\n      <svg ${nr} class="tile-open-menu" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 27 27">\n        <g ${nr} id="Group_2383" data-name="Group 2383" transform="translate(-921 -417.999)">\n          <g ${nr} id="Group_2382" data-name="Group 2382" transform="translate(921 418)">\n            <circle ${nr} id="Ellipse_534" data-name="Ellipse 534" cx="13.5" cy="13.5" r="13.5" transform="translate(0 -0.001)" fill="#6a747f"/>\n          </g>\n          <path ${nr} id="Path_2320" data-name="Path 2320" d="M1.7,0a1.7,1.7,0,1,0,1.7,1.7A1.7,1.7,0,0,0,1.7,0ZM7.346,0a1.7,1.7,0,1,0,1.7,1.7A1.7,1.7,0,0,0,7.346,0ZM13,0a1.7,1.7,0,1,0,1.7,1.7A1.7,1.7,0,0,0,13,0Z" transform="translate(927 430)" fill="#fff"/>\n        </g>\n      </svg>\n    </div>\n  `}translateTileLabel(t,e){const n=t.Action.ObjectType;return"Map"===n?Ms.t("default.map"):"location"===n?Ms.t("default.location"):"calendar"===n?Ms.t("default.calendar"):"reception"===n?Ms.t("default.reception"):"mycare"===n?Ms.t("default.mycare"):"myliving"===n||"myliving"===n?Ms.t("default.calendar"):"myservice"===n?Ms.t("default.myservice"):"myactivity"===n?Ms.t("default.myactivity"):e}truncateText(t,e,n){const i=window.innerWidth,a=3===length?11:2===length?15:20;return e.length>(i<=280?20:a+4)?e.substring(0,i<=280?a:a+4).trim()+"..":n?this.wrapTileTitle(e):e}wrapTileTitle(t){const e=t.split(" ");return e.length>1?e[0]+"<br>"+e[1]:t.replace("<br>","")}getTileIcon(t){const e=this.themeManager.getThemeIcon(t.Icon);let n;return e&&(n=e.replace('fill="#7c8791"',`fill="${t.Color}"`)),n}generateRow(t,e){const n=0===e&&1===t.Tiles.length,i=3===t.Tiles.length,a=t.Tiles.map(((e,a)=>this.generateTile(e,t,n&&0===a,i))).join("");return`<div id="${t.Id}" ${ir} class="container-row">${a}</div>`}generateInfoRow(t){var e,n,i;const a=3===(null===(e=null==t?void 0:t.Tiles)||void 0===e?void 0:e.length),o=null===(n=null==t?void 0:t.Tiles)||void 0===n?void 0:n.map((e=>this.generateTile(e,t,!1,a,!0))).join("");return 0===(null===(i=null==t?void 0:t.Tiles)||void 0===i?void 0:i.length)?"":`<div id="${t.InfoId}" ${sr} class="container-row">${o}</div>`}generateHTML(){const t=`\n    <div ${nr} id="frame-container" data-gjs-type="template-wrapper" class="frame-container">\n      <div ${nr} class="container-column">\n        ${this.data.PageMenuStructure.Rows.map(((t,e)=>this.generateRow(t,e))).join("")}\n      </div>\n    </div>\n  `;return this.filterHTML(t)}filterHTML(t){const e=document.createElement("div");return e.innerHTML=t,e.querySelectorAll(".container-row").forEach((t=>{3===t.querySelectorAll(".template-block").length&&t.querySelectorAll(".add-button-right").forEach((t=>{t.style.display="none"}))})),e.innerHTML}}class cl{constructor(t,e,n){this.pageId=t,this.editor=e,this.templateId=n,this.init()}init(){return t=this,e=void 0,i=function*(){var t;const e=null===(t=sl.Templates.find((t=>t.Id===this.templateId)))||void 0===t?void 0:t.Rows,n=(new d).getPages().find((t=>t.PageId===this.pageId));if(n){const t=this.getUpdatedPageData(e,n);this.editor.DomComponents.clear(),this.applyTemplate(t)}},new((n=void 0)||(n=Promise))((function(a,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}));var t,e,n,i}getUpdatedPageData(t,e){const n=JSON.parse(JSON.stringify(t));let i=JSON.parse(JSON.stringify(e));return i.PageMenuStructure.Rows=n,i=JSON.parse(JSON.stringify(i)),i}applyTemplate(t){const e=new ll(t).generateHTML();this.editor.setComponents(e),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(t))}}class dl{constructor(t,e,n){this.container=document.createElement("div"),this.message=t,this.title=e,this.toolboxService=new r,this.onConfirmCallback=n||(()=>{}),this.init()}init(){this.container.classList.add("popup-modal"),this.container.style.display="flex";const t=document.createElement("div");t.classList.add("popup");const e=document.createElement("div");e.classList.add("popup-header");const n=document.createElement("span");n.innerText=this.title;const i=document.createElement("button");i.classList.add("close"),i.innerHTML='\n            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 21 21">\n                <path id="Icon_material-close" data-name="Icon material-close" d="M28.5,9.615,26.385,7.5,18,15.885,9.615,7.5,7.5,9.615,15.885,18,7.5,26.385,9.615,28.5,18,20.115,26.385,28.5,28.5,26.385,20.115,18Z" transform="translate(-7.5 -7.5)" fill="#6a747f" opacity="0.54"></path>\n            </svg>\n        ',i.addEventListener("click",(()=>{this.close()})),e.appendChild(n),e.appendChild(i);const a=document.createElement("hr"),o=document.createElement("div");o.classList.add("popup-body"),o.id="confirmation_modal_message",o.innerText=this.message;const r=document.createElement("div");r.classList.add("popup-footer");const s=document.createElement("button");s.className="tb-btn tb-btn-outline",s.id="cancel_confirmation",s.innerText=Ms.t("sidebar.confirmation_cancel"),s.addEventListener("click",(()=>{this.close()}));const l=document.createElement("button");l.className="tb-btn tb-btn-primary",l.id="confirm_action",l.innerText=Ms.t("sidebar.confirmation_accept"),l.addEventListener("click",(t=>{t.preventDefault(),this.onConfirmCallback(),this.close()})),r.appendChild(l),r.appendChild(s),t.appendChild(e),t.appendChild(a),t.appendChild(o),t.appendChild(r),this.container.appendChild(t)}close(){this.container.remove()}render(t){t.appendChild(this.container)}}var hl;class ul{constructor(t){this.templateList=document.createElement("div"),this.templateList.id="page-templates",t.forEach(((t,e)=>{const n=document.createElement("div");n.className="page-template-wrapper",n.id=t.id;const i=document.createElement("div");i.className="page-template-block-number";const a=document.createElement("div");a.className="page-template-block",a.title=Ms.t("sidebar.templates.click_to_add_template");const o=document.createElement("div"),r=document.createElement("img");r.style.width="100%",r.style.height="100%",r.src=t.image,o.appendChild(r),a.appendChild(o),i.innerHTML=`${e+1}`,n.appendChild(i),n.appendChild(a),n.addEventListener("click",(t=>{t.preventDefault();const e=globalThis.activeEditor,i=globalThis.pageData;if(!e&&!(null==i?void 0:i.PageId))return void new s("error",Ms.t("messages.error.no_active_page"));if(!i||"Menu"!==i.PageType)return void new s("error",Ms.t("messages.error.templates_on_menu_pages"));const a=Ms.t("sidebar.templates.confirmation_title"),o=Ms.t("sidebar.templates.confirmation_message");new dl(o,a,(()=>{return t=this,a=void 0,r=function*(){new cl(i.PageId,e,n.id)},new((o=void 0)||(o=Promise))((function(e,n){function i(t){try{l(r.next(t))}catch(t){n(t)}}function s(t){try{l(r.throw(t))}catch(t){n(t)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(t){t(n)}))).then(i,s)}l((r=r.apply(t,a||[])).next())}));var t,a,o,r})).render(document.body)})),this.templateList.appendChild(n)}))}render(t){t.appendChild(this.templateList)}}class pl{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.className="tb-tab-content active-tab",this.container.id="templates-content",this.container.style.display="none";const t=document.createElement("div");t.className="sidebar-section",t.id="page-templates",new ul([{id:"template-one",image:"/Resources/UCGrapes1/src/images/template-1.png"},{id:"template-two",image:"/Resources/UCGrapes1/src/images/template-2.png"},{id:"template-three",image:"/Resources/UCGrapes1/src/images/template-3.png"},{id:"template-four",image:"/Resources/UCGrapes1/src/images/template-4.png"}]).render(t),this.container.appendChild(t)}render(t){t.appendChild(this.container)}}class gl{constructor(){this.container=document.getElementById("tools-section"),this.init()}init(){new Ws,this.pagesTabContent=new rl;const t=new pl;this.pagesTabContent.render(this.container),t.render(this.container),window.app.toolsSection=this}render(t){t.appendChild(this.container)}}!function(t){t.ADD_ROW="ADD_ROW",t.REMOVE_ROW="REMOVE_ROW",t.ADD_TILE="ADD_TILE",t.REMOVE_TILE="REMOVE_TILE",t.MODIFY_TILE="MODIFY_TILE",t.MOVE_TILE="MOVE_TILE",t.BATCH="BATCH"}(hl||(hl={}));class fl{constructor(t){this.undoStack=[],this.redoStack=[],this.maxStackSize=100,this.isUndoing=!1,this.isRedoing=!1,this.subscribers=[],this.batchActions=null,this.pageId=t,this.setupKeyboardShortcuts()}subscribe(t){return this.subscribers.push(t),()=>{this.subscribers=this.subscribers.filter((e=>e!==t))}}startBatch(){this.batchActions||(this.batchActions=[])}endBatch(){this.batchActions&&this.batchActions.length>0&&this.addToUndoStack({type:hl.BATCH,pageId:this.pageId,data:[...this.batchActions],timestamp:Date.now()}),this.batchActions=null}addRow(t){const e={type:hl.ADD_ROW,pageId:this.pageId,rowId:t.Id,data:t,timestamp:Date.now()};this.batchActions?this.batchActions.push(e):this.addToUndoStack(e)}removeRow(t,e){const n={type:hl.REMOVE_ROW,pageId:this.pageId,rowId:t,data:e,timestamp:Date.now()};this.batchActions?this.batchActions.push(n):this.addToUndoStack(n)}addTile(t,e){const n={type:hl.ADD_TILE,pageId:this.pageId,rowId:t,tileId:e.Id,data:e,timestamp:Date.now()};this.batchActions?this.batchActions.push(n):this.addToUndoStack(n)}removeTile(t,e,n){var i,a;e&&n||null===(a=null===(i=this.getPageData().PageMenuStructure)||void 0===i?void 0:i.Rows)||void 0===a||a.forEach((i=>{const a=i.Tiles.find((e=>e.Id===t));a&&(e=i.Id,n=a)}));const o={type:hl.REMOVE_TILE,pageId:this.pageId,rowId:e,tileId:t,data:n,timestamp:Date.now()};this.batchActions?this.batchActions.push(o):this.addToUndoStack(o)}modifyTile(t,e,n){const i={type:hl.MODIFY_TILE,pageId:this.pageId,tileId:t,data:{oldValues:e,newValues:n},timestamp:Date.now()};this.batchActions?this.batchActions.push(i):this.addToUndoStack(i)}moveTile(t,e,n,i,a){const o={type:hl.MOVE_TILE,pageId:this.pageId,tileId:t,rowId:e,data:{sourceRowId:e,targetRowId:n,targetIndex:i,originalIndex:a},timestamp:Date.now()};this.batchActions?this.batchActions.push(o):this.addToUndoStack(o)}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}undo(){if(!this.canUndo())return!1;this.isUndoing=!0;const t=this.undoStack.pop();try{if(t.type===hl.BATCH){const e=t.data;for(let t=e.length-1;t>=0;t--)this.applyAction(e[t],!0)}else this.applyAction(t,!0);return this.redoStack.push(t),this.notifySubscribers(t),!0}catch(e){return console.error("Undo failed:",e),this.undoStack.push(t),!1}finally{this.isUndoing=!1}}redo(){if(!this.canRedo())return!1;this.isRedoing=!0;const t=this.redoStack.pop();try{return t.type===hl.BATCH?t.data.forEach((t=>this.applyAction(t,!1))):this.applyAction(t,!1),this.undoStack.push(t),this.notifySubscribers(t),!0}catch(e){return console.error("Redo failed:",e),this.redoStack.push(t),!1}finally{this.isRedoing=!1}}clearHistory(){this.undoStack=[],this.redoStack=[],this.notifySubscribers({type:hl.MODIFY_TILE,pageId:this.pageId,timestamp:Date.now()})}getStackSizes(){return{undoSize:this.undoStack.length,redoSize:this.redoStack.length}}addToUndoStack(t){this.isUndoing||this.isRedoing||(this.shouldCoalesceWithLastAction(t)&&this.undoStack.pop(),this.undoStack.length>=this.maxStackSize&&this.undoStack.shift(),this.undoStack.push(t),this.redoStack=[],this.notifySubscribers(t))}applyAction(t,e){const n=this.getPageData();switch(t.type){case hl.ADD_ROW:e?this.undoAddRow(n,t):this.redoAddRow(n,t);break;case hl.REMOVE_ROW:e?this.undoRemoveRow(n,t):this.redoRemoveRow(n,t);break;case hl.ADD_TILE:e?this.undoAddTile(n,t):this.redoAddTile(n,t);break;case hl.REMOVE_TILE:e?this.undoRemoveTile(n,t):this.redoRemoveTile(n,t);break;case hl.MODIFY_TILE:const i=e?t.data.oldValues:t.data.newValues;this.applyTileChanges(n,t.tileId,i);break;case hl.MOVE_TILE:e?this.undoMoveTile(n,t):this.redoMoveTile(n,t)}this.savePageData(n)}setupKeyboardShortcuts(){document.addEventListener("keydown",(t=>{(t.ctrlKey||t.metaKey)&&("z"!==t.key||t.shiftKey?("y"===t.key||"z"===t.key&&t.shiftKey)&&(t.preventDefault(),this.redo()):(t.preventDefault(),this.undo()))}))}shouldCoalesceWithLastAction(t){if(0===this.undoStack.length)return!1;const e=this.undoStack[this.undoStack.length-1];return t.type===hl.MODIFY_TILE&&e.type===hl.MODIFY_TILE&&t.tileId===e.tileId&&Date.now()-e.timestamp<1e3}getPageData(){return JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}")}savePageData(t){localStorage.setItem(`data-${this.pageId}`,JSON.stringify(t))}notifySubscribers(t){this.subscribers.forEach((e=>e(t)))}undoAddRow(t,e){t.PageMenuStructure.Rows=t.PageMenuStructure.Rows.filter((t=>t.Id!==e.rowId))}redoAddRow(t,e){t.PageMenuStructure||(t.PageMenuStructure={Rows:[]}),t.PageMenuStructure.Rows.push(e.data)}undoRemoveRow(t,e){t.PageMenuStructure||(t.PageMenuStructure={Rows:[]}),t.PageMenuStructure.Rows.push(e.data)}redoRemoveRow(t,e){t.PageMenuStructure.Rows=t.PageMenuStructure.Rows.filter((t=>t.Id!==e.rowId))}undoAddTile(t,e){const n=t.PageMenuStructure.Rows.find((t=>t.Id===e.rowId));n&&(n.Tiles=n.Tiles.filter((t=>t.Id!==e.tileId)),0===n.Tiles.length&&(t.PageMenuStructure.Rows=t.PageMenuStructure.Rows.filter((t=>t.Id!==e.rowId))))}redoAddTile(t,e){let n=t.PageMenuStructure.Rows.find((t=>t.Id===e.rowId));n||(n={Id:e.rowId,Tiles:[]},t.PageMenuStructure.Rows.push(n)),n.Tiles.push(e.data),3===n.Tiles.length&&n.Tiles.forEach((t=>{t.Align="center"}))}undoRemoveTile(t,e){let n=t.PageMenuStructure.Rows.find((t=>t.Id===e.rowId));n||(n={Id:e.rowId,Tiles:[]},t.PageMenuStructure.Rows.push(n)),n.Tiles.push(e.data)}redoRemoveTile(t,e){const n=t.PageMenuStructure.Rows.find((t=>t.Id===e.rowId));n&&(n.Tiles=n.Tiles.filter((t=>t.Id!==e.tileId)),0===n.Tiles.length&&(t.PageMenuStructure.Rows=t.PageMenuStructure.Rows.filter((t=>t.Id!==e.rowId))))}applyTileChanges(t,e,n){var i,a;null===(a=null===(i=t.PageMenuStructure)||void 0===i?void 0:i.Rows)||void 0===a||a.forEach((t=>{t.Tiles.forEach((t=>{t.Id===e&&Object.keys(n).forEach((e=>{if(e.includes(".")){const i=e.split(".");let a=t;for(let t=0;t<i.length-1;t++)a=a[i[t]];a[i[i.length-1]]=n[e]}else t[e]=n[e]}))}))}))}undoMoveTile(t,e){const{sourceRowId:n,targetRowId:i,originalIndex:a}=e.data,o=t.PageMenuStructure.Rows.find((t=>t.Id===i));let r=t.PageMenuStructure.Rows.find((t=>t.Id===n));if(o){const i=o.Tiles.findIndex((t=>t.Id===e.tileId));if(-1!==i){const[e]=o.Tiles.splice(i,1);r||(r={Id:n,Tiles:[]},t.PageMenuStructure.Rows.push(r)),r.Tiles.splice(a,0,e),3===r.Tiles.length&&r.Tiles.forEach((t=>{t.Align="center"})),0===o.Tiles.length&&(t.PageMenuStructure.Rows=t.PageMenuStructure.Rows.filter((t=>t.Id!==o.Id)))}}}redoMoveTile(t,e){const{sourceRowId:n,targetRowId:i,targetIndex:a}=e.data,o=t.PageMenuStructure.Rows.find((t=>t.Id===n));let r=t.PageMenuStructure.Rows.find((t=>t.Id===i));if(o){const n=o.Tiles.findIndex((t=>t.Id===e.tileId));if(-1!==n){const[e]=o.Tiles.splice(n,1);r||(r={Id:i,Tiles:[]},t.PageMenuStructure.Rows.push(r)),r.Tiles.splice(a,0,e),3===r.Tiles.length&&r.Tiles.forEach((t=>{t.Align="center"})),0===o.Tiles.length&&(t.PageMenuStructure.Rows=t.PageMenuStructure.Rows.filter((t=>t.Id!==o.Id)))}}}}class ml{constructor(t){this.data=t,this.themeManager=new $s}generateCta(t){return"Image"===t.CtaButtonType?`<div id="${t.CtaId}" data-gjs-type="cta-buttons"\n                ${or} \n                  button-type="${t.CtaType}"\n                  class="img-button-container">\n                    <div ${nr} class="img-button cta-styled-btn"\n                        style="background-color: ${this.themeManager.getThemeCtaColor(t.CtaBGColor)}">\n                        <span ${nr} class="img-button-section">\n                            <img ${nr} src="${t.CtaButtonImgUrl}" />\n                            <span ${nr} class="edit-cta-image">\n                                ${t.CtaButtonImgUrl?`\n                                <svg ${nr} xmlns="http://www.w3.org/2000/svg" id="Component_57_1" data-name="Component 57 – 1" width="22" height="22" viewBox="0 0 33 33">\n                                  <g ${nr} id="Ellipse_532" data-name="Ellipse 532" fill="#fff" stroke="#5068a8" stroke-width="2">\n                                    <circle ${nr} cx="16.5" cy="16.5" r="16.5" stroke="none"/>\n                                    <circle ${nr} cx="16.5" cy="16.5" r="16" fill="none"/>\n                                  </g>\n                                  <path ${nr} id="Icon_feather-edit-2" data-name="Icon feather-edit-2" d="M12.834,3.8a1.854,1.854,0,0,1,2.622,2.622L6.606,15.274,3,16.257l.983-3.606Z" transform="translate(7 6.742)" fill="#5068a8" stroke="#5068a8" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>\n                                </svg>\n                                `:`\n                                 <svg ${nr} xmlns="http://www.w3.org/2000/svg" id="Component_53_4" data-name="Component 53 – 4" width="22" height="22" viewBox="0 0 22 22">\n                                    <g ${nr} id="Group_2309" data-name="Group 2309">\n                                        <g ${nr} id="Group_2307" data-name="Group 2307">\n                                        <g ${nr} id="Ellipse_6" data-name="Ellipse 6" fill="#fdfdfd" stroke="#5068a8" stroke-width="1">\n                                            <circle ${nr} cx="11" cy="11" r="11" stroke="none"/>\n                                            <circle ${nr} cx="11" cy="11" r="10.5" fill="none"/>\n                                        </g>\n                                        </g>\n                                    </g>\n                                    <path ${nr} id="Icon_ionic-ios-add" data-name="Icon ionic-ios-add" d="M18.342,13.342H14.587V9.587a.623.623,0,1,0-1.245,0v3.755H9.587a.623.623,0,0,0,0,1.245h3.755v3.755a.623.623,0,1,0,1.245,0V14.587h3.755a.623.623,0,1,0,0-1.245Z" transform="translate(-2.965 -2.965)" fill="#5068a8"/>\n                                </svg>\n                                `}\n                            </span>\n                        </span>\n                        <div${nr} class="cta-badge">\n                        <svg fill="#5068a8" ${nr} width="14px" height="14px" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                            <title ${nr}>delete</title>\n                            <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-1" d="M27.14,34H8.86A2.93,2.93,0,0,1,6,31V11.23H8V31a.93.93,0,0,0,.86,1H27.14A.93.93,0,0,0,28,31V11.23h2V31A2.93,2.93,0,0,1,27.14,34Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M30.78,9H5A1,1,0,0,1,5,7H30.78a1,1,0,0,1,0,2Z"></path>\n                            <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-3" x="21" y="13" width="2" height="15"></rect>\n                            <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-4" x="13" y="13" width="2" height="15"></rect>\n                            <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-5" d="M23,5.86H21.1V4H14.9V5.86H13V4a2,2,0,0,1,1.9-2h6.2A2,2,0,0,1,23,4Z"></path>\n                            <rect fill="#5068a8" ${nr} x="0" y="0" width="36" height="36" fill-opacity="0"/>\n                        </svg>\n                        </div>\n                        <span ${nr} style="color:${t.CtaColor?t.CtaColor:"#ffffff"}" class="img-button-label label">${this.getCtaLabel(t)}</span>\n                        <i ${nr} style="color:${t.CtaColor?t.CtaColor:"#ffffff"}" class="fa fa-angle-right img-button-arrow"></i>\n                    </div>\n                </div>`:"FullWidth"===t.CtaButtonType?`\n            <div\n                id="${t.CtaId}"\n                ${or} \n                data-gjs-type="cta-buttons"\n                button-type="${t.CtaType}"\n                class="plain-button-container"\n            >\n                <button ${nr} id="ibob6" data-gjs-type="default" class="plain-button cta-styled-btn"\n                  style="background-color: ${this.themeManager.getThemeCtaColor(t.CtaBGColor)}">\n                    <div ${nr} id="iyocy" data-gjs-type="default" class="cta-badge">\n                        <svg fill="#5068a8" id="ifxn6" data-gjs-type="default" ${nr} width="14px" height="14px" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                            <title ${nr}>delete</title>\n                            <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-1" d="M27.14,34H8.86A2.93,2.93,0,0,1,6,31V11.23H8V31a.93.93,0,0,0,.86,1H27.14A.93.93,0,0,0,28,31V11.23h2V31A2.93,2.93,0,0,1,27.14,34Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M30.78,9H5A1,1,0,0,1,5,7H30.78a1,1,0,0,1,0,2Z"></path>\n                            <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-3" x="21" y="13" width="2" height="15"></rect>\n                            <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-4" x="13" y="13" width="2" height="15"></rect>\n                            <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-5" d="M23,5.86H21.1V4H14.9V5.86H13V4a2,2,0,0,1,1.9-2h6.2A2,2,0,0,1,23,4Z"></path>\n                            <rect fill="#5068a8" ${nr} x="0" y="0" width="36" height="36" fill-opacity="0"/>\n                        </svg>\n                    </div>\n                    <span ${nr} style="color:${t.CtaColor?t.CtaColor:"#ffffff"}" class="label">${this.getCtaLabel(t)}</span>\n                </button>\n            </div>\n            `:"Icon"===t.CtaButtonType?`\n          <div id="${t.CtaId}" data-gjs-type="cta-buttons"\n            ${or} \n              button-type="${t.CtaType}"\n              class="img-button-container">\n                <div ${nr} class="img-button cta-styled-btn"\n                    style="background-color: ${this.themeManager.getThemeCtaColor(t.CtaBGColor)}">\n                    <span ${nr} class="img-button-icon">\n                      ${this.ctaIcon(t)}\n                      <svg class="icon-edit-button" title="Change icon" ${nr} xmlns="http://www.w3.org/2000/svg" id="Component_57_1" data-name="Component 57 – 1" width="20" height="20" viewBox="0 0 33 33">\n                        <g ${nr} id="Ellipse_532" data-name="Ellipse 532" fill="#fff" stroke="#5068a8" stroke-width="2">\n                          <circle ${nr} cx="16.5" cy="16.5" r="16.5" stroke="none"/>\n                          <circle ${nr} cx="16.5" cy="16.5" r="16" fill="none"/>\n                        </g>\n                        <path ${nr} id="Icon_feather-edit-2" data-name="Icon feather-edit-2" d="M12.834,3.8a1.854,1.854,0,0,1,2.622,2.622L6.606,15.274,3,16.257l.983-3.606Z" transform="translate(7 6.742)" fill="#5068a8" stroke="#5068a8" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>\n                      </svg>\n                    </span>\n                    <div${nr} class="cta-badge">\n                        <svg fill="#5068a8" ${nr} width="14px" height="14px" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                          <title ${nr}>delete</title>\n                          <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-1" d="M27.14,34H8.86A2.93,2.93,0,0,1,6,31V11.23H8V31a.93.93,0,0,0,.86,1H27.14A.93.93,0,0,0,28,31V11.23h2V31A2.93,2.93,0,0,1,27.14,34Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M30.78,9H5A1,1,0,0,1,5,7H30.78a1,1,0,0,1,0,2Z"></path>\n                          <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-3" x="21" y="13" width="2" height="15"></rect>\n                          <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-4" x="13" y="13" width="2" height="15"></rect>\n                          <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-5" d="M23,5.86H21.1V4H14.9V5.86H13V4a2,2,0,0,1,1.9-2h6.2A2,2,0,0,1,23,4Z"></path>\n                          <rect fill="#5068a8" ${nr} x="0" y="0" width="36" height="36" fill-opacity="0"/>\n                      </svg>\n                    </div>\n                    <span ${nr} style="color:${t.CtaColor?t.CtaColor:"#ffffff"}" class="img-button-label label">${this.getCtaLabel(t)}</span>\n                    <i ${nr} style="color:${t.CtaColor?t.CtaColor:"#ffffff"}" class="fa fa-angle-right img-button-arrow"></i>\n                </div>\n            </div>\n      `:"Round"===t.CtaButtonType?`\n            <div ${or} \n              data-gjs-type="cta-buttons" \n              button-type="${t.CtaType}" \n              class="cta-container-child cta-child"\n              id="${t.CtaId}">              \n                <div class="cta-button cta-styled-btn" ${nr}\n                  style="background-color: ${this.themeManager.getThemeCtaColor(t.CtaBGColor)}">\n                    ${this.ctaIcon(t)}\n                    <div class="cta-badge" ${nr}>\n                      <svg fill="#5068a8" ${nr} width="14px" height="14px" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                          <title ${nr}>delete</title>\n                          <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-1" d="M27.14,34H8.86A2.93,2.93,0,0,1,6,31V11.23H8V31a.93.93,0,0,0,.86,1H27.14A.93.93,0,0,0,28,31V11.23h2V31A2.93,2.93,0,0,1,27.14,34Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M30.78,9H5A1,1,0,0,1,5,7H30.78a1,1,0,0,1,0,2Z"></path>\n                          <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-3" x="21" y="13" width="2" height="15"></rect>\n                          <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-4" x="13" y="13" width="2" height="15"></rect>\n                          <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-5" d="M23,5.86H21.1V4H14.9V5.86H13V4a2,2,0,0,1,1.9-2h6.2A2,2,0,0,1,23,4Z"></path>\n                          <rect fill="#5068a8" ${nr} x="0" y="0" width="36" height="36" fill-opacity="0"/>\n                      </svg>\n                    </div>\n                </div>\n                <span class="cta-label label" ${nr}>${this.getCtaLabel(t)}</span>\n            </div>\n            `:void 0}getCtaLabel(t){let e=t.CtaLabel;return e?(e="Round"===t.CtaButtonType?hr(e,5):hr(e,14),e):""}ctaIcon(t){let e;switch(t.CtaType){case"Phone":e=`\n        <svg ${nr} id="ixdtl" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32" height="32"\n                    viewBox="0 0 49.417 49.418">\n            <path ${nr} id="call" data-gjs-type="svg-in"\n                d="M29.782,3a2.149,2.149,0,1,0,0,4.3A19.3,19.3,0,0,1,49.119,26.634a2.149,2.149,0,1,0,4.3,0A23.667,23.667,0,0,0,29.782,3ZM12.032,7.305a2.548,2.548,0,0,0-.818.067,8.342,8.342,0,0,0-3.9,2.342C2.775,14.254.366,21.907,17.437,38.98S42.16,53.643,46.7,49.1a8.348,8.348,0,0,0,2.346-3.907,2.524,2.524,0,0,0-1.179-2.786c-2.424-1.418-7.654-4.484-10.08-5.9a2.523,2.523,0,0,0-2.568.012l-4.012,2.392a2.517,2.517,0,0,1-2.845-.168,65.811,65.811,0,0,1-5.711-4.981,65.07,65.07,0,0,1-4.981-5.711A2.512,2.512,0,0,1,17.5,25.2L19.9,21.191a2.533,2.533,0,0,0,.008-2.577L14.012,8.556A2.543,2.543,0,0,0,12.032,7.305Zm17.751,4.289a2.149,2.149,0,1,0,0,4.3A10.709,10.709,0,0,1,40.525,26.634a2.149,2.149,0,1,0,4.3,0A15.072,15.072,0,0,0,29.782,11.594Zm0,8.594a2.149,2.149,0,1,0,0,4.3,2.114,2.114,0,0,1,2.149,2.148,2.149,2.149,0,1,0,4.3,0A6.479,6.479,0,0,0,29.782,20.188Z"\n                transform="translate(-4 -3)" fill="${t.CtaColor?t.CtaColor:"#ffffff"}"></path>\n        </svg>\n        `;break;case"Email":e=`\n        <svg ${nr} id="inavf" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32"\n            height="28" viewBox="0 0 41 32.8">\n            <path ${nr} id="Path_1218" data-gjs-type="svg-in" data-name="Path 1218"\n                d="M6.1,4A4.068,4.068,0,0,0,2.789,5.7a1.5,1.5,0,0,0,.444,2.126l18,11.219a2.387,2.387,0,0,0,2.531,0L41.691,7.732a1.5,1.5,0,0,0,.384-2.2A4.063,4.063,0,0,0,38.9,4Zm35.907,8.376a.963.963,0,0,0-.508.152L23.765,23.711a2.392,2.392,0,0,1-2.531,0L3.5,12.656a.98.98,0,0,0-1.5.833V32.7a4.1,4.1,0,0,0,4.1,4.1H38.9A4.1,4.1,0,0,0,43,32.7V13.357A.981.981,0,0,0,42.007,12.376Z"\n                transform="translate(-2 -4)" fill="${t.CtaColor?t.CtaColor:"#ffffff"}"></path>\n        </svg>\n        `;break;case"WebLink":e=`\n        <svg ${nr} xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16">\n          <path${nr} id="Path_1213" data-name="Path 1213" d="M15.833,4a4.163,4.163,0,0,0-2.958,1.229l-.979.979a4.168,4.168,0,0,0-1.229,2.958,4.1,4.1,0,0,0,.292,1.521L12.042,9.6a2.857,2.857,0,0,1,.792-2.458l.979-.979a2.853,2.853,0,0,1,2.021-.833,2.805,2.805,0,0,1,2,.833,2.85,2.85,0,0,1,0,4.021l-.979.979A2.853,2.853,0,0,1,14.833,12a2.439,2.439,0,0,1-.437-.042l-1.083,1.083a4.1,4.1,0,0,0,1.521.292A4.163,4.163,0,0,0,17.792,12.1l.979-.979A4.168,4.168,0,0,0,20,8.167,4.2,4.2,0,0,0,15.833,4ZM14.188,8.854,8.854,14.188l.958.958,5.333-5.333ZM9.167,10.667A4.163,4.163,0,0,0,6.208,11.9l-.979.979A4.168,4.168,0,0,0,4,15.833,4.2,4.2,0,0,0,8.167,20a4.163,4.163,0,0,0,2.958-1.229l.979-.979a4.168,4.168,0,0,0,1.229-2.958,4.1,4.1,0,0,0-.292-1.521L11.958,14.4a2.857,2.857,0,0,1-.792,2.458l-.979.979a2.853,2.853,0,0,1-2.021.833,2.805,2.805,0,0,1-2-.833,2.85,2.85,0,0,1,0-4.021l.979-.979A2.853,2.853,0,0,1,9.167,12a2.44,2.44,0,0,1,.438.042l1.083-1.083A4.1,4.1,0,0,0,9.167,10.667Z" transform="translate(-4 -4)" fill="${t.CtaColor?t.CtaColor:"#ffffff"}"></path>\n        </svg>\n        `;break;case"Form":e=`\n        <svg ${nr} id="igqdh" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="26" height="30"\n              viewBox="0 0 13 16">\n              <path ${nr} id="Path_1209" data-gjs-type="svg-in" data-name="Path 1209"\n                  d="M9.828,4A1.823,1.823,0,0,0,8,5.8V18.2A1.823,1.823,0,0,0,9.828,20h9.344A1.823,1.823,0,0,0,21,18.2V9.8a.6.6,0,0,0-.179-.424l-.006-.006L15.54,4.176A.614.614,0,0,0,15.109,4Zm0,1.2H14.5V8.6a1.823,1.823,0,0,0,1.828,1.8h3.453v7.8a.6.6,0,0,1-.609.6H9.828a.6.6,0,0,1-.609-.6V5.8A.6.6,0,0,1,9.828,5.2Zm5.891.848L18.92,9.2H16.328a.6.6,0,0,1-.609-.6Z"\n                  transform="translate(-8 -4)" fill="${t.CtaColor?t.CtaColor:"#ffffff"}"></path>\n          </svg>\n        `}return e}generateContent(t){return"Image"===t.ContentType&&""!==t.ContentValue?this.contentImage(t):"Description"===t.ContentType&&""!==t.ContentValue?this.contentDescription(t):""}generateHTML(){var t,e,n,i;let a="",o="";return(null===(e=null===(t=this.data)||void 0===t?void 0:t.PageContentStructure)||void 0===e?void 0:e.Content)&&Array.isArray(this.data.PageContentStructure.Content)&&(a=this.data.PageContentStructure.Content.map((t=>this.generateContent(t))).join("")),(null===(i=null===(n=this.data)||void 0===n?void 0:n.PageContentStructure)||void 0===i?void 0:i.Cta)&&Array.isArray(this.data.PageContentStructure.Cta)&&(o=this.data.PageContentStructure.Cta.map((t=>this.generateCta(t))).join("")),`\n            <div ${nr} id="frame-container" data-gjs-type="template-wrapper" class="content-frame-container">\n                <div ${nr} class="container-column">\n                    <div ${nr} class="container-row">\n                        <div ${nr} data-gjs-type="default" class="template-wrapper">\n                            <div \n    data-gjs-type="template-wrapper"\n    data-gjs-draggable="false"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-highlightable="true"\n    data-gjs-droppable="[data-gjs-type='product-service-description'], [data-gjs-type='product-service-image']"\n data-gjs-type="default" class="content-page-wrapper">\n                                ${a}\n                            </div>\n                        </div>\n                    </div> \n                    ${o?`\n                      <div ${rr} class="cta-button-container" style="gap: 0.2rem;">\n                          ${o}\n                      </div>`:`\n                      <div ${rr} class="cta-button-container" style="gap: 0.2rem;"></div>`}         \n                      <i class="fa fa-pencil></i>\n                </div>\n            </div>\n        `}addGrapesAttributes(t){const e=document.createElement("div");return"string"==typeof t&&(e.innerHTML=t),e.querySelectorAll("*").forEach((t=>{t.setAttribute("data-gjs-draggable","false"),t.setAttribute("data-gjs-selectable","false"),t.setAttribute("data-gjs-editable","false"),t.setAttribute("data-gjs-highlightable","false"),t.setAttribute("data-gjs-droppable","false"),t.setAttribute("data-gjs-resizable","false"),t.setAttribute("data-gjs-hoverable","false")})),e.innerHTML}contentImage(t){var e,n,i,a;return`\n    <div ${ar} class="content-image" id="${(null==t?void 0:t.ContentId)?null==t?void 0:t.ContentId:cr(15)}" data-gjs-type="product-service-image">\n        <button ${nr} class="tb-edit-image-icon"\n        ${"Location"===(null===(e=this.data)||void 0===e?void 0:e.PageType)||"Reception"===(null===(n=this.data)||void 0===n?void 0:n.PageType)?'style="right: -20px"':""}>\n            <svg ${nr} width="14px" height="14px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path ${nr} fill-rule="evenodd" clip-rule="evenodd" d="M18.4324 4C18.2266 4 18.0227 4.04055 17.8325 4.11933C17.6423 4.19811 17.4695 4.31358 17.3239 4.45914L5.25659 16.5265L4.42524 19.5748L7.47353 18.7434L19.5409 6.67608C19.6864 6.53051 19.8019 6.3577 19.8807 6.16751C19.9595 5.97732 20 5.77348 20 5.56761C20 5.36175 19.9595 5.1579 19.8807 4.96771C19.8019 4.77752 19.6864 4.60471 19.5409 4.45914C19.3953 4.31358 19.2225 4.19811 19.0323 4.11933C18.8421 4.04055 18.6383 4 18.4324 4ZM17.0671 2.27157C17.5 2.09228 17.9639 2 18.4324 2C18.9009 2 19.3648 2.09228 19.7977 2.27157C20.2305 2.45086 20.6238 2.71365 20.9551 3.04493C21.2864 3.37621 21.5492 3.7695 21.7285 4.20235C21.9077 4.63519 22 5.09911 22 5.56761C22 6.03611 21.9077 6.50003 21.7285 6.93288C21.5492 7.36572 21.2864 7.75901 20.9551 8.09029L8.69996 20.3454C8.57691 20.4685 8.42387 20.5573 8.25597 20.6031L3.26314 21.9648C2.91693 22.0592 2.54667 21.9609 2.29292 21.7071C2.03917 21.4534 1.94084 21.0831 2.03526 20.7369L3.39694 15.7441C3.44273 15.5762 3.53154 15.4231 3.6546 15.3001L15.9097 3.04493C16.241 2.71365 16.6343 2.45086 17.0671 2.27157Z" fill="#5068a8"/>\n            </svg>\n          </button>\n          ${"Location"===(null===(i=this.data)||void 0===i?void 0:i.PageType)||"Reception"===(null===(a=this.data)||void 0===a?void 0:a.PageType)?"":`\n          <button ${nr} class="tb-delete-image-icon">\n            <svg fill="#5068a8" ${nr} width="14px" height="14px" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                <title ${nr}>delete</title>\n                <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-1" d="M27.14,34H8.86A2.93,2.93,0,0,1,6,31V11.23H8V31a.93.93,0,0,0,.86,1H27.14A.93.93,0,0,0,28,31V11.23h2V31A2.93,2.93,0,0,1,27.14,34Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M30.78,9H5A1,1,0,0,1,5,7H30.78a1,1,0,0,1,0,2Z"></path>\n                <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-3" x="21" y="13" width="2" height="15"></rect>\n                <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-4" x="13" y="13" width="2" height="15"></rect>\n                <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-5" d="M23,5.86H21.1V4H14.9V5.86H13V4a2,2,0,0,1,1.9-2h6.2A2,2,0,0,1,23,4Z"></path>\n                <rect fill="#5068a8" ${nr} x="0" y="0" width="36" height="36" fill-opacity="0"/>\n            </svg>\n          </button>\n          `}\n        <img\n            id="product-service-image"\n            ${nr}\n            src="${null==t?void 0:t.ContentValue}"\n            data-gjs-type="default"\n            alt="Full-width Image"\n        />\n      </div>\n    `}contentDescription(t){return`\n    <div\n        style="flex: 1; padding: 0; margin: 0; height: auto; white-space: normal;"\n        class="content-page-block"\n        ${ar} \n        id="${(null==t?void 0:t.ContentId)?null==t?void 0:t.ContentId:cr(15)}"\n        data-gjs-type="product-service-description"\n    >\n      <button ${nr} class="tb-edit-content-icon">\n        <svg ${nr} width="14px" height="14px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path ${nr} fill-rule="evenodd" clip-rule="evenodd" d="M18.4324 4C18.2266 4 18.0227 4.04055 17.8325 4.11933C17.6423 4.19811 17.4695 4.31358 17.3239 4.45914L5.25659 16.5265L4.42524 19.5748L7.47353 18.7434L19.5409 6.67608C19.6864 6.53051 19.8019 6.3577 19.8807 6.16751C19.9595 5.97732 20 5.77348 20 5.56761C20 5.36175 19.9595 5.1579 19.8807 4.96771C19.8019 4.77752 19.6864 4.60471 19.5409 4.45914C19.3953 4.31358 19.2225 4.19811 19.0323 4.11933C18.8421 4.04055 18.6383 4 18.4324 4ZM17.0671 2.27157C17.5 2.09228 17.9639 2 18.4324 2C18.9009 2 19.3648 2.09228 19.7977 2.27157C20.2305 2.45086 20.6238 2.71365 20.9551 3.04493C21.2864 3.37621 21.5492 3.7695 21.7285 4.20235C21.9077 4.63519 22 5.09911 22 5.56761C22 6.03611 21.9077 6.50003 21.7285 6.93288C21.5492 7.36572 21.2864 7.75901 20.9551 8.09029L8.69996 20.3454C8.57691 20.4685 8.42387 20.5573 8.25597 20.6031L3.26314 21.9648C2.91693 22.0592 2.54667 21.9609 2.29292 21.7071C2.03917 21.4534 1.94084 21.0831 2.03526 20.7369L3.39694 15.7441C3.44273 15.5762 3.53154 15.4231 3.6546 15.3001L15.9097 3.04493C16.241 2.71365 16.6343 2.45086 17.0671 2.27157Z" fill="#5068a8"/>\n        </svg>\n      </button>\n      ${this.addGrapesAttributes(`<div ${nr} id="contentDescription">${null==t?void 0:t.ContentValue}</div>`)}      \n    </div>\n    `}}class vl{constructor(t=!1,e=!1,n=!1,i=!1){this.isFirstSectionButton=t,this.isLastSectionButton=e,this.isBlankInfoPage=n,this.isUntitledPage=i}getHTML(){const t=["info-section-spacing-container",this.isFirstSectionButton?"first-section":"",this.isLastSectionButton?"last-section":"",this.isBlankInfoPage?"blank-page":"",this.isUntitledPage?"untitled-page":""].join(" ").trim();return`\n      <div ${nr} data-type="add-button" data-custom="add-button" class="${t}">\n        <div ${nr} class="add-new-info-section">\n          <hr ${nr} class="add-new-info-hr" />\n          <svg ${nr} xmlns="http://www.w3.org/2000/svg" id="Component_67_2" data-name="Component 67 – 2" width="30" height="30" viewBox="0 0 30 30">\n            <g ${nr} id="Group_2309" data-name="Group 2309">\n              <g ${nr} id="Group_2307" data-name="Group 2307">\n                <g ${nr} id="Ellipse_6" data-name="Ellipse 6" fill="#fdfdfd" stroke="#5068a8" stroke-width="1">\n                  <circle ${nr} cx="15" cy="15" r="15" stroke="none" />\n                  <circle ${nr} cx="15" cy="15" r="14.5" fill="none" />\n                </g>\n              </g>\n            </g>\n            <path ${nr} id="Icon_ionic-ios-add" data-name="Icon ionic-ios-add"\n              d="M21.895,15H16.717V9.823a.858.858,0,1,0-1.717,0V15H9.823a.858.858,0,0,0,0,1.717H15v5.177a.858.858,0,1,0,1.717,0V16.717h5.177a.858.858,0,1,0,0-1.717Z"\n              transform="translate(-0.692 -1.025)" fill="#5068a8" />\n          </svg>\n        </div>\n      </div>\n    `}}class bl{constructor(t,e=!1){this.data=t,this.isNewPage=e,this.themeManager=new $s}generateCta(t){const e=t.CtaAttributes;return"Image"===(null==e?void 0:e.CtaButtonType)?`<div id="${t.InfoId}" data-gjs-type="info-cta-section"\n                ${or} \n                  button-type="${e.CtaType}"\n                  class="img-button-container">\n                    <div ${nr} class="img-button cta-styled-btn"\n                        style="background-color: ${this.themeManager.getThemeCtaColor(e.CtaBGColor)}">\n                        <span ${nr} class="img-button-section">\n                            <img ${nr} src="${e.CtaButtonImgUrl}" />\n                            <span ${nr} class="edit-cta-image">\n                                ${e.CtaButtonImgUrl?`\n                                <svg ${nr} xmlns="http://www.w3.org/2000/svg" id="Component_57_1" data-name="Component 57 – 1" width="22" height="22" viewBox="0 0 33 33">\n                                  <g ${nr} id="Ellipse_532" data-name="Ellipse 532" fill="#fff" stroke="#5068a8" stroke-width="2">\n                                    <circle ${nr} cx="16.5" cy="16.5" r="16.5" stroke="none"/>\n                                    <circle ${nr} cx="16.5" cy="16.5" r="16" fill="none"/>\n                                  </g>\n                                  <path ${nr} id="Icon_feather-edit-2" data-name="Icon feather-edit-2" d="M12.834,3.8a1.854,1.854,0,0,1,2.622,2.622L6.606,15.274,3,16.257l.983-3.606Z" transform="translate(7 6.742)" fill="#5068a8" stroke="#5068a8" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>\n                                </svg>\n                                `:`\n                                 <svg ${nr} xmlns="http://www.w3.org/2000/svg" id="Component_53_4" data-name="Component 53 – 4" width="22" height="22" viewBox="0 0 22 22">\n                                    <g ${nr} id="Group_2309" data-name="Group 2309">\n                                        <g ${nr} id="Group_2307" data-name="Group 2307">\n                                        <g ${nr} id="Ellipse_6" data-name="Ellipse 6" fill="#fdfdfd" stroke="#5068a8" stroke-width="1">\n                                            <circle ${nr} cx="11" cy="11" r="11" stroke="none"/>\n                                            <circle ${nr} cx="11" cy="11" r="10.5" fill="none"/>\n                                        </g>\n                                        </g>\n                                    </g>\n                                    <path ${nr} id="Icon_ionic-ios-add" data-name="Icon ionic-ios-add" d="M18.342,13.342H14.587V9.587a.623.623,0,1,0-1.245,0v3.755H9.587a.623.623,0,0,0,0,1.245h3.755v3.755a.623.623,0,1,0,1.245,0V14.587h3.755a.623.623,0,1,0,0-1.245Z" transform="translate(-2.965 -2.965)" fill="#5068a8"/>\n                                </svg>\n                                `}\n                            </span>\n                        </span>\n                        <div${nr} class="cta-badge">\n                            <svg fill="#5068a8" ${nr} width="14px" height="14px" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                <title ${nr}>delete</title>\n                <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-1" d="M27.14,34H8.86A2.93,2.93,0,0,1,6,31V11.23H8V31a.93.93,0,0,0,.86,1H27.14A.93.93,0,0,0,28,31V11.23h2V31A2.93,2.93,0,0,1,27.14,34Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M30.78,9H5A1,1,0,0,1,5,7H30.78a1,1,0,0,1,0,2Z"></path>\n                <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-3" x="21" y="13" width="2" height="15"></rect>\n                <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-4" x="13" y="13" width="2" height="15"></rect>\n                <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-5" d="M23,5.86H21.1V4H14.9V5.86H13V4a2,2,0,0,1,1.9-2h6.2A2,2,0,0,1,23,4Z"></path>\n                <rect fill="#5068a8" ${nr} x="0" y="0" width="36" height="36" fill-opacity="0"/>\n            </svg>\n                        </div>\n                        <span ${nr} style="color:${e.CtaColor?e.CtaColor:"#ffffff"}" class="img-button-label label">${this.getCtaLabel(e)}</span>\n                        <i ${nr} style="color:${e.CtaColor?e.CtaColor:"#ffffff"}" class="fa fa-angle-right img-button-arrow"></i>\n                    </div>\n                </div>`:"FullWidth"===(null==e?void 0:e.CtaButtonType)?`\n            <div\n                id="${t.InfoId}"\n                ${or} \n                data-gjs-type="info-cta-section"\n                button-type="${e.CtaType}"\n                class="plain-button-container"\n            >\n                <button ${nr} id="ibob6" data-gjs-type="default" class="plain-button cta-styled-btn"\n                  style="background-color: ${this.themeManager.getThemeCtaColor(e.CtaBGColor)}">\n                    <div ${nr} id="iyocy" data-gjs-type="default" class="cta-badge">\n                    <svg id="ifxn6" fill="#5068a8" ${nr} width="14px" height="14px" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                        <title ${nr}>delete</title>\n                        <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-1" d="M27.14,34H8.86A2.93,2.93,0,0,1,6,31V11.23H8V31a.93.93,0,0,0,.86,1H27.14A.93.93,0,0,0,28,31V11.23h2V31A2.93,2.93,0,0,1,27.14,34Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M30.78,9H5A1,1,0,0,1,5,7H30.78a1,1,0,0,1,0,2Z"></path>\n                        <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-3" x="21" y="13" width="2" height="15"></rect>\n                        <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-4" x="13" y="13" width="2" height="15"></rect>\n                        <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-5" d="M23,5.86H21.1V4H14.9V5.86H13V4a2,2,0,0,1,1.9-2h6.2A2,2,0,0,1,23,4Z"></path>\n                        <rect fill="#5068a8" ${nr} x="0" y="0" width="36" height="36" fill-opacity="0"/>\n                    </svg>\n                    </div>\n                    \n                    <span ${nr} style="color:${e.CtaColor?e.CtaColor:"#ffffff"}" class="label">${this.getCtaLabel(e)}</span>\n                </button>\n            </div>\n            `:"Icon"===(null==e?void 0:e.CtaButtonType)?`\n          <div id="${t.InfoId}" data-gjs-type="info-cta-section"\n            ${or} \n              button-type="${e.CtaType}"\n              class="img-button-container">\n                <div ${nr} class="img-button cta-styled-btn"\n                    style="background-color: ${this.themeManager.getThemeCtaColor(e.CtaBGColor)}">\n                    <span ${nr} class="img-button-icon">\n                      ${this.ctaIcon(e)}\n                      <svg class="icon-edit-button" title="Change icon" ${nr} xmlns="http://www.w3.org/2000/svg" id="Component_57_1" data-name="Component 57 – 1" width="20" height="20" viewBox="0 0 33 33">\n                        <g ${nr} id="Ellipse_532" data-name="Ellipse 532" fill="#fff" stroke="#5068a8" stroke-width="2">\n                          <circle ${nr} cx="16.5" cy="16.5" r="16.5" stroke="none"/>\n                          <circle ${nr} cx="16.5" cy="16.5" r="16" fill="none"/>\n                        </g>\n                        <path ${nr} id="Icon_feather-edit-2" data-name="Icon feather-edit-2" d="M12.834,3.8a1.854,1.854,0,0,1,2.622,2.622L6.606,15.274,3,16.257l.983-3.606Z" transform="translate(7 6.742)" fill="#5068a8" stroke="#5068a8" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>\n                      </svg>\n                    </span>\n                    <div${nr} class="cta-badge">\n                        <svg fill="#5068a8" ${nr} width="14px" height="14px" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                          <title ${nr}>delete</title>\n                          <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-1" d="M27.14,34H8.86A2.93,2.93,0,0,1,6,31V11.23H8V31a.93.93,0,0,0,.86,1H27.14A.93.93,0,0,0,28,31V11.23h2V31A2.93,2.93,0,0,1,27.14,34Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M30.78,9H5A1,1,0,0,1,5,7H30.78a1,1,0,0,1,0,2Z"></path>\n                          <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-3" x="21" y="13" width="2" height="15"></rect>\n                          <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-4" x="13" y="13" width="2" height="15"></rect>\n                          <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-5" d="M23,5.86H21.1V4H14.9V5.86H13V4a2,2,0,0,1,1.9-2h6.2A2,2,0,0,1,23,4Z"></path>\n                          <rect fill="#5068a8" ${nr} x="0" y="0" width="36" height="36" fill-opacity="0"/>\n                      </svg>\n                    </div>\n                    <span ${nr} style="color:${e.CtaColor?e.CtaColor:"#ffffff"}" class="img-button-label label">${this.getCtaLabel(e)}</span>\n                    <i ${nr} style="color:${e.CtaColor?e.CtaColor:"#ffffff"}" class="fa fa-angle-right img-button-arrow"></i>\n                </div>\n            </div>\n      `:"Round"===(null==e?void 0:e.CtaButtonType)?`\n            <div ${or}\n              data-gjs-type="info-cta-section"\n              button-type="${e.CtaType}"\n              class="cta-container-child cta-child"\n              id="${t.InfoId}">\n                <div class="cta-button cta-styled-btn" ${nr}\n                  style="background-color: ${this.themeManager.getThemeCtaColor(e.CtaBGColor)}">\n                    ${this.ctaIcon(e)}\n                    <div class="cta-badge" ${nr}>\n                    <svg fill="#5068a8" ${nr} width="14px" height="14px" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                <title ${nr}>delete</title>\n                <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-1" d="M27.14,34H8.86A2.93,2.93,0,0,1,6,31V11.23H8V31a.93.93,0,0,0,.86,1H27.14A.93.93,0,0,0,28,31V11.23h2V31A2.93,2.93,0,0,1,27.14,34Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M30.78,9H5A1,1,0,0,1,5,7H30.78a1,1,0,0,1,0,2Z"></path>\n                <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-3" x="21" y="13" width="2" height="15"></rect>\n                <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-4" x="13" y="13" width="2" height="15"></rect>\n                <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-5" d="M23,5.86H21.1V4H14.9V5.86H13V4a2,2,0,0,1,1.9-2h6.2A2,2,0,0,1,23,4Z"></path>\n                <rect fill="#5068a8" ${nr} x="0" y="0" width="36" height="36" fill-opacity="0"/>\n            </svg>\n                    </div>\n                </div>\n                <span class="cta-label label" ${nr}>${this.getCtaLabel(e)}</span>\n            </div>\n            `:void 0}getCtaLabel(t){let e=t.CtaLabel;return e?(e="Round"===t.CtaButtonType?hr(e,10):hr(e,14),e):""}ctaIcon(t){var e;if(!t.CtaButtonIcon){let e;switch(t.CtaType){case"Phone":e=`\n        <svg ${nr} id="ixdtl" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32" height="32"\n                    viewBox="0 0 49.417 49.418">\n            <path ${nr} id="call" data-gjs-type="svg-in"\n                d="M29.782,3a2.149,2.149,0,1,0,0,4.3A19.3,19.3,0,0,1,49.119,26.634a2.149,2.149,0,1,0,4.3,0A23.667,23.667,0,0,0,29.782,3ZM12.032,7.305a2.548,2.548,0,0,0-.818.067,8.342,8.342,0,0,0-3.9,2.342C2.775,14.254.366,21.907,17.437,38.98S42.16,53.643,46.7,49.1a8.348,8.348,0,0,0,2.346-3.907,2.524,2.524,0,0,0-1.179-2.786c-2.424-1.418-7.654-4.484-10.08-5.9a2.523,2.523,0,0,0-2.568.012l-4.012,2.392a2.517,2.517,0,0,1-2.845-.168,65.811,65.811,0,0,1-5.711-4.981,65.07,65.07,0,0,1-4.981-5.711A2.512,2.512,0,0,1,17.5,25.2L19.9,21.191a2.533,2.533,0,0,0,.008-2.577L14.012,8.556A2.543,2.543,0,0,0,12.032,7.305Zm17.751,4.289a2.149,2.149,0,1,0,0,4.3A10.709,10.709,0,0,1,40.525,26.634a2.149,2.149,0,1,0,4.3,0A15.072,15.072,0,0,0,29.782,11.594Zm0,8.594a2.149,2.149,0,1,0,0,4.3,2.114,2.114,0,0,1,2.149,2.148,2.149,2.149,0,1,0,4.3,0A6.479,6.479,0,0,0,29.782,20.188Z"\n                transform="translate(-4 -3)" fill="${t.CtaColor?t.CtaColor:"#ffffff"}"></path>\n        </svg>\n        `;break;case"Email":e=`\n        <svg ${nr} id="inavf" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32"\n            height="28" viewBox="0 0 41 32.8">\n            <path ${nr} id="Path_1218" data-gjs-type="svg-in" data-name="Path 1218"\n                d="M6.1,4A4.068,4.068,0,0,0,2.789,5.7a1.5,1.5,0,0,0,.444,2.126l18,11.219a2.387,2.387,0,0,0,2.531,0L41.691,7.732a1.5,1.5,0,0,0,.384-2.2A4.063,4.063,0,0,0,38.9,4Zm35.907,8.376a.963.963,0,0,0-.508.152L23.765,23.711a2.392,2.392,0,0,1-2.531,0L3.5,12.656a.98.98,0,0,0-1.5.833V32.7a4.1,4.1,0,0,0,4.1,4.1H38.9A4.1,4.1,0,0,0,43,32.7V13.357A.981.981,0,0,0,42.007,12.376Z"\n                transform="translate(-2 -4)" fill="${t.CtaColor?t.CtaColor:"#ffffff"}"></path>\n        </svg>\n        `;break;case"WebLink":e=`\n        <svg ${nr} xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16">\n          <path${nr} id="Path_1213" data-name="Path 1213" d="M15.833,4a4.163,4.163,0,0,0-2.958,1.229l-.979.979a4.168,4.168,0,0,0-1.229,2.958,4.1,4.1,0,0,0,.292,1.521L12.042,9.6a2.857,2.857,0,0,1,.792-2.458l.979-.979a2.853,2.853,0,0,1,2.021-.833,2.805,2.805,0,0,1,2,.833,2.85,2.85,0,0,1,0,4.021l-.979.979A2.853,2.853,0,0,1,14.833,12a2.439,2.439,0,0,1-.437-.042l-1.083,1.083a4.1,4.1,0,0,0,1.521.292A4.163,4.163,0,0,0,17.792,12.1l.979-.979A4.168,4.168,0,0,0,20,8.167,4.2,4.2,0,0,0,15.833,4ZM14.188,8.854,8.854,14.188l.958.958,5.333-5.333ZM9.167,10.667A4.163,4.163,0,0,0,6.208,11.9l-.979.979A4.168,4.168,0,0,0,4,15.833,4.2,4.2,0,0,0,8.167,20a4.163,4.163,0,0,0,2.958-1.229l.979-.979a4.168,4.168,0,0,0,1.229-2.958,4.1,4.1,0,0,0-.292-1.521L11.958,14.4a2.857,2.857,0,0,1-.792,2.458l-.979.979a2.853,2.853,0,0,1-2.021.833,2.805,2.805,0,0,1-2-.833,2.85,2.85,0,0,1,0-4.021l.979-.979A2.853,2.853,0,0,1,9.167,12a2.44,2.44,0,0,1,.438.042l1.083-1.083A4.1,4.1,0,0,0,9.167,10.667Z" transform="translate(-4 -4)" fill="${t.CtaColor?t.CtaColor:"#ffffff"}"></path>\n        </svg>\n        `;break;case"Form":e=`\n        <svg ${nr} id="igqdh" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="26" height="30"\n              viewBox="0 0 13 16">\n              <path ${nr} id="Path_1209" data-gjs-type="svg-in" data-name="Path 1209"\n                  d="M9.828,4A1.823,1.823,0,0,0,8,5.8V18.2A1.823,1.823,0,0,0,9.828,20h9.344A1.823,1.823,0,0,0,21,18.2V9.8a.6.6,0,0,0-.179-.424l-.006-.006L15.54,4.176A.614.614,0,0,0,15.109,4Zm0,1.2H14.5V8.6a1.823,1.823,0,0,0,1.828,1.8h3.453v7.8a.6.6,0,0,1-.609.6H9.828a.6.6,0,0,1-.609-.6V5.8A.6.6,0,0,1,9.828,5.2Zm5.891.848L18.92,9.2H16.328a.6.6,0,0,1-.609-.6Z"\n                  transform="translate(-8 -4)" fill="${t.CtaColor?t.CtaColor:"#ffffff"}"></path>\n          </svg>\n        `}return e}{const n=null===(e=vr.find((e=>e.name===t.CtaButtonIcon)))||void 0===e?void 0:e.svg,i=document.createElement("div");i.innerHTML=n||"";const a=i.querySelector("svg");if(a)return a.setAttribute("height","32"),a.setAttribute("width","32"),a.querySelectorAll("path").forEach((e=>{e.setAttribute("fill",(null==t?void 0:t.CtaColor)||"#fff")})),this.addGrapesAttributes(i.innerHTML)}}generateInfoContent(t){return"Image"===t.InfoType&&""!==t.InfoValue?this.contentInfoImage(t):"Description"===t.InfoType&&""!==t.InfoValue?this.contentInfoDescription(t):"Cta"===t.InfoType&&t.CtaAttributes?this.generateCta(t):"TileRow"===t.InfoType&&t.Tiles?new ll(this.data).generateInfoRow(t):""}generateHTML(){var t,e;let n="";const i=null===(e=null===(t=this.data)||void 0===t?void 0:t.PageInfoStructure)||void 0===e?void 0:e.InfoContent,a="content-frame-container"+(Array.isArray(i)&&0!==i.length?"":" empty-state");if(Array.isArray(i)&&i.length>0){const t=new vl(!0).getHTML(),e=new vl(!1,!0).getHTML(),a=(new vl).getHTML();n+=t,n+=i.map(((t,n)=>this.generateInfoContent(t)+(n===i.length-1?e:a))).join("")}else n=new vl(!1,!0,this.isNewPage||"Untitled"===this.data.PageName).getHTML();return`\n        <div ${nr} id="frame-container" data-gjs-type="template-wrapper" class="${a}">\n            <div \n    data-gjs-type="template-wrapper"\n    data-gjs-draggable="false"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-highlightable="true"\n    data-gjs-droppable="[data-gjs-type='info-desc-section'], [data-gjs-type='info-image-section'], [data-gjs-type='info-cta-section'], [data-gjs-type='info-tiles-section']"\n class="container-column-info">\n                ${n}\n            </div>\n        </div>\n    `}addGrapesAttributes(t){const e=document.createElement("div");return"string"==typeof t&&(e.innerHTML=t),e.querySelectorAll("*").forEach((t=>{t.setAttribute("data-gjs-draggable","false"),t.setAttribute("data-gjs-selectable","false"),t.setAttribute("data-gjs-editable","false"),t.setAttribute("data-gjs-highlightable","false"),t.setAttribute("data-gjs-droppable","false"),t.setAttribute("data-gjs-resizable","false"),t.setAttribute("data-gjs-hoverable","false")})),e.innerHTML}contentInfoImage(t){var e,n,i,a;return`\n    <div ${ar} class="info-image-section" id="${(null==t?void 0:t.InfoId)?null==t?void 0:t.InfoId:cr(15)}" data-gjs-type="info-image-section">\n    <button ${nr} class="tb-edit-image-icon"\n        ${"Location"===(null===(e=this.data)||void 0===e?void 0:e.PageType)||"Reception"===(null===(n=this.data)||void 0===n?void 0:n.PageType)?'style="right: -20px"':""}>\n            <svg ${nr} width="14px" height="14px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path ${nr} fill-rule="evenodd" clip-rule="evenodd" d="M18.4324 4C18.2266 4 18.0227 4.04055 17.8325 4.11933C17.6423 4.19811 17.4695 4.31358 17.3239 4.45914L5.25659 16.5265L4.42524 19.5748L7.47353 18.7434L19.5409 6.67608C19.6864 6.53051 19.8019 6.3577 19.8807 6.16751C19.9595 5.97732 20 5.77348 20 5.56761C20 5.36175 19.9595 5.1579 19.8807 4.96771C19.8019 4.77752 19.6864 4.60471 19.5409 4.45914C19.3953 4.31358 19.2225 4.19811 19.0323 4.11933C18.8421 4.04055 18.6383 4 18.4324 4ZM17.0671 2.27157C17.5 2.09228 17.9639 2 18.4324 2C18.9009 2 19.3648 2.09228 19.7977 2.27157C20.2305 2.45086 20.6238 2.71365 20.9551 3.04493C21.2864 3.37621 21.5492 3.7695 21.7285 4.20235C21.9077 4.63519 22 5.09911 22 5.56761C22 6.03611 21.9077 6.50003 21.7285 6.93288C21.5492 7.36572 21.2864 7.75901 20.9551 8.09029L8.69996 20.3454C8.57691 20.4685 8.42387 20.5573 8.25597 20.6031L3.26314 21.9648C2.91693 22.0592 2.54667 21.9609 2.29292 21.7071C2.03917 21.4534 1.94084 21.0831 2.03526 20.7369L3.39694 15.7441C3.44273 15.5762 3.53154 15.4231 3.6546 15.3001L15.9097 3.04493C16.241 2.71365 16.6343 2.45086 17.0671 2.27157Z" fill="#5068a8"/>\n            </svg>\n          </button>\n          ${"Location"===(null===(i=this.data)||void 0===i?void 0:i.PageType)||"Reception"===(null===(a=this.data)||void 0===a?void 0:a.PageType)?"":`\n          <button ${nr} class="tb-delete-image-icon">\n            <svg fill="#5068a8" ${nr} width="14px" height="14px" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                <title ${nr}>delete</title>\n                <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-1" d="M27.14,34H8.86A2.93,2.93,0,0,1,6,31V11.23H8V31a.93.93,0,0,0,.86,1H27.14A.93.93,0,0,0,28,31V11.23h2V31A2.93,2.93,0,0,1,27.14,34Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M30.78,9H5A1,1,0,0,1,5,7H30.78a1,1,0,0,1,0,2Z"></path>\n                <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-3" x="21" y="13" width="2" height="15"></rect>\n                <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-4" x="13" y="13" width="2" height="15"></rect>\n                <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-5" d="M23,5.86H21.1V4H14.9V5.86H13V4a2,2,0,0,1,1.9-2h6.2A2,2,0,0,1,23,4Z"></path>\n                <rect fill="#5068a8" ${nr} x="0" y="0" width="36" height="36" fill-opacity="0"/>\n            </svg>\n          </button>\n          `}\n        <img\n            class="product-service-image"\n            ${nr}\n            src="${t.InfoValue}"\n            data-gjs-type="default"\n            alt="Full-width Image"\n            style="border: 1px dashed #222f54;"\n        />\n      </div>\n    `}contentInfoDescription(t){return`<div\n              style="flex: 1; padding: 0; margin: 0; height: auto; white-space: normal;"\n              class="info-desc-section"\n              ${ar}\n              id="${(null==t?void 0:t.InfoId)?null==t?void 0:t.InfoId:cr(15)}"\n              data-gjs-type="info-desc-section"\n          >\n            <button ${nr} class="tb-edit-content-icon">\n              <svg ${nr} width="14px" height="14px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path ${nr} fill-rule="evenodd" clip-rule="evenodd" d="M18.4324 4C18.2266 4 18.0227 4.04055 17.8325 4.11933C17.6423 4.19811 17.4695 4.31358 17.3239 4.45914L5.25659 16.5265L4.42524 19.5748L7.47353 18.7434L19.5409 6.67608C19.6864 6.53051 19.8019 6.3577 19.8807 6.16751C19.9595 5.97732 20 5.77348 20 5.56761C20 5.36175 19.9595 5.1579 19.8807 4.96771C19.8019 4.77752 19.6864 4.60471 19.5409 4.45914C19.3953 4.31358 19.2225 4.19811 19.0323 4.11933C18.8421 4.04055 18.6383 4 18.4324 4ZM17.0671 2.27157C17.5 2.09228 17.9639 2 18.4324 2C18.9009 2 19.3648 2.09228 19.7977 2.27157C20.2305 2.45086 20.6238 2.71365 20.9551 3.04493C21.2864 3.37621 21.5492 3.7695 21.7285 4.20235C21.9077 4.63519 22 5.09911 22 5.56761C22 6.03611 21.9077 6.50003 21.7285 6.93288C21.5492 7.36572 21.2864 7.75901 20.9551 8.09029L8.69996 20.3454C8.57691 20.4685 8.42387 20.5573 8.25597 20.6031L3.26314 21.9648C2.91693 22.0592 2.54667 21.9609 2.29292 21.7071C2.03917 21.4534 1.94084 21.0831 2.03526 20.7369L3.39694 15.7441C3.44273 15.5762 3.53154 15.4231 3.6546 15.3001L15.9097 3.04493C16.241 2.71365 16.6343 2.45086 17.0671 2.27157Z" fill="#5068a8"/>\n              </svg>\n            </button>\n            <button ${nr} class="tb-delete-image-icon">\n                <svg fill="#5068a8" ${nr} width="14px" height="14px" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                    <title ${nr}>delete</title>\n                    <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-1" d="M27.14,34H8.86A2.93,2.93,0,0,1,6,31V11.23H8V31a.93.93,0,0,0,.86,1H27.14A.93.93,0,0,0,28,31V11.23h2V31A2.93,2.93,0,0,1,27.14,34Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M30.78,9H5A1,1,0,0,1,5,7H30.78a1,1,0,0,1,0,2Z"></path>\n                    <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-3" x="21" y="13" width="2" height="15"></rect>\n                    <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-4" x="13" y="13" width="2" height="15"></rect>\n                    <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-5" d="M23,5.86H21.1V4H14.9V5.86H13V4a2,2,0,0,1,1.9-2h6.2A2,2,0,0,1,23,4Z"></path>\n                    <rect fill="#5068a8" ${nr} x="0" y="0" width="36" height="36" fill-opacity="0"/>\n                </svg>\n            </button>\n            ${this.addGrapesAttributes(`<div ${nr} class="info-desc-content">${null==t?void 0:t.InfoValue}</div>`)}      \n          </div>\n    `}getDefaultContent(){var t,e,n,i;return`\n    <div ${ar} class="info-image-section" id="${cr(15)}" data-gjs-type="info-image-section">\n        <button ${nr} class="tb-edit-image-icon"\n        ${"Location"===(null===(t=this.data)||void 0===t?void 0:t.PageType)||"Reception"===(null===(e=this.data)||void 0===e?void 0:e.PageType)?'style="right: -20px"':""}>\n            <svg ${nr} width="14px" height="14px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path ${nr} fill-rule="evenodd" clip-rule="evenodd" d="M18.4324 4C18.2266 4 18.0227 4.04055 17.8325 4.11933C17.6423 4.19811 17.4695 4.31358 17.3239 4.45914L5.25659 16.5265L4.42524 19.5748L7.47353 18.7434L19.5409 6.67608C19.6864 6.53051 19.8019 6.3577 19.8807 6.16751C19.9595 5.97732 20 5.77348 20 5.56761C20 5.36175 19.9595 5.1579 19.8807 4.96771C19.8019 4.77752 19.6864 4.60471 19.5409 4.45914C19.3953 4.31358 19.2225 4.19811 19.0323 4.11933C18.8421 4.04055 18.6383 4 18.4324 4ZM17.0671 2.27157C17.5 2.09228 17.9639 2 18.4324 2C18.9009 2 19.3648 2.09228 19.7977 2.27157C20.2305 2.45086 20.6238 2.71365 20.9551 3.04493C21.2864 3.37621 21.5492 3.7695 21.7285 4.20235C21.9077 4.63519 22 5.09911 22 5.56761C22 6.03611 21.9077 6.50003 21.7285 6.93288C21.5492 7.36572 21.2864 7.75901 20.9551 8.09029L8.69996 20.3454C8.57691 20.4685 8.42387 20.5573 8.25597 20.6031L3.26314 21.9648C2.91693 22.0592 2.54667 21.9609 2.29292 21.7071C2.03917 21.4534 1.94084 21.0831 2.03526 20.7369L3.39694 15.7441C3.44273 15.5762 3.53154 15.4231 3.6546 15.3001L15.9097 3.04493C16.241 2.71365 16.6343 2.45086 17.0671 2.27157Z" fill="#5068a8"/>\n            </svg>\n          </button>\n          ${"Location"===(null===(n=this.data)||void 0===n?void 0:n.PageType)||"Reception"===(null===(i=this.data)||void 0===i?void 0:i.PageType)?"":`\n          <button ${nr} class="tb-delete-image-icon">\n            <svg fill="#5068a8" ${nr} width="14px" height="14px" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                <title ${nr}>delete</title>\n                <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-1" d="M27.14,34H8.86A2.93,2.93,0,0,1,6,31V11.23H8V31a.93.93,0,0,0,.86,1H27.14A.93.93,0,0,0,28,31V11.23h2V31A2.93,2.93,0,0,1,27.14,34Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M30.78,9H5A1,1,0,0,1,5,7H30.78a1,1,0,0,1,0,2Z"></path>\n                <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-3" x="21" y="13" width="2" height="15"></rect>\n                <rect fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-4" x="13" y="13" width="2" height="15"></rect>\n                <path fill="#5068a8" ${nr} class="clr-i-outline clr-i-outline-path-5" d="M23,5.86H21.1V4H14.9V5.86H13V4a2,2,0,0,1,1.9-2h6.2A2,2,0,0,1,23,4Z"></path>\n                <rect fill="#5068a8" ${nr} x="0" y="0" width="36" height="36" fill-opacity="0"/>\n            </svg>\n          </button>\n          `}\n        <img\n            class="product-service-image"\n            ${nr}\n            src="${o}/Resources/UCGrapes/dist/images/default.jpg"\n            data-gjs-type="default"\n            alt="Full-width Image"\n            style="border: 1px dashed #222f54;"\n        />\n      </div>\n    `}}class yl{constructor(t){this.editor=t,this.themeManager=new $s}load(){this.editor.setComponents(this.htmlData())}htmlData(){let t=`\n        <div class="tb-date-selector" \n          ${nr}\n          style="background-color: ${this.themeManager.getThemeColor("backgroundColor")};">\n          <span class="tb-arrow" ${nr}>❮</span>\n          <span class="tb-date-text" id="current-date" ${nr}> ${this.formatDate()}</span>\n          <span class="tb-arrow" ${nr}>❯</span>\n        </div>\n        <div class="tb-schedule" id="schedule-container" ${nr}>\n      `;for(let e=0;e<24;e++){const n=e.toString().padStart(2,"0")+":00";t+=`\n            <div class="tb-time-slot" ${nr}>\n              <div class="tb-time" ${nr}>${n}</div>\n              <div class="tb-events" ${nr}></div>\n              ${e===(new Date).getHours()?`\n                <div class="tb-current-time-indicator" ${nr}></div>\n                <div class="tb-current-time-dot" ${nr}></div>`:""}\n            </div>\n          `}return t+="</div>",t}formatDate(){return(new Date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(/(\d{2} \w{3}) (\d{4})/,"$1, $2")}}class wl{constructor(t,e){this.toolboxService=new r,this.editor=t,this.pageData=e}setupEditor(){return t=this,e=void 0,i=function*(){try{if(this.locationData=yield this.toolboxService.getLocationData(),!this.locationData)return void console.warn("Location data could not be retrieved.");const t=this.updatePageData(),e=new ml(t).generateHTML();this.editor.setComponents(e),localStorage.setItem(`data-${this.pageData.PageId}`,JSON.stringify(t))}catch(t){console.error("Error fetching location data:",t)}},new((n=void 0)||(n=Promise))((function(a,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}));var t,e,n,i}updatePageData(){var t,e,n;if(!(null===(e=null===(t=this.pageData)||void 0===t?void 0:t.PageContentStructure)||void 0===e?void 0:e.Content))return this.pageData;const i=(null===(n=this.locationData)||void 0===n?void 0:n.BC_Trn_Location)||{};return this.pageData.PageContentStructure.Content=this.pageData.PageContentStructure.Content.map((t=>"Image"===(null==t?void 0:t.ContentType)?Object.assign(Object.assign({},t),{ContentValue:i.LocationImage||t.ContentValue}):"Description"===(null==t?void 0:t.ContentType)?Object.assign(Object.assign({},t),{ContentValue:i.LocationDescription||t.ContentValue}):t)),this.pageData}}class Cl{constructor(t){this.editor=t,this.themeManager=new $s}load(){this.editor.setComponents(this.htmlData())}htmlData(){return`\n         <div class="tb-chat-container" ${nr}>\n            <div class="tb-toggle-buttons"  ${nr}>\n                <button style="background-color: ${this.themeManager.getThemeColor("backgroundColor")};border-radius: 6px;"  ${nr}>${Ms.t("Messages")}</button>\n                <button style="background-color: #e1e1e1;border-radius: 6px;color: #262626;"  ${nr}>${Ms.t("Requests")}</button>\n            </div>\n            <div class="tb-chat-body" ${nr}>${Ms.t("NoMessagesYet")}</div>\n         </div>\n         `}}class xl{constructor(t,e){this.toolboxService=new r,this.editor=t,this.pageData=e}setupEditor(){return t=this,e=void 0,i=function*(){try{if(this.locationData=yield this.toolboxService.getLocationData(),!this.locationData)return void console.warn("Location data could not be retrieved.");console.log("Location data retrieved:",this.locationData);const t=this.updatePageData(),e=new ml(t).generateHTML();this.editor.setComponents(e),localStorage.setItem(`data-${this.pageData.PageId}`,JSON.stringify(t))}catch(t){console.error("Error fetching location data:",t)}},new((n=void 0)||(n=Promise))((function(a,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}));var t,e,n,i}updatePageData(){var t,e,n;if(!(null===(e=null===(t=this.pageData)||void 0===t?void 0:t.PageContentStructure)||void 0===e?void 0:e.Content))return this.pageData;const i=(null===(n=this.locationData)||void 0===n?void 0:n.BC_Trn_Location)||{};return this.pageData.PageContentStructure.Content=this.pageData.PageContentStructure.Content.map((t=>"Image"===(null==t?void 0:t.ContentType)?Object.assign(Object.assign({},t),{ContentValue:i.ReceptionImage?i.ReceptionImage:"https://staging.comforta.yukon.software/media/receptie-197@3x.png"}):"Description"===(null==t?void 0:t.ContentType)?Object.assign(Object.assign({},t),{ContentValue:i.ReceptionDescription?i.ReceptionDescription:"Welkom bij de receptie van onze app. Hier kunt u al uw vragen stellen en krijgt u direct hulp van ons team. Of het nu gaat om technische ondersteuning, informatie over diensten, of algemene vragen, wij zijn er om u te helpen."}):t)),this.pageData}}class Tl{constructor(t){this.editor=t}initialise(t){return e=this,n=void 0,a=function*(){try{this.editor.DomComponents.clear(),navigator.geolocation.getCurrentPosition((t=>{const e=t.coords.latitude,n=t.coords.longitude;this.createMapComponent(e,n)}),(t=>{console.error("Geolocation error:",t.message),this.createMapComponent(52.0907,5.1214)}))}catch(t){console.error("Error setting up iframe component:",t.message);const e=52.0907,n=5.1214;this.createMapComponent(e,n)}},new((i=void 0)||(i=Promise))((function(t,o){function r(t){try{l(a.next(t))}catch(t){o(t)}}function s(t){try{l(a.throw(t))}catch(t){o(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(r,s)}l((a=a.apply(e,n||[])).next())}));var e,n,i,a}createMapComponent(t,e){var n;const i=`https://www.google.com/maps/embed/v1/view?key=AIzaSyBBaQo7_sF2xk3uNIyKp_Z-4BbaTebGGa4&center=${t},${e}&zoom=18`,a=this.editor.addComponents(`\n      <div ${nr} id="frame-container" style="position: relative; width: 100%; height: 100vh; overflow: hidden;">\n        <div ${nr} id="map-preloader" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 1000;">\n          <img ${nr} src="/Resources/UCGrapes1/src/images/spinner.gif" width="32" height="32" alt="Loading...">\n        </div>\n        <iframe \n          id="map-frame"\n          src="${i}"\n          width="100%"\n          height="100%"\n          frameborder="0"\n          allowfullscreen="true"\n          loading="lazy"\n          ${nr}\n          style="display: block; border: none; height: 100vh;">\n        </iframe>\n      </div>\n    `)[0],o=null===(n=a.find("#map-frame")[0])||void 0===n?void 0:n.getEl();o&&(o.onload=()=>{const t=a.find("#map-preloader")[0];t&&(t.getEl().style.display="none")}),setTimeout((()=>{const t=a.find("#map-preloader")[0];t&&(t.getEl().style.display="none")}),2e3)}}class Il{constructor(t){this.editor=t}initialise(t){return e=this,n=void 0,a=function*(){const e=null==t?void 0:t.ObjectUrl;try{this.editor.DomComponents.clear(),this.editor.DomComponents.addType("object",{isComponent:t=>"OBJECT"===t.tagName,model:{defaults:{tagName:"object",draggable:!0,droppable:!1,attributes:{width:"100%",height:"300vh"},styles:"\n                  .form-frame-container {\n                    overflow-x: hidden;\n                    overflow-y: auto;\n                    position: relative;\n                    min-height: 300px;\n                  }\n      \n                  /* Preloader styles */\n                  .preloader-wrapper {\n                    position: absolute;\n                    top: 50%;\n                    left: 50%;\n                    transform: translate(-50%, -50%);\n                    z-index: 1000;\n                  }\n      \n                  .preloader {\n                    width: 32px;\n                    height: 32px;\n                    background-image: url('/Resources/UCGrapes1/src/images/spinner.gif');\n                    background-size: contain;\n                    background-repeat: no-repeat;\n                  }\n      \n                  /* Custom scrollbar styles */\n                  .form-frame-container::-webkit-scrollbar {\n                    width: 6px;\n                    height: 0;\n                  }\n      \n                  .form-frame-container::-webkit-scrollbar-track {\n                    background: #f1f1f1;\n                    border-radius: 3px;\n                  }\n      \n                  .form-frame-container::-webkit-scrollbar-thumb {\n                    background: #888;\n                    border-radius: 3px;\n                  }\n      \n                  .form-frame-container::-webkit-scrollbar-thumb:hover {\n                    background: #555;\n                  }\n      \n                  /* Firefox scrollbar styles */\n                  .form-frame-container {\n                    scrollbar-width: thin;\n                    scrollbar-color: #888 #f1f1f1;\n                  }\n                  .fallback-message {\n                    margin-bottom: 10px;\n                    color: #666;\n                  }\n                "}},view:{onRender({el:t,model:e}){const n=`\n                  <div class="fallback-content">\n                    <p class="fallback-message">${e.get("attributes").fallbackMessage||"Content cannot be displayed"}</p>\n                    <a href="${e.get("attributes").data}" \n                       target="_blank" \n                       class="fallback-link">\n                      Open in New Window\n                    </a>\n                  </div>\n                `;t.insertAdjacentHTML("beforeend",n),t.addEventListener("load",(()=>{const e=t.closest(".form-frame-container").querySelector(".preloader-wrapper");e&&(e.style.display="none"),t.querySelector(".fallback-content").style.display="none"})),t.addEventListener("error",(e=>{const n=t.closest(".form-frame-container").querySelector(".preloader-wrapper");n&&(n.style.display="none");const i=t.querySelector(".fallback-content");i&&(i.style.display="flex",i.style.flexDirection="column",i.style.justifyContent="start")}))}}}),this.editor.setComponents(`\n            <div class="form-frame-container" id="frame-container">\n              <div class="preloader-wrapper">\n                <div class="preloader"></div>\n              </div>\n              <object \n                data="${e}"\n                type="text/html"\n                width="100%"\n                height="800px"\n                fallbackMessage="Unable to load the content. Please try opening it in a new window.">\n              </object>\n            </div>\n          `)}catch(t){console.error("Error setting up object component:",t.message)}},new((i=void 0)||(i=Promise))((function(t,o){function r(t){try{l(a.next(t))}catch(t){o(t)}}function s(t){try{l(a.throw(t))}catch(t){o(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(r,s)}l((a=a.apply(e,n||[])).next())}));var e,n,i,a}}class Al{constructor(t,e,n=!1){this.pageId=t,this.pageData=e,this.isNewPage=n,this.themeManager=new $s,this.editorManager=new Zc,this.editorEvents=new Rc}init(t){var e,n,i,a,o,r,s,l,c,d,h,u,p,g;let f=`gjs-${this.getEditorId()}`;this.pageTitle=null===(e=this.pageData)||void 0===e?void 0:e.PageName,this.createNewEditor(f);const m=this.editorManager.initializeGrapesEditor(f);window.app.editors[f]=m;const v=t=>{if(t){const e=t.generateHTML();m.setComponents(e),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(this.pageData))}else console.error("Invalid PageType or pageData is undefined:",this.pageData)};let b;"Menu"===(null===(n=this.pageData)||void 0===n?void 0:n.PageType)||"MyLiving"===(null===(i=this.pageData)||void 0===i?void 0:i.PageType)||"MyCare"===(null===(a=this.pageData)||void 0===a?void 0:a.PageType)||"MyService"===(null===(o=this.pageData)||void 0===o?void 0:o.PageType)?(b=new ll(this.pageData),v(b)):"Information"===(null===(r=this.pageData)||void 0===r?void 0:r.PageType)?(b=new bl(this.pageData,this.isNewPage),v(b)):"Location"===(null===(s=this.pageData)||void 0===s?void 0:s.PageType)?new wl(m,this.pageData).setupEditor():"Reception"===(null===(l=this.pageData)||void 0===l?void 0:l.PageType)?new xl(m,this.pageData).setupEditor():"Content"===(null===(c=this.pageData)||void 0===c?void 0:c.PageType)?(b=new ml(this.pageData),v(b)):"WebLink"===(null===(d=this.pageData)||void 0===d?void 0:d.PageType)||"DynamicForm"===(null===(h=this.pageData)||void 0===h?void 0:h.PageType)?("Form"===(null==t?void 0:t.CtaType)&&(t.Action.ObjectUrl=this.pageData.PageLinkStructure.Url),new Il(m).initialise(t.Action)):"Map"===(null===(u=this.pageData)||void 0===u?void 0:u.PageType)?new Tl(m).initialise(t.Action):"MyActivity"===(null===(p=this.pageData)||void 0===p?void 0:p.PageType)?new Cl(m).load():"Calendar"===(null===(g=this.pageData)||void 0===g?void 0:g.PageType)&&new yl(m).load(),this.editorEvents.init(m,this.pageData,f),this.editorManager.finalizeEditorSetup(m),new fl(this.pageData.PageId),this.themeManager.applyTheme(this.themeManager.currentTheme),this.updatePositions()}createNewEditor(t){const e=document.getElementById("child-container");new Uc(t,!1,this.pageData,this.pageTitle,this.isNewPage).render(e)}getEditorId(){let t=0;return document.querySelectorAll(".mobile-frame").forEach((e=>{t++})),t}refreshPage(){}addImageContent(t){const e=t.DomComponents.getWrapper().find(".content-page-wrapper");e.length>0&&e[0].append(`\n      <img ${ar} id="${cr(5)}" data-gjs-type="product-service-image" draggable="true" src="https://plus.unsplash.com/premium_photo-1686949554005-78d1370ab4f3?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxmZWF0dXJlZC1waG90b3MtZmVlZHw2fHx8ZW58MHx8fHx8" alt="Product Service Image" class="content-page-block">\n      `)}addDescriptionContent(t){const e=t.DomComponents.getWrapper().find(".content-page-wrapper");e.length>0&&e[0].append(`\n      <div ${ar} id="${cr(5)}" data-gjs-type="product-service-description" draggable="true" class="content-page-block">\n          lorem ipsum dolor sit amet consectetur adipiscing elit sed do eiusmod tempor incididunt ut labore et dolore magna aliqua\n      </div>\n      `)}updateFrame(){this.editorEvents.removeOtherEditors(),this.editorEvents.activateNavigators()}updatePositions(){const t=document.getElementById("child-container");t.scrollLeft=t.scrollWidth-t.clientWidth,t.style.justifyContent="right"}}var El=function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}))};class Sl{constructor(){this.appVersionManager=new d,this.toolboxService=new r}attachNewServiceToTile(t){return El(this,void 0,void 0,(function*(){const e=(yield this.toolboxService.getServices()).find((e=>e.ProductServiceId==t));if(e){const n={PageId:t,PageName:e.ProductServiceName,TileName:e.ProductServiceTileName,PageType:"Content"};this.attachToTile(n,"Content",Ms.t("sidebar.action_list.services"));const i=document.getElementById("menu-page-section"),a=document.getElementById("content-page-section");i&&(i.style.display="block"),a&&a.remove()}}))}attachToTile(t,e,n){return El(this,arguments,void 0,(function*(t,e,n,i=!1){var a;const o=globalThis.selectedComponent;if(!o)return;o.find(".tile-title")[0];const r=o.parent().getId(),l=o.parent().parent().getId();if(globalThis.currentPageId===t.PageId)return void new s("error",Ms.t("messages.error.page_linking"));const c=[["Action.ObjectType",`${e}`],["Action.ObjectId",t.PageId]];let d;if("Information"===globalThis.pageData.PageType){const t=new uc;if(o.is("info-cta-section"));else if(o.parent().parent().is("info-tiles-section")){for(const[e,n]of c)t.updateInfoTileAttributes(o.parent().parent().getId(),o.parent().getId(),e,n);const e=globalThis.infoContentMapper.getInfoContent(l);d=null===(a=null==e?void 0:e.Tiles)||void 0===a?void 0:a.find((t=>t.Id===r))}}else{for(const[t,e]of c)globalThis.tileMapper.updateTile(r,t,e);d=globalThis.tileMapper.getTile(l,r)}const h=yield this.appVersionManager.getUpdatedActiveVersion();this.attachPage(t,h,d,i),o&&d&&new Ns(o,d).setTileAttributes()}))}attachPage(t,e,n,i){const a=t.PageId,o=(null==e?void 0:e.Pages.find((t=>t.PageId===a)))||null;this.removeOtherEditors(),o?new Al(t.PageId,o,i).init(n):this.toolboxService.createServicePage(e.AppVersionId,a).then((t=>{new Al(t.ContentPage.PageId,t.ContentPage).init(n)}))}removeOtherEditors(){(new Rc).removeOtherEditors(),(new Rc).activateNavigators()}updateActionProperty(t,e){const n=document.querySelector("#sidebar_select_action_label");n&&(n.innerText=`${t}, ${e.length>10?e.substring(0,10)+"...":e}`)}}class Ll{constructor(t){this.activeFilter=null,this.debugResults=t,this.container=document.createElement("div"),this.container.classList.add("tb_debug_dashboard")}debugSummary(){const t=document.createElement("div");t.classList.add("tb_debug_summary");const e=this.createSummaryItem(this.debugResults.Summary.TotalUrls,`${Ms.t("navbar.debug.total_urls")}`,!0),n=this.createSummaryItem(this.debugResults.Summary.SuccessCount,`${Ms.t("navbar.debug.total_successful")}`),i=this.createSummaryItem(this.debugResults.Summary.FailureCount,`${Ms.t("navbar.debug.total_failed")}`);return t.appendChild(e),t.appendChild(n),t.appendChild(i),t}createSummaryItem(t,e,n=!1){const i=document.createElement("div");return i.classList.add("tb_debug_summary_item"),n&&i.classList.add("active"),i.innerHTML=`\n            <h3>${parseFloat(t).toString()}</h3>\n            <p>${e}</p>\n        `,i.addEventListener("click",(()=>{this.container.querySelectorAll(".tb_debug_summary_item").forEach((t=>t.classList.remove("active"))),i.classList.add("active"),this.activeFilter=e===`${Ms.t("navbar.debug.total_urls")}`?null:e,this.filterPageSections()})),i}filterPageSections(){this.container.querySelectorAll(".tb_debug_page-section").forEach((t=>{const e=t.querySelector(".tb_debug_url-list");if(!e)return;const n=e.querySelectorAll(".tb_debug_url-item");let i=!1;n.forEach((t=>{const e=t.querySelector(".tb_debug_url-status"),n=this.shouldShowUrlItem(e);t.classList.toggle("hidden",!n),n&&(i=!0)})),t.classList.toggle("hidden",!i)}))}shouldShowUrlItem(t){var e,n;return!t||null===this.activeFilter||(this.activeFilter===`${Ms.t("navbar.debug.total_successful")}`?t.classList.contains("tb_debug_status-200"):this.activeFilter!==`${Ms.t("navbar.debug.total_failed")}`||Number(null===(e=t.textContent)||void 0===e?void 0:e.split(" ")[0])>=400||0==Number(null===(n=t.textContent)||void 0===n?void 0:n.split(" ")[0]))}debugPageSections(){const t=document.createElement("div");return t.classList.add("tb_debug_page-sections"),this.debugResults.Pages.forEach((e=>{const n=this.debugPageSection(e);t.appendChild(n)})),t}debugPageSection(t){const e=document.createElement("div");e.classList.add("tb_debug_page-section");const n=document.createElement("div");n.classList.add("tb_debug_page-title"),n.innerText=t.Page,e.appendChild(n);const i=this.createUrlList(t.UrlList);return e.appendChild(i),e}createUrlList(t){const e=document.createElement("div");return e.classList.add("tb_debug_url-list"),t.forEach(((t,n)=>{const i=this.createUrlItem(t);e.appendChild(i)})),e}createUrlItem(t){const e=document.createElement("div");return e.classList.add("tb_debug_url-item"),e.innerHTML=`\n            <details>\n                <summary class="tb_debug_url-header">\n                    <div class="tb_debug_url-text">${hr(t.Url,70)}</div>\n                    <div class="tb_debug_url-status tb_debug_status-${t.StatusCode}">${t.StatusCode} ${hr(t.StatusMessage,10)}</div>\n                </summary>\n                <div class="tb_debug_details-content">\n                    <strong>${Ms.t("navbar.debug.full_url")}:</strong> ${t.Url}\n                    <br><strong>${Ms.t("navbar.debug.status_code")}:</strong> ${t.StatusCode}\n                    <br><strong>${Ms.t("navbar.debug.status_message")}:</strong> ${t.StatusMessage}\n                    ${t.StatusCode>=400||0==t.StatusCode?`${this.getAffectedTiles(t)}`:""}\n                </div>\n            </details>\n        `,e}getAffectedTiles(t){return"Tile"===t.AffectedType?`<br><strong>${Ms.t("navbar.debug.affected_tile")}:</strong> <div class="tb_debug-badge">${t.AffectedName}</div>`:"Cta"===t.AffectedType?`<br><strong>${Ms.t("navbar.debug.affected_cta")}: </strong><div class="tb_debug-badge">${t.AffectedName}</div>`:"Content"===t.AffectedType?`<br><strong>${Ms.t("navbar.debug.affected_content")}: </strong><div class="tb_debug-badge">${t.AffectedName}</div>`:""}buildDebugUI(){return this.container.appendChild(this.debugSummary()),this.container.appendChild(this.debugPageSections()),this.filterPageSections(),this.container}}var Ml=function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}))};class Nl{constructor(){this.appVersions=new d}init(){return Ml(this,void 0,void 0,(function*(){const t=yield this.getUrls();this.debugProcess(t)}))}debugProcess(t){return Ml(this,void 0,void 0,(function*(){let e;try{const n=new r,i=yield n.debugApp(t);i&&(e=i.DebugResults)}catch(t){console.error(t)}finally{this.displayResults(e)}}))}getUrls(){return Ml(this,void 0,void 0,(function*(){var t,e,n,i,a,o,r,s;let l=[];const c=yield this.appVersions.getUpdatedActiveVersion(),d=null==c?void 0:c.Pages;for(const c of d){let h=[];const u=null===(t=c.PageMenuStructure)||void 0===t?void 0:t.Rows;if(u)for(const t of u){const n=t.Tiles;if(n)for(const t of n)(null===(e=t.Action)||void 0===e?void 0:e.ObjectUrl)&&h.push({url:t.Action.ObjectUrl,affectedType:"Tile",affectedName:t.Name||"Unnamed Tile"}),t.BGImageUrl&&h.push({url:t.BGImageUrl,affectedType:"Tile",affectedName:t.Name||"Unnamed Tile"})}const p=null===(n=c.PageInfoStructure)||void 0===n?void 0:n.InfoContent;if(p)for(const t of p)"Image"===t.InfoType&&t.InfoValue&&h.push({url:t.InfoValue,affectedType:"Content",affectedName:t.InfoType||"Unnamed Content"}),"Cta"===t.InfoType&&t.CtaAttributes&&(h.push({url:null===(i=t.CtaAttributes)||void 0===i?void 0:i.CtaButtonImgUrl,affectedType:"Cta",affectedName:t.InfoType||"Unnamed Cta"}),"WebLink"!==(null===(a=t.CtaAttributes)||void 0===a?void 0:a.CtaType)&&"Form"!==(null===(o=t.CtaAttributes)||void 0===o?void 0:o.CtaType)||h.push({url:null===(r=t.CtaAttributes)||void 0===r?void 0:r.CtaAction,affectedType:"Cta",affectedName:t.InfoType||"Unnamed Cta"})),"TileRow"===t.InfoType&&t.Tiles&&(null===(s=t.Tiles)||void 0===s||s.forEach((t=>{var e;(null===(e=t.Action)||void 0===e?void 0:e.ObjectUrl)&&h.push({url:t.Action.ObjectUrl,affectedType:"Tile",affectedName:t.Name||"Unnamed Tile"}),t.BGImageUrl&&h.push({url:t.BGImageUrl,affectedType:"Tile",affectedName:t.Name||"Unnamed Tile"})})));h.length>0&&l.push({page:c.PageName||`Page-${d.indexOf(c)+1}`,urls:h})}return l}))}displayResults(t){const e=new Ll(t),n=document.getElementById("tb-debugging");n&&(n.innerHTML="",n.appendChild(e.buildDebugUI()))}}var kl=function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}))};class Pl{constructor(){this.toolboxService=new r,this.appVersion=new d}generateShareLink(){return kl(this,void 0,void 0,(function*(){try{const t=yield this.appVersion.getActiveVersionId();if(!t)throw new Error("No active version found");return`${o}/wp_apppreview.aspx?AppVersionId=${t}`}catch(t){throw console.error("Error generating share link:",t),t}}))}copyToClipboard(t){return kl(this,void 0,void 0,(function*(){try{return yield navigator.clipboard.writeText(t),!0}catch(t){return console.error("Clipboard copy failed:",t),!1}}))}getVersions(){return kl(this,void 0,void 0,(function*(){try{return(yield this.toolboxService.getVersions()).AppVersions}catch(t){return console.error("Failed to fetch versions:",t),[]}}))}activateVersion(t){return kl(this,void 0,void 0,(function*(){try{return yield this.toolboxService.activateVersion(t)}catch(t){return console.error("Version activation failed:",t),!1}}))}createVersion(t){return kl(this,void 0,void 0,(function*(){try{let e;return e=yield this.toolboxService.createVersion(t),e}catch(t){return console.error("Version creation failed:",t),null}}))}duplicateVersion(t,e){return kl(this,void 0,void 0,(function*(){try{let n;return n=yield this.toolboxService.duplicateVersion(t,e),n}catch(t){return console.error("Version creation failed:",t),null}}))}renameVersion(t,e){return kl(this,void 0,void 0,(function*(){try{let n;return n=yield this.toolboxService.renameVersion(t,e),n}catch(t){return console.error("Version creation failed:",t),null}}))}deleteVersion(t){return kl(this,void 0,void 0,(function*(){try{yield this.toolboxService.deleteVersion(t).then((t=>{"OK"==t.result&&new s("success","Version deleted successfully")}))}catch(t){return console.error("Version deletion failed:",t),null}}))}getActiveVersion(){return kl(this,void 0,void 0,(function*(){return(yield this.getVersions()).find((t=>t.IsActive))||null}))}}var _l=function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}))};class $l{constructor(){this.appVersionController=new Pl,this.toolboxManager=new cc}createButton(t,e,n){const i=document.createElement("button");return i.id=t,i.classList.add("tb-btn",e),i.innerText=n,i}openShareLinkModal(){return _l(this,void 0,void 0,(function*(){try{const t=this.createModalContent(),e=new l({title:Ms.t("navbar.share.modal_title"),width:"500px",body:t});e.open(),this.setupModalEventListeners(t,e)}catch(t){console.error("Error opening share link modal:",t)}}))}createModalContent(){const t=document.createElement("div"),e=document.createElement("p");e.innerText=Ms.t("navbar.share.modal_description");const n=this.createLinkSection(),i=this.createSubmitSection(n);return t.appendChild(e),t.appendChild(n),t.appendChild(i),t}createLinkSection(){const t=document.createElement("div");t.classList.add("share-link-body"),t.style.display="flex",t.style.flexDirection="column",t.style.padding="10px";const e=document.createElement("a");return e.target="_blank",e.style.overflowWrap="break-word",e.style.maxWidth="100%",this.populateLinkAsync(e),t.appendChild(e),t}populateLinkAsync(t){return _l(this,void 0,void 0,(function*(){try{const e=yield this.appVersionController.generateShareLink();t.href=e,t.innerText=e}catch(e){t.innerText="Failed to generate link",t.href="#"}}))}createSubmitSection(t){const e=document.createElement("div");e.classList.add("popup-footer"),e.style.marginBottom="-12px";const n=this.createButton("copy-link","tb-btn-primary",Ms.t("navbar.share.copy")),i=this.createButton("cancel","tb-btn-outline",Ms.t("navbar.share.close"));return e.appendChild(n),e.appendChild(i),e}setupModalEventListeners(t,e){const n=t.querySelector("a"),i=t.querySelector("#copy-link"),a=t.querySelector("#cancel");i&&n&&i.addEventListener("click",(t=>_l(this,void 0,void 0,(function*(){t.preventDefault(),n.href&&((yield this.appVersionController.copyToClipboard(n.href))?setTimeout((()=>{e.close(),this.toolboxManager.openToastMessage(Ms.t("navbar.share.copied"))}),500):(e.close(),console.error("Failed to copy link")))})))),a&&a.addEventListener("click",(t=>{t.preventDefault(),e.close()}))}}Math.pow(10,8);const Ol=43200,jl=Symbol.for("constructDateFrom");function Bl(t,e){return"function"==typeof t?t(e):t&&"object"==typeof t&&jl in t?t[jl](e):t instanceof Date?new t.constructor(e):new Date(e)}const ql={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Dl(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Hl={date:Dl({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Dl({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Dl({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Rl={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Vl(t){return(e,n)=>{let i;if("formatting"===(n?.context?String(n.context):"standalone")&&t.formattingValues){const e=t.defaultFormattingWidth||t.defaultWidth,a=n?.width?String(n.width):e;i=t.formattingValues[a]||t.formattingValues[e]}else{const e=t.defaultWidth,a=n?.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[e]}return i[t.argumentCallback?t.argumentCallback(e):e]}}function Ul(t){return(e,n={})=>{const i=n.width,a=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],o=e.match(a);if(!o)return null;const r=o[0],s=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(s)?function(t){for(let e=0;e<t.length;e++)if(t[e].test(r))return e}(s):function(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&t[e].test(r))return e}(s);let c;return c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c,{value:c,rest:e.slice(r.length)}}}var Fl;const zl={code:"en-US",formatDistance:(t,e,n)=>{let i;const a=ql[t];return i="string"==typeof a?a:1===e?a.one:a.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i},formatLong:Hl,formatRelative:(t,e,n,i)=>Rl[t],localize:{ordinalNumber:(t,e)=>{const n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Vl({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Vl({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:t=>t-1}),month:Vl({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Vl({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Vl({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(Fl={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:t=>parseInt(t,10)},(t,e={})=>{const n=t.match(Fl.matchPattern);if(!n)return null;const i=n[0],a=t.match(Fl.parsePattern);if(!a)return null;let o=Fl.valueCallback?Fl.valueCallback(a[0]):a[0];return o=e.valueCallback?e.valueCallback(o):o,{value:o,rest:t.slice(i.length)}}),era:Ul({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Ul({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ul({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Ul({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Ul({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};let Zl={};function Wl(t,e){return Bl(e||t,t)}function Gl(t){const e=Wl(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Jl(t,...e){const n=Bl.bind(null,t||e.find((t=>"object"==typeof t)));return e.map(n)}function Kl(t,e){const n=+Wl(t)-+Wl(e);return n<0?-1:n>0?1:n}function Yl(t,e){const n=Wl(t,e?.in);return+function(t,e){const n=Wl(t,e?.in);return n.setHours(23,59,59,999),n}(n,e)==+function(t,e){const n=Wl(t,e?.in),i=n.getMonth();return n.setFullYear(n.getFullYear(),i+1,0),n.setHours(23,59,59,999),n}(n,e)}function Xl(t,e,n){const[i,a,o]=Jl(n?.in,t,t,e),r=Kl(a,o),s=Math.abs(function(t,e,n){const[i,a]=Jl(n?.in,t,e);return 12*(i.getFullYear()-a.getFullYear())+(i.getMonth()-a.getMonth())}(a,o));if(s<1)return 0;1===a.getMonth()&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-r*s);let l=Kl(a,o)===-r;Yl(i)&&1===s&&1===Kl(i,o)&&(l=!1);const c=r*(s-+l);return 0===c?0:c}function Ql(t,e,n){const i=function(t,e){return+Wl(t)-+Wl(e)}(t,e)/1e3;return(a=n?.roundingMethod,t=>{const e=(a?Math[a]:Math.trunc)(t);return 0===e?0:e})(i);var a}function tc(t,e){return function(t,e,n){const i=Zl,a=n?.locale??i.locale??zl,o=Kl(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const r=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:o}),[s,l]=Jl(n?.in,...o>0?[e,t]:[t,e]),c=Ql(l,s),d=(Gl(l)-Gl(s))/1e3,h=Math.round((c-d)/60);let u;if(h<2)return n?.includeSeconds?c<5?a.formatDistance("lessThanXSeconds",5,r):c<10?a.formatDistance("lessThanXSeconds",10,r):c<20?a.formatDistance("lessThanXSeconds",20,r):c<40?a.formatDistance("halfAMinute",0,r):c<60?a.formatDistance("lessThanXMinutes",1,r):a.formatDistance("xMinutes",1,r):0===h?a.formatDistance("lessThanXMinutes",1,r):a.formatDistance("xMinutes",h,r);if(h<45)return a.formatDistance("xMinutes",h,r);if(h<90)return a.formatDistance("aboutXHours",1,r);if(h<1440){const t=Math.round(h/60);return a.formatDistance("aboutXHours",t,r)}if(h<2520)return a.formatDistance("xDays",1,r);if(h<Ol){const t=Math.round(h/1440);return a.formatDistance("xDays",t,r)}if(h<86400)return u=Math.round(h/Ol),a.formatDistance("aboutXMonths",u,r);if(u=Xl(l,s),u<12){const t=Math.round(h/Ol);return a.formatDistance("xMonths",t,r)}{const t=u%12,e=Math.trunc(u/12);return t<3?a.formatDistance("aboutXYears",e,r):t<9?a.formatDistance("overXYears",e,r):a.formatDistance("almostXYears",e+1,r)}}(t,function(t){return Bl(t,Date.now())}(t),e)}class ec{constructor(t){this.validateFn=t.validate,this.formField=document.createElement("div"),this.formField.className="form-field",this.formField.style.marginBottom="10px",t.hidden&&(this.formField.style.display="none");const e=document.createElement("label");t.label&&(e.htmlFor=t.id,e.textContent=t.label);const n=document.createElement("input");n.type=t.type,n.id=t.id,n.className="tb-form-control",n.value=t.value||"",t.placeholder&&(n.placeholder=t.placeholder),t.required&&(n.required=!0);const i=document.createElement("span");i.className="error-message",i.style.cssText="\n            color: red;\n            font-size: 12px;\n            display: none;\n            margin-top: 5px;\n            font-weight: 300;\n        ",i.textContent=t.errorMessage||"Error message",t.label&&this.formField.appendChild(e),this.formField.appendChild(n),this.formField.appendChild(i)}getElement(){return this.formField}showError(t){const e=this.formField.querySelector(".error-message");e.style.display="block",t&&(e.textContent=t)}hideError(){this.formField.querySelector(".error-message").style.display="none"}validate(){const t=this.formField.querySelector("input"),e=!this.validateFn||this.validateFn(t.value);return e?this.hideError():this.showError(t.validationMessage||"Invalid input"),e}}class nc{constructor(t){this.selectedSupplierId=null,this.form=document.createElement("form"),this.form.id=t,this.fields=[]}addField(t){const e=new ec(t);return this.fields.push(e),this.form.appendChild(e.getElement()),e}render(t){t.appendChild(this.form)}setSelectedSupplierId(t){this.selectedSupplierId=t}getData(){const t={};return this.fields.forEach((e=>{const n=e.getElement().querySelector("input");t[n.id]=n.value})),this.selectedSupplierId&&(t.supplier_id=this.selectedSupplierId),t}}var ic=function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}))};class ac{constructor(){this.versionController=new Pl,this.container=document.createElement("div"),this.selectionDiv=document.createElement("div"),this.versionSelection=document.createElement("div"),this.versionList=document.createElement("div"),this.activeVersion=document.createElement("span"),this.init(),document.addEventListener("click",this.handleOutsideClick.bind(this))}init(){this.container.classList.add("tb-custom-theme-selection");const t=this.createSelectionButton();this.selectionDiv.appendChild(t),this.container.appendChild(this.selectionDiv),this.initializeVersionOptions()}createSelectionButton(){const t=document.createElement("button");return t.classList.add("theme-select-button"),t.setAttribute("aria-haspopup","listbox"),this.activeVersion.classList.add("selected-theme-value"),this.activeVersion.textContent="Select Version",t.appendChild(this.activeVersion),t.onclick=e=>{e.preventDefault(),t.classList.contains("open")?this.closeSelection():this.toggleSelection(t)},t}toggleSelection(t){this.versionSelection.classList.toggle("show"),t.classList.toggle("open"),t.setAttribute("aria-expanded",t.classList.contains("open").toString())}initializeVersionOptions(){return ic(this,void 0,void 0,(function*(){this.versionSelection.className="theme-options-list",this.versionSelection.setAttribute("role","listbox"),this.versionSelection.innerHTML="",this.versionList.classList.add("tb-version-list"),this.versionList.innerHTML="",this.addNewVersionButton(),this.versionSelection.appendChild(this.versionList),(yield this.versionController.getVersions()).forEach((t=>this.createVersionOption(t))),this.addTemplatesButton(),this.selectionDiv.appendChild(this.versionSelection)}))}addNewVersionButton(){const t=document.createElement("div");t.className="theme-option",t.style.justifyContent="start",t.innerHTML=`<i class="fa fa-plus"></i> &nbsp; ${Ms.t("navbar.appversion.create_new")}`,t.onclick=()=>this.openVersionModal(),this.versionSelection.appendChild(t)}addTemplatesButton(){const t=document.createElement("div");t.className="theme-option",t.innerHTML="Select Templates",t.onclick=()=>{e.getInstance().addTemplatesButtonEvent()},this.versionSelection.appendChild(t)}createVersionOption(t){return ic(this,void 0,void 0,(function*(){const e=document.createElement("div");e.className="theme-option submenu",e.setAttribute("role","option"),e.setAttribute("data-value",t.AppVersionName),e.textContent=hr(t.AppVersionName,25);const n=document.createElement("div");n.className="option-buttons",e.append(n);const i=window.app.currentVersion,a=t.AppVersionId===i.AppVersionId;a&&(e.classList.add("selected"),this.activeVersion.textContent=hr(t.AppVersionName,15)),e.addEventListener("click",(e=>this.handleVersionSelection(e,t)));const o=this.createVersionSubMenu(t,a);e.appendChild(o),this.versionList.appendChild(e)}))}createVersionSubMenu(t,e){const n=document.createElement("div");n.className="submenu-list";const i=document.createElement("div");i.classList.add("theme-option"),i.innerHTML="Duplicate",i.addEventListener("click",(e=>{e.stopPropagation(),this.openVersionModal(t.AppVersionName+" - Copy","Duplicate version","Duplicate","duplicate",t.AppVersionId)})),n.appendChild(i);const a=document.createElement("div");if(a.classList.add("theme-option"),a.innerHTML="Rename",a.addEventListener("click",(e=>{e.stopPropagation(),this.openVersionModal(t.AppVersionName,"Rename version","Rename","rename",t.AppVersionId)})),n.appendChild(a),!e){const e=document.createElement("div");e.classList.add("theme-option"),e.innerHTML="Move to Trash",e.addEventListener("click",(e=>{e.stopPropagation(),this.confirmDeleteVersion(t)})),n.appendChild(e)}return e&&(n.style.marginTop="33px"),n}confirmDeleteVersion(t){new dl("Are you sure you want to delete this version?","Delete version",(()=>ic(this,void 0,void 0,(function*(){try{yield this.versionController.deleteVersion(t.AppVersionId),yield this.refreshVersionList()}catch(t){console.error("Error deleting version:",t)}})))).render(document.body)}handleVersionSelection(t,e){return ic(this,void 0,void 0,(function*(){if(!t.target.closest(".submenu-list"))try{this.versionSelection.querySelectorAll(".theme-option").forEach((t=>t.classList.remove("selected"))),t.currentTarget.classList.add("selected"),this.activeVersion.textContent=hr(e.AppVersionName,15),(yield this.versionController.activateVersion(e.AppVersionId))&&location.reload(),this.closeSelection()}catch(t){console.error("Error activating version:",t)}}))}openVersionModal(t="",e="Create new version",n="Save",i="create",a){const o=new nc("page-form");o.addField({type:"text",id:"version_name",placeholder:"Version name",required:!0,value:t});const r=document.createElement("div");o.render(r);const s=this.createSubmitSection(n);r.appendChild(s);const c=new l({title:e,width:"400px",body:r});c.open(),this.setupModalButtons(c,r,i,a)}createSubmitSection(t="Save"){const e=document.createElement("div");e.classList.add("popup-footer"),e.style.marginBottom="-12px";const n=this.createButton("submit_form","tb-btn-primary",t),i=this.createButton("cancel_form","tb-btn-secondary","Cancel");return e.appendChild(n),e.appendChild(i),e}setupModalButtons(t,e,n,i){const a=e.querySelector("#submit_form"),o=e.querySelector("#cancel_form");null==a||a.addEventListener("click",(a=>ic(this,void 0,void 0,(function*(){a.preventDefault();const o=e.querySelector("#version_name").value.trim();if(o)try{let e=!1;switch(n){case"create":e=yield this.versionController.createVersion(o);break;case"duplicate":i&&(e=yield this.versionController.duplicateVersion(i,o));break;case"rename":i&&(e=yield this.versionController.renameVersion(i,o))}t.close(),yield this.refreshVersionList(),!e||"create"!==n&&"duplicate"!==n||location.reload()}catch(t){console.error(`Error during ${n} operation:`,t)}})))),null==o||o.addEventListener("click",(()=>t.close()))}createButton(t,e,n){const i=document.createElement("button");return i.id=t,i.classList.add("tb-btn",e),i.innerText=n,i}closeSelection(){if(this.versionSelection.classList.contains("show")){this.versionSelection.classList.remove("show");const t=this.container.querySelector(".theme-select-button");t.setAttribute("aria-expanded","false"),t.classList.remove("open")}}handleOutsideClick(t){this.versionSelection.classList.contains("show")&&!this.container.contains(t.target)&&this.closeSelection()}refreshVersionList(){return ic(this,void 0,void 0,(function*(){yield this.initializeVersionOptions(),this.versionSelection.classList.add("show");const t=this.container.querySelector(".theme-select-button");t.classList.add("open"),t.setAttribute("aria-expanded","true")}))}render(t){t.appendChild(this.container)}}var oc=function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}))};class rc{constructor(){}openTrashModal(){return oc(this,void 0,void 0,(function*(){try{const t=yield this.createModalContent();new l({title:Ms.t("navbar.trash.modal_title"),width:"800px",body:t}).open()}catch(t){console.error("Error opening trash modal:",t)}}))}createModalContent(){return oc(this,void 0,void 0,(function*(){const t=document.createElement("div");t.className="trash-container";const e=document.createElement("div");e.className="trash-content",t.appendChild(e);const n=this.createHeader();e.appendChild(n);const i=this.createTabs();e.appendChild(i);const a=document.createElement("div");a.className="content",e.appendChild(a);const o=yield this.createPageTabContent();o.classList.add("active"),a.appendChild(o);const r=yield this.createVersionTabContent();return a.appendChild(r),this.setupEventListeners(t),t}))}createHeader(){const t=document.createElement("div");t.className="trash-header";const e=document.createElement("div");e.className="trash-search-bar";const n=document.createElement("i");n.className="material-icons",n.innerHTML='\n        <svg width="20px" height="20px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" \n                viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve">\n            <circle fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" cx="19.5" cy="12.5" r="8.5"/>\n            <line fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" x1="4" y1="28" x2="14" y2="18"/>\n        </svg>\n        ',e.appendChild(n);const i=document.createElement("input");i.type="text",i.placeholder="Search in trash",e.appendChild(i),t.appendChild(e);const a=document.createElement("div");a.className="trash-action-buttons",a.id="trash-action-buttons";const o=document.createElement("button");o.className="btn btn-outline",o.id="restore-btn";const r=document.createElement("i");r.className="material-icons",r.innerHTML='<svg width="20px" height="20px" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M 15 4 C 14.478 4 13.9405 4.1845 13.5625 4.5625 C 13.1855 4.9395 13 5.478 13 6 L 13 7 L 7 7 L 7 9 L 8 9 L 8 25 C 8 26.645 9.355 28 11 28 L 23 28 C 24.645 28 26 26.645 26 25 L 26 9 L 27 9 L 27 7 L 21 7 L 21 6 C 21 5.478 20.8155 4.9405 20.4375 4.5625 C 20.0605 4.1855 19.522 4 19 4 L 15 4 z M 15 6 L 19 6 L 19 7 L 15 7 L 15 6 z M 10 9 L 24 9 L 24 25 C 24 25.555 23.555 26 23 26 L 11 26 C 10.445 26 10 25.555 10 25 L 10 9 z M 17 12 L 13 16 L 16 16 L 16 23 L 18 23 L 18 16 L 21 16 L 17 12 z"/></svg>',r.style.fontSize="18px",o.appendChild(r),o.appendChild(document.createTextNode(" Restore")),a.appendChild(o);const s=document.createElement("button");s.className="btn btn-danger",s.id="delete-forever-btn";const l=document.createElement("i");l.className="material-icons",l.innerHTML='<svg width="20px" height="20px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                viewBox="0 0 473 473" style="enable-background:new 0 0 473 473;" xml:space="preserve" fill="#fff">\n            <g>\n                <path d="M324.285,215.015V128h20V38h-98.384V0H132.669v38H34.285v90h20v305h161.523c23.578,24.635,56.766,40,93.477,40\n                    c71.368,0,129.43-58.062,129.43-129.43C438.715,277.276,388.612,222.474,324.285,215.015z M294.285,215.015\n                    c-18.052,2.093-34.982,7.911-50,16.669V128h50V215.015z M162.669,30h53.232v8h-53.232V30z M64.285,68h250v30h-250V68z M84.285,128\n                    h50v275h-50V128z M164.285,403V128h50v127.768c-21.356,23.089-34.429,53.946-34.429,87.802c0,21.411,5.231,41.622,14.475,59.43\n                    H164.285z M309.285,443c-54.826,0-99.429-44.604-99.429-99.43s44.604-99.429,99.429-99.429s99.43,44.604,99.43,99.429\n                    S364.111,443,309.285,443z"/>\n                <polygon points="342.248,289.395 309.285,322.358 276.323,289.395 255.11,310.608 288.073,343.571 255.11,376.533 276.323,397.746 \n                    309.285,364.783 342.248,397.746 363.461,376.533 330.498,343.571 363.461,310.608 \t"/>\n            </g>\n            </svg>',s.appendChild(l),s.appendChild(document.createTextNode(" Delete forever")),a.appendChild(s),t.appendChild(a);const c=document.createElement("button");c.className="btn btn-danger",c.id="empty-trash-btn";const d=document.createElement("i");return d.className="material-icons",d.innerHTML='\n        <svg fill="#fff" width="20px" height="20px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n            <path fill-rule="evenodd" d="M12,13.5857864 L14.2928932,11.2928932 L15.7071068,12.7071068 L13.4142136,15 L15.7071068,17.2928932 L14.2928932,18.7071068 L12,16.4142136 L9.70710678,18.7071068 L8.29289322,17.2928932 L10.5857864,15 L8.29289322,12.7071068 L9.70710678,11.2928932 L12,13.5857864 Z M7,4 L7,3 C7,1.8954305 7.8954305,1 9,1 L15,1 C16.1045695,1 17,1.8954305 17,3 L17,4 L20,4 C21.1045695,4 22,4.8954305 22,6 L22,8 C22,9.1045695 21.1045695,10 20,10 L19.9198662,10 L19,21 C19,22.1045695 18.1045695,23 17,23 L7,23 C5.8954305,23 5,22.1045695 5.00345424,21.0830455 L4.07986712,10 L4,10 C2.8954305,10 2,9.1045695 2,8 L2,6 C2,4.8954305 2.8954305,4 4,4 L7,4 Z M7,6 L4,6 L4,8 L20,8 L20,6 L17,6 L7,6 Z M6.08648886,10 L7,21 L17,21 L17.0034542,20.9169545 L17.9132005,10 L6.08648886,10 Z M15,4 L15,3 L9,3 L9,4 L15,4 Z"/>\n        </svg>\n        ',c.appendChild(d),c.appendChild(document.createTextNode(" Empty Trash now")),t.appendChild(c),t}createTabs(){const t=document.createElement("div");t.className="trash-tabs";const e=document.createElement("div");e.className="trash-tab active",e.dataset.tab="trash-page",e.textContent="Pages",t.appendChild(e);const n=document.createElement("div");return n.className="trash-tab",n.dataset.tab="trash-version",n.textContent="Versions",t.appendChild(n),t}createPageTabContent(){return oc(this,void 0,void 0,(function*(){const t=document.createElement("div");t.className="trash-tab-content",t.id="trash-page-tab";const e=yield this.getTrashItems();if(e&&e.TrashItems.length&&Array.isArray(e.TrashItems)){const n=e.TrashItems.filter((t=>"Page"===t.Type));n.length?n.forEach((e=>{t.appendChild(this.createListItem(e))})):t.appendChild(this.createEmptyTrashContent())}else t.appendChild(this.createEmptyTrashContent());return t}))}createVersionTabContent(){return oc(this,void 0,void 0,(function*(){const t=document.createElement("div");t.className="trash-tab-content",t.id="trash-version-tab";const e=yield this.getTrashItems();if(e&&e.TrashItems.length&&Array.isArray(e.TrashItems)){const n=e.TrashItems.filter((t=>"Version"===t.Type));n.length?n.forEach((e=>{t.appendChild(this.createListItem(e))})):t.appendChild(this.createEmptyTrashContent())}else t.appendChild(this.createEmptyTrashContent());return t}))}createListItem(t){let e="Title",n=tc(new Date,{addSuffix:!0});"Page"===t.Type?(e=t.Page.PageName,n=tc(new Date(t.DeletedAt),{addSuffix:!0})):"Version"===t.Type&&(e=t.Version.AppVersionName,n=tc(new Date(t.DeletedAt),{addSuffix:!0}));const i=document.createElement("div");i.className="trash-item";const a=document.createElement("input");a.type="checkbox",a.className="trash-checkbox",i.appendChild(a);const o=document.createElement("div");o.className="trash-sender",o.textContent=e,i.appendChild(o);const r=document.createElement("div");r.className="trash-content",i.appendChild(r);const s=document.createElement("div");return s.className="trash-time",s.textContent=n,i.appendChild(s),i.id=t.TrashId,i.setAttribute("data-type",t.Type),i}createEmptyTrashContent(){const t=document.createElement("div");t.className="empty-trash";const e=document.createElement("i");e.className="material-icons",e.innerHTML='\n            <svg fill="#cdcecf" height="50" width="50" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n                <path fill-rule="evenodd" d="M12,13.5857864 L14.2928932,11.2928932 L15.7071068,12.7071068 L13.4142136,15 L15.7071068,17.2928932 L14.2928932,18.7071068 L12,16.4142136 L9.70710678,18.7071068 L8.29289322,17.2928932 L10.5857864,15 L8.29289322,12.7071068 L9.70710678,11.2928932 L12,13.5857864 Z M7,4 L7,3 C7,1.8954305 7.8954305,1 9,1 L15,1 C16.1045695,1 17,1.8954305 17,3 L17,4 L20,4 C21.1045695,4 22,4.8954305 22,6 L22,8 C22,9.1045695 21.1045695,10 20,10 L19.9198662,10 L19,21 C19,22.1045695 18.1045695,23 17,23 L7,23 C5.8954305,23 5,22.1045695 5.00345424,21.0830455 L4.07986712,10 L4,10 C2.8954305,10 2,9.1045695 2,8 L2,6 C2,4.8954305 2.8954305,4 4,4 L7,4 Z M7,6 L4,6 L4,8 L20,8 L20,6 L17,6 L7,6 Z M6.08648886,10 L7,21 L17,21 L17.0034542,20.9169545 L17.9132005,10 L6.08648886,10 Z M15,4 L15,3 L9,3 L9,4 L15,4 Z"/>\n            </svg>\n        ',t.appendChild(e);const n=document.createElement("p");n.textContent="No items in trash",t.appendChild(n);const i=document.createElement("p");return i.textContent="Items in trash will be automatically deleted after 30 days",t.appendChild(i),t}setupEventListeners(t){this.setupTabSwitching(t);const e=t.querySelector("#trash-action-buttons"),n=t.querySelector("#restore-btn"),i=t.querySelector("#delete-forever-btn"),a=t.querySelector("#empty-trash-btn");this.setupItemSelection(t,e,a),n&&this.setupRestoreButton(t,n,e,a),i&&this.setupDeleteForeverButton(t,i,e,a),a&&this.setupEmptyTrashButton(t,a)}setupTabSwitching(t){t.querySelectorAll(".trash-tab").forEach((e=>{e.addEventListener("click",(()=>{t.querySelectorAll(".trash-tab").forEach((t=>t.classList.remove("active"))),t.querySelectorAll(".trash-tab-content").forEach((t=>t.classList.remove("active"))),e.classList.add("active");const n=e.getAttribute("data-tab");if(n){const e=t.querySelector(`#${n}-tab`);e&&e.classList.add("active")}}))}))}setupItemSelection(t,e,n){t.querySelectorAll(".trash-item").forEach((i=>{const a=i.querySelector(".trash-checkbox");a.addEventListener("change",(()=>{a.checked?i.classList.add("selected"):i.classList.remove("selected"),this.updateActionButtonsVisibility(t,e,n)})),i.addEventListener("click",(t=>{t.target!==a&&(a.checked=!a.checked,a.dispatchEvent(new Event("change")))}))}))}updateActionButtonsVisibility(t,e,n){const i=t.querySelectorAll(".trash-checkbox:checked");e&&n&&(i.length>0?(e.classList.add("visible"),n.style.display="none"):(e.classList.remove("visible"),n.style.display="flex"))}setupRestoreButton(t,e,n,i){e.addEventListener("click",(()=>{const e=t.querySelectorAll(".trash-checkbox:checked");e.length>0&&confirm(`Restore ${e.length} selected item(s)?`)&&(this.removeSelectedItems(e,"restore"),this.updateActionButtonsVisibility(t,n,i),(new d).refreshVersion())}))}setupDeleteForeverButton(t,e,n,i){e.addEventListener("click",(()=>{const e=t.querySelectorAll(".trash-checkbox:checked");e.length>0&&confirm(`Permanently delete ${e.length} selected item(s)? This action cannot be undone.`)&&(this.removeSelectedItems(e,"delete"),this.updateActionButtonsVisibility(t,n,i))}))}removeSelectedItems(t,e){t.forEach((t=>{const n=t.closest(".trash-item");if(n){const t=new r,i=n.getAttribute("data-type"),a=n.getAttribute("id");i&&a&&"delete"===e?(t.deleteTrashForver(i,a),n.remove()):i&&a&&"restore"===e&&(t.restoreTrash(i,a),n.remove(),(new ac).refreshVersionList(),this.createModalContent())}this.refreshTabContent()}))}refreshTabContent(){const t=document.querySelector(".trash-tab.active");if(t){const e=t.getAttribute("data-tab");if(e){const t=document.querySelector(`#${e}-tab`);t&&0===t.querySelectorAll(".trash-item").length&&(t.innerHTML="",t.appendChild(this.createEmptyTrashContent()))}}}setupEmptyTrashButton(t,e){e.addEventListener("click",(()=>{const e=t.querySelector(".trash-tab.active");if(e){const n=e.getAttribute("data-tab");if(n){const e=t.querySelector(`#${n}-tab`);if(confirm("Are you sure you want to permanently delete all items in trash?")&&e){const t=e.querySelectorAll(".trash-checkbox");t&&(this.removeSelectedItems(t,"delete"),e.innerHTML="",e.appendChild(this.createEmptyTrashContent()))}}}}))}getTrashItems(){return(new r).getTrashItems()}}class sc{constructor(){this.appVersions=new d,this.debugController=new Nl,this.container=document.getElementById("navbar-buttons-left"),this.init()}init(){let t=document.createElement("button");t.innerHTML='\n        <svg xmlns="http://www.w3.org/2000/svg" width="19.043" height="21.199" viewBox="0 0 19.043 21.199">\n          <g id="debug" transform="translate(-26.101 512)">\n            <path id="Path_2337" data-name="Path 2337" d="M144.787-511.909a.7.7,0,0,0-.373.551,8.048,8.048,0,0,0,.654,2.158l.2.451-.228.248A4,4,0,0,0,144-506.45a.655.655,0,0,0,1.118.464,1,1,0,0,0,.244-.443,3.438,3.438,0,0,1,1.76-1.926,3.89,3.89,0,0,1,3.032,0,3.413,3.413,0,0,1,1.764,1.938.8.8,0,0,0,.248.443.663.663,0,0,0,1.048-.191c.224-.422-.253-1.537-1.006-2.357l-.207-.228.207-.456a6.542,6.542,0,0,0,.638-2.232.709.709,0,0,0-.663-.563.787.787,0,0,0-.555.3,3.619,3.619,0,0,0-.207.629,7.436,7.436,0,0,1-.526,1.454c-.046.066-.075.062-.356-.054a3.982,3.982,0,0,0-1.9-.323,3.972,3.972,0,0,0-1.876.311,2.461,2.461,0,0,1-.331.124,6.153,6.153,0,0,1-.63-1.694c-.079-.389-.182-.555-.41-.663A.587.587,0,0,0,144.787-511.909Z" transform="translate(-113.017)" fill="#7c8791"/>\n            <path id="Path_2338" data-name="Path 2338" d="M29.116-406.013a.83.83,0,0,0-.236.277.667.667,0,0,0-.07.48,3.714,3.714,0,0,0,1.259,2.386,1.068,1.068,0,0,1,.248.269c-.008.017-.1.191-.207.385s-.244.48-.306.634c-.1.244-.128.282-.2.257a16.882,16.882,0,0,0-2.684-.4c-.4-.012-.563.058-.729.3a.485.485,0,0,0-.083.389c.029.447.244.617.841.663a17.491,17.491,0,0,1,1.814.253c.48.091.567.12.551.178a16.06,16.06,0,0,0-.041,4.622,7.775,7.775,0,0,0,1.822,4.286,6.04,6.04,0,0,0,4.821,1.727,6.4,6.4,0,0,0,3.259-.9,6.22,6.22,0,0,0,1.537-1.52,9.364,9.364,0,0,0,1.321-4.108,21.11,21.11,0,0,0,0-3.624c-.041-.228-.083-.443-.1-.48-.017-.058.07-.087.551-.178a17.834,17.834,0,0,1,1.835-.253c.576-.046.8-.224.82-.663a.485.485,0,0,0-.083-.389c-.166-.244-.331-.315-.729-.3a16.882,16.882,0,0,0-2.684.4c-.075.025-.1-.012-.2-.257-.062-.153-.2-.439-.306-.634s-.2-.369-.207-.385a1.068,1.068,0,0,1,.248-.269,3.714,3.714,0,0,0,1.259-2.386.667.667,0,0,0-.07-.48.617.617,0,0,0-.58-.373c-.41,0-.638.232-.7.712a2.005,2.005,0,0,1-.468,1.139,3.117,3.117,0,0,1-.4.431l-.207.17-.153-.1a7.46,7.46,0,0,0-2.928-.841,10.165,10.165,0,0,0-5.5.816l-.195.128-.215-.178a3.516,3.516,0,0,1-.646-.8,2.212,2.212,0,0,1-.22-.77.7.7,0,0,0-.331-.617A.69.69,0,0,0,29.116-406.013Zm7.293,2.725a10.04,10.04,0,0,1,2.477.534,3.619,3.619,0,0,1,1.416,2.009,8.015,8.015,0,0,1,.46,2.974c-.008,3.061-.675,5.131-1.992,6.171a4.507,4.507,0,0,1-2.858.928,5.324,5.324,0,0,1-2.713-.485c-1.47-.716-2.29-2.187-2.609-4.659a20.054,20.054,0,0,1-.1-2.746c.112-1.942,1.006-3.868,1.967-4.233a11.946,11.946,0,0,1,2.477-.509A9.768,9.768,0,0,1,36.409-403.288Z" transform="translate(0 -101.502)" fill="#7c8791"/>\n            <path id="Path_2339" data-name="Path 2339" d="M194.807-327.881a.811.811,0,0,0-.447.505.724.724,0,0,0,.149.572,5.654,5.654,0,0,0,.634.431c.3.178.663.406.82.505l.277.178v4.291a34.46,34.46,0,0,0,.066,4.431.7.7,0,0,0,1.147.083l.091-.128.021-4.349.021-4.349.766-.464c.87-.53,1.015-.646,1.077-.882a.612.612,0,0,0-.182-.65.632.632,0,0,0-.663-.178c-.066.025-.472.261-.9.522l-.779.476-.779-.476C195.143-327.964,195.118-327.972,194.807-327.881Z" transform="translate(-161.281 -176.453)" fill="#7c8791"/>\n            <path id="Path_2340" data-name="Path 2340" d="M39.478-215.775c-.306.108-.447.311-.692.994a12.842,12.842,0,0,0-.435,1.739,3.47,3.47,0,0,0,.128,1.574c.058.273.124.712.149.973.062.646.012.882-.236,1.135a.756.756,0,0,0-.257.658.67.67,0,0,0,.965.493,1.891,1.891,0,0,0,.8-1.073,5.355,5.355,0,0,0-.1-2.51,2.457,2.457,0,0,1-.1-1.064,7.638,7.638,0,0,1,.58-1.976.672.672,0,0,0-.435-.961A.38.38,0,0,0,39.478-215.775Z" transform="translate(-11.53 -283.904)" fill="#7c8791"/>\n            <path id="Path_2341" data-name="Path 2341" d="M420.687-215.867a.677.677,0,0,0-.414.957,7.637,7.637,0,0,1,.58,1.976,2.457,2.457,0,0,1-.1,1.064,5.355,5.355,0,0,0-.1,2.51,1.891,1.891,0,0,0,.8,1.073.669.669,0,0,0,.969-.538.72.72,0,0,0-.282-.634c-.306-.3-.319-.87-.046-2.191a3.33,3.33,0,0,0,.1-1.479,9.7,9.7,0,0,0-.663-2.294.837.837,0,0,0-.505-.451,1,1,0,0,0-.174-.037A1.394,1.394,0,0,0,420.687-215.867Z" transform="translate(-377.776 -283.825)" fill="#7c8791"/>\n          </g>\n        </svg>\n    ',t.setAttribute("title",Ms.t("navbar.debug.label")),t.classList.add("tb-icon-button"),t.addEventListener("click",(t=>{t.preventDefault(),this.initialiseDebug(),this.debugController.init()}));let e=document.createElement("button");e.setAttribute("title",Ms.t("navbar.share.label")),e.innerHTML='\n        <svg xmlns="http://www.w3.org/2000/svg" width="21" height="22" viewBox="0 0 21 22">\n          <g id="share" transform="translate(21) rotate(90)" fill="#fff">\n            <path d="M 18.69462013244629 20.2500057220459 L 3.30538010597229 20.2500057220459 C 2.8575599193573 20.2500057220459 2.467750072479248 20.0302562713623 2.235919952392578 19.64711761474609 C 2.004080057144165 19.26396751403809 1.990300059318542 18.81669616699219 2.198090076446533 18.41998672485352 L 9.892709732055664 3.730276584625244 C 10.11246967315674 3.310746669769287 10.52639961242676 3.0602867603302 11 3.0602867603302 C 11.47360038757324 3.0602867603302 11.88753032684326 3.310746669769287 12.10729026794434 3.730276584625244 L 19.80191040039062 18.41999626159668 C 20.00970077514648 18.81669616699219 19.99592018127441 19.26396751403809 19.76408004760742 19.64711761474609 C 19.53224945068359 20.0302562713623 19.14244079589844 20.2500057220459 18.69462013244629 20.2500057220459 Z" stroke="none"/>\n            <path d="M 11 3.810276031494141 C 10.8870096206665 3.810276031494141 10.67922973632812 3.845096588134766 10.55708980560303 4.078277587890625 L 2.862470626831055 18.76799774169922 C 2.74867057800293 18.9852466583252 2.823099136352539 19.16877746582031 2.877599716186523 19.25883674621582 C 2.932090759277344 19.34890747070312 3.060129165649414 19.49999618530273 3.305379867553711 19.49999618530273 L 18.69462013244629 19.49999618530273 C 18.93987083435059 19.49999618530273 19.06790924072266 19.34890747070312 19.12240028381348 19.25883674621582 C 19.17689895629883 19.16877746582031 19.25132942199707 18.9852466583252 19.13752937316895 18.76799774169922 L 11.44291973114014 4.078287124633789 C 11.32077026367188 3.845096588134766 11.1129903793335 3.810276031494141 11 3.810276031494141 M 10.99999618530273 2.310276031494141 C 11.698655128479 2.310276031494141 12.39731502532959 2.667606353759766 12.77165985107422 3.382266998291016 L 20.46627998352051 18.07198715209961 C 21.16382026672363 19.40365600585938 20.19791030883789 20.99999618530273 18.69462013244629 20.99999618530273 L 3.305379867553711 20.99999618530273 C 1.802089691162109 20.99999618530273 0.8361797332763672 19.40365600585938 1.533720016479492 18.07198715209961 L 9.228340148925781 3.382266998291016 C 9.602680206298828 2.667606353759766 10.30133724212646 2.310276031494141 10.99999618530273 2.310276031494141 Z" stroke="none" fill="#7c8791"/>\n          </g>\n        </svg>\n\n    ',e.classList.add("tb-icon-button");let n=document.createElement("button");n.setAttribute("title",Ms.t("navbar.trash.label")),n.innerHTML='\n    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" \n      width="20" height="24" viewBox="0 0 64 64" enable-background="new 0 0 64 64" xml:space="preserve">\n      <g>\n        <polyline fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" points="25,8 25,1 39,1 39,8 \t"/>\n        <polyline fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" points="14,10 14,63 50,63 50,10 \t"/>\n        <line fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" x1="26" y1="20" x2="26" y2="54"/>\n        <line fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" x1="38" y1="20" x2="38" y2="54"/>\n        <line fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" x1="10" y1="9" x2="54" y2="9"/>\n      </g>\n    </svg>\n    ',n.classList.add("tb-icon-button"),(new ac).render(this.container),this.container.appendChild(t),this.container.appendChild(e),e.addEventListener("click",(t=>{t.preventDefault(),(new $l).openShareLinkModal()})),n.addEventListener("click",(t=>{t.preventDefault(),(new rc).openTrashModal()}))}initialiseDebug(){const t=document.createElement("div");t.id="tb-debugging",t.innerHTML='\n      <div class="tb_debug-spinner-container">\n          <div class="tb_debug-spinner"></div>\n      </div>\n      <p style="text-align: center; font-size: 14px; margin-top: 10px">Please wait while we are checking the urls...</p>\n    ',new l({title:Ms.t("navbar.debug.modal_title"),width:"800px",body:t}).open()}render(t){t.appendChild(this.container)}}var lc=function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}))};class cc{constructor(){this.appVersions=new d,this.toolboxService=new r,this.pageAttacher=new Sl}setUpNavBar(){this.autoSave();const t=document.getElementById("tb-navbar"),e=new Zs;(new sc).render(t),e.render(t)}setUpSideBar(){const t=document.getElementById("tb-sidebar");(new gl).render(t);const e=document.getElementById("tools-section");e&&(e.style.display="none")}setUpScrollButtons(){const t=document.getElementById("child-container"),e=document.querySelector(".navigator .page-navigator-left"),n=document.querySelector(".navigator .page-navigator-right"),i=()=>{e.style.display=t.scrollLeft>0?"none":"block";const i=t.scrollWidth-t.clientWidth;n.style.display=t.scrollLeft<i-5?"none":"block"};e.onclick=()=>{t.scrollLeft-=300},n.onclick=()=>{t.scrollLeft+=300},t.addEventListener("scroll",i),window.addEventListener("resize",i),i()}autoSave(){setInterval((()=>lc(this,void 0,void 0,(function*(){this.savePages()}))),1e4)}savePages(){return lc(this,arguments,void 0,(function*(t=!1){try{const t=new Map,e=yield this.appVersions.getUpdatedActiveVersion(),n=e.Pages;return yield Promise.all(n.map((n=>lc(this,void 0,void 0,(function*(){const i=n.PageId,a=`data-${i}`,o=JSON.parse(localStorage.getItem(a)||"{}");let r=null;if("Menu"===n.PageType||"MyCare"===n.PageType||"MyLiving"===n.PageType||"MyService"===n.PageType?r="PageMenuStructure":"Content"===n.PageType||"Location"===n.PageType||"Reception"===n.PageType?r="PageContentStructure":"Information"===n.PageType&&(r="PageInfoStructure"),!r||!o[r])return;const s=JSON.stringify(o[r]);if(s!==("string"==typeof n.PageStructure?n.PageStructure:JSON.stringify(n.PageStructure))){const a={AppVersionId:e.AppVersionId,PageId:i,PageName:n.PageName,PageType:n.PageType,PageStructure:s};try{yield this.toolboxService.autoSavePage(a),t.set(i,s)}catch(t){throw console.error(`Failed to save page ${n.PageName}:`,t),t}}}))))),t}catch(t){throw console.error("Error saving pages:",t),t}}))}openToastMessage(t){const e=document.createElement("div");e.id="toast",e.textContent=t||"Your changes are saved",document.body.appendChild(e),setTimeout((()=>{e.style.opacity="1",e.style.transform="translateX(-50%) translateY(0)"}),100),setTimeout((()=>{e.style.opacity="0",setTimeout((()=>{document.body.removeChild(e)}),500)}),3e3)}unDoReDo(){const t=document.getElementById("undo"),e=document.getElementById("redo"),n=globalThis.currentPageId;if(!n)return void console.log("No editor found");const i=new dc(n),a=()=>{t&&(t.disabled=!i.canUndo()),e&&(e.disabled=!i.canRedo())};a(),t&&(t.onclick=t=>{t.preventDefault();const e=i.undo();e&&this.applyNewState(e,n),a()}),e&&(e.onclick=t=>{t.preventDefault();const e=i.redo();e&&this.applyNewState(e,n),a()})}applyNewState(t,e){const n=new bl(t).generateHTML(),i=`data-${e}`,a=globalThis.activeEditor;if(!a)return;const o=globalThis.selectedComponent,r=o?o.getId():null,s=a.getWrapper().find("#frame-container")[0];if(s&&(s.replaceWith(n),localStorage.setItem(i,JSON.stringify(t)),r)&&a.getWrapper().find("#frame-container")[0]){const t=a.getWrapper().find(`#${r}`)[0];t?(a.select(t),globalThis.selectedComponent=t):console.log("Previously selected component no longer exists")}}}class dc{get pages(){return dc.pagesStore}constructor(t){this.currentPageId=t,this.limit=50,this.pages[t]||this.addPage(t)}addPage(t=this.currentPageId){this.pages[t]||(this.pages[t]={history:[],currentIndex:-1})}get currentState(){if(!this.currentPageId||!this.pages[this.currentPageId])return null;const t=this.pages[this.currentPageId];return t.history[t.currentIndex]}addState(t){if(!this.currentPageId)return null;this.pages[this.currentPageId]||this.addPage(this.currentPageId);const e=this.pages[this.currentPageId];if(0===e.history.length)return e.history.push(JSON.parse(JSON.stringify(t))),e.currentIndex=0,this.currentState;e.currentIndex<e.history.length-1&&(e.history=e.history.slice(0,e.currentIndex+1));const n=e.history[e.currentIndex];return JSON.stringify(n)===JSON.stringify(t)||(e.history.push(JSON.parse(JSON.stringify(t))),e.history.length>this.limit?e.history.shift():e.currentIndex++,(new cc).unDoReDo()),this.currentState}canUndo(){return!(!this.currentPageId||!this.pages[this.currentPageId])&&this.pages[this.currentPageId].currentIndex>0}canRedo(){if(!this.currentPageId||!this.pages[this.currentPageId])return!1;const t=this.pages[this.currentPageId];return t.currentIndex<t.history.length-1}undo(){return this.canUndo()?(this.pages[this.currentPageId].currentIndex--,this.currentState):null}redo(){return this.canRedo()?(this.pages[this.currentPageId].currentIndex++,this.currentState):null}getHistoryStatus(){if(!this.currentPageId||!this.pages[this.currentPageId])return"No page selected";const t=this.pages[this.currentPageId];return`History: ${t.currentIndex+1}/${t.history.length}`}getPageData(t){return this.pages[t]||this.addPage(t),this.pages[t]?this.pages[t].history[this.pages[t].currentIndex]:null}getAllHistory(){return this.pages}static getAllPages(){return dc.pagesStore}static clearAllHistory(){dc.pagesStore={}}}dc.pagesStore={};class hc{constructor(t){this.pageId=t,this.historyManager=new dc(this.pageId)}contentRow(t){return JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}"),{InfoId:t.InfoId,InfoType:t.InfoType||"",InfoValue:t.InfoValue||"",InfoNextSectionId:t.InfoPositionId||"",CtaAttributes:null==t?void 0:t.CtaAttributes,Tiles:null==t?void 0:t.Tiles}}addInfoType(t){var e,n;const i=`data-${this.pageId}`,a=JSON.parse(localStorage.getItem(i)||"{}");if(!a.PageInfoStructure)return;null!==(e=(n=a.PageInfoStructure).InfoContent)&&void 0!==e||(n.InfoContent=[]);const o=this.contentRow(t),r=o.InfoNextSectionId,s=a.PageInfoStructure.InfoContent.findIndex((t=>t.InfoId===r));delete o.InfoNextSectionId,-1!==s?(delete o.InfoNextSectionId,a.PageInfoStructure.InfoContent.splice(s,0,o)):a.PageInfoStructure.InfoContent.push(o),localStorage.setItem(i,JSON.stringify(a)),this.historyManager.addState(a)}moveContentRow(t,e){var n;const i=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(!(null===(n=null==i?void 0:i.PageInfoStructure)||void 0===n?void 0:n.InfoContent))return;const a=i.PageInfoStructure.InfoContent,o=a.findIndex((e=>e.ContentId===t));if(-1===o||e<0||e>=a.length)return;const[r]=a.splice(o,1);a.splice(e,0,r),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(i)),this.historyManager.addState(i)}updateInfoContent(t,e){var n;const i=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(console.log("id",t),console.log("data",i),!(null===(n=null==i?void 0:i.PageInfoStructure)||void 0===n?void 0:n.InfoContent))return!1;const a=i.PageInfoStructure.InfoContent,o=a.findIndex((e=>e.InfoId===t));return console.log("info index",o),-1!==o&&(a[o]=e,localStorage.setItem(`data-${this.pageId}`,JSON.stringify(i)),this.historyManager.addState(i),!0)}removeInfoContent(t){var e;const n=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(!(null===(e=null==n?void 0:n.PageInfoStructure)||void 0===e?void 0:e.InfoContent))return!1;const i=n.PageInfoStructure.InfoContent,a=i.findIndex((e=>e.InfoId===t));return-1!==a&&(i.splice(a,1),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(n)),this.historyManager.addState(n),!0)}getInfoContent(t){var e;const n=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(!(null===(e=null==n?void 0:n.PageInfoStructure)||void 0===e?void 0:e.InfoContent))return null;const i=n.PageInfoStructure.InfoContent,a=i.findIndex((e=>e.InfoId===t));return-1===a?null:i[a]}}class uc{constructor(){this.infoSectionUI=new js,this.editor=globalThis.activeEditor}createMenuItem(t,e){const n=document.createElement("li");return n.classList.add("menu-item"),n.innerHTML=t.label.length>20?t.label.substring(0,20)+"...":t.label,n.setAttribute("data-name",t.name||""),n.addEventListener("click",(i=>{var a;i.stopPropagation(),t.action&&(t.action(),e&&e()),(null===(a=n.parentElement)||void 0===a?void 0:a.parentElement).remove()})),n.id=t.id,n}addCtaButton(t,e,n){const i=document.createElement("div");i.innerHTML=t;const a=i.firstElementChild;if(this.appendComponent(t,n)){const t={InfoId:a.id,InfoType:"Cta",InfoPositionId:n,CtaAttributes:e};this.addToMapper(t);const i=this.editor.getWrapper().find(`#${a.id}`)[0];i&&this.editor.select(i)}}addImage(t,e){const n=this.infoSectionUI.getImage(t),i=document.createElement("div");i.innerHTML=n;const a=i.firstElementChild;if(this.appendComponent(n,e)){const n={InfoId:a.id,InfoType:"Image",InfoValue:t,InfoPositionId:e};this.addToMapper(n)}}openContentEditModal(t){const e=document.createElement("div"),n=document.createElement("div");n.id="editor",n.innerHTML="",n.style.minHeight="150px";const i=document.createElement("div");i.classList.add("popup-footer"),i.style.marginBottom="-12px";const a=this.createButton("submit_form","tb-btn-primary","Save");a.disabled=!0,a.style.opacity="0.6",a.style.cursor="not-allowed";const o=this.createButton("cancel_form","tb-btn-outline","Cancel");i.appendChild(a),i.appendChild(o),e.appendChild(n),e.appendChild(i);const r=new l({title:"Description",width:"500px",body:e});r.open();const s=new Qo("#editor",{modules:{toolbar:[["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}]]},theme:"snow",placeholder:"Start typing here..."});setTimeout((()=>{s.focus()}),0),s.on("text-change",(()=>{const t=s.root.innerHTML,e="<p><br></p>"!==t&&""!==t.trim();a.disabled=!e,a.disabled?(a.style.opacity="0.6",a.style.cursor="not-allowed"):(a.style.opacity="1",a.style.cursor="pointer")})),a.addEventListener("click",(()=>{const e=document.querySelector("#editor .ql-editor");this.addDescription(e.innerHTML,t),r.close()})),o.addEventListener("click",(()=>{r.close()}))}addDescription(t,e){const n=this.infoSectionUI.getDescription(t),i=document.createElement("div");i.innerHTML=n;const a=i.firstElementChild;if(this.appendComponent(n,e)){const n={InfoId:a.id,InfoType:"Description",InfoPositionId:e,InfoValue:t};this.addToMapper(n)}}addTile(t,e){var n;const i=document.createElement("div");i.innerHTML=t;const a=i.firstElementChild,o=null===(n=a.querySelector(".template-wrapper"))||void 0===n?void 0:n.id;if(this.appendComponent(t,e)){const t={InfoId:a.id,InfoType:"TileRow",InfoPositionId:e,Tiles:[{Id:o||cr(15),Name:"Title",Text:"Title",Color:"#333333",Align:"left",BGSize:1,BGPosition:1,Action:{ObjectType:"",ObjectId:"",ObjectUrl:""}}]};this.addToMapper(t);const n=this.editor.getWrapper().find(`#${o}`)[0];if(n){const t=n.find(".template-block")[0];t&&this.editor.select(t)}}}updateDescription(t,e){const n=this.infoSectionUI.getDescription(t,e),i=this.editor.getWrapper().find(`#${e}`)[0];i&&(i.replaceWith(n),this.updateInfoMapper(e,{InfoId:e,InfoType:"Description",InfoValue:t}))}updateInfoImage(t,e,n){const i=this.infoSectionUI.getImage(t),a=this.editor.getWrapper().find(`#${e}`)[0];a?(a.replaceWith(i),this.updateInfoMapper(e||"",{InfoId:e||cr(15),InfoType:"Image",InfoValue:t})):this.addImage(t,n)}updateInfoCtaButtonImage(t,e){const n=this.editor.getWrapper().find(`#${e}`)[0];if(n){n.getEl().style.backgroundImage="";const i=n.find("img")[0];i&&e&&(i.setAttributes({src:t}),this.updateInfoCtaAttributes(e,"CtaButtonType","Image"),this.updateInfoCtaAttributes(e,"CtaButtonImgUrl",t))}}deleteInfoImageOrDesc(t){const e=this.editor.getWrapper().find(`#${t}`)[0];e&&(e.remove(),this.removeInfoMapper(t),this.removeConsecutivePlusButtons(),this.restoreEmptyStateIfNoSections())}deleteCtaButton(t){const e=this.editor.getWrapper().find(`#${t}`)[0];e&&(e.remove(),this.removeInfoMapper(t),this.removeConsecutivePlusButtons(),this.restoreEmptyStateIfNoSections())}appendComponent(t,e){const n=this.editor.getWrapper().find(".container-column-info")[0];if(!n)return!1;const i=n.components().models,a=!e,o=e?i.findIndex((t=>t.getId()===e)):i.length,r=(new vl).getHTML(),s=(new vl(!1,!0).getHTML(),this.editor.addComponents(r));n.append(s,{at:o});const l=this.editor.addComponents(t);n.append(l,{at:o+1});const c=this.editor.addComponents(r);return n.append(c,{at:o+2}),this.removeConsecutivePlusButtons(),this.markFirstAndLastPlusButtons("first"),this.markFirstAndLastPlusButtons("last"),this.removeEmptyState(),a&&setTimeout((()=>{const t=this.editor.getWrapper().find(".content-frame-container")[0];if(t){const e=t.getEl();e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}}),0),!0}addToMapper(t){const e=globalThis.currentPageId;new hc(e).addInfoType(t)}updateInfoCtaAttributes(t,e,n){const i=globalThis.infoContentMapper.getInfoContent(t);if(i){const a=i.CtaAttributes;a&&(this.setNestedProperty(a,e,n),this.updateInfoMapper(t,i),this.removeConsecutivePlusButtons())}}updateInfoTileAttributes(t,e,n,i){var a;const o=globalThis.infoContentMapper.getInfoContent(t);if(o){const r=null===(a=o.Tiles)||void 0===a?void 0:a.find((t=>t.Id===e));r&&this.setNestedProperty(r,n,i),this.updateInfoMapper(t,o)}}setNestedProperty(t,e,n){const i=e.split(".");let a=t;for(let t=0;t<i.length-1;t++){const e=i[t];e in a||(a[e]={}),a=a[e]}a[i[i.length-1]]=n}updateInfoMapper(t,e){const n=globalThis.currentPageId;new hc(n).updateInfoContent(t,e),this.removeEmptyRows(n)}removeInfoMapper(t){const e=globalThis.currentPageId;new hc(e).removeInfoContent(t)}removeEmptyRows(t){var e;const n=JSON.parse(localStorage.getItem(`data-${t}`)||"{}");(null===(e=null==n?void 0:n.PageInfoStructure)||void 0===e?void 0:e.InfoContent)&&n.PageInfoStructure.InfoContent.forEach((t=>{"TileRow"===(null==t?void 0:t.InfoType)&&(t.Tiles&&0!==t.Tiles.length||this.removeInfoMapper(t.InfoId))}))}restoreEmptyStateIfNoSections(){const t=this.editor.getWrapper().find(".container-column-info")[0];if(t&&t.components().models.length<=1){const e=new vl(!0).getHTML(),n=this.editor.addComponents(e);t.append(n);const i=this.editor.getWrapper().find(".content-frame-container")[0];i&&(i.addClass("empty-state"),this.removeConsecutivePlusButtons())}}markFirstAndLastPlusButtons(t){const e=this.editor.getWrapper().find(".container-column-info")[0];if(!e)return;const n=e.find(".info-section-spacing-container");if(0===n.length)return;const i="first"===t?"first-section":"last-section";n.forEach((t=>t.removeClass(i)));const a="first"===t?n[0]:n[n.length-1];if(a){const e="first"===t?"first-section":"last-section";a.addClass(e)}}removeConsecutivePlusButtons(){var t,e;const n=this.editor.getWrapper().find(".container-column-info")[0];if(!n)return;let i=n.components().models,a=1;for(;a<i.length;){const o=i[a],r=i[a-1],s=o.getClasses(),l=r.getClasses(),c=s.includes("info-section-spacing-container"),d=l.includes("info-section-spacing-container");if(c&&d){const e=null===(t=o.getId)||void 0===t?void 0:t.call(o),a=this.editor.getWrapper().find(`#${e}`)[0];if(a){a.remove(),i=n.components().models;continue}}else if(c){const t=a+1<i.length?i[a+1]:null,n=l.includes("cta-container-child")&&l.includes("cta-child"),r=(null==t?void 0:t.getClasses().includes("cta-container-child"))&&(null==t?void 0:t.getClasses().includes("cta-child")),s=null===(e=o.getId)||void 0===e?void 0:e.call(o),c=this.editor.getWrapper().find(`#${s}`)[0];c&&(n&&r?c.addStyle({width:"auto"}):c.removeStyle("width"))}a++}}removeEmptyState(){const t=this.editor.getWrapper().find(".content-frame-container")[0];t&&t.removeClass("empty-state")}createButton(t,e,n){const i=document.createElement("button");return i.id=t,i.classList.add("tb-btn",e),i.innerText=n,i}}var pc=function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}))};class gc{constructor(t,e){this.editor=t,this.page=e,this.toolBoxService=new r,this.contentMapper=new pr(this.page.PageId)}saveContentDescription(t){"Location"===this.page.PageName?this.saveLocationContent(t):"Reception"===this.page.PageName?this.saveReceptionContent(t):this.saveContentPageInfo(t)}saveContentPageInfo(t){return pc(this,void 0,void 0,(function*(){const e={ProductServiceId:this.page.PageId,ProductServiceDescription:t};if(yield this.toolBoxService.updateDescription(e)){const e=this.editor.Components.getWrapper().find("#contentDescription")[0];e&&this.updateMapper(e,t)}}))}saveLocationContent(t){return pc(this,void 0,void 0,(function*(){const e={LocationDescription:t,LocationImageBase64:"",ReceptionDescription:"",ReceptionImageBase64:""};if(yield this.toolBoxService.updateLocationInfo(e)){const e=this.editor.Components.getWrapper().find("#contentDescription")[0];e&&this.updateMapper(e,t)}}))}saveReceptionContent(t){return pc(this,void 0,void 0,(function*(){const e={LocationDescription:"",LocationImageBase64:"",ReceptionDescription:t,ReceptionImageBase64:""};if(yield this.toolBoxService.updateLocationInfo(e)){const e=this.editor.Components.getWrapper().find("#contentDescription")[0];e&&this.updateMapper(e,t)}}))}updateMapper(t,e){const n=t.parent();t.replaceWith(`<div ${nr} id="contentDescription">${this.addGrapesAttributes(e)}</div>`),this.contentMapper.updateContentDescription(n.getId(),e)}updateContentImage(t){"Reception"===this.page.PageName||"Location"===this.page.PageName?this.updateLocationImage(t):this.updateServiceContentImage(t)}updateCtaButtonImage(t){const e=globalThis.ctaContainerId,n=this.editor.Components.getWrapper().find(`#${e}`)[0];if(n){const i=n.find("img")[0],a=n.find("svg")[0];if(i){i.setAttributes({src:t,alt:"cta Image"});const n=`\n                    <svg ${nr} xmlns="http://www.w3.org/2000/svg" id="Component_57_1" data-name="Component 57 – 1" width="22" height="22" viewBox="0 0 33 33">\n                        <g ${nr} id="Ellipse_532" data-name="Ellipse 532" fill="#fff" stroke="#5068a8" stroke-width="2">\n                        <circle ${nr} cx="16.5" cy="16.5" r="16.5" stroke="none"/>\n                        <circle ${nr} cx="16.5" cy="16.5" r="16" fill="none"/>\n                        </g>\n                        <path ${nr} id="Icon_feather-edit-2" data-name="Icon feather-edit-2" d="M12.834,3.8a1.854,1.854,0,0,1,2.622,2.622L6.606,15.274,3,16.257l.983-3.606Z" transform="translate(7 6.742)" fill="#5068a8" stroke="#5068a8" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>\n                    </svg>\n                    `;a.replaceWith(n),this.contentMapper.updateContentButtonType(e,"Image",t)}}}updateServiceContentImage(t){return pc(this,void 0,void 0,(function*(){try{const e=yield dr(t),n={ProductServiceId:this.page.PageId,ProductServiceDescription:"",ProductServiceImageBase64:e};if(yield this.toolBoxService.updateContentImage(n)){const e=this.editor.Components.getWrapper().find("#product-service-image")[0];e&&(e.setAttributes({src:t,alt:`${this.page.PageName} Image`}),this.contentMapper.updateContentImage(e.parent().getId(),t))}}catch(t){console.error("Error:",t)}}))}updateLocationImage(t){return pc(this,void 0,void 0,(function*(){try{const e=yield dr(t);let n;if("Location"===this.page.PageName?n={LocationDescription:"",LocationImageBase64:e,ReceptionDescription:"",ReceptionImageBase64:""}:"Reception"===this.page.PageName&&(n={LocationDescription:"",LocationImageBase64:"",ReceptionDescription:"",ReceptionImageBase64:e}),yield this.toolBoxService.updateLocationInfo(n)){const e=this.editor.Components.getWrapper().find("#product-service-image")[0];e&&(e.setAttributes({src:t,alt:`${this.page.PageName} Image`}),this.contentMapper.updateContentImage(e.parent().getId(),t))}}catch(t){console.error("Error:",t)}}))}deleteContentImage(){return pc(this,void 0,void 0,(function*(){try{const t={ProductServiceId:this.page.PageId};if(yield this.toolBoxService.deleteContentImage(t)){const t=this.editor.Components.getWrapper().find("#product-service-image")[0];if(t){const e=t.parent();e&&e.remove()}}}catch(t){console.error("Error deleting media:",t)}}))}addGrapesAttributes(t){const e=document.createElement("div");return"string"==typeof t&&(e.innerHTML=t),e.querySelectorAll("*").forEach((t=>{t.setAttribute("data-gjs-draggable","false"),t.setAttribute("data-gjs-selectable","false"),t.setAttribute("data-gjs-editable","false"),t.setAttribute("data-gjs-highlightable","false"),t.setAttribute("data-gjs-droppable","false"),t.setAttribute("data-gjs-resizable","false"),t.setAttribute("data-gjs-hoverable","false")})),e.innerHTML}}var fc=function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}))};class mc{constructor(t,e,n,i,a){this.mediaFile=t,this.type=e,this.infoId=i,this.sectionId=a,this.toolboxService=new r,this.container=document.createElement("div"),this.imageUpload=n,this.init()}init(){this.container.className="file-item valid",this.container.id=this.mediaFile.MediaId;const t=document.createElement("img");t.src=this.mediaFile.MediaUrl,t.alt=this.mediaFile.MediaName,t.className="preview-image";const e=document.createElement("div");e.className="action-column",document.createElement("div").className="file-info";const n=document.createElement("div");n.className="file-name",n.innerText=this.mediaFile.MediaName;const i=document.createElement("div");i.className="file-size",i.innerText=this.formatBytes(this.mediaFile.MediaSize);const a=document.createElement("span");a.className="status-icon",a.style.color="green";const o=document.createElement("span");o.className="add-image",o.title="Replace image",o.style.width="16px",o.style.height="16px",o.style.backgroundImage="url('/Resources/UCGrapes1/src/images/rotate.png')",o.style.backgroundSize="contain",o.style.backgroundRepeat="no-repeat",o.style.backgroundPosition="center",o.style.cursor="pointer",this.setupItemClickEvent(a);const r=document.createElement("span");r.className="delete-media fa-regular fa-trash-can",r.title="Delete image",r.addEventListener("click",(t=>{t.stopPropagation(),this.deleteEvent()})),e.appendChild(o),e.appendChild(r),this.container.appendChild(t),this.container.appendChild(e)}formatBytes(t){const e=["Bytes","KB","MB","GB","TB"];if(0===t)return"0 Byte";const n=parseInt(Math.floor(Math.log(t)/Math.log(1024)).toString());return 0===n?t+" "+e[n]:(t/Math.pow(1024,n)).toFixed(1)+" "+e[n]}setupItemClickEvent(t){this.container.addEventListener("click",(()=>{this.fileListContainer=document.getElementById("fileList"),this.fileListContainer.style.display="none",this.imageUpload.displayImageEditor(this.mediaFile.MediaUrl),document.querySelectorAll(".file-item").forEach((t=>{t.classList.remove("selected");const e=t.querySelector(".status-icon");e&&(e.innerHTML=t.classList.contains("invalid")?"⚠":"")})),this.container.classList.contains("selected")?t.innerHTML="":t.innerHTML='\n                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="13.423" viewBox="0 0 18 13.423">\n                        <path id="Icon_awesome-check" data-name="Icon awesome-check" d="M6.114,17.736l-5.85-5.85a.9.9,0,0,1,0-1.273L1.536,9.341a.9.9,0,0,1,1.273,0L6.75,13.282l8.441-8.441a.9.9,0,0,1,1.273,0l1.273,1.273a.9.9,0,0,1,0,1.273L7.386,17.736A.9.9,0,0,1,6.114,17.736Z" transform="translate(0 -4.577)" fill="#3a9341"></path>\n                    </svg>\n                ',this.container.classList.toggle("selected"),this.setupModalActions()}))}setupModalActions(){var t,e;const n=document.querySelector(".modal-actions");if(!n)return;n.style.display="flex";const i=n.querySelector("#cancel-modal"),a=n.querySelector("#save-modal");if(!i||!a)return;const o=i.cloneNode(!0),r=a.cloneNode(!0);null===(t=i.parentNode)||void 0===t||t.replaceChild(o,i),null===(e=a.parentNode)||void 0===e||e.replaceChild(r,a);const s=document.querySelector(".tb-modal");s&&(o.addEventListener("click",(()=>{s.style.display="none",s.remove()})),r.addEventListener("click",(()=>fc(this,void 0,void 0,(function*(){const t=document.getElementById("selected-image");if(!t)return void console.error("Image element not found.");const e=document.getElementById("crop-frame");if(e){const n=`cropped-imafresetge-${Date.now()}.png`,i=new File([t.src],n,{type:"image/png"});yield this.imageUpload.saveCroppedImage(t,e,i)}"tile"===this.type?this.addImageToTile():"content"===this.type?this.addImageToContentPage():"cta"===this.type&&this.infoId?this.updateInfoCtaButtonImage():"cta"===this.type?this.updateCtaButtonImage():"info"===this.type&&this.updateInfoImage(),s.style.display="none",s.remove()})))))}addImageToTile(){var t;const e=globalThis.selectedComponent;if(e)try{const n=encodeURI(this.imageUpload.croppedUrl);e.addStyle({"background-image":`url(${n})`,"background-size":"cover","background-position":"center","background-blend-mode":"overlay"});const i=[["BGImageUrl",n],["BGColor","transparent"]];let a;const o=e.parent(),r=o.parent();if("Information"===globalThis.pageData.PageType){const e=new uc;for(const[t,n]of i)e.updateInfoTileAttributes(r.getId(),o.getId(),t,n);const n=globalThis.infoContentMapper.getInfoContent(r.getId());a=null===(t=null==n?void 0:n.Tiles)||void 0===t?void 0:t.find((t=>t.Id===o.getId()))}else{for(const[t,e]of i)globalThis.tileMapper.updateTile(o.getId(),t,e);a=globalThis.tileMapper.getTile(r.getId(),o.getId())}e&&a&&new Ns(e,a).setTileAttributes()}catch(t){console.error("Error adding image to tile:",t)}}addImageToContentPage(){return fc(this,void 0,void 0,(function*(){const t=encodeURI(this.mediaFile.MediaUrl),e=globalThis.activeEditor,n=globalThis.pageData;new gc(e,n).updateContentImage(t)}))}updateCtaButtonImage(){return fc(this,void 0,void 0,(function*(){const t=encodeURI(this.mediaFile.MediaUrl),e=globalThis.activeEditor,n=globalThis.pageData;new gc(e,n).updateCtaButtonImage(t)}))}updateInfoImage(){return fc(this,void 0,void 0,(function*(){const t=encodeURI(this.mediaFile.MediaUrl);(new uc).updateInfoImage(t,this.infoId,this.sectionId)}))}updateInfoCtaButtonImage(){const t=encodeURI(this.mediaFile.MediaUrl);(new uc).updateInfoCtaButtonImage(t,this.infoId)}deleteEvent(){new dl("Are you sure you want to delete this media file?","Delete media",(()=>fc(this,void 0,void 0,(function*(){try{yield this.toolboxService.deleteMedia(this.mediaFile.MediaId);let t=yield this.toolboxService.getMediaFiles();t=t.filter((t=>t.MediaId!==this.mediaFile.MediaId));const e=document.getElementById(this.mediaFile.MediaId);e&&e.remove(),0===t.length&&(document.querySelector(".modal-actions").style.display="none")}catch(t){console.error("Error deleting media:",t)}})))).render(document.body)}getElement(){return this.container}render(t){t.appendChild(this.container)}}var vc=function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}))};class bc{constructor(t,e,n){this.fileListElement=null,this.finishedUploads={},this.progressIntervals={},this.type=t,this.infoId=e,this.sectionId=n,this.modalContent=document.createElement("div"),this.toolboxService=new r,this.init()}init(){this.modalContent.innerHTML="",this.modalContent.className="tb-modal-content";const t=document.createElement("div");t.className="tb-modal-header";const e=document.createElement("h2");e.innerText=Ms.t("sidebar.image_upload.modal_title");const n=document.createElement("span");n.className="close",n.innerHTML='\n            <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 21 21">\n              <path id="Icon_material-close" data-name="Icon material-close" d="M28.5,9.615,26.385,7.5,18,15.885,9.615,7.5,7.5,9.615,15.885,18,7.5,26.385,9.615,28.5,18,20.115,26.385,28.5,28.5,26.385,20.115,18Z" transform="translate(-7.5 -7.5)" fill="#6a747f" opacity="0.54"></path>\n            </svg>\n        ',n.addEventListener("click",(t=>{t.preventDefault();const e=this.modalContent.parentElement;e.style.display="none",null==e||e.remove()})),t.appendChild(e),t.appendChild(n);const i=document.createElement("div");i.className="modal-actions";const a=document.createElement("button");a.className="tb-btn tb-btn-outline",a.id="cancel-modal",a.innerText=Ms.t("sidebar.image_upload.cancel"),a.addEventListener("click",(t=>{t.preventDefault();const e=this.modalContent.parentElement;e.style.display="none",null==e||e.remove()}));const o=document.createElement("button");o.className="tb-btn tb-btn-primary",o.id="save-modal",o.innerText=Ms.t("sidebar.image_upload.save"),i.appendChild(a),i.appendChild(o),this.modalContent.appendChild(t),this.uploadArea();const r=globalThis.selectedComponent;if(r){const t=r.getStyle()["background-image"];if(void 0!==t){const e=t.replace(/url\(["']?|["']?\)/g,"");if(this.displayImageEditor(e),this.createFileListElement(),this.loadMediaFiles(),!e)return void console.error("No image data available to display.")}else this.loadMediaFiles()}this.createFileListElement(),this.loadMediaFiles(),this.modalContent.appendChild(i)}uploadArea(){const t=document.createElement("div");t.className="upload-area",t.id="uploadArea",t.innerHTML=`\n        <svg xmlns="http://www.w3.org/2000/svg" width="40.999" height="28.865" viewBox="0 0 40.999 28.865">\n            <path id="Path_1040" data-name="Path 1040" d="M21.924,11.025a3.459,3.459,0,0,0-3.287,3.608,3.459,3.459,0,0,0,3.287,3.608,3.459,3.459,0,0,0,3.287-3.608A3.459,3.459,0,0,0,21.924,11.025ZM36.716,21.849l-11.5,14.432-8.218-9.02L8.044,39.89h41Z" transform="translate(-8.044 -11.025)" fill="#afadad"></path>\n          </svg>\n          <div class="upload-text">\n            ${Ms.t("sidebar.image_upload.upload_message")}\n        </div>\n        `,this.setupDragAndDrop(t),this.modalContent.appendChild(t),document.createElement("div").className="modal-footer-buttons";const e=document.createElement("button");e.className="tb-btn tb-btn-primary",e.id="save-modal-image",e.innerText="Ok",e.addEventListener("click",(t=>vc(this,void 0,void 0,(function*(){t.preventDefault();const e=document.getElementById("selected-image");if(!e)return void console.error("Image element not found.");const n=document.getElementById("crop-frame");if(n){const t=`cropped-imafresetge-${Date.now()}.png`,i=new File([e.src],t,{type:"image/png"});yield this.saveCroppedImage(e,n,i)}}))));const n=document.createElement("button");n.className="tb-btn tb-btn-outline",n.id="cancel-modal",n.innerText="Cancel",n.addEventListener("click",(t=>{t.preventDefault();const e=this.modalContent.parentElement;e.style.display="none",null==e||e.remove()}))}createFileListElement(){this.fileListElement=document.createElement("div"),this.fileListElement.className="file-list",this.fileListElement.id="fileList";const t=document.createElement("div");t.id="loading-media",t.className="loading-media",t.textContent="Loading media files...",this.fileListElement.appendChild(t),this.modalContent.appendChild(this.fileListElement)}loadMediaFiles(){return vc(this,void 0,void 0,(function*(){try{const t=yield this.toolboxService.getMediaFiles();if(this.fileListElement&&(this.fileListElement.innerHTML="",t&&t.length>0)){t.forEach((t=>{new mc(t,this.type,this,this.infoId,this.sectionId).render(this.fileListElement)}));const e=document.getElementById("loading-media");e&&(e.style.display="none")}}catch(t){console.error("Error loading media files:",t),this.fileListElement&&(this.fileListElement.innerHTML='<div class="error-message">Error loading media files. Please try again.</div>')}}))}setupDragAndDrop(t){return vc(this,void 0,void 0,(function*(){const e=document.createElement("input");e.type="file",e.id="fileInput",e.multiple=!0,e.accept="image/jpeg, image/jpg, image/png",e.style.display="none",t.appendChild(e);const n=t.querySelector(".upload-text");n&&n.addEventListener("click",(t=>{t.stopPropagation(),e.click()})),t.addEventListener("click",(n=>{n.target===t&&e.click()})),e.addEventListener("change",(()=>{e.files&&e.files.length>0&&this.handleFiles(e.files)})),t.addEventListener("dragover",(e=>{e.preventDefault(),t.classList.add("drag-over")})),t.addEventListener("dragleave",(e=>{e.preventDefault(),t.classList.remove("drag-over")})),t.addEventListener("drop",(e=>vc(this,void 0,void 0,(function*(){var n;e.preventDefault(),t.classList.remove("drag-over"),(null===(n=e.dataTransfer)||void 0===n?void 0:n.files)&&e.dataTransfer.files.length>0&&(yield this.handleFiles(e.dataTransfer.files))}))))}))}handleFiles(t){return vc(this,void 0,void 0,(function*(){const e=Array.from(t);for(const t of e)if(t.type.startsWith("image/"))try{const e=yield this.readFileAsDataURL(t),n={MediaId:Date.now().toString(),MediaName:t.name,MediaUrl:e,MediaType:t.type,MediaSize:t.size};yield this.toolboxService.uploadFile(n.MediaUrl,n.MediaName,n.MediaSize,n.MediaType),this.init()}catch(t){console.error("Error processing file:",t)}}))}dataUriToFile(t,e="image.png"){const[n,i]=t.split(","),a=n.match(/:(.*?);/),o=a?a[1]:"image/png",r=atob(i),s=new Uint8Array(r.length);for(let t=0;t<r.length;t++)s[t]=r.charCodeAt(t);return new File([s],e,{type:o})}getFile(t){return vc(this,void 0,void 0,(function*(){const e=yield fetch(t),n=yield e.blob();return new File([n],"image.jpg",{type:n.type})}))}displayImageEditor(t,e){return vc(this,void 0,void 0,(function*(){e||(e=yield this.getFile(t));const n=this.modalContent.querySelector(".upload-area");n&&(n.innerHTML="");const i=document.createElement("div");i.className="image-editor-container",i.style.position="relative",i.style.width="100%",i.style.height="400px",i.style.overflow="hidden",i.style.border="1px solid #ccc";const a=document.createElement("img");a.id="selected-image",a.src=t;const o=document.createElement("div");o.id="crop-frame",o.style.position="absolute",o.style.border="2px dashed #5068a8";const r=globalThis.selectedComponent;let s=2;if(r){const t=r.parent().parent().find(".template-wrapper").length||1;1===t?s=2:2===t?s=1.5:3===t&&(s=1)}a.onload=()=>{const t=300*s;o.style.width=`${t}px`,o.style.height="300px",o.style.left=(i.offsetWidth-t)/2+"px",o.style.top=(i.offsetHeight-300)/2+"px",m()},i.appendChild(a),i.appendChild(o),i.getBoundingClientRect(),["top-left","top-right","bottom-left","bottom-right"].forEach((t=>{const e=document.createElement("div");e.className=`resize-handle ${t}`,e.style.position="absolute",e.style.width="10px",e.style.height="10px",e.style.backgroundColor="#5068a8",e.style.zIndex="11",t.includes("top")&&(e.style.top="-5px"),t.includes("bottom")&&(e.style.bottom="-5px"),t.includes("left")&&(e.style.left="-5px"),t.includes("right")&&(e.style.right="-5px"),o.appendChild(e),e.addEventListener("mousedown",(e=>{e.preventDefault(),e.stopPropagation();const n=e.clientX,i=e.clientY,a=o.offsetWidth,r=o.offsetHeight,s=o.offsetLeft,l=o.offsetTop,c=e=>{const c=e.clientX-n,d=e.clientY-i;t.includes("right")&&(o.style.width=`${a+c}px`),t.includes("bottom")&&(o.style.height=`${r+d}px`),t.includes("left")&&(o.style.width=a-c+"px",o.style.left=`${s+c}px`),t.includes("top")&&(o.style.height=r-d+"px",o.style.top=`${l+d}px`),m()},d=()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",d)};document.addEventListener("mousemove",c),document.addEventListener("mouseup",d)}))}));let l=!1,c=0,d=0;o.addEventListener("mousedown",(t=>{t.preventDefault(),t.stopPropagation(),l=!0,c=t.clientX-o.getBoundingClientRect().left,d=t.clientY-o.getBoundingClientRect().top,document.body.style.userSelect="none"})),document.addEventListener("mousemove",(t=>{if(l){t.preventDefault(),t.stopPropagation();const e=i.getBoundingClientRect();let n=t.clientX-c-e.left,a=t.clientY-d-e.top;n<0&&(n=0),n+o.offsetWidth>e.width&&(n=e.width-o.offsetWidth),a<0&&(a=0),a+o.offsetHeight>e.height&&(a=e.height-o.offsetHeight),o.style.left=`${n}px`,o.style.top=`${a}px`,h.style.height=`${a}px`,u.style.top=`${a+o.offsetHeight}px`,u.style.height=e.height-(a+o.offsetHeight)+"px",p.style.top=`${a}px`,p.style.height=`${o.offsetHeight}px`,p.style.width=`${n}px`,g.style.top=`${a}px`,g.style.height=`${o.offsetHeight}px`,g.style.left=`${n+o.offsetWidth}px`,g.style.width=e.width-(n+o.offsetWidth)+"px"}})),document.addEventListener("mouseup",(t=>{l&&(t.preventDefault(),t.stopPropagation(),l=!1,document.body.style.userSelect="auto")}));const h=document.createElement("div"),u=document.createElement("div"),p=document.createElement("div"),g=document.createElement("div"),f={position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.7)",zIndex:"5",pointerEvents:"none"};i.appendChild(o);const m=()=>{const t=o.getBoundingClientRect(),e=i.getBoundingClientRect();Object.assign(h.style,f,{top:"0",left:"0",width:"100%",height:t.top-e.top+"px"}),Object.assign(u.style,f,{top:t.bottom-e.top+"px",left:"0",width:"100%",height:e.bottom-t.bottom+"px"}),Object.assign(p.style,f,{top:t.top-e.top+"px",left:"0",width:t.left-e.left+"px",height:`${t.height}px`}),Object.assign(g.style,f,{top:t.top-e.top+"px",left:t.right-e.left+"px",width:e.right-t.right+"px",height:`${t.height}px`})};setTimeout((()=>{m(),i.appendChild(h),i.appendChild(u),i.appendChild(p),i.appendChild(g)}),0);const v=document.createElement("div");v.className="modal-footer";const b=document.createElement("input");b.type="range",b.min="0",b.max="100",b.step="1",b.value="0",b.style.width="40%",b.addEventListener("input",(()=>{const t=parseInt(b.value,10)/100;y.innerText=`${b.value}%`;const e=globalThis.selectedComponent;e&&(e.getEl().style.backgroundColor=`rgba(0, 0, 0, ${t})`,e.getEl().style.backgroundImage=`url(${a.src})`,e.getEl().style.backgroundSize="cover","Information"===globalThis.pageData.PageType?(new uc).updateInfoTileAttributes(e.parent().parent().getId(),e.parent().getId(),"Opacity",parseInt(b.value)):globalThis.tileMapper.updateTile(e.parent().getId(),"Opacity",b.value),a.style.opacity="1",a.style.filter=`brightness(${1-t})`)}));const y=document.createElement("span");y.innerText=`${b.value}%`,y.style.fontSize="14px",y.style.color="#333";const w=document.createElement("div");w.style.display="flex",w.style.alignItems="center",w.style.gap="10px",w.appendChild(b),w.appendChild(y),v.appendChild(w),this.modalContent.appendChild(v),n&&(n.appendChild(i),n.appendChild(v))}))}saveCroppedImage(t,e,n){return vc(this,void 0,void 0,(function*(){const i=document.createElement("canvas"),a=i.getContext("2d");if(!a)return;const o=t.getBoundingClientRect(),r=e.getBoundingClientRect(),s=t.naturalWidth/o.width,l=t.naturalHeight/o.height,c=(r.left-o.left)*s,d=(r.top-o.top)*l,h=r.width*s,u=r.height*l;i.width=h,i.height=u,a.drawImage(t,c,d,h,u,0,0,h,u);const p=i.toDataURL("image/png"),g=(Date.now().toString(),n.name.split(".")[0],document.querySelector("input[type='range']")),f=(parseInt(g.value,10),a.getImageData(0,0,i.width,i.height));f.data,a.putImageData(f,0,0);const m={MediaId:Date.now().toString(),MediaName:n.name,MediaUrl:p,MediaType:n.type,MediaSize:n.size},v=yield this.toolboxService.uploadFile(m.MediaUrl,m.MediaName,m.MediaSize,m.MediaType);this.croppedUrl=v.BC_Trn_Media.MediaUrl;const b=globalThis.selectedComponent;if(b){const t=b.getEl();t.style.backgroundImage=`url(${p})`,t.style.backgroundSize="cover",t.style.backgroundPosition="center"}this.fileListElement&&this.displayMediaFile(this.fileListElement,m);const y=this.modalContent.parentElement;y&&(y.style.display="none",y.remove())}))}catch(t){console.error("Error saving cropped image:",t)}resetModal(){this.modalContent.innerHTML="",this.init()}displayMediaFileProgress(t,e){const n=document.createElement("div");n.className="file-item "+(this.validateFile(e)?"valid":"invalid"),n.setAttribute("data-mediaid",e.MediaId);const i=this.validateFile(e);n.innerHTML=`\n              <img src="${e.MediaUrl}" alt="File thumbnail" class="preview-image">\n                ${i?"":"<small>File is invalid. Please upload a valid file (jpg, png, jpeg and less than 2MB).</small>"}\n              </div>\n              <span class="status-icon" style="color: ${i?"green":"red"}">\n                ${i?"":"⚠"}\n              </span>\n              ${i?"":'<span style="margin-right: 10px" id="delete-invalid" class="fa-regular fa-trash-can"></span><span style="margin-left: 10px" id="delete-invalid" class="fa-regular fa-trash-can"></span>'}\n            `,t.insertBefore(n,t.firstChild);const a=n.querySelector("#delete-invalid");a&&(a.style.cursor="pointer",a.addEventListener("click",(e=>{e.preventDefault(),t.removeChild(n)})));let o=0;const r=n.querySelector(".progress"),s=n.querySelector(".progress-text"),l=setInterval((()=>{o+=Math.floor(15*Math.random())+5,r&&(r.style.width=`${o>100?100:o}%`),s&&(s.textContent=`${o>100?100:o}%`),o>=100&&(clearInterval(l),i&&(t.removeChild(n),e=this.finishedUploads[e.MediaId]||e,this.displayMediaFile(t,e)))}),300);this.progressIntervals=this.progressIntervals||{},this.progressIntervals[e.MediaId]=l}validateFile(t){const e=t.MediaSize<=2097152,n=["image/jpeg","image/jpg","image/png"].includes(t.MediaType);return e&&n}formatFileSize(t){const e=parseInt(t,10);return e<1024?e+" B":e<1048576?Math.round(e/1024)+" KB":(e/1048576).toFixed(2)+" MB"}displayMediaFile(t,e){const n=document.createElement("div");n.className="file-item";const i=document.createElement("img");i.src=e.MediaUrl,i.alt="Uploaded Image",i.className="grid-image";const a=document.createElement("div");a.className="action-buttons";const o=document.createElement("button");o.className="action-button check-button",o.innerHTML="✔",o.addEventListener("click",(()=>{}));const r=document.createElement("button");r.className="action-button delete-button",r.innerHTML="✖",r.addEventListener("click",(()=>{n.remove()})),a.appendChild(o),a.appendChild(r),n.appendChild(i),n.appendChild(a),t.appendChild(n),n.addEventListener("click",(()=>{t.querySelectorAll(".file-item").forEach((t=>t.classList.remove("active"))),n.classList.add("active")}))}destroy(){Object.values(this.progressIntervals).forEach((t=>{clearInterval(t)})),this.progressIntervals={}}readFileAsDataURL(t){return new Promise(((e,n)=>{const i=new FileReader;i.onload=()=>{i.result?e(i.result):n(new Error("FileReader did not produce a result"))},i.onerror=()=>{n(i.error)},i.readAsDataURL(t)}))}render(t){t.appendChild(this.modalContent)}}class yc{constructor(t,e){this.templateContainer=t,this.parentContainer=e,this.modalContainer=document.createElement("div"),this.modalBackdrop=document.createElement("div"),this.modalContent=document.createElement("div"),this.searchContainer=document.createElement("div"),this.iconsList=document.createElement("div"),this.init()}init(){return t=this,e=void 0,i=function*(){this.modalContainer.style.display="none",this.modalContainer.style.position="fixed",this.modalContainer.style.top="0",this.modalContainer.style.left="0",this.modalContainer.style.width="100%",this.modalContainer.style.height="100%",this.modalContainer.style.zIndex="1000000",this.modalBackdrop.style.position="absolute",this.modalBackdrop.style.top="0",this.modalBackdrop.style.left="0",this.modalBackdrop.style.width="100%",this.modalBackdrop.style.height="100%",this.modalBackdrop.style.backgroundColor="rgba(0, 0, 0, 0.3)",this.modalBackdrop.addEventListener("click",(()=>{this.modalContainer.remove()})),this.modalContent.style.position="absolute",this.modalContent.style.top="30%",this.modalContent.style.left="50%",this.modalContent.style.transform="translateX(-50%)",this.modalContent.style.backgroundColor="white",this.modalContent.style.padding="15px",this.modalContent.style.borderRadius="8px",this.modalContent.style.boxShadow="0 2px 10px rgba(0, 0, 0, 0.2)",this.modalContent.style.width="350px",this.searchContainer.style.marginBottom="15px",this.searchContainer.style.marginTop="15px";const t=document.createElement("div");t.style.position="relative";const e=document.createElement("i");e.className="fas fa-search",e.style.position="absolute",e.style.left="10px",e.style.top="50%",e.style.transform="translateY(-50%)",e.style.color="#888";const n=document.createElement("input");n.type="text",n.placeholder="Search",n.style.width="100%",n.style.padding="8px 12px 8px 32px",n.style.border="1px solid #ccc",n.style.borderRadius="20px",n.style.fontSize="14px",n.style.boxSizing="border-box";const i=document.createElement("span");i.innerHTML='\n            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 21 21">\n                <path id="Icon_material-close" data-name="Icon material-close" d="M28.5,9.615,26.385,7.5,18,15.885,9.615,7.5,7.5,9.615,15.885,18,7.5,26.385,9.615,28.5,18,20.115,26.385,28.5,28.5,26.385,20.115,18Z" transform="translate(-7.5 -7.5)" fill="#BCBCBC" opacity="0.44"></path>\n            </svg>\n    ',i.style.position="absolute",i.style.right="5px",i.style.top="6px",i.style.cursor="pointer",i.style.color="#bcbcbc",i.addEventListener("click",(()=>{this.modalContainer.remove()})),t.appendChild(e),t.appendChild(n),this.searchContainer.appendChild(t),this.searchContainer.appendChild(i),this.iconsList.classList.add("cta-icons-list"),console.log("cta icons",vr),null==vr||vr.forEach((t=>{const e=document.createElement("div");e.classList.add("cta-icon-item"),e.title=t.name,e.innerHTML=t.svg,e.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),this.changeIcon(t),this.modalContainer.remove()})),this.iconsList.appendChild(e)})),this.modalContent.appendChild(this.searchContainer),this.modalContent.appendChild(this.iconsList),this.modalContainer.appendChild(this.modalBackdrop),this.modalContainer.appendChild(this.modalContent)},new((n=void 0)||(n=Promise))((function(a,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}));var t,e,n,i}render(){this.parentContainer.appendChild(this.modalContainer),this.modalContainer.style.display="block";const t=this.searchContainer.querySelector("input");t&&t.focus(),t&&t.addEventListener("input",(t=>{const e=t.target.value.toLowerCase();this.iconsList.querySelectorAll("div").forEach((t=>{t.title.toLowerCase().includes(e)?t.style.display="flex":t.style.display="none"}))}))}changeIcon(t){const e=globalThis.selectedComponent,n=globalThis.pageData;let i,a=null;if(e&&n){if("Information"===n.PageType){const t=globalThis.infoContentMapper.getInfoContent(e.getId());t&&(i=t.InfoId,a=null==t?void 0:t.CtaAttributes)}else globalThis.pageId,a=new pr(null==n?void 0:n.PageId).getContentCta(e.getId()),i=e.getId();(new yr).changeCtaButtonIcon(t,i,a)}}}class wc{constructor(t,e,n){this.e=t,this.editor=e,this.page=n,this.infoSectionController=new uc,this.contentDataManager=new gc(this.editor,this.page),this.init()}init(){this.openContentEditModal(),this.openImageEditModal(),this.openDeleteModal(),this.updateCtaButtonImage(),this.updateCtaButtonIcon()}openContentEditModal(){if(this.e.target.closest(".tb-edit-content-icon")){const t=document.createElement("div"),e=this.e.target.closest('[data-gjs-type="info-desc-section"].info-desc-section');console.log("infoDescSection",e);const n=document.createElement("div");n.id="editor",n.innerHTML=`${this.getDescription()}`,n.style.minHeight="150px";const i=document.createElement("div");i.classList.add("popup-footer"),i.style.marginBottom="-12px";const a=this.createButton("submit_form","tb-btn-primary",Ms.t("tile.save_button"));"<p><br></p>"!==n.innerHTML&&""!==n.innerHTML.trim()||(a.disabled=!0,a.style.opacity="0.6",a.style.cursor="not-allowed");const o=this.createButton("cancel_form","tb-btn-outline",Ms.t("tile.cancel_button"));i.appendChild(a),i.appendChild(o),t.appendChild(n),t.appendChild(i);const r=new l({title:Ms.t("tile.edit_content"),width:"500px",body:t});r.open();const s=new Qo("#editor",{modules:{toolbar:[["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}]]},theme:"snow",placeholder:"Start typing here..."});setTimeout((()=>{s.focus();const t=s.getLength();s.setSelection(t,0)}),0),s.on("text-change",(()=>{const t=s.root.innerHTML,e="<p><br></p>"!==t&&""!==t.trim();a.disabled=!e,a.disabled?(a.style.opacity="0.6",a.style.cursor="not-allowed"):(a.style.opacity="1",a.style.cursor="pointer")})),a.addEventListener("click",(()=>{const t=document.querySelector("#editor .ql-editor"),n=this.correctULTagFromQuill(t.innerHTML);if("Information"===this.page.PageType&&e)return this.infoSectionController.updateDescription(n,e.id),void r.close();this.contentDataManager.saveContentDescription(n),r.close()})),o.addEventListener("click",(()=>{r.close()}))}}openImageEditModal(){if(this.e.target.closest(".tb-edit-image-icon")){const t=this.e.target.closest('[data-gjs-type="info-image-section"].info-image-section'),e=document.createElement("div");e.classList.add("tb-modal"),e.style.display="flex";const n="Information"===this.page.PageType?"info":"content";new bc(n,null==t?void 0:t.id).render(e);const i=document.createElement("input");i.type="file",i.multiple=!0,i.accept="image/jpeg, image/jpg, image/png",i.id="fileInput",i.style.display="none",document.body.appendChild(e),document.body.appendChild(i)}}openDeleteModal(){if(this.e.target.closest(".tb-delete-image-icon")){if("Location"===this.page.PageType||"Reception"===this.page.PageType)return;const t="Information"===this.page.PageType?"Delete Description":"Delete Image";new dl("Are you sure you want to delete this section?",t,(()=>{return t=this,e=void 0,i=function*(){if("Information"===this.page.PageType){const t=this.e.target,e=t.closest('[data-gjs-type="info-desc-section"].info-desc-section')||t.closest('[data-gjs-type="info-image-section"].info-image-section');e&&this.infoSectionController.deleteInfoImageOrDesc(e.id)}else this.contentDataManager.deleteContentImage()},new((n=void 0)||(n=Promise))((function(a,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}));var t,e,n,i})).render(document.body)}}updateCtaButtonImage(){const t=this.e.target.closest(".edit-cta-image");if(t){const e=this.e.target.closest('[data-gjs-type="info-cta-section"]'),n=t.closest(".img-button-container");globalThis.ctaContainerId=n?n.id:"";const i=document.createElement("div");i.classList.add("tb-modal"),i.style.display="flex",new bc("cta",e.id).render(i);const a=document.createElement("input");a.type="file",a.multiple=!0,a.accept="image/jpeg, image/jpg, image/png",a.id="fileInput",a.style.display="none",document.body.appendChild(i),document.body.appendChild(a)}}updateCtaButtonIcon(){const t=this.e.target.closest(".icon-edit-button"),e=globalThis.selectedComponent;if(t&&e&&e.getClasses().includes("img-button-container")){this.e.preventDefault(),this.e.stopPropagation();const e=t.closest(".icon-edit-button"),n=e.closest("[data-gjs-type='info-cta-section']"),i=document.getElementById(`${globalThis.frameId}-frame`),a=null==i?void 0:i.querySelector("iframe"),o=(null==a||a.getBoundingClientRect(),new yc(n,i));e.getBoundingClientRect(),o.render()}}getDescription(){if("Information"===this.page.PageType){const t=this.e.target.closest('[data-gjs-type="info-desc-section"].info-desc-section');if(console.log("description",t.querySelector(".info-desc-content")),t)return t.querySelector(".info-desc-content").innerHTML}else if(this.e.target.closest(".content-page-block")){const t=this.editor.Components.getWrapper().find("#contentDescription")[0];if(t)return t.getEl().innerHTML}}createButton(t,e,n){const i=document.createElement("button");return i.id=t,i.classList.add("tb-btn",e),i.innerText=n,i}correctULTagFromQuill(t){if(!t)return t;const e=(new DOMParser).parseFromString(t,"text/html");return e.querySelectorAll("ol").forEach((t=>{if(Array.from(t.children).every((t=>"bullet"===t.getAttribute("data-list")))){const e=document.createElement("ul");Array.from(t.children).forEach((t=>{e.appendChild(t.cloneNode(!0))})),t.replaceWith(e)}})),e.body.innerHTML}}class Cc{constructor(t){this.history=[],this.future=[],this.maxHistory=20,this.pageId=t;const e=localStorage.getItem(`data-${this.pageId}`);if(e)try{const t=JSON.parse(e);this.history.push(t)}catch(t){console.error("Failed to parse initial data:",t)}}saveState(){try{const t=localStorage.getItem(`data-${this.pageId}`);if(t){const e=JSON.parse(t),n=this.history.length?this.history[this.history.length-1]:null;return!(n&&JSON.stringify(n)===JSON.stringify(e)||(this.history.push(e),this.history.length>this.maxHistory&&this.history.shift(),this.future=[],0))}return!1}catch(t){return console.error("Error saving state:",t),!1}}undo(){if(0===this.history.length)return null;const t=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");this.future.push(t);const e=this.history.pop();return localStorage.setItem(`data-${this.pageId}`,JSON.stringify(e)),this.findChanges(t,e)}redo(){if(0===this.future.length)return null;const t=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");this.history.push(t);const e=this.future.pop();return localStorage.setItem(`data-${this.pageId}`,JSON.stringify(e)),this.findChanges(t,e)}findChanges(t,e){var n,i;const a=new Set,o=new Set,r=(null===(n=t.PageMenuStructure)||void 0===n?void 0:n.Rows)||[],s=(null===(i=e.PageMenuStructure)||void 0===i?void 0:i.Rows)||[],l=new Set(r.map((t=>t.Id)));return new Set(s.map((t=>t.Id))),r.forEach((t=>{const e=s.find((e=>e.Id===t.Id));e?JSON.stringify(t)!==JSON.stringify(e)&&o.add(t.Id):o.add(t.Id)})),s.forEach((t=>{l.has(t.Id)||o.add(t.Id)})),r.forEach((t=>{var e,n,i,o;const r=s.find((e=>e.Id===t.Id));if(r){const s=new Set((null===(e=t.Tiles)||void 0===e?void 0:e.map((t=>t.Id)))||[]),l=new Set((null===(n=r.Tiles)||void 0===n?void 0:n.map((t=>t.Id)))||[]);null===(i=t.Tiles)||void 0===i||i.forEach((t=>{l.has(t.Id)||a.add(t.Id)})),null===(o=r.Tiles)||void 0===o||o.forEach((e=>{if(s.has(e.Id)){const n=t.Tiles.find((t=>t.Id===e.Id));JSON.stringify(n)!==JSON.stringify(e)&&a.add(e.Id)}else a.add(e.Id)}))}})),{affectedTiles:Array.from(a),affectedRows:Array.from(o)}}addFreshRow(t,e,n){var i;this.saveState();const a=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}"),o={Id:t,Tiles:[{Id:e,Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:0,Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},BGSize:0,BGPosition:0}]};null===(i=a.PageMenuStructure)||void 0===i||i.Rows.splice(n,0,o),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(a))}addTile(t,e){var n,i;this.saveState();const a={Id:e,Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:0,Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},BGSize:0,BGPosition:0},o=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}"),r=null===(i=null===(n=o.PageMenuStructure)||void 0===n?void 0:n.Rows)||void 0===i?void 0:i.find((e=>e.Id===t));r&&(r.Tiles.push(a),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(o)))}removeTile(t,e){var n,i;this.saveState();const a=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}"),o=a.PageMenuStructure.Rows.find((t=>String(t.Id)===String(e)));o&&(o.Tiles=o.Tiles.filter((e=>e.Id!==t)),0===o.Tiles.length&&(a.PageMenuStructure.Rows=null===(i=null===(n=a.PageMenuStructure)||void 0===n?void 0:n.Rows)||void 0===i?void 0:i.filter((t=>t.Id!==o.Id))),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(a)))}updateTile(t,e,n){var i,a;this.saveState();const o=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if("Information"===o.PageType)return o.PageInfoStructure.InfoContent.filter((t=>"TileRow"==t.InfoType)).forEach((i=>{i.Tiles.forEach((i=>{if(i.Id===t)if(e.includes(".")){const t=e.split(".");let a=i;for(let e=0;e<t.length-1;e++)a=a[t[e]];a[t[t.length-1]]=n}else i[e]=n}))})),void localStorage.setItem(`data-${this.pageId}`,JSON.stringify(o));if("Menu"===o.PageType||"MyCare"===o.PageType||"MyLiving"===o.PageType||"MyServices"===o.PageType){const r=null===(a=null===(i=null==o?void 0:o.PageMenuStructure)||void 0===i?void 0:i.Rows)||void 0===a?void 0:a.find((e=>e.Tiles.some((e=>e.Id===t))));r&&r.Tiles.forEach((i=>{if(i.Id===t)if(e.includes(".")){const t=e.split(".");let a=i;for(let e=0;e<t.length-1;e++)a=a[t[e]];a[t[t.length-1]]=n}else i[e]=n}))}localStorage.setItem(`data-${this.pageId}`,JSON.stringify(o))}getTile(t,e){var n,i;const a=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");let o=null;if("Information"===a.PageType)return a.PageInfoStructure.InfoContent.filter((t=>"TileRow"==t.InfoType)).forEach((t=>{o=t.Tiles.find((t=>t.Id===e))})),o;if(("Menu"===a.PageType||"MyCare"===a.PageType||"MyLiving"===a.PageType||"MyServices"===a.PageType)&&t){const r=null===(i=null===(n=null==a?void 0:a.PageMenuStructure)||void 0===n?void 0:n.Rows)||void 0===i?void 0:i.find((e=>e.Id===t));if(r)return o=r.Tiles.find((t=>t.Id===e)),o||null}return o}getCta(t){const e=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}").PageInfoStructure.InfoContent.find((e=>"Cta"==e.InfoType&&e.InfoId==t));return console.log(e),e.CtaAttributes||{}}moveTile(t,e,n,i){var a,o,r,s,l,c,d,h;this.saveState();const u=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}"),p=null===(a=null==u?void 0:u.PageMenuStructure)||void 0===a?void 0:a.Rows.find((t=>t.Id===e));if(!p)return;const g=null===(o=null==p?void 0:p.Tiles)||void 0===o?void 0:o.findIndex((e=>e.Id===t));if(-1===g)return;const[f]=null===(r=null==p?void 0:p.Tiles)||void 0===r?void 0:r.splice(g,1),m=null===(l=null===(s=u.PageMenuStructure)||void 0===s?void 0:s.Rows)||void 0===l?void 0:l.find((t=>t.Id===n));m?(m.Tiles.splice(i,0,f),3===(null===(c=null==m?void 0:m.Tiles)||void 0===c?void 0:c.length)&&(null==m||m.Tiles.forEach((t=>{t.Align="center"}))),0===(null===(d=null==p?void 0:p.Tiles)||void 0===d?void 0:d.length)&&(u.PageMenuStructure.Rows=null===(h=null==u?void 0:u.PageMenuStructure)||void 0===h?void 0:h.Rows.filter((t=>t.Id!==p.Id))),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(u))):p.Tiles.splice(g,0,f)}}class xc{constructor(t){this.pageId=t||null}updateTile(t,e=!1){this.rowComponent=t;const n=t.find(".template-wrapper"),i=n.length;n.forEach((n=>{const a=this.getTileAttributes(t,n),o=n.find(".add-button-right")[0];o&&o.addStyle({display:i>=3?"none":"flex"});const r=3===i?"center":null==a?void 0:a.Align,s="left"===r?"start":r;i>1?(n.addStyle({height:"80px"}),globalThis.tileMapper.updateTile(n.getId(),"Size",80),n.find(".tile-resize-button").forEach((t=>t.remove()))):n.append(Os("Resize"));const l={"justify-content":s,"align-items":s},c={"text-align":r};this.updateTileHeight(n,i),this.updateAlignment(n,l,c),this.updateTileTitleLength(n,i),e||this.updateTileAttributes(n.getId(),"Align",r)})),this.removeEmptyRows()}getTileAttributes(t,e){var n;let i;if("Information"===globalThis.pageData.PageType){const a=globalThis.infoContentMapper.getInfoContent(t.getId());i=null===(n=null==a?void 0:a.Tiles)||void 0===n?void 0:n.find((t=>t.Id===e.getId()))}else i=globalThis.tileMapper.getTile(t.getId(),e.getId());return i}updateTileHeight(t,e){const n=t.find(".template-block")[0];1===e?n.getClasses().includes("first-tile")&&n.addClass("high-priority-template"):n.removeClass("high-priority-template")}updateAlignment(t,e,n){const i=t.find(".template-block")[0],a=t.find(".tile-title-section")[0];i.addStyle(e),a.addStyle(n)}updateTileTitleLength(t,e){var n;const i=t.find(".tile-title")[0];if(i){const t=3===e?11:2===e?15:20,a=this.truncateText(t,(null===(n=i.getAttributes())||void 0===n?void 0:n.title)||i.getEl().innerText);3===e?i.components(this.wrapTileTitle(a)):i.components(a)}}truncateText(t,e){const n=window.innerWidth;return e.length>(n<=280?t:t+4)?e.substring(0,n<=280?t:t+4).trim()+"..":e}wrapTileTitle(t){const e=t.split(" ");return e.length>1?e[0]+"<br>"+e[1]:t.replace("<br>","")}updateTileAttributes(t,e,n){const i=new Cc(this.pageId);let a=n;"start"===n&&(a="left"),"Information"===globalThis.pageData.PageType?(new uc).updateInfoTileAttributes(this.rowComponent.getId(),t,"Align",a):i.updateTile(t,e,a)}removeEmptyRows(){this.rowComponent.parent().components().forEach((t=>{var e;0===(null===(e=null==t?void 0:t.components())||void 0===e?void 0:e.length)&&(null==t||t.remove())}))}}class Tc{constructor(t,e,n,i,a){this.event=t,this.editor=e,this.pageId=n,this.frameId=i,this.pageData=a,this.tileUpdate=new xc(n),globalThis.tileMapper=new Cc(this.pageId),this.page=globalThis.pageData,this.init()}init(){this.addTileBottom(),this.addTileRight(),this.deleteTile(),this.removeTileIcon(),this.removeTileTitle(),this.removeCTa()}addTileBottom(){var t,e;const n=this.event.target.closest(".action-button.add-button-bottom");if(n){const i=n.closest(".template-wrapper");if(!i)return;let a=i.parentElement,o=null==a?void 0:a.parentElement;if(!a||!o)return;const r=Array.from(o.children).indexOf(a),s=this.editor.Components.getWrapper().find("#"+o.id)[0];if(!s)return;const l=this.editor.Components.addComponent(this.getTileRow());s.append(l,{at:r+1});const c=null===(t=l.find(".template-wrapper")[0])||void 0===t?void 0:t.getId();"Information"===(null===(e=this.page)||void 0===e?void 0:e.PageType)||(console.log("index",r),globalThis.tileMapper.addFreshRow(l.getId(),c,r+1))}}addTileRight(){var t,e;const n=this.event.target.closest(".action-button.add-button-right");if(n){const i=n.closest(".template-wrapper"),a=this.editor.Components.getWrapper().find("#"+(null==i?void 0:i.id))[0];if(!a)return;const o=a.parent();if(o.components().filter((t=>"tile-wrapper"===t.get("type"))).length>=3)return;const r=this.editor.Components.addComponent(this.getTile()),s=a.index();if(o.append(r,{at:s+1}),"Information"===(null===(t=this.page)||void 0===t?void 0:t.PageType)?this.updateInfoTileRow(o.getId(),"add",r.getId()):globalThis.tileMapper.addTile(null===(e=null==i?void 0:i.parentElement)||void 0===e?void 0:e.id,r.getId()),this.tileUpdate.updateTile(o),r){const t=r.find(".template-block")[0];t&&this.editor.select(t)}}}deleteTile(){var t;const e=this.event.target.closest(".action-button.delete-button");if(e){const n=e.closest(".template-wrapper");if(n){const e=this.editor.Components.getWrapper().find("#"+(null==n?void 0:n.id))[0],i=e.parent();if(e.remove(),this.tileUpdate.updateTile(i),"Information"===(null===(t=this.page)||void 0===t?void 0:t.PageType)){this.updateInfoTileRow(i.getId(),"delete",e.getId());const t=new uc;t.removeConsecutivePlusButtons(),t.restoreEmptyStateIfNoSections()}else globalThis.tileMapper.removeTile(e.getId(),i.getId());this.removeEditor(e.getId())}}}updateInfoTileRow(t,e="add",n){var i,a,o,r;const s=new hc(this.pageId).getInfoContent(t);if(s){if("add"===e)null===(i=s.Tiles)||void 0===i||i.push({Id:n,Name:"Title",Text:"Title",Color:"#333333",Align:"left",BGSize:1,BGPosition:1,Action:{ObjectType:"",ObjectId:"",ObjectUrl:""}});else if("delete"===e){const t=null===(a=s.Tiles)||void 0===a?void 0:a.find((t=>t.Id===n));if(t){const e=null===(o=s.Tiles)||void 0===o?void 0:o.indexOf(t);void 0!==e&&e>=0&&(null===(r=s.Tiles)||void 0===r||r.splice(e,1))}}(new uc).updateInfoMapper(t,s)}}removeTileIcon(){var t;const e=this.event.target.closest(".tile-close-icon");if(e){const n=e.closest(".template-wrapper");if(n){const e=this.editor.Components.getWrapper().find("#"+(null==n?void 0:n.id))[0];if(this.checkTileHasIconOrTitle(e)){"Information"===(null===(t=this.page)||void 0===t?void 0:t.PageType)?(new uc).updateInfoTileAttributes(e.parent().getId(),e.getId(),"Icon",""):globalThis.tileMapper.updateTile(e.getId(),"Icon","");const n=e.find(".tile-icon-section")[0];n&&n.addStyle({display:"none"})}else console.warn("Tile has no icon or title")}}}removeTileTitle(){var t;const e=this.event.target.closest(".tile-close-title");if(e){const n=e.closest(".template-wrapper");if(n){const e=this.editor.Components.getWrapper().find("#"+(null==n?void 0:n.id))[0];if(this.checkTileHasIconOrTitle(e)){"Information"===(null===(t=this.page)||void 0===t?void 0:t.PageType)?(new uc).updateInfoTileAttributes(e.parent().getId(),e.getId(),"Text",""):globalThis.tileMapper.updateTile(e.getId(),"Text","");const n=e.find(".tile-title-section")[0];n&&n.addStyle({display:"none"})}else console.warn("Tile has no icon or title")}}}checkTileHasIconOrTitle(t){var e;const n=t.parent();if(!n)return!1;let i;if("Information"===this.pageData.PageType){const a=globalThis.infoContentMapper.getInfoContent(n.getId());i=null===(e=null==a?void 0:a.Tiles)||void 0===e?void 0:e.find((e=>e.Id===t.getId()))}else i=globalThis.tileMapper.getTile(n.getId(),t.getId());return console.log("tileAttributes",i),!!(i&&i.Icon&&i.Text)}removeCTa(){const t=this.event.target.closest(".cta-badge");t&&(new yr).removeCta(t)}removeEditor(t){document.querySelectorAll(".mobile-frame").forEach((e=>{var n,i,a;const o=e.querySelector(`#${t}`);if(o&&console.log(o),e.id.includes(this.frameId)){let t=e.nextElementSibling;for(;t;){const e=t;if(t=t.nextElementSibling,e){const t=document.querySelector(".editor-thumbs-list").querySelector(`div[id="${e.id}"]`);t&&(null===(a=null===(i=null===(n=t.parentElement)||void 0===n?void 0:n.parentElement)||void 0===i?void 0:i.parentElement)||void 0===a||a.remove()),e.remove(),(new Rc).activateNavigators()}}}}))}getTileRow(){const t=this.getTile(!0);return`<div class="container-row" ${ir} id="${cr(8)}">${t}</div>`}getTile(t=!1){var e;return`\n      <div ${er} ${t?'style="height:80px"':""} class="template-wrapper" id="${cr(8)}">\n        <div ${tr} class="template-block" style="background-color: transparent; color: #333333; justify-content: left">\n            <div ${nr} id="igtdq" data-gjs-type="default" class="tile-icon-section">\n              <span ${nr} id="is1dw" data-gjs-type="text" class="tile-close-icon top-right selected-tile-title">×</span>\n              <span ${nr} id="ic26t" data-gjs-type="text" class="tile-icon">Title</span>\n            </div>\n            <div ${nr} id="igtdq" data-gjs-type="default" class="tile-title-section">\n              <span ${nr} id="is1dw" data-gjs-type="text" class="tile-close-title top-right selected-tile-title">×</span>\n              <span ${nr} style="display: block" id="ic26t" data-gjs-type="text" is-hidden="false" title="Title" class="tile-title">Title</span>\n            </div>\n        </div>\n        <button ${nr} id="i9sxl" data-gjs-type="default" title="Delete template" class="action-button delete-button">&minus;</button>\n        <button ${nr} id="ifvvi" data-gjs-type="default" title="Add template right" class="action-button add-button-right">\n          <svg ${nr} fill="#fff" width="15" height="15" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n            <path ${nr} d="M19,11H13V5a1,1,0,0,0-2,0v6H5a1,1,0,0,0,0,2h6v6a1,1,0,0,0,2,0V13h6a1,1,0,0,0,0-2Z"/>\n          </svg>\n        </button>\n        ${t?`\n            ${Os("Resize")}\n          `:""}\n        ${"Information"===(null===(e=this.page)||void 0===e?void 0:e.PageType)?"":`\n          <button ${nr} id="i4ubt" data-gjs-type="default" title="Add template bottom" class="action-button add-button-bottom">\n          <svg ${nr} fill="#fff" width="15" height="15" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n            <path ${nr} d="M19,11H13V5a1,1,0,0,0-2,0v6H5a1,1,0,0,0,0,2h6v6a1,1,0,0,0,2,0V13h6a1,1,0,0,0,0-2Z"/>\n          </svg>\n          </button>\n        `}\n        <svg ${nr} class="tile-open-menu" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 27 27">\n          <g ${nr} id="Group_2383" data-name="Group 2383" transform="translate(-921 -417.999)">\n            <g ${nr} id="Group_2382" data-name="Group 2382" transform="translate(921 418)">\n              <circle ${nr} id="Ellipse_534" data-name="Ellipse 534" cx="13.5" cy="13.5" r="13.5" transform="translate(0 -0.001)" fill="#6a747f"/>\n            </g>\n            <path ${nr} id="Path_2320" data-name="Path 2320" d="M1.7,0a1.7,1.7,0,1,0,1.7,1.7A1.7,1.7,0,0,0,1.7,0ZM7.346,0a1.7,1.7,0,1,0,1.7,1.7A1.7,1.7,0,0,0,7.346,0ZM13,0a1.7,1.7,0,1,0,1.7,1.7A1.7,1.7,0,0,0,13,0Z" transform="translate(927 430)" fill="#fff"/>\n          </g>\n        </svg>\n      </div>\n    `}}class Ic{constructor(t,e){return this.selectedOption=null,this.onChangeCallback=null,this.options=t,this.config=e,this.placeholder=e.placeholder||"Select an option...",this.element=this.createSelectElement(),this}createSelectElement(){const t=document.createElement("div");t.className="simple-select-container";const e=document.createElement("div");e.className="select-field";const n=document.createElement("span");n.className="select-value",n.textContent=this.placeholder;const i=document.createElement("span");i.className="select-arrow",e.appendChild(n),e.appendChild(i);const a=document.createElement("div");a.className="select-dropdown";const o=document.createElement("div");o.className="supplier-search-container";const r=document.createElement("div");r.className="search-icon",r.innerHTML='<i class="fas fa-search"></i>&nbsp;&nbsp;';const s=document.createElement("input");s.className="search-input",s.type="text",s.placeholder="Search...",o.appendChild(r),o.appendChild(s);const l=document.createElement("div");return l.className="options-container",this.options.forEach((t=>{const n=document.createElement("div");n.className="select-option";const i=t[this.config.labelField],o=t[this.config.valueField];n.textContent=i,n.dataset.value=o,n.addEventListener("click",(n=>{n.stopPropagation(),this.selectOption(t),a.classList.remove("show"),e.classList.remove("active")})),l.appendChild(n)})),a.appendChild(o),a.appendChild(l),e.addEventListener("click",(t=>{t.stopPropagation();const n=document.querySelectorAll(".select-field.active"),i=document.querySelectorAll(".select-dropdown.show");n.forEach((t=>{t!==e&&t.classList.remove("active")})),i.forEach((t=>{t!==a&&t.classList.remove("show")}));const o=a.classList.contains("show");e.classList.toggle("active",!o),a.classList.toggle("show",!o),o||(s.value="",this.filterOptions("",l),setTimeout((()=>s.focus()),100))})),s.addEventListener("input",(t=>{const e=t.target;this.filterOptions(e.value,l)})),s.addEventListener("click",(t=>t.stopPropagation())),document.addEventListener("click",(()=>{a.classList.remove("show"),e.classList.remove("active")})),this.addStyles(),t.appendChild(e),t.appendChild(a),t}filterOptions(t,e){const n=e.querySelectorAll(".select-option");let i=!1;n.forEach((e=>{var n;const a=e;((null===(n=a.textContent)||void 0===n?void 0:n.toLowerCase())||"").includes(t.toLowerCase())?(a.style.display="block",i=!0):a.style.display="none"}));let a=e.querySelector(".no-results");i?a&&e.removeChild(a):a||(a=document.createElement("div"),a.className="no-results",a.textContent="No records found",e.appendChild(a))}selectOption(t){this.selectedOption=t;const e=t[this.config.labelField],n=t[this.config.valueField];this.element.querySelector(".select-value").textContent=e,this.element.querySelectorAll(".select-option").forEach((t=>{t.getAttribute("data-value")===n?t.classList.add("selected"):t.classList.remove("selected")})),this.onChangeCallback&&this.onChangeCallback(t)}removeSelection(){document.querySelector(".popup-modal-link");const t=document.querySelector("#field_value");t&&(t.value="",t.disabled=!1),this.selectedOption=null,this.element.querySelector(".select-value").textContent=this.placeholder,this.element.querySelectorAll(".select-option").forEach((t=>t.classList.remove("selected")))}addStyles(){if(!document.getElementById("simple-select-styles")){const t=document.createElement("style");t.id="simple-select-styles",t.innerHTML="\n          .simple-select-container {\n            position: relative;\n            width: 100%;\n            font-family: Arial, sans-serif;\n          }\n          \n          .select-field {\n            padding: 6px 7px;\n            background: white;\n            border: 1px solid #b4b9bd;\n            border-radius: 6px;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            align-items: center;\n            cursor: pointer;\n            user-select: none;\n          }\n          \n          .select-field:hover {\n            border-color: #bbb;\n          }\n          \n          .select-field.active {\n            border-color: #b4b9bd;\n          }\n          \n          .select-arrow {\n            border-right: 2px solid #b4b9bd;\n            border-bottom: 2px solid #b4b9bd;\n            width: 8px;\n            height: 8px;\n            transform: rotate(45deg);\n            transition: transform 0.2s;\n          }\n          \n          .select-field.active .select-arrow {\n            transform: rotate(-135deg);\n          }\n          \n          .select-dropdown {\n            position: absolute;\n            top: 100%;\n            left: 0;\n            width: 100%;\n            background: white;\n            border: 1px solid #e2e2e2;\n            border-radius: 6px;\n            margin-top: 5px;\n            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\n            z-index: 100;\n            display: none;\n          }\n          \n          .select-dropdown.show {\n            display: block;\n          }\n          \n          .supplier-search-container {\n            padding: 10px;\n            position: relative;\n          }\n          \n          .search-icon {\n            position: absolute;\n            left: 20px;\n            top: 50%;\n            transform: translateY(-50%);\n            color: #888;\n          }\n          \n          .search-input {\n            width: 100% !important;\n            padding: 6px 6px 6px 40px !important;\n            border: 1px solid #ddd;\n            border-radius: 6px;\n            font-size: 14px;\n            outline: none;\n          }\n          \n          .options-container {\n            max-height: 200px;\n            max-height: 170px;\n            overflow-y: auto;\n            scrollbar-width: thin;\n            scrollbar-color: #ccc transparent;\n          }\n          \n          .select-option {\n            padding: 10px 15px;\n            cursor: pointer;\n          }\n          \n          .select-option:hover {\n            background-color: #f5f5f5;\n          }\n          \n          .select-option.selected {\n            background-color: #e9ecef;\n            color: #333333;\n          }\n          \n          .no-results {\n            padding: 10px 15px;\n            color: #666;\n            font-style: italic;\n            text-align: center;\n          }\n        ",document.head.appendChild(t)}}getElement(){return this.element}getValue(){return this.selectedOption}setValue(t){if(void 0===t)return;const e=this.options.find((e=>e[this.config.valueField]===t));e&&this.selectOption(e)}onChange(t){this.onChangeCallback=t}}class Ac{constructor(t=!1,n){this.isInfoCtaSection=t,this.type=n,this.config=e.getInstance(),this.toolBoxService=new r}createForm(t,e){const n=new nc(t);return e.forEach((t=>n.addField(t))),n}createModal({title:t,form:e,onSave:n}){const i=document.createElement("div");this.isInfoCtaSection&&(this.appendSupplierSelection(i,e),"Form"===this.type&&this.appendSupplierFormSelection(i,e)),e.render(i);const a=this.createSubmitSection(e,n),o=document.createElement("div");o.appendChild(i),o.appendChild(a),new l({title:t,width:"500px",body:o}).open()}validateFields(t){let e=!0;const n=t.fields,i=["home","my care","my living","my services","web link","dynamic form"];return n.forEach((t=>t.hideError())),n.forEach((t=>{const n=t.getElement().querySelector("input");if(!n)return;const a=n.value.trim();n.required&&""===a?(t.showError(t.errorMessage),e=!1):t.minLength&&a.length<t.minLength?(t.showError(`Must be at least ${t.minLength} characters`),e=!1):t.maxLength&&a.length>t.maxLength?(t.showError(`Cannot exceed ${t.maxLength} characters`),e=!1):t.validate&&!t.validate(a)?(t.showError(t.errorMessage),e=!1):i.includes(a.toLowerCase())&&(t.showError("Field name already exists"),e=!1)})),e}isValidUrl(t){try{const e=/^https?:\/\//i.test(t);return new URL(e?t:`http://${t}`).hostname.length>0}catch(t){return!1}}isValidPhone(t){const e=t.replace(/(?!^\+)\D/g,"");return/^\+?[0-9]{10,15}$/.test(e)}isValidEmail(t){return/^[a-zA-Z0-9.!#$%&'*+/=?^_{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?$/.test(t)&&t.length<=254}isValidAddress(t){return t.length>5&&t.length<=100}appendSupplierSelection(t,e){const n=window.app.suppliers,i=new Ic(n,{labelField:"SupplierGenCompanyName",valueField:"SupplierGenId",placeholder:"Select supplier to connect..."}),a=document.createElement("div");a.classList.add("form-field"),a.style.marginBottom="10px";const o=document.createElement("div");o.style.display="flex",o.style.justifyContent="space-between",o.style.alignItems="center";const r=document.createElement("label");r.innerText="Connect Supplier (optional)",o.appendChild(r);const s=this.findLastConnectedSupplier();if(s){const a=document.createElement("label");a.style.display="flex",a.style.alignItems="center",a.style.fontSize="13px",a.style.cursor="pointer",a.style.userSelect="none",a.style.gap="22px";const r=document.createElement("input");r.style.marginBottom="8px",r.type="checkbox";const l=document.createTextNode("Clear Selection");a.appendChild(r),a.appendChild(l),o.appendChild(a),r.addEventListener("change",(()=>{var a;if(r.checked){i.removeSelection();const n=t.querySelector("#field_value");n&&(n.value="",n.disabled=!1),e.setSelectedSupplierId("")}else{const o=null===(a=s.CtaAttributes)||void 0===a?void 0:a.CtaConnectedSupplierId;o&&(i.setValue(o),this.updateFieldWithSupplierData(t,n.find((t=>t.SupplierGenId===o)),e))}}))}a.appendChild(o);const l=i.getElement();this.setupSupplierSelection(i,t,e),a.appendChild(l),t.appendChild(a)}appendSupplierFormSelection(t,e,n){const i=this.selectedSupplierId&&n?this.toolBoxService.forms.filter((t=>t.SupplierId===this.selectedSupplierId)):this.toolBoxService.forms,a=new Ic(i,{labelField:"PageName",valueField:"FormUrl",placeholder:"Select form..."}),o=document.createElement("div");o.classList.add("form-field"),o.style.marginBottom="10px";const r=document.createElement("div");r.style.display="flex",r.style.justifyContent="space-between",r.style.alignItems="center";const s=document.createElement("label");s.innerText="Select Form",r.appendChild(s),o.appendChild(r);const l=a.getElement();o.appendChild(l);const c=t.firstElementChild;c&&c.nextSibling?t.insertBefore(o,c.nextSibling):t.appendChild(o),a.onChange((e=>{const n=t.querySelector("#field_value"),i=t.querySelector("#field_id");(n||i)&&(null==e?void 0:e.FormUrl)&&(n.value=e.FormUrl,i.value=e.FormId)}))}setupSupplierSelection(t,e,n){var i;const a=this.config.suppliers,o=this.findLastConnectedSupplier();if(o){const r=null===(i=o.CtaAttributes)||void 0===i?void 0:i.CtaConnectedSupplierId;t.setValue(r),this.selectedSupplierId=r,this.updateFieldWithSupplierData(e,a.find((t=>t.SupplierGenId===r)),n)}t.onChange((t=>{var i;this.selectedSupplierId=null!==(i=null==t?void 0:t.SupplierGenId)&&void 0!==i?i:"",this.updateFieldWithSupplierData(e,t,n),this.refreshFormSelection(e,n)}))}refreshFormSelection(t,e){var n;const i=null===(n=Array.from(t.querySelectorAll(".form-field label")).find((t=>{var e;return null===(e=t.textContent)||void 0===e?void 0:e.includes("Select Form")})))||void 0===n?void 0:n.closest(".form-field");i&&t.contains(i)&&t.removeChild(i),"Form"===this.type&&this.appendSupplierFormSelection(t,e,!0)}findLastConnectedSupplier(){var t;const e=globalThis.currentPageId,n=localStorage.getItem(`data-${e}`),i=n?JSON.parse(n):null;return(null===(t=null==i?void 0:i.PageInfoStructure)||void 0===t?void 0:t.InfoContent)?[...i.PageInfoStructure.InfoContent].reverse().find((t=>{var e;return"Cta"===(null==t?void 0:t.InfoType)&&!0===(null===(e=null==t?void 0:t.CtaAttributes)||void 0===e?void 0:e.CtaSupplierIsConnected)})):null}updateFieldWithSupplierData(t,e,n){var i,a,o,r;if(!e)return;const s=t.querySelector("#field_value");if(!s)return void console.warn("Could not find field_value element in the form");let l="";switch(this.type){case"Phone":l=(null===(i=e.SupplierGenContactPhone)||void 0===i?void 0:i.trim())||"";break;case"Email":l=(null===(a=e.SupplierGenEmail)||void 0===a?void 0:a.trim())||"";break;case"WebLink":l=(null===(o=e.SupplierGenWebsite)||void 0===o?void 0:o.trim())||"";break;case"Map":l=(null===(r=e.SupplierGenAddressLine1)||void 0===r?void 0:r.trim())||""}s.value=l,s.disabled=!0}createSubmitSection(t,e){const n=document.createElement("div");n.classList.add("popup-footer"),n.style.marginBottom="-12px";const i=this.createButton("submit_form","tb-btn-primary","Save"),a=this.createButton("cancel_form","tb-btn-outline","Cancel");return i.addEventListener("click",(n=>{var i;n.preventDefault(),this.validateFields(t)&&(e(),null===(i=document.querySelector(".popup-modal-link"))||void 0===i||i.remove())})),a.addEventListener("click",(t=>{var e;t.preventDefault(),null===(e=document.querySelector(".popup-modal-link"))||void 0===e||e.remove()})),n.appendChild(i),n.appendChild(a),n}createButton(t,e,n){const i=document.createElement("button");return i.id=t,i.classList.add("tb-btn",e),i.innerText=n,i}}var Ec=function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}))};class Sc{constructor(t=!1,e,n){this.isInfoCtaSection=t,this.sectionId=n,this.appVersionManager=new d,this.toolBoxService=new r,this.formModalService=new Ac(t,e),this.infoSectionUi=new js,this.infoSectionController=new uc}handlePhone(){const t=this.formModalService,e=this.formModalService.createForm("phone-form",[{label:"Phone Number",type:"tel",id:"field_value",placeholder:"123-456-7890",required:!0,errorMessage:"Please enter a valid phone number",validate:e=>t.isValidPhone(e)},{label:"Label",type:"",id:"field_label",placeholder:"Call us now",required:!0,errorMessage:"Please enter a label for your phone tile",minLength:2}]);this.formModalService.createModal({title:"Add Phone Number",form:e,onSave:()=>this.processFormData(e.getData(),"Phone")})}handleEmail(){const t=this.formModalService,e=this.formModalService.createForm("email-form",[{label:"Email Address",type:"email",id:"field_value",placeholder:"example@example.com",required:!0,errorMessage:"Please enter a valid email address",validate:e=>t.isValidEmail(e)},{label:"Label",type:"text",id:"field_label",placeholder:"Get in touch",required:!0,errorMessage:"Please enter a label for email tile",minLength:2}]);this.formModalService.createModal({title:"Add Email Address",form:e,onSave:()=>this.processFormData(e.getData(),"Email")})}handleForm(){const t=this.formModalService,e=this.formModalService.createForm("form-form",[{label:"Form Url",type:"url",id:"field_value",placeholder:"https://example.com",required:!0,hidden:!0,errorMessage:"Please select a form",validate:e=>t.isValidUrl(e)},{label:"Form ID",type:"number",id:"field_id",required:!1,hidden:!0,errorMessage:"Please select a form",validate:e=>t.isValidUrl(e)},{label:"Label",type:"text",id:"field_label",placeholder:"Fill Form",required:!0,errorMessage:"Please enter a label for your form",minLength:5}]);this.formModalService.createModal({title:"Add Form",form:e,onSave:()=>this.processFormData(e.getData(),"Form")})}handleWebLinks(){console.log("handleWebLinks");const t=this.formModalService,e=this.formModalService.createForm("web-link-form",[{label:"Link Url",type:"url",id:"field_value",placeholder:"https://example.com",required:!0,errorMessage:"Please enter a valid URL",validate:e=>t.isValidUrl(e)},{label:"Label",type:"text",id:"field_label",placeholder:"Example Link",required:!0,errorMessage:"Please enter a label for your link",minLength:5}]);this.formModalService.createModal({title:"Add Web Link",form:e,onSave:()=>this.processFormData(e.getData(),"WebLink")})}handleAddress(){const t=this.formModalService,e=this.formModalService.createForm("address-form",[{label:"Address",type:"text",id:"field_value",placeholder:"Address",required:!0,errorMessage:"Please enter a Address",validate:e=>t.isValidAddress(e)},{label:"Label",type:"text",id:"field_label",placeholder:"Visit us",required:!0,errorMessage:"Please enter a label for your address",minLength:5}]);this.formModalService.createModal({title:"Add Address",form:e,onSave:()=>this.processFormData(e.getData(),"Map")})}processFormData(t,e){return Ec(this,void 0,void 0,(function*(){var n;if(this.isInfoCtaSection)this.addCtaButtonSection(e,t);else{const i=globalThis.selectedComponent;if(!i)return;const a=i.find(".tile-title")[0];a&&a.components(t.field_label);const o=i.parent().getId(),r=i.parent().parent().getId(),s=globalThis.activeVersion;let l=null==s?void 0:s.Pages.find((e=>("WebLink"==e.PageType&&console.log("page",e),"WebLink"==e.PageType&&e.PageLinkStructure.Url==t.field_value)));if(!l){const e=yield this.appVersionManager.getActiveVersion();l=yield this.toolBoxService.createLinkPage(e.AppVersionId,t.field_label,t.field_value,null),l=l.MenuPage}const c=[["Text",t.field_label],["Name",t.field_label],["Action.ObjectType",e],["Action.ObjectId",l.PageId],["Action.ObjectUrl",t.field_value]];let d;if("Information"===globalThis.pageData.PageType){const t=new uc;for(const[e,n]of c)t.updateInfoTileAttributes(r,o,e,n);const e=globalThis.infoContentMapper.getInfoContent(r);d=null===(n=null==e?void 0:e.Tiles)||void 0===n?void 0:n.find((t=>t.Id===o))}else{for(const[t,e]of c)globalThis.tileMapper.updateTile(o,t,e);d=globalThis.tileMapper.getTile(r,o)}(new Sl).removeOtherEditors(),l&&new Al(null==l?void 0:l.PageId,l).init(d)}}))}addCtaButtonSection(){return Ec(this,arguments,void 0,(function*(t="Phone",e={}){var n;let i="Info";"Phone"==t||"Email"==t?i=t:"WebLink"==t?i="Link":"Address"==t?i="Globe":"Form"==t&&(i="Document");const a={CtaId:cr(15),CtaType:t,CtaLabel:e.field_label||"Call Us",CtaAction:e.field_value,CtaColor:"",CtaBGColor:"",CtaButtonType:"Image",CtaButtonImgUrl:"/Resources/UCGrapes1/src/images/image.png",CtaButtonIcon:i,CtaSupplierIsConnected:!!e.supplier_id,CtaConnectedSupplierId:e.supplier_id?e.supplier_id:null,Action:{ObjectId:"Form"===t?null==e?void 0:e.field_id:cr(15),ObjectType:"Form"===t?"DynamicForm":t,ObjectUrl:e.field_value}};let o;if("WebLink"===t||"Form"===t){const i=globalThis.activeVersion,a="WebLink"===t?"WebLink":"DynamicForm",r=e.field_value;if(o=null===(n=null==i?void 0:i.Pages)||void 0===n?void 0:n.find((t=>{var e;return t.PageType===a&&(null===(e=t.PageLinkStructure)||void 0===e?void 0:e.Url)===r})),!o){const n=yield this.appVersionManager.getActiveVersion(),i="Form"===t?Number(null==e?void 0:e.field_id):null;try{o=(yield this.toolBoxService.createLinkPage(n.AppVersionId,e.field_label,r,i)).MenuPage}catch(t){return void console.error("Error creating link page:",t)}}o&&(console.log(`${t} childPage:`,o),new Al(o.PageId,o).init({}))}console.log("cta.. ",a);const r=this.infoSectionUi.addCtaButton(a);this.infoSectionController.addCtaButton(r,a,this.sectionId)}))}}class Lc{constructor(t){this.categoryData=t,this.pageAttacher=new Sl,this.pageCreationService=new Sc,this.details=document.createElement("details"),this.init()}init(){this.details.className="category",this.details.setAttribute("data-category",this.categoryData.name),this.createCategoryElement()}createCategoryElement(){var t,n;const i=document.createElement("summary");i.innerText=`${this.categoryData.displayName}`;const a=document.createElement("i");a.className="fa fa-angle-right","WebLink"!==this.categoryData.name&&i.appendChild(a);const o=document.createElement("div");o.className="search-container",o.innerHTML='\n            <i class="fas fa-search search-icon"></i>\n            <input type="text" placeholder="Search" class="search-input" />\n        ',this.categoryData.canCreatePage&&setTimeout((()=>{const t=o.querySelector("#add-new-service");t&&t.addEventListener("click",(t=>{t.preventDefault(),globalThis.selectedComponent?(this.categoryData.name,"Service/Product Page"==this.categoryData.name&&e.getInstance()):new s("error",Ms.t("messages.error.select_tile"))}))}),0);const r=document.createElement("ul");r.className="category-content",null===(n=null===(t=this.categoryData)||void 0===t?void 0:t.options)||void 0===n||n.forEach((t=>{const e=document.createElement("li");e.innerText=t.PageName,e.setAttribute("data-page-name",t.PageName),e.setAttribute("data-page-id",t.PageId),e.addEventListener("click",(e=>{e.preventDefault(),globalThis.selectedComponent?"DynamicForm"===this.categoryData.name?(new _c).handleDynamicForms(t):"Modules"==this.categoryData.name?this.pageAttacher.attachToTile(t,t.PageType,this.categoryData.label):this.pageAttacher.attachToTile(t,this.categoryData.name,this.categoryData.label):new s("error",Ms.t("messages.error.select_tile"))})),r.appendChild(e)}));const l=document.createElement("li");l.className="no-records-message",l.style.display="none",l.innerText="No records found",r.appendChild(l),this.details.addEventListener("toggle",(t=>{if("WebLink"!==this.categoryData.name){const t=i.querySelector("i");t&&(t.classList.toggle("fa-angle-right"),t.classList.toggle("fa-angle-down"))}else{if(!globalThis.selectedComponent)return void new s("error",Ms.t("messages.error.select_tile"));this.pageCreationService.handleWebLinks()}})),"WebLink"===this.categoryData.name?this.details.appendChild(i):(this.details.appendChild(i),this.details.appendChild(o),this.details.appendChild(r)),this.searchItemsEvent(o)}searchItemsEvent(t){const e=t.querySelector("input"),n=this.details.querySelector("ul");e.addEventListener("input",(t=>{const e=n.querySelector(".no-records-message");let i=!1;const a=t.target.value.toLowerCase().trim();Array.from(n.querySelectorAll("li:not(.no-records-message)")).forEach((t=>{var e,n;const o=(null!==(n=null===(e=t.textContent)||void 0===e?void 0:e.toLowerCase())&&void 0!==n?n:"").includes(a);t.style.display=o?"block":"none",o&&(i=!0)})),e&&(e.style.display=i?"none":"block")}))}render(t){t.appendChild(this.details)}}class Mc{constructor(t){this.categoryView=new Lc(t)}render(t){this.categoryView.render(t)}}var Nc=function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}))};class kc{constructor(){this.container=document.createElement("div"),this.toolBoxService=new r,this.appVersion=new d,this.init()}init(){return Nc(this,void 0,void 0,(function*(){this.container.className="tb-dropdown-menu",this.container.id="dropdownMenu",(yield this.getCategoryData()).forEach((t=>{new Mc(t).render(this.container)}))}))}getCategoryData(){return Nc(this,void 0,void 0,(function*(){const t=globalThis.pageData;return[{name:"Page",displayName:Ms.t("sidebar.action_list.page"),label:Ms.t("sidebar.action_list.page"),options:yield this.getPages(),canCreatePage:!0},!t||"MyCare"!==t.PageType&&"MyService"!==t.PageType&&"MyLiving"!==t.PageType?null:{name:"Content",displayName:Ms.t("sidebar.action_list.services"),label:Ms.t("sidebar.action_list.services"),options:this.getServices(t),canCreatePage:!0},{name:"DynamicForm",displayName:Ms.t("sidebar.action_list.forms"),label:Ms.t("sidebar.action_list.forms"),options:this.getDynamicForms(),canCreatePage:!1},{name:"Modules",displayName:Ms.t("sidebar.action_list.module"),label:Ms.t("sidebar.action_list.module"),options:yield this.getPredefinedPages(),canCreatePage:!1},{name:"WebLink",displayName:Ms.t("sidebar.action_list.weblink"),label:Ms.t("sidebar.action_list.weblink"),options:[],canCreatePage:!1},{name:"CallToActions",displayName:Ms.t("sidebar.action_list.call_to_action"),label:Ms.t("sidebar.action_list.call_to_action"),options:[{PageId:"add-email",PageName:Ms.t("tile.email"),TileName:"",PageType:"CtaEmail"},{PageId:"add-phone",PageName:Ms.t("tile.phone"),TileName:"",PageType:"CtaPhone"},{PageId:"add-web-link",PageName:"Web link",TileName:"",PageType:"CtaWebLink"}],canCreatePage:!1}].filter((t=>null!==t)).sort(((t,e)=>t.label.localeCompare(e.label)))}))}getDynamicForms(){const t=(this.toolBoxService.forms||[]).map((t=>({PageId:t.FormId,PageName:t.PageName,TileName:t.PageName,PageUrl:t.FormUrl,PageType:"DynamicForm"})));return console.log("forms",t),t}getServices(t){let e=this.toolBoxService.services||[];return e=e.filter((e=>e.ProductServiceClass.replace(/\s+/g,"")==t.PageType)).map((t=>({PageId:t.ProductServiceId,PageName:t.ProductServiceName,TileName:t.ProductServiceTileName||t.ProductServiceName,TileCategory:t.ProductServiceClass}))),e}getPages(){return Nc(this,void 0,void 0,(function*(){try{return(this.appVersion.getPages()||[]).filter((t=>("Menu"==t.PageType||"Information"==t.PageType)&&"Home"!==t.PageName&&"My Care"!==t.PageName&&"My Living"!==t.PageName&&"My Services"!==t.PageName)).map((t=>({PageId:t.PageId,PageName:ur(t.PageName),TileName:ur(t.PageName),PageType:t.PageType})))}catch(t){throw console.error("Error fetching pages:",t),t}}))}getPredefinedPages(){return Nc(this,void 0,void 0,(function*(){try{return((yield this.appVersion.preDefinedPages())||[]).map((t=>({PageId:t.PageId,PageName:t.PageName,TileName:t.PageName,PageType:t.PageType})))}catch(t){throw console.error("Error fetching pages:",t),t}}))}render(t){t.appendChild(this.container)}}var Pc=function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}))};class _c{constructor(){this.toolboxService=new r,this.appVersionManager=new d,this.pageAttacher=new Sl,this.actionList=new kc,this.pageCreationService=new Sc,this.selectedComponent=globalThis.selectedComponent}getMenuCategories(){return Pc(this,void 0,void 0,(function*(){const t=yield this.actionList.getCategoryData(),e=(globalThis.pageData,[]);return e.push({id:"list-form",name:"DynamicForm",label:Ms.t("tile.forms"),expandable:!0,action:()=>this.getSubMenuItems(t,"Content")}),e.push({id:"list-module",name:"Modules",label:Ms.t("tile.modules"),expandable:!0,action:()=>this.getSubMenuItems(t,"Modules")}),console.log("categoryData",t),e.push({id:"list-page",name:"Page",label:Ms.t("tile.existing_pages"),expandable:!0,action:()=>this.getSubMenuItems(t,"")}),e.push({id:"cta-list",name:"CallToActions",label:Ms.t("tile.call_to_action"),expandable:!0,action:()=>this.getSubMenuItems(t,"CallToActions")}),[[{id:"add-info-page",label:Ms.t("tile.information_page"),name:"",action:()=>Pc(this,void 0,void 0,(function*(){this.createNewInfoPage("Untitled")}))}],e]}))}getSubMenuItems(t,e){return Pc(this,void 0,void 0,(function*(){const n=t.find((t=>t.name===e));return((null==n?void 0:n.options)||[]).map((t=>({id:t.PageId,label:t.PageName,url:t.PageUrl,action:()=>this.handleSubMenuItemSelection(t,t.PageType)})))}))}createNewPage(t){return Pc(this,void 0,void 0,(function*(){const e=yield this.appVersionManager.getActiveVersion(),n=yield this.toolboxService.createMenuPage(e.AppVersionId,t);if(n.error.message)console.error("error",n.error.message);else{const t={PageId:n.MenuPage.PageId,PageName:n.MenuPage.PageName,TileName:n.MenuPage.PageName,PageType:n.MenuPage.PageType};this.pageAttacher.attachToTile(t,"Menu","Menu")}}))}createNewInfoPage(t){return Pc(this,void 0,void 0,(function*(){const e=yield this.appVersionManager.getActiveVersion(),n=yield this.toolboxService.createInfoPage(e.AppVersionId,t);if(n.error.message)console.error("error",n.error.message);else{const t={PageId:n.MenuPage.PageId,PageName:n.MenuPage.PageName,TileName:n.MenuPage.PageName,PageType:n.MenuPage.PageType};this.pageAttacher.attachToTile(t,"Information","Information",!0)}}))}handleSubMenuItemSelection(t,e){this.pageAttacher.removeOtherEditors(),"DynamicForm"===e?this.handleDynamicForms(t):"Modules"===e?this.pageAttacher.attachToTile(t,t.PageType,t.PageName):"CtaEmail"===e?this.pageCreationService.handleEmail():"CtaPhone"===e?this.pageCreationService.handlePhone():"CtaWebLink"===e?(console.log("CtaWebLink handle"),this.pageCreationService.handleWebLinks()):this.pageAttacher.attachToTile(t,e,t.PageName)}handleDynamicForms(t){return Pc(this,void 0,void 0,(function*(){const e=globalThis.selectedComponent;if(!e)return;const n=e.find(".tile-title")[0];n&&n.components(t.PageName),n.addAttributes({title:t.PageName});const i=e.parent().getId(),a=e.parent().parent().getId(),r=globalThis.activeVersion;let s=null==r?void 0:r.Pages.find((e=>("DynamicForm"==e.PageType&&console.log("page",e),"DynamicForm"==e.PageType&&e.PageLinkStructure.WWPFormId==t.PageId)));if(!s){const e=yield this.appVersionManager.getActiveVersion();s=yield this.toolboxService.createLinkPage(e.AppVersionId,t.PageName,"",t.PageId),s=s.MenuPage}const l=`${o}/utoolboxdynamicform.aspx?WWPFormId=${t.PageId}&WWPDynamicFormMode=DSP&DefaultFormType=&WWPFormType=0`,c=[["Text",t.PageName],["Name",t.PageName],["Action.ObjectType","DynamicForm"],["Action.ObjectId",s.PageId],["Action.ObjectUrl",l]];for(const[t,e]of c)globalThis.tileMapper.updateTile(i,t,e);const d=globalThis.tileMapper.getTile(a,i);new Al(null==s?void 0:s.PageId,s).init(d)}))}filterMenuItems(t,e){return t.filter((t=>{var n;return((null===(n=t.textContent)||void 0===n?void 0:n.toLowerCase())||"").includes(e.toLowerCase())}))}}class $c{constructor(t,e){this.activeSubmenu=null,this.hoverTimeout=null,this.menuContainer=t,this.controller=e}createMenuItem(t,e){const n=document.createElement("li");if(n.classList.add("menu-item"),n.innerHTML=t.label.length>20?t.label.substring(0,20)+"...":t.label,n.setAttribute("data-name",t.name||""),t.expandable){const e=document.createElement("i");e.classList.add("fa","fa-chevron-right","expandable-icon"),n.appendChild(e),n.addEventListener("mouseenter",(e=>{e.stopPropagation(),null!==this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=null),this.menuContainer.querySelectorAll(".menu-item.expandable").forEach((t=>t.classList.remove("expandable"))),n.classList.add("expandable"),setTimeout((()=>{this.showSubMenu(t.name,n)}),50)}))}else n.addEventListener("click",(n=>{n.stopPropagation(),t.action&&(t.action(),e&&e()),this.menuContainer.remove()})),n.addEventListener("mouseenter",(t=>{if(t.stopPropagation(),!n.classList.contains("sub-menu-item")){const t=this.menuContainer.querySelectorAll(".expandable"),e=this.menuContainer.querySelectorAll(".sub-menu-container");t.forEach((t=>t.classList.remove("expandable"))),e.forEach((t=>t.remove()))}}));return n.id=t.id,n}showSubMenu(t,e){return n=this,i=void 0,o=function*(){const n=document.querySelector(".frame-list"),i=null==n?void 0:n.getBoundingClientRect();let a;const o=this.menuContainer.querySelector(".sub-menu-container");o?(a=o,a.innerHTML=""):(a=document.createElement("div"),a.classList.add("sub-menu-container"),this.activeSubmenu=a);const r=e.getBoundingClientRect(),s=this.menuContainer.getBoundingClientRect(),l=r.top-s.top;a.style.top=`${l}px`,i&&r.right+180>i.right?a.style.left="-178px":a.style.left="100%";const c=document.createElement("div");c.classList.add("sub-menu-header");const d=document.createElement("div");d.className="search-container",d.innerHTML='\n      <i class="fas fa-search search-icon"></i>\n      <input type="text" placeholder="Search" class="search-input" />\n    ',c.appendChild(d),"CallToActions"!==t&&a.appendChild(c);const h=document.createElement("ul");h.classList.add("menu-list");const u=yield this.controller.actionList.getCategoryData(),p=yield this.controller.getSubMenuItems(u,t);if(p.sort(((t,e)=>t.label.localeCompare(e.label))),p.length>10?(h.style.maxHeight="400px",h.style.overflowY="auto"):(h.style.maxHeight="unset",h.style.overflowY="unset"),p&&p.length>0)p.forEach((t=>{const e=this.createMenuItem(t);e.classList.add("sub-menu-item"),h.appendChild(e)}));else{const e=document.createElement("li");e.classList.add("menu-item","no-items"),e.innerHTML=`No ${t.toLowerCase()} available`,e.style.pointerEvents="none",e.style.cursor="default",h.appendChild(e)}a.appendChild(h),a.addEventListener("mouseenter",(()=>{null!==this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=null)})),a.addEventListener("click",(t=>{const e=t.target;e.classList.contains("menu-item")||e.closest(".menu-item:not(.no-items)")||t.stopPropagation()})),this.menuContainer.appendChild(a);const g=d.querySelector(".search-input");null==g||g.addEventListener("input",(e=>{const n=e.target.value,i=Array.from(h.querySelectorAll(".menu-item:not(.no-items)")),a=h.querySelector(".no-items");a&&a.remove();const o=this.controller.filterMenuItems(i,n);if(i.forEach((t=>{t.style.display="flex"})),""!==n.trim()&&(i.forEach((t=>{t.style.display=o.includes(t)?"flex":"none"})),0===o.length)){const e=document.createElement("li");e.classList.add("menu-item","no-items"),e.innerHTML=`No ${t.toLowerCase()} available`,e.style.pointerEvents="none",e.style.cursor="default",h.appendChild(e)}})),null==g||g.addEventListener("click",(t=>{t.stopPropagation()})),null==g||g.addEventListener("focus",(t=>{t.stopPropagation()}))},new((a=void 0)||(a=Promise))((function(t,e){function r(t){try{l(o.next(t))}catch(t){e(t)}}function s(t){try{l(o.throw(t))}catch(t){e(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof a?n:new a((function(t){t(n)}))).then(r,s)}l((o=o.apply(n,i||[])).next())}));var n,i,a,o}}class Oc{constructor(t,e){this.controller=new _c,this.templateContainer=t,this.parentContainer=e,this.menuContainer=document.createElement("div"),this.menuList=document.createElement("ul"),this.menuItemManager=new $c(this.menuContainer,this.controller),this.init()}init(){return t=this,e=void 0,i=function*(){this.menuContainer.classList.add("menu-container"),this.menuList.innerHTML="";const t=yield this.controller.getMenuCategories();null==t||t.forEach((t=>{const e=document.createElement("div");e.classList.add("menu-category"),t.sort(((t,e)=>t.label.localeCompare(e.label))),t.forEach((t=>{const n=this.menuItemManager.createMenuItem(t,(()=>{this.menuContainer.remove()}));e.appendChild(n)})),this.menuContainer.appendChild(e)}))},new((n=void 0)||(n=Promise))((function(a,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}));var t,e,n,i}render(t,e){if(!t){const e=this.templateContainer.querySelector(".tile-open-menu");if(!e)return;t=e.getBoundingClientRect()}this.displayMenu(t,e)}displayMenu(t,e){const n=this.parentContainer.getBoundingClientRect();if(!e)return;this.menuContainer.style.position="absolute",this.menuContainer.style.left="-9999px",this.menuContainer.style.top="-9999px",this.menuContainer.style.opacity="0",this.menuContainer.style.visibility="visible",this.parentContainer.appendChild(this.menuContainer),this.menuContainer.offsetHeight;const i=this.menuContainer.getBoundingClientRect(),a=e.left-n.left+t.left,o=e.top-n.top+t.top,r=(t.width,t.height,n.width),s=n.height;this.menuContainer.style.left="",this.menuContainer.style.top="",this.menuContainer.style.right="",this.menuContainer.style.bottom="";const l=o,c=i.height>0?i.height:200;if(l>=c+10?this.menuContainer.style.top=o-c-0+"px":(this.menuContainer.style.top="10px",c>s-20&&(this.menuContainer.style.maxHeight=s-20+"px",this.menuContainer.style.overflowY="auto")),a+i.width<=r-10)this.menuContainer.style.left=`${a+16}px`;else{const t=r-i.width-10;this.menuContainer.style.left=`${Math.max(10,t+16)}px`}this.menuContainer.style.visibility="visible",this.menuContainer.style.opacity="1"}}var jc=function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}))};class Bc{constructor(t,e,n){this.templateContainer=t,this.parentContainer=e,this.menuContainer=document.createElement("div"),this.controller=new uc,this.menuList=document.createElement("ul"),this.submenuContainer=document.createElement("div"),this.infoSectionUi=new js,this.sectionId=n,this.init()}init(){return jc(this,void 0,void 0,(function*(){this.menuContainer.classList.add("menu-container"),this.menuContainer.classList.add("info-section-popup"),this.menuList.innerHTML="";const t=[{name:"Cta",label:"Call to Action",expandable:!0},{name:"Tile",label:"Tile",handler:t=>this.addTile(t)},{name:"Image",label:"Image",handler:t=>this.addImage(t)},{name:"Description",label:"Description",handler:t=>this.addDescription(t)}];t.sort(((t,e)=>t.label.localeCompare(e.label))),null==t||t.forEach((t=>{const e=document.createElement("div");e.classList.add("menu-category");const n=this.controller.createMenuItem(t,(()=>{this.menuContainer.remove()}));if(e.appendChild(n),null==t?void 0:t.expandable){const t=document.createElement("span");t.classList.add("fa","fa-chevron-right"),t.style.fontSize="10px",t.style.color="#6c757d",n.appendChild(t),n.addEventListener("mouseenter",(()=>jc(this,void 0,void 0,(function*(){const t=document.querySelector(".info-section-popup .menu-list");t&&t.remove(),n.classList.add("expandable"),this.submenuContainer.innerHTML="",this.submenuContainer.className="menu-list",this.submenuContainer.style.position="absolute",this.submenuContainer.style.left="100%",this.submenuContainer.style.top=`${n.offsetTop+10}px`,this.submenuContainer.style.backgroundColor="white",this.submenuContainer.style.boxShadow="0 2px 6px rgba(0, 0, 0, 0.2)",this.submenuContainer.style.borderRadius="9px",this.submenuContainer.style.width="100px",this.submenuContainer.style.minHeight="fit-content",this.submenuContainer.style.zIndex="1001",(yield this.getSubMenuItems({},"Cta")).forEach((t=>{const e=document.createElement("div");e.classList.add("menu-item","sub-menu-item"),e.textContent=t.label,e.addEventListener("click",(e=>{e.stopPropagation(),t.action(),this.menuContainer.remove()})),this.submenuContainer.appendChild(e)})),this.menuContainer.appendChild(this.submenuContainer)}))))}else n.addEventListener("click",(()=>{t.handler&&t.handler(this.sectionId),this.menuContainer.remove()})),n.addEventListener("mouseenter",(()=>{this.submenuContainer.remove(),this.menuContainer.querySelectorAll(".expandable").forEach((t=>{t.classList.remove("expandable")}))}));this.menuContainer.appendChild(e)}))}))}render(t,e){if(!t){const e=this.templateContainer.querySelector(".tb-add-new-info-section, .add-new-info-section");if(!e)return;t=e.getBoundingClientRect()}this.displayMenu(t,e)}addTile(t){const e=this.infoSectionUi.infoTileUi();this.controller.addTile(e,t)}addImage(t){this.infoSectionUi.openImageUpload(t)}addDescription(t){this.controller.openContentEditModal(t)}displayMenu(t,e){const n=this.parentContainer.getBoundingClientRect();if(!e)return;this.menuContainer.style.position="absolute",this.menuContainer.style.left="-9999px",this.menuContainer.style.top="-9999px",this.menuContainer.style.opacity="0",this.menuContainer.style.visibility="visible",this.parentContainer.appendChild(this.menuContainer),this.menuContainer.offsetHeight;const i=this.menuContainer.getBoundingClientRect(),a=(e.width,e.top-n.top+t.top-15),o=(t.width,a+t.height),r=(n.width,n.height);this.menuContainer.style.left="",this.menuContainer.style.top="",this.menuContainer.style.right="",this.menuContainer.style.bottom="",this.menuContainer.style.width="120px";const s=r-o,l=a,c=i.height>0?i.height:200;s>=c+10?this.menuContainer.style.top=`${o+20}px`:l>=c+10?this.menuContainer.style.top=a-c-0+"px":(this.menuContainer.style.top="10px",c>r-20&&(this.menuContainer.style.maxHeight=r-20+"px",this.menuContainer.style.overflowY="auto")),this.menuContainer.style.left=`calc(50% - ${this.menuContainer.clientWidth/2}px)`,this.menuContainer.style.visibility="visible",this.menuContainer.style.opacity="1"}getSubMenuItems(t,e){return jc(this,void 0,void 0,(function*(){return[{id:"add-address",label:"Address",type:"Map",name:"",handler:t=>t.handleWebLinks()},{id:"add-email",label:"Email",type:"Email",name:"",handler:t=>t.handleEmail()},{id:"add-form",label:"Form",type:"Form",name:"",handler:t=>t.handleForm()},{id:"add-phone",label:"Phone",type:"Phone",name:"",handler:t=>t.handlePhone()},{id:"add-web-link",label:"Web link",type:"WebLink",name:"",handler:t=>t.handleWebLinks()}].map((t=>({id:t.id,name:t.name,label:t.label,type:t.type,action:()=>{const e=new Sc(!0,t.type,this.sectionId);t.handler(e)}})))}))}}class qc{constructor(t,e,n,i,a){this.isMenuOpen=!1,this.handleComponentAdd=t=>{var e;const n=t.parent();n&&(null===(e=n.getEl())||void 0===e?void 0:e.classList.contains("container-row"))&&3===n.components().filter((t=>"tile-wrapper"===t.get("type"))).length&&console.log("more than 3")},this.editor=t,this.pageId=e,this.frameId=n,this.pageData=i,this.appVersionManager=a,this.tilePropsSection=document.getElementById("menu-page-section"),this.ctaPropsSection=document.getElementById("content-page-section")}handleTileManager(t){this.tileManager=new Tc(t,this.editor,this.pageId,this.frameId,this.pageData)}initContentDataUi(t){new wc(t,this.editor,this.pageData)}clearAllMenuContainers(){var t,e;document.querySelectorAll(".menu-container").forEach((t=>{t.remove()}));const n=null===(e=null===(t=this.editor)||void 0===t?void 0:t.getWrapper())||void 0===e?void 0:e.find(".info-section-spacing-container");null==n||n.forEach((t=>{t.getEl().style.removeProperty("height");const e=t.getEl().querySelector('[data-name="Ellipse 6"]'),n=t.getEl().querySelector(".add-new-info-section");n&&n.style.removeProperty("opacity"),e&&e.setAttribute("fill","#fdfdfd");const i=t.getEl().querySelector("path");i&&i.setAttribute("fill","#5068a8")}))}openMenu(t){const e=t.target;if(e.closest(".tile-open-menu")){t.stopPropagation();const n=e.closest(".tile-open-menu"),i=n.closest(".template-wrapper");this.clearAllMenuContainers();const a=document.getElementById(`${this.frameId}-frame`),o=null==a?void 0:a.querySelector("iframe"),r=null==o?void 0:o.getBoundingClientRect(),s=new Oc(i,a),l=n.getBoundingClientRect();s.render(l,r)}}handleInfoSectionHover(t){const e=t.target;if(this.isMenuOpen)return void(this.isMenuOpen=!1);const n=e.closest(".add-new-info-section svg");if(n){let t=n;const e=(()=>{for(;t;){if(t.classList.contains("info-section-spacing-container"))return t;t=t.parentElement}return null})();if(!e)return void console.warn("No parent info-section-spacing-container found.");const i=this.getNextInfoSectionId(e);i?console.log("Found next sectionId:",i):console.warn("No matching info section found below.");const a=document.getElementById(`${this.frameId}-frame`),o=null==a?void 0:a.querySelector("iframe"),r=null==o?void 0:o.getBoundingClientRect(),s=new Bc(e,a,i),l=n.getBoundingClientRect();s.render(l,r),this.isMenuOpen=!0;const c=n.closest(".info-section-spacing-container");if(c){c.style.height="3.2rem";const t=c.querySelector(".add-new-info-section");t&&(t.style.opacity="1");const e=n.querySelector('[data-name="Ellipse 6"]');e&&e.setAttribute("fill","#5068a8");const i=n.querySelector("path");i&&i.setAttribute("fill","#fff")}globalThis.activeEditor=this.editor,globalThis.currentPageId=this.pageId,globalThis.pageData=this.pageData,this.activateEditor(this.frameId)}}getNextInfoSectionId(t){var e,n;if(!t.classList.contains("info-section-spacing-container"))return"";let i=t.nextElementSibling;for(;i;){if(i instanceof HTMLElement&&(null===(e=i.dataset.gjsType)||void 0===e?void 0:e.startsWith("info"))&&(null===(n=i.dataset.gjsType)||void 0===n?void 0:n.endsWith("section")))return i.id||"";i=i.nextElementSibling}return""}handleDragEnd(t,e,n){const i=n.getEl();if(i&&i.classList.contains("container-row")){t.parent.components().filter((t=>"tile-wrapper"===t.get("type"))).length>3&&(t.target.remove(),this.editor.UndoManager.undo());const i=!0,a=new xc;a.updateTile(n,i),a.updateTile(e,i),new Cc(this.pageId).moveTile(t.target.getId(),e.getId(),n.getId(),t.index),this.onTileUpdate(n)}else i&&i.classList.contains("content-page-wrapper")?new pr(this.pageId).moveContentRow(t.target.getId(),t.index):i&&i.classList.contains("cta-button-container")&&new pr(this.pageId).moveCta(t.target.getId(),t.index)}onTileUpdate(t){var e;t&&(null===(e=t.getEl())||void 0===e?void 0:e.classList.contains("container-row"))&&(this.editor.off("component:add",this.handleComponentAdd),this.editor.on("component:add",this.handleComponentAdd))}frameEventListener(){document.querySelectorAll(".mobile-frame").forEach((t=>{t.id.includes(this.frameId)&&(t.addEventListener("click",(t=>{globalThis.activeEditor=this.editor,globalThis.currentPageId=this.pageId,globalThis.pageData=this.pageData,globalThis.frameId=this.frameId,this.activateEditor(this.frameId),this.clearAllMenuContainers()})),t.addEventListener("input",(t=>{globalThis.activeEditor=this.editor,globalThis.currentPageId=this.pageId,globalThis.pageData=this.pageData,globalThis.frameId=this.frameId,this.activateEditor(this.frameId)})))})),document.addEventListener("click",(t=>{this.clearAllMenuContainers()}))}setPageFocus(t,e,n,i){document.querySelectorAll(".mobile-frame").forEach((a=>{a.id.includes(e)&&(globalThis.activeEditor=t,globalThis.currentPageId=n,globalThis.pageData=i,globalThis.frameId=e,this.activateEditor(e),this.clearAllMenuContainers())}))}activateEditor(t){const e=document.getElementById(`${t}-frame`);if(!e)return;globalThis.pageId=e.dataset.pageid;const n=e.dataset.pageid,i=this.appVersionManager.getPages().find((t=>t.PageId==n));this.pageData=i,document.querySelectorAll(".mobile-frame").forEach((e=>{const n=window.app.editors;Object.entries(n).filter((([e])=>e!==t)).forEach((([t,e])=>{e.select(null)})),e.classList.remove("active-editor"),console.log("frameId",t),e.id.includes(t)&&(e.classList.add("active-editor"),this.activateMiniatureFrame(e.id))})),this.showPageInfo(),(new cc).unDoReDo()}showPageInfo(){if(globalThis.selectedComponent)return;let t="";const e=document.querySelector("#page-info-section");"Information"==this.pageData.PageType&&this.pageData.PageInfoStructure.InfoContent&&this.pageData.PageInfoStructure.InfoContent.forEach((e=>{if("TileRow"==e.InfoType)e.Tiles.forEach((e=>{t+=`<li>${e.Text}</li>`}));else if("Cta"==e.InfoType&&e.CtaAttributes.Action){const n=e.CtaAttributes.Action.ObjectType;["DynamicForm","WebLink"].includes(n)&&(t+=`<li>${e.CtaAttributes.CtaLabel}</li>`)}})),e.innerHTML=`\n      <h5>${t?"Linked Pages":""}</h5>\n      <ul>\n        ${t}\n      </ul>\n    `,document.getElementById("page-info-title").innerHTML=`\n      <h3>${this.pageData.PageName.toUpperCase()}</h3>\n      <hr/>\n    `,e.style.display="block"}hidePageInfo(){document.querySelector("#page-info-section").style.display="none"}activateMiniatureFrame(t){var e,n;const i=document.querySelector(".editor-thumbs-list");i.querySelectorAll(".tb-highlighter").forEach((t=>{t.style.display="none"}));const a=i.querySelector(`div[id="${t}"]`);if(a){const t=null===(n=null===(e=a.parentElement)||void 0===e?void 0:e.parentElement)||void 0===n?void 0:n.querySelector(".tb-highlighter");t&&(t.style.display="block")}}showCtaTools(){this.ctaPropsSection.style.display="block",this.tilePropsSection.style.display="none"}showTileTools(){this.tilePropsSection.style.display="block",this.ctaPropsSection.style.display="none"}toggleSidebar(t=!1){const e=document.getElementById("tools-section");if(t){e.style.display="block";const t=document.getElementById("menu-page-section");document.getElementById("content-page-section"),t&&(t.style.display="block")}else e.style.display="none"}createTileMapper(){return new Cc(this.pageId)}createInfoContentMapper(){return new hc(this.pageId)}setTileProperties(){const t=globalThis.selectedComponent,e=t.parent(),n=e.parent(),i=globalThis.tileMapper.getTile(n.getId(),e.getId());t&&i&&(this.tileProperties=new Ns(t,i),this.tileProperties.setTileAttributes())}setInfoTileProperties(){var t;if("Information"!==this.pageData.PageType)return;const e=globalThis.selectedComponent,n=e.parent(),i=n.parent(),a=globalThis.infoContentMapper.getInfoContent(i.getId());if(e&&a){const i=null===(t=null==a?void 0:a.Tiles)||void 0===t?void 0:t.find((t=>t.Id===n.getId()));this.tileProperties=new Ns(e,i),this.tileProperties.setTileAttributes()}}setCtaProperties(){const t=globalThis.selectedComponent,e=new pr(this.pageId).getContentCta(t.getId());e&&t&&new mr(t,e).setctaAttributes()}setInfoCtaProperties(){window.app.toolsSection.pagesTabContent.contentSection.renderComponents();const t=globalThis.selectedComponent;if("Information"!==this.pageData.PageType)return;if(!t.is("info-cta-section"))return;this.clearCtaProperties();const e=globalThis.infoContentMapper.getInfoContent(t.getId());if(t&&e){const n=null==e?void 0:e.CtaAttributes;new mr(t,n).setctaAttributes()}}clearCtaProperties(){const t=globalThis.selectedComponent;if(t&&t.find(".cta-styled-btn")[0])return;const e=null===document||void 0===document?void 0:document.querySelector(".cta-button-layout-container");e&&(e.style.display="none");const n=document.querySelector("#content-page-section"),i=null==n?void 0:n.querySelectorAll(".color-item > input");null==i||i.forEach((t=>t.checked=!1));const a=null==n?void 0:n.querySelector(".cta-action-input");a&&a.remove()}createChildEditor(){return t=this,e=void 0,i=function*(){var t,e,n,i;const a=globalThis.selectedComponent,o=a.parent(),r=o.parent();let s;if(a.getClasses().includes("template-block"),["img-button-container","plain-button-container","cta-container-child"].some((t=>a.getClasses().includes(t))),"Information"===this.pageData.PageType){const e=globalThis.infoContentMapper.getInfoContent(r.getId());s=null===(t=null==e?void 0:e.Tiles)||void 0===t?void 0:t.find((t=>t.Id===o.getId()))}else s=globalThis.tileMapper.getTile(r.getId(),o.getId());if(this.removeOtherEditors(),null===(e=null==s?void 0:s.Action)||void 0===e?void 0:e.ObjectId){if("Phone"===(null===(n=null==s?void 0:s.Action)||void 0===n?void 0:n.ObjectType)||"Email"===(null===(i=null==s?void 0:s.Action)||void 0===i?void 0:i.ObjectType))return;const t=s.Action.ObjectId,e=JSON.parse(localStorage.getItem(`data-${t}`)||"{}");let a;if(Object.keys(e).length>0)a=e;else{const e=this.appVersionManager.getPages();a=null==e?void 0:e.find((e=>e.PageId===t))}a&&new Al(t,a).init(s)}this.activateNavigators()},new((n=void 0)||(n=Promise))((function(a,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}));var t,e,n,i}removeOtherEditors(){document.querySelectorAll(".mobile-frame").forEach((t=>{var e,n,i;if(t.id.includes(globalThis.frameId)){let a=t.nextElementSibling;for(;a;){const t=a;if(a=a.nextElementSibling,t){const a=document.querySelector(".editor-thumbs-list").querySelector(`div[id="${t.id}"]`);a&&(null===(i=null===(n=null===(e=a.parentElement)||void 0===e?void 0:e.parentElement)||void 0===n?void 0:n.parentElement)||void 0===i||i.remove()),t.remove()}}}}))}activateNavigators(){document.querySelector(".page-navigator-left"),document.querySelector(".page-navigator-right");const t=document.getElementById("child-container"),e=(document.getElementById("scroll-left"),document.getElementById("scroll-right"),document.querySelectorAll("#child-container .mobile-frame")),n=document.querySelector(".menu-container"),i=n?n.clientWidth:0,a=(Array.from(e).reduce(((t,e)=>t+e.clientWidth),0),t.clientWidth,window.innerWidth,e.length,"center");t.style.setProperty("justify-content",a);const o=()=>{};return t.addEventListener("scroll",o),{updateButtonVisibility:o,scrollBy:e=>{const n=e+i;t.scrollTo({left:t.scrollLeft+n,behavior:"smooth"})}}}resetTitleFromDOM(){const t=document.querySelector(".app-bar .title"),e=document.getElementById("edit_page_title"),n=document.getElementById("save_page_title"),i=document.querySelector(".app-bar .appbar-title-container");if(!(t&&e&&n&&i))return void console.warn("resetTitleFromDOM: Required elements not found in DOM");if("false"===t.contentEditable)return;t.contentEditable="false",e.style.display="block",n.style.display="none",i.style.removeProperty("border-width"),t.style.whiteSpace="",t.style.overflow="",t.style.textOverflow="";const a=globalThis.deviceWidth,o=a?a<=350?16:24:16;t.textContent&&this.pageData.PageName&&(t.title=this.pageData.PageName,t.textContent.length>o?t.textContent=this.pageData.PageName.substring(0,o)+"...":t.textContent=this.pageData.PageName)}}class Dc{constructor(t){this.frameId=t}init(){const t=document.getElementById(this.frameId);t&&t.addEventListener("click",(t=>{console.log("frameClickListener",this.frameId)}))}activateEditor(){document.querySelectorAll(".mobile-frame").forEach((t=>{t.classList.remove("active-editor"),t.id.includes(this.frameId)&&t.classList.add("active-editor")}))}}class Hc{constructor(t){this.editor=t,this.wrapper=this.editor.getWrapper();const e=this.wrapper.find(".container-column-info");e.length&&(this.container=e[0]),this.map()}map(){this.container}}class Rc{constructor(){this.isResizing=!1,this.resizingRowHeight=0,this.resizingRow=null,this.resizeYStart=0,this.affectedElements=null,this.originalCursors=null,this.resizeOverlay=null,this.infoSectionSpacer=null,this.frameChildren=[],this.handleComponentAdd=t=>{var e;const n=t.parent();n&&(null===(e=n.getEl())||void 0===e?void 0:e.classList.contains("container-row"))&&3===n.components().filter((t=>"tile-wrapper"===t.get("type"))).length&&console.log("more than 3")},this.appVersionManager=new d,this.toolboxService=new r,this.themeManager=new $s}init(t,e,n,i){this.editor=t,this.pageData=e,this.pageId=e.PageId,this.frameId=n,this.isHome=i,this.initialHeight=80,this.uiManager=new qc(this.editor,this.pageId,this.frameId,this.pageData,this.appVersionManager),globalThis.uiManager=this.uiManager,new Dc(this.frameId),this.onDragAndDrop(),this.onSelected(),this.onComponentUpdate(),this.onLoad()}onLoad(){void 0!==this.editor&&this.editor.on("load",(()=>{const t=this.editor.getWrapper();globalThis.wrapper=t,globalThis.activeEditor=this.editor,globalThis.currentPageId=this.pageId,globalThis.pageData=this.pageData,t?(t.view.el.addEventListener("mousedown",(t=>{var e,n;const i=t.target;if(i.closest(".tile-resize-button")){this.isResizing=!0,this.resizingRow=i.closest(".template-wrapper"),this.resizingRowHeight=this.resizingRow.offsetHeight,this.resizeYStart=t.clientY,this.initialHeight=this.resizingRow.offsetHeight;const a=i.closest("#frame-container");this.frameChildren=Array.from(null==a?void 0:a.querySelectorAll("*")).filter((t=>t!==this.resizingRow)),this.frameChildren.forEach((t=>{t.style.setProperty("cursor","ns-resize","important")})),this.resizeOverlay=document.createElement("div"),Object.assign(this.resizeOverlay.style,{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",zIndex:"9999",cursor:"ns-resize",backgroundColor:"transparent",pointerEvents:"auto"}),document.body.appendChild(this.resizeOverlay),this.affectedElements=Array.from(this.resizingRow.querySelectorAll("*")),this.originalCursors=this.affectedElements.map((t=>t.style.cursor)),this.affectedElements.forEach((t=>{t.style.setProperty("cursor","ns-resize","important")})),this.infoSectionSpacer=null===(n=null===(e=null==i?void 0:i.closest(".container-row"))||void 0===e?void 0:e.nextElementSibling)||void 0===n?void 0:n.closest(".info-section-spacing-container"),this.infoSectionSpacer&&(this.infoSectionSpacer.style.pointerEvents="none"),this.templateBlock=i.closest(".template-block")}})),document.addEventListener("mousemove",(e=>{var n;if(this.isResizing&&this.resizingRow){this.resizeOverlay&&(e.preventDefault(),e.stopPropagation());const i=e.clientY-this.resizeYStart,a=80,o=120,r=160,s=10;let l;const c=this.initialHeight+i;l=c<a+s?a:c<o-s?c:c<o+s?o:c<r-s?c:r;const d=t.find(`#${this.resizingRow.id}`);d.length&&d[0].addStyle({height:`${l}px`}),null===(n=globalThis.tileMapper)||void 0===n||n.updateTile(this.resizingRow.id,"Size",l)}})),document.addEventListener("mouseup",(e=>{var n,i;if(this.isResizing&&this.resizingRow){const e=80,a=120,o=160;this.isResizing=!1,document.body.style.removeProperty("cursor"),this.resizeOverlay&&(document.body.removeChild(this.resizeOverlay),this.resizeOverlay=null),this.affectedElements&&this.originalCursors&&this.affectedElements.forEach(((t,e)=>{this.originalCursors&&this.originalCursors[e]?t.style.cursor=this.originalCursors[e]:t.style.removeProperty("cursor")}));const r=this.resizingRow.offsetHeight;let s;s=r<(e+a)/2?e:r<(a+o)/2?a:o;const l=t.find(`#${this.resizingRow.id}`);l.length&&(this.resizingRow.style.transition="height 0.05s ease-out",l[0].addStyle({height:`${s}px`}),setTimeout((()=>{this.resizingRow&&this.resizingRow.style.removeProperty("transition")}),150)),null===(n=globalThis.tileMapper)||void 0===n||n.updateTile(this.resizingRow.id,"Size",s),this.resizingRow=null,this.affectedElements=null,this.originalCursors=null,this.resizeOverlay=null,this.infoSectionSpacer&&(this.infoSectionSpacer.style.pointerEvents="auto"),null===(i=this.frameChildren)||void 0===i||i.forEach((t=>{t.style.removeProperty("cursor")}))}})),t.view.el.addEventListener("dblclick",(t=>{t.preventDefault();const e=globalThis.selectedComponent;if(!e)return;const n=document.createElement("div");n.classList.add("tb-modal"),n.style.display="flex";const i=e.closest(".template-wrapper");new bc("tile",i.getId()).render(n);const a=document.createElement("input");a.type="file",a.multiple=!0,a.accept="image/jpeg, image/jpg, image/png",a.id="fileInput",a.style.display="none",document.body.appendChild(n),document.body.appendChild(a)})),t.view.el.addEventListener("click",(t=>{const e=t.target;e.closest(".menu-container")||e.closest(".menu-category")||e.closest(".sub-menu-header")?t.stopPropagation():(this.uiManager.clearAllMenuContainers(),globalThis.activeEditor=this.editor,globalThis.currentPageId=this.pageId,globalThis.pageData=this.pageData,globalThis.eventTarget=e,this.uiManager.handleTileManager(t),this.uiManager.openMenu(t),this.uiManager.initContentDataUi(t),this.uiManager.activateEditor(this.frameId),this.uiManager.handleInfoSectionHover(t))})),t.view.el.addEventListener("mouseover",(t=>{const e=t.target;if(console.log("mouse first"),e.closest(".info-section-spacing-container")){const t=e.closest(".info-section-spacing-container");t&&"3.2rem"!==t.style.height&&this.uiManager.clearAllMenuContainers()}}))):console.error("Wrapper not found!"),console.log("editors",window.app.editors),this.uiManager.frameEventListener(),this.uiManager.activateNavigators(),(new uc).removeConsecutivePlusButtons()}))}onComponentUpdate(){this.editor.on("component:update",(t=>{window.dispatchEvent(new CustomEvent("pageChanged",{detail:{pageId:this.pageId}}))}))}onDragAndDrop(){let t,e;this.editor.on("component:drag:start",(e=>{t=e.parent})),this.editor.on("component:drag:end",(n=>{this.isResizing||(e=n.parent,this.uiManager.handleDragEnd(n,t,e))}))}onSelected(){this.editor.on("component:selected",(t=>{return e=this,n=void 0,a=function*(){new Hc(this.editor),globalThis.selectedComponent=t,globalThis.tileMapper=this.uiManager.createTileMapper(),globalThis.infoContentMapper=this.uiManager.createInfoContentMapper(),globalThis.frameId=this.frameId;const e=t.getClasses().includes("template-block");if(["img-button-container","plain-button-container","cta-container-child"].some((e=>t.getClasses().includes(e)))){this.uiManager.toggleSidebar(!0),this.uiManager.setInfoCtaProperties(),this.uiManager.showCtaTools(),this.uiManager.hidePageInfo();const e=globalThis.tileMapper.getCta(t.getId()),n=globalThis.activeVersion;if(this.uiManager.removeOtherEditors(),e.CtaAction){const t="Form"===e.CtaType?"DynamicForm":e.CtaType;let i;"DynamicForm"===t?i=null==n?void 0:n.Pages.find((n=>{var i,a;if(n.PageType==t)return n.PageType==t&&(null===(i=n.PageLinkStructure)||void 0===i?void 0:i.WWPFormId)==Number(null===(a=e.Action)||void 0===a?void 0:a.ObjectId)})):"WebLink"===t&&(i=null==n?void 0:n.Pages.find((t=>{var n;return(null===(n=t.PageLinkStructure)||void 0===n?void 0:n.Url)==e.CtaAction}))),i&&(this.uiManager.removeOtherEditors(),new Al(null==i?void 0:i.PageId,i).init(e))}}else e?(this.uiManager.toggleSidebar(!0),this.uiManager.setTileProperties(),this.uiManager.setInfoTileProperties(),this.uiManager.showTileTools(),this.uiManager.createChildEditor(),this.uiManager.hidePageInfo()):(this.uiManager.toggleSidebar(!1),this.uiManager.showPageInfo())},new((i=void 0)||(i=Promise))((function(t,o){function r(t){try{l(a.next(t))}catch(t){o(t)}}function s(t){try{l(a.throw(t))}catch(t){o(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(r,s)}l((a=a.apply(e,n||[])).next())}));var e,n,i,a})),this.editor.on("component:deselected",(()=>{globalThis.selectedComponent=null,this.uiManager.toggleSidebar(!1),this.uiManager.showPageInfo()}))}onTileUpdate(t){var e;t&&(null===(e=t.getEl())||void 0===e?void 0:e.classList.contains("container-row"))&&(this.editor.off("component:add",this.handleComponentAdd),this.editor.on("component:add",this.handleComponentAdd))}setPageFocus(t,e,n,i){this.uiManager||(this.uiManager=new qc(this.editor,this.pageId,this.frameId,this.pageData,this.appVersionManager)),this.uiManager.setPageFocus(t,e,n,i)}activateNavigators(){this.uiManager||(this.uiManager=new qc(this.editor,this.pageId,this.frameId,this.pageData,this.appVersionManager)),this.uiManager.activateNavigators()}removeOtherEditors(){this.uiManager||(this.uiManager=new qc(this.editor,this.pageId,this.frameId,this.pageData,this.appVersionManager)),this.uiManager.removeOtherEditors()}reAlignEditor(t){}activateEditor(t){this.uiManager||(this.uiManager=new qc(this.editor,this.pageId,this.frameId,this.pageData,this.appVersionManager)),this.uiManager.activateEditor(t)}}class Vc{constructor(t,e,n=!1){this.pageTitle=null,this.editHeader=null,this.saveChange=null,this.titleDiv=null,this.isInEditMode=!1,this.title=e||"Page Name",this.originalTitle=this.title,this.id=t,this.isNewPage=n,this.container=document.createElement("div"),this.editor=new Zc,this.editorWidth=globalThis.deviceWidth,this.init()}init(){this.container.classList.add("app-bar");const t=document.createElement("div");t.innerHTML='\n        <svg class="content-back-button" xmlns="http://www.w3.org/2000/svg" data-name="Group 14" width="47" height="47" viewBox="0 0 47 47">\n            <g id="Ellipse_6" data-name="Ellipse 6" fill="none" stroke="#262626" stroke-width="1">\n            <circle cx="23.5" cy="23.5" r="23.5" stroke="none"></circle>\n            <circle cx="23.5" cy="23.5" r="23" fill="none"></circle>\n            </g>\n            <path id="Icon_ionic-ios-arrow-round-up" data-name="Icon ionic-ios-arrow-round-up" d="M13.242,7.334a.919.919,0,0,1-1.294.007L7.667,3.073V19.336a.914.914,0,0,1-1.828,0V3.073L1.557,7.348A.925.925,0,0,1,.263,7.341.91.91,0,0,1,.27,6.054L6.106.26h0A1.026,1.026,0,0,1,6.394.07.872.872,0,0,1,6.746,0a.916.916,0,0,1,.64.26l5.836,5.794A.9.9,0,0,1,13.242,7.334Z" transform="translate(13 30.501) rotate(-90)" fill="#262626"></path>\n        </svg>\n        ';const e=t.firstElementChild,n=document.querySelector(".editor-thumbs-list");null==e||e.addEventListener("click",(t=>{var e,i,a,o,r,s;t.preventDefault(),t.stopPropagation();const l=document.querySelector(`#${this.id}-frame`),c=null==l?void 0:l.previousElementSibling;if(c&&(null==c?void 0:c.classList.contains("mobile-frame"))&&(globalThis.pageId=c.dataset.pageid,globalThis.uiManager.activateEditor(c.id.replace("-frame",""))),l){let t=l.nextElementSibling;for(;t;){const o=t;t=t.nextElementSibling;const r=n.querySelector(`div[id="${o.id}"]`);r&&(null===(a=null===(i=null===(e=r.parentElement)||void 0===e?void 0:e.parentElement)||void 0===i?void 0:i.parentElement)||void 0===a||a.remove()),o.remove()}const c=n.querySelector(`div[id="${l.id}"]`);c&&(null===(s=null===(r=null===(o=c.parentElement)||void 0===o?void 0:o.parentElement)||void 0===r?void 0:r.parentElement)||void 0===s||s.remove()),l.remove(),(new Rc).activateNavigators()}}));const i=document.createElement("div");i.classList.add("appbar-title-container"),this.titleDiv=i;const a=document.createElement("h1");a.className="title";const o=this.editorWidth?this.editorWidth<=350?16:24:16,r=this.title.length>o?this.title.substring(0,o)+"...":this.title;a.setAttribute("title",this.title||"Page Name"),a.textContent=r||"Page Name",this.pageTitle=a;const s=document.createElement("div");s.classList.add("icon-container");const l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.id="edit_page_title",l.setAttribute("width","14px"),l.setAttribute("height","14px"),l.setAttribute("viewBox","0 0 24 24"),l.setAttribute("fill","none"),l.setAttribute("xmlns","http://www.w3.org/2000/svg"),l.innerHTML='\n            <path fill-rule="evenodd" clip-rule="evenodd" d="M18.4324 4C18.2266 4 18.0227 4.04055 17.8325 4.11933C17.6423 4.19811 17.4695 4.31358 17.3239 4.45914L5.25659 16.5265L4.42524 19.5748L7.47353 18.7434L19.5409 6.67608C19.6864 6.53051 19.8019 6.3577 19.8807 6.16751C19.9595 5.97732 20 5.77348 20 5.56761C20 5.36175 19.9595 5.1579 19.8807 4.96771C19.8019 4.77752 19.6864 4.60471 19.5409 4.45914C19.3953 4.31358 19.2225 4.19811 19.0323 4.11933C18.8421 4.04055 18.6383 4 18.4324 4ZM17.0671 2.27157C17.5 2.09228 17.9639 2 18.4324 2C18.9009 2 19.3648 2.09228 19.7977 2.27157C20.2305 2.45086 20.6238 2.71365 20.9551 3.04493C21.2864 3.37621 21.5492 3.7695 21.7285 4.20235C21.9077 4.63519 22 5.09911 22 5.56761C22 6.03611 21.9077 6.50003 21.7285 6.93288C21.5492 7.36572 21.2864 7.75901 20.9551 8.09029L8.69996 20.3454C8.57691 20.4685 8.42387 20.5573 8.25597 20.6031L3.26314 21.9648C2.91693 22.0592 2.54667 21.9609 2.29292 21.7071C2.03917 21.4534 1.94084 21.0831 2.03526 20.7369L3.39694 15.7441C3.44273 15.5762 3.53154 15.4231 3.6546 15.3001L15.9097 3.04493C16.241 2.71365 16.6343 2.45086 17.0671 2.27157Z" fill="#5068a8"></path>\n        ',this.editHeader=l;const c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.id="save_page_title",c.style.display="none",c.setAttribute("width","24px"),c.setAttribute("height","24px"),c.setAttribute("viewBox","0 0 48 48"),c.setAttribute("fill","none"),c.innerHTML='\n            <rect width="48" height="48" fill="white" fill-opacity="0.01"/>\n            <path d="M43 11L16.875 37L5 25.1818" stroke="#5068a8" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>\n        ',this.saveChange=c,s.appendChild(l),s.appendChild(c);const h=()=>{if(this.pageTitle){this.isInEditMode=!0,this.originalTitle=this.pageTitle.title,this.pageTitle.contentEditable="true",this.pageTitle.textContent=this.isNewPage||"Untitled"===this.title?"":this.pageTitle.title,this.pageTitle.focus();const t=document.createRange();t.selectNodeContents(this.pageTitle),t.collapse(!1);const e=window.getSelection();null==e||e.removeAllRanges(),null==e||e.addRange(t),this.pageTitle.style.outline="none",this.pageTitle.style.whiteSpace="nowrap",this.pageTitle.style.overflow="hidden",this.pageTitle.style.textOverflow="clip",this.editHeader&&this.saveChange&&this.titleDiv&&(this.editHeader.style.display="none",this.saveChange.style.display="block",this.titleDiv.style.borderWidth="1px",this.updateSaveButtonState())}};l.addEventListener("click",h),this.updateSaveButtonState(),a.addEventListener("input",(()=>{this.pageTitle&&(this.pageTitle.textContent,this.pageTitle.title=this.pageTitle.textContent||"",this.title=this.pageTitle.title,this.updateSaveButtonState())})),c.addEventListener("click",(t=>{t.preventDefault(),this.pageTitle&&""!==this.pageTitle.title.trim()&&((new d).updatePageTitle(this.pageTitle.title),this.title=this.pageTitle.title,this.originalTitle=this.title,this.resetTitle(!0),this.refreshPage())})),document.addEventListener("click",(t=>{const e=t.target;this.isInEditMode&&this.shouldResetTitle(e)&&this.resetTitle()})),e&&this.container.appendChild(e),i.appendChild(a),i.appendChild(s),this.container.appendChild(i),(this.isNewPage||"Untitled"===this.title)&&setTimeout((()=>{h()}),0)}shouldResetTitle(t){var e;return!!this.isInEditMode&&!(t===this.editHeader||t===this.pageTitle||t===this.titleDiv||(null===(e=this.titleDiv)||void 0===e?void 0:e.contains(t))||t.closest&&t.closest(".appbar-title-container"))}updateSaveButtonState(){var t;this.saveChange&&(""===((null===(t=this.pageTitle)||void 0===t?void 0:t.title)||"").trim()?(this.saveChange.style.pointerEvents="none",this.saveChange.style.opacity="0.5"):(this.saveChange.style.pointerEvents="all",this.saveChange.style.opacity="1"))}resetTitle(t=!1){if(this.pageTitle&&this.editHeader&&this.saveChange&&this.titleDiv&&(this.isInEditMode=!1,this.pageTitle.contentEditable="false",this.editHeader.style.display="block",this.saveChange.style.display="none",this.titleDiv.style.removeProperty("border-width"),this.pageTitle.style.whiteSpace="",this.pageTitle.style.overflow="",this.pageTitle.style.textOverflow="",!t)){const t=this.editorWidth?this.editorWidth<=350?16:24:16,e=this.title;e.length>t?this.pageTitle.textContent=e.substring(0,t)+"...":this.pageTitle.textContent=e}}refreshPage(){const t=globalThis.activeEditor;if(t){const e=t.getWrapper().find(".add-new-info-section")[0];e&&e.addStyle({display:"flex"});const n=t.getWrapper().find(".untitled-page")[0];n&&n.removeClass("untitled-page")}}render(t){t.appendChild(this.container)}}class Uc{constructor(t,e=!1,n,i,a=!1){this.isNewPage=!1,this.container=document.createElement("div"),this.id=t,this.isHome=e,this.pageName=i,this.pageData=n,this.isNewPage=a,this.init()}init(){this.container.className="mobile-frame",this.container.id=`${this.id}-frame`,this.container.setAttribute("data-pageid",this.pageData.PageId);const t=new p,e=new g,n=new Vc(this.id,this.pageName,this.isNewPage);t.render(this.container),this.isHome?e.render(this.container):n.render(this.container);const i=document.createElement("div");i.id=this.id,this.container.appendChild(i),new h(this.pageData,this.container)}render(t){t.appendChild(this.container)}}class Fc{constructor(t,e){this.editorId=t,this.pageData=e,this.container=document.createElement("div"),this.init()}init(){this.container.style.justifyContent="center",this.container.className="frame-list",this.container.id="child-container",new Uc(`${this.editorId}`,!0,this.pageData).render(this.container)}render(t){t.appendChild(this.container)}}var zc=function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}l((i=i.apply(t,e||[])).next())}))};class Zc{constructor(){this.editors=[],this.config=e.getInstance(),this.organisationLogo=this.config.organisationLogo,this.appVersion=new d,this.themeManager=new $s,this.toolboxService=new r,this.editorEvents=new Rc,this.jsonToGrapes=new ll(this)}init(){return zc(this,void 0,void 0,(function*(){const t=yield this.appVersion.getActiveVersion();this.homepage=null==t?void 0:t.Pages.find((t=>"Home"===t.PageName)),document.getElementById("main-content").innerHTML="",this.setUpEditorFrame(),this.setUpEditor(),this.editorEvents.uiManager.activateEditor("gjs-0")}))}setUpEditorFrame(){const t=new Fc("gjs-0",this.homepage),e=document.createElement("div");e.style.justifyContent="center",e.style.display="flex",e.style.flexDirection="row",e.style.alignItems="center",e.style.gap="0.4rem",e.className="editor-thumbs-list",e.id="editor-thumbs-list";const n=document.getElementById("main-content"),i=document.createElement("div");i.className="editor-main-section",i.style.display="flex",i.style.justifyContent="center",i.style.alignItems="center",i.style.flexDirection="column",i.style.width="100%",t.render(i),i.appendChild(e),n.appendChild(i),this.setClientWidth(t.container)}setClientWidth(t){const e=t.querySelector(".mobile-frame");e&&(globalThis.deviceWidth=e.clientWidth,globalThis.deviceHeight=e.clientHeight)}setUpEditor(){return zc(this,void 0,void 0,(function*(){const t=this.initializeGrapesEditor("gjs-0");window.app.editors["gjs-0"]=t,this.finalizeEditorSetup(t),yield this.loadHomePage(t),this.activateHomeEditor("gjs-0"),this.themeManager.applyTheme(this.themeManager.currentTheme)}))}loadHomePage(t){return zc(this,void 0,void 0,(function*(){var e;let n;n="Information"==this.homepage.PageType?new bl(this.homepage):new ll(this.homepage);const i=n.generateHTML();t.setComponents(i),this.editorEvents.init(t,this.homepage,"gjs-0",!0),localStorage.setItem(`data-${null===(e=this.homepage)||void 0===e?void 0:e.PageId}`,JSON.stringify(this.homepage)),new fl(this.homepage.PageId)}))}initializeGrapesEditor(t){return grapesjs.init({container:`#${t}`,fromElement:!0,height:"100%",width:"auto",canvas:{styles:["/Resources/UCGrapes/public/css/toolbox.css","/DVelop/Bootstrap/Shared/fontawesome_vlatest/css/all.min.css?202521714271081","https://fonts.googleapis.com/css2?family=Inter:opsz@14..32&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"]},baseCss:" ",dragMode:"normal",panels:{defaults:[]},sidebarManager:!1,storageManager:!1,modal:!1,commands:!1,hoverable:!1,highlightable:!1,selectable:!1,richTextEditor:{}})}finalizeEditorSetup(t){t.getWrapper().set({selectable:!1,droppable:!1,draggable:!1,hoverable:!1});const e=t.Canvas.getElement();e&&e.style.setProperty("height","calc(100% - 100px)","important");const n=t.Canvas.getBody();n&&n.style.setProperty("background-color","#EFEEEC","important")}activateHomeEditor(t){document.getElementById(`${t}-frame`).classList.add("active-editor")}}const Wc=class{constructor(){this.config=e.getInstance(),this.toolboxManager=new cc,this.editor=new Zc,this.config.isInitialized||console.error("ToolboxApp created before AppConfig was initialized!"),this.initialiseLocalisation(),this.initialise()}initialise(){this.toolboxManager.setUpNavBar(),this.toolboxManager.setUpSideBar(),this.editor.init()}initialiseLocalisation(){"Dutch"==this.config.currentLanguage?Ms.locale="nl":Ms.locale="en"}};window.App=class{constructor(t,n,i,a,o,r,s,l,c,d,h,u){this.editors={},this.currentVersion=l,this.currentThemeId=s,this.suppliers=i,this.forms=o,e.getInstance().init(t,n,i,a,o,r,s,l,c,d,h,u),window.app=this,this.toolboxApp=new Wc}}})()})();